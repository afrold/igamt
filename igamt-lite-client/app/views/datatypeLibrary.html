<style id="antiClickjack">
body {
    display: none !important;
}
</style>
<script type="text/javascript">
if (self === top) {
    var antiClickjack = document.getElementById("antiClickjack");
    antiClickjack.parentNode.removeChild(antiClickjack);
} else {
    top.location = self.location;
}
</script>
<style>
.selected {
    /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#87e0fd+0,05abe0+100 */
    background: #87e0fd;
    /* Old browsers */
    background: -moz-linear-gradient(top, #87e0fd 0%, #05abe0 100%);
    /* FF3.6-15 */
    background: -webkit-linear-gradient(top, #87e0fd 0%, #05abe0 100%);
    /* Chrome10-25,Safari5.1-6 */
    background: linear-gradient(to bottom, #87e0fd 0%, #05abe0 100%);
    /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
    filter: progid: DXImageTransform.Microsoft.gradient( startColorstr='#87e0fd', endColorstr='#05abe0', GradientType=0);
    /* IE6-9 */
    color: white;
    /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#356aa0+0,356aa0+100;Blue+Flat */
    background: #356aa0;
    /* Old browsers */
    background: -moz-linear-gradient(top, #356aa0 0%, #356aa0 100%);
    /* FF3.6-15 */
    background: -webkit-linear-gradient(top, #356aa0 0%, #356aa0 100%);
    /* Chrome10-25,Safari5.1-6 */
    background: linear-gradient(to bottom, #356aa0 0%, #356aa0 100%);
    /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
    filter: progid: DXImageTransform.Microsoft.gradient( startColorstr='#356aa0', endColorstr='#356aa0', GradientType=0);
    /* IE6-9 */
}

.panel-body {}


/* .fa{ */


/* font-size: 18px; */

.scrollit {
    height: 500px !important;
    overflow: scroll !important;
}
.selected1{
background-color:#B5F7EC !important;
}
.selected2{
background-color:#EDE1AF !important;
}

/* } */

.treeRoot {
    font-size: 18px;
}

.treeSection {
    font-size: 16px;
    margin-left: -10px;
}

.treeSubSection {
    font-size: 14px;
}
.grey{
/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#000000+0,000000+0,000000+2,000000+2&0.65+99,0.65+99 */
background-color : #d2d2d2 !important;


}

.treeUnderSubSection {
    font-size: 13px;
}

.cursorMove {
    cursor: move;
}

.message {
    font-size: 17px;
}

.messageContent {
    font-size: 16;
}
.messageSubContent {
    font-size: 12px;
    margin-left: 45px;
}

.uitree {
    margin-left: 8px;
}

.label-USE {
    background-color: green;
}

.label-HL7 {
    background-color: red;
}

.label-MASTER {
    /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#ff7400+0,ff7400+100;Orange+Flat */
    background: #ff7400;
    /* Old browsers */
    background: -moz-linear-gradient(top, #ff7400 0%, #ff7400 100%);
    /* FF3.6-15 */
    background: -webkit-linear-gradient(top, #ff7400 0%, #ff7400 100%);
    /* Chrome10-25,Safari5.1-6 */
    background: linear-gradient(to bottom, #ff7400 0%, #ff7400 100%);
    /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
    filter: progid: DXImageTransform.Microsoft.gradient( startColorstr='#ff7400', endColorstr='#ff7400', GradientType=0);
    /* IE6-9 */
}

span {
    cursor: pointer;
    font-weight: normal;
}

.angular-ui-tree-handle {
    margin-left: 0px;
    cursor: move;
    text-decoration: none;
    text-decoration-color: -moz-use-text-color;
    text-decoration-line: none;
    text-decoration-style: solid;
    font-weight: 700;
}

.angular-ui-tree-nodes .angular-ui-tree-nodes {
    padding-left: 0px;
}

.form-group {
    text-align: left;
    margin-bottom: 60px;
}
</style>

<div class="container" ng-controller="DatatypeLibraryCtl">
<div class="" ng-show="isAuthenticated()">
    <div ng-show="!isPending()">
    <tabset>
        <tab active="DTLibList" select="selectDTLibTab(0)">
            <tab-heading>
                <i class="fa fa-file-text-o fa-fw"></i> Data Type Library List
            </tab-heading>
            <div>
                <div class="row">
                    <div class="col-md-12">
                        <form id="selectDtTypeForm" class="form-horizontal">
                            <div class="form-group">
                                <div style="margin-left: 15px" class="btn-group btn-group-sm pull-left" data-toggle="buttons">
                                    <label class="btn btn-raised btn-primary btn-sm" ng-click="getDataTypeLibraryByScope('USER')" >
                                        <input ng-disabled="loading" type="radio" ng-value="tt.type" ng-model="$parent.datatypeLibrariesConfig.selectedType"><i class="fa fa-th-list"></i> Browse My Data Type Libraries
                                    </label>
                                    <label class="btn btn-raised btn-warning btn-sm" ng-click="getDataTypeLibraryByScope('MASTER')" ng-class="{'active':datatypeLibrariesConfig.selectedType === tt.type}">
                                        <input ng-disabled="loading" type="radio" ng-value="tt.type" ng-model="$parent.datatypeLibrariesConfig.selectedType"><i class="fa fa-th-list"></i> Browse Master Data Type Libraries
                                    </label>
                                </div>
                                <div class="pull-right" style="margin-right: 20px">
                                    <button type="button" class="btn btn-raised btn-primary btn-sm" ng-click="openStandardDataypes('USER')">
                                        <i class="fa fa-plus"></i>Create New Datatype Library
                                    </button>
                                    <button type="button" class="btn btn-raised btn-warning btn-sm" ng-click="openStandardDataypes('MASTER')" ng-if="isAdmin() ">
                                        <i class="fa fa-plus"></i>Create MASTER Datatype Library
                                    </button>
                                    <!--<button type="button" class="btn btn-raised btn-primary btn-sm"-->
                                    <!--ng-click="openStandardDataypes('MASTER')">-->
                                    <!--<i class="fa fa-plus"></i> Create MASTER Data Type Library-->
                                    <!--</button>-->
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div> 
                       <div class="row">
                        <div class="col-md-12">
                            <form>
                                <div class="form-group">
                                    <table st-table="datatypeDisplay" st-safe-src="datatypeLibsStruct" class="table table-striped table-bordered table-fix-header table-condensed igl-list-table">

                                        <thead>
                                        	<tr>
                                            <th colspan="5">
                                                    <input st-search placeholder="Search" class="input-sm form-control" type="search" />
                                                </th>
                                            </tr>
                                            <tr class="tbl-header" style="margin-right: {{scrollbarWidth}}px;">
                                                <th st-ratio="5">#</th>
                                                <th st-ratio="10" st-sort-default="true">Name</th>
                                                <th st-ratio="20">Steward</th>
                                                <th st-ratio="25">Date Created</th>
                                                <th st-ratio="40">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-class="{'new' : dtLib.new}" ng-repeat="dtLib in datatypeLibsStruct">
                                                <td st-ratio="5">{{$index + 1}}</td>
                                                <td st-ratio="10">{{dtLib.metaData.name}}</td>
                                                <td st-ratio="20">{{dtLib.metaData.orgName}}</td>
                                                <td st-ratio="25">{{dtLib.metaData.date}}

                                                    <td st-ratio="40">
                                                        <button title="Edit" type="button" class="btn btn-raised btn-xs btn-primary" ng-click="editLibrary(dtLib,false)" ng-if="dtLib.accountId.toString()=== accountId">
                                                            <span><i class="fa fa-pencil fa-fw"></i></span>
                                                        </button>
                                                        <button title="read" type="button" class="btn btn-raised btn-xs btn-primary" ng-click="editLibrary(dtLib,true)">
                                                            <span><i class="fa fa-search fa-fw"></i></span>
                                                        </button>
<!--                                                         <button title="Create Copy" type="button" class="btn btn-raised btn-xs btn-info" ng-click="copyLibrary(dtLib)">
                                                            <span><i class="fa fa-plus fa-fw"></i></span>
                                                        </button> -->
                                                        <button title="Delete" type="button" class="btn btn-raised btn-xs btn-danger" ng-click="deleteLibrary(dtLib)" ng-if="dtLib.accountId.toString()===accountId">
                                                            <span><i class="fa fa-trash-o fa-fw"></i></span>
                                                        </button>
                                                    </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </tab>
        <tab active="DTLibDetails" select="selectDTLibTab(1)" ng-show="datatypeLibrary">
            <tab-heading>
                <span ng-if="!readOnly"><i class="fa fa-pencil fa-fw"></i>Edit Data Type Library</span>
                <span ng-if="readOnly"> <i class="fa fa-search fa-fw"></i>Read Data Type Library</span>
            </tab-heading>
            <div>
               <div class="row">
            <div class="col-md-12">
                <span class="pull-right">
                <div class="btn-group">
                    <button type="button" class="btn btn-raised btn-info btn-sm"><span><i
                            class="fa fa-download fa-fw"></i> Export</span>
                    </button>
                    <button type="button" class="btn btn-raised btn-info btn-sm dropdown-toggle" data-toggle="dropdown"
                            aria-expanded="false">
                        <span class="caret"></span>
                        <span class="sr-only">Toggle Dropdown</span>
                    </button>
                    <ul class="dropdown-menu igl-menu" role="menu">
                        <li><a class="point" ng-click="exportAs(libraryDoc.id,'docx')">As WORD()</a></li>
                        <li><a class="point" ng-click="exportAs(libraryDoc.id,'html')">As HTML</a></li>
                    </ul>
                </div>
                </span>
            </div>
            </div>

                    <div class="row">
                        <div class="col-md-1 col-1-percent" ng-show="hideToc" style="margin-right: 6px">
                            <button title="Show Table of Contents" class="btn btn-raised btn-xs btn-primary" ng-click="hideToc = !hideToc">
                                <i class="fa fa-caret-right"></i>
                            </button>
                        </div>
                        <div ng-show="!hideToc" class="col-md-3">
                            <div class="panel panel-primary">
                                <!-- Default panel contents -->
                                <div class="panel-heading panel-heading-collapsable">
                                    <i class="glyphicon glyphicon-list"></i> Table of Contents
                                    <button title="Hide  Table of Contents" class="btn btn-raised btn-xs btn-default pull-right" style="margin: 0px" ng-click="hideToc = !hideToc">
                                        <i class="fa fa-caret-left"></i>
                                    </button>
                                </div>
                                <div class="panel-body toc-container">
                                        <ng-include src="datatypeListView" />
                                </div>
                            </div>
                        </div>
                        <div ng-class="{'col-md-9': !hideToc, 'col-md-11 col-98-5-percent':hideToc}">
                            <div class="panel panel-primary">
                                <div class="panel-heading">Edit Area</div>
						<div class="panel-body" style="padding-bottom:100px" ng-controller="EditAreaCtrl"  ng-init="init()">
                            <form name="editForm" id="editForm" class="form-horizontal" novalidate
                                  unsaved-warning-form>
                                <div ng-if="editView" style="width:100%;">
                                    <div ng-include="editView"></div>
                                </div>
                            </form>
                        </div>
                            </div>
                        </div>
                    </div>
            </div>
        </tab>
        <tab heading= "Data Types Evolution" active="evolution" select="selectDTLibTab(2)">
        <div style="margin-top:10px">        
        <div class="col-md-6">
        
                             <div class="panel panel-primary">
                                <!-- Default panel contents -->
                                <div class="panel-heading panel-heading-collapsable">
                                    <i class="fa fa-bar-chart" aria-hidden="true"></i>Data Type Evolution By HL7 version
                                	</div>
                                	<div class="panel-body" style="padding:0px;">
                              	<div class="">
                     <table class="table table-bordered table-fix-header table-condensed igl-list-table col-md-12 ">
						<thead >
							<tr class="tbl-header">
								<th ng-repeat="v in vrs">{{v}}</th>
							</tr>
					</thead>
					<tbody class="scrollit">
					<tr ng-repeat="dt in matrix | orderBy: 'name'">
						<td class="tbl-header"><strong>{{dt.name}}</strong></td>
						<td ng-disabled="true" style="color:{{getColor(dt.links[va])}}" ng-class="{'selected1': isSelected1(dt, vrs[$index+1]), 'selected2':isSelected2(dt,vrs[$index+1]), 'grey':!dt.links[va]&& dt.links[va]!==0}"  ng-repeat = 'va in adjusted' ng-click="selectCell(dt,vrs[$index+1])"><strong>{{dt.links[va]}}</strong></td>
					</tr>
					</tbody>
					</table>
                            </div>
                       </div>
                       </div>
        </div>
        
         <div class="col-md-6">
                             <div class="panel panel-primary">
                                <!-- Default panel contents -->
                                <div class="panel-heading panel-heading-collapsable">
                                    Delta
                                </div>
                                <div class="panel-body ">
                                    <div class="panel-body">
                    <table tt-table tt-params="dynamicDt_params" class=" table-marginless table-bordered table-condensed">
                        <thead>
                        <tr class="tbl-header">
                            <th class="col-md-1" rowspan="2" style="width:14%;">Position</th>
                            <th class="col-md-2" rowspan="2" style="width:37%;">Name</th>
                            <th class="col-md-1" rowspan="2" style="width:2%">Usage</th>
                            <th class="col-md-1" colspan="2" style="width:4%">Cardinality</th>
                            <th class="col-md-1" colspan="2" style="width:4%">Length</th>
                            <th class="col-md-1" rowspan="2" style="width:2%">Conformance Length</th>
                            <th class="col-md-1" rowspan="2" style="width:21%">Data Type</th>
                            <th class="col-md-1" rowspan="2" style="width:16%">Value Set</th>
                        </tr>
                        <tr class="tbl-header">
                            <th class="col-md-1 col-fixed-10" style="width:2%">min</th>
                            <th class="col-md-1 col-fixed-10" style="width:2%">max</th>
                            <th class="col-md-1 col-fixed-10" style="width:2%">min</th>
                            <th class="col-md-1 col-fixed-10" style="width:2%">max</th>
                        </tr>
                        </thead>
                        <tbody ng-if="selectedVersion2&& selectedVersion1"></tbody>
                    </table>
                </div>
                                </div>
                            </div>
        </div>
        </div>
        </tab>
    </tabset>
        </div>
    <div style="font-size: 18px;text-align: center" ng-show="isPending()">
        <div msg key='account.pendingSection'></div>
    </div>

    </div>

    <div ng-show="!isAuthenticated()" style="font-size: 18px;text-align: center;margin:auto">
        <p>Please <a href="" ng-click="loginReq()"><i class="fa fa-sign-in"></i>&nbsp;login</a> to access this page. You can also <a href="#/registration"><i class="fa fa-chevron-circle-right"></i>&nbsp;register</a></p>
    </div>

</div>
<script type="text/ng-template" id="LibraryMetaData.html">
    <div class="row" style="margin-left:0px; margin-right: 20px">
        <div ng-show="datatypeLibMetaDataCopy !== null">
            <div class="page-header" style="margin-bottom: 20px">
                <span class="header4">Data Type Library Metadata</span>
                <span class="pull-right">

          <button type="button" class="btn btn-raised btn-sm btn-success"
               ng-disabled="editForm.$invalid || !editForm.$dirty"
                 ng-hide="readOnly"
                ng-click="saveMetaDataOfLibrary()">

           <span><i class="fa fa-check fa-fw" ng-hide="readOnly" ></i> Save</span>
                </button>
                <button title="Discard changes" type="button" class="btn btn-raised btn-sm btn-warning" ng-disabled="!editForm.$dirty||readOnly" ng-click="resetMetaDataOfLibrary()">
                    <span><i class="fa fa-times fa-fw"></i>Reset</span>
                </button>
                </span>
            </div>
            <div class="container">
                <div class="form-group" ng-class="{'igl-has-error has-feedback' : editForm.title.$invalid}">
                    <label class="col-md-2 control-label">Name</label>
                    <div class="col-md-10">
                        <input class="form-control" type="text" ng-disabled="readOnly" name="title" ng-model="datatypeLibMetaDataCopy.name" ng-change="setDirty()" required id="title" required>
                    </div>
                </div>
                <div class="form-group" ng-class="{'igl-has-error' : editForm.orgName.$invalid}">
                    <label class="col-md-2 control-label" for="orgName">Steward</label>
                    <div class="col-md-10">
                        <input type="text" id ="orgName" name="orgName"  ng-change="recordChanged()" class="form-control" ng-model="datatypeLibMetaDataCopy.orgName">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label">Description</label>
                    <div class="col-md-10">
                        <input type="text" name="description" id= "description" ng-change="recordChanged()" class="form-control" ng-model="datatypeLibMetaDataCopy.description" >
                    </div>
                </div>
                <div class="form-group" ng-class="{'igl-has-error' : editForm.date.$invalid}">
                    <label class="col-md-2 control-label">Date</label>
                    <div class="col-md-10">
                        <input type="text" name="date" id="date" disabled ng-change="recordChanged()" class="form-control" ng-model="datatypeLibMetaDataCopy.date" required>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="DatatypeList.html">
    <div ui-tree ng-controller="TreeCtrl" style="margin-left:5px;">
        <span style="font-size:18px;" data-nodrag ng-click="editMetadata()"><strong>{{datatypeLibrary.metaData.name}}</strong></span>{{filterdt}}
        <ol ui-tree-nodes="" ng-model="DataTypeTree">
            <li ng-repeat="dataLibrary in DataTypeTree" ui-tree-node>
                <div ui-tree-handle data-nodrag context-menu="DataTypeLibraryOptions">
                    <i data-nodrag ng-click="toggle(this)" class="fa fa-caret-down" ng-class="{'fa-caret-down': !collapsed, 'fa-caret-right': collapsed}"></i> Data Types: <span class="badge">{{datatypes.length}}</span>
                </div>
                <div ng-show="filteringModeON" data-nodrag ui-tree-handle style="margin-bottom:5px;"> <span class="badge label-default" ng-click="resetLibFilter()" > <i class="fa fa-times" aria-hidden="true"></i> Clear Filter</span></div>
                <ol ui-tree-nodes="" ng-model="datatypes">
                    <li ng-repeat="data in datatypes |orderBy:['-scope','label']" ui-tree-node ng-if="!collapsed">
                        <div ui-tree-handle data-nodrag style="font-weight:normal;cursor:pointer;" context-menu="DataTypeOptionsInLib">
                           <input data-nodrag type="radio" name="datatypeRadio" value="data" ng-model="data.checked" ng-click="filterByDatatype(data);" title="Filter By This Data Type" /> <span class="label label-icon" ng-class="{'label-HL7' : getScopeLabel(data)==='HL7',
                                'label-USE':  getScopeLabel(data)==='USR','label-MASTER':getScopeLabel(data)==='MAS'}">{{getScopeLabel(data)}}{{displayVersion(data)}}</span>
                            <span data-nodrag ng-class="{selected : data.id===activeModel}" ng-click="editDatatype(data); Activate(data.id)">{{getLabelOfData(data.name, data.ext)}}-{{data.description}}</span>
                        </div>
                    </li>
                </ol>
                <ol ui-tree-nodes="" ng-model="tables"  data-type="tables">
                    <div ui-tree-handle data-nodrag ng-click="editMetadata()" context-menu="addValueSetsInTableLibrary">
                        <i data-nodrag ng-click="collapseTables()" class="fa fa-caret-down" ng-class="{'fa-caret-down': !tableCollapsed, 'fa-caret-right': tableCollapsed}"></i> Derived Value Sets <span class="badge">{{tables.length}}</span>
                    </div>
                    <li ng-repeat="table in tables |  orderBy :'name'" ui-tree-node data-type="table" ng-if="!tableCollapsed" context-menu="ValueSetOptionsINLIB">
                        <div ui-tree-handle data-nodrag ng-click="editTableINLIB(table); Activate(table.id)">
                           <span style="font-weight:normal;" ng-class="{selected : table.id===activeModel}">
                                     <span class="label label-icon" ng-class="{'label-HL7' : getScopeLabel(table)==='HL7',
                                   'label-USE': getScopeLabel(table)==='USR','label-MASTER':getScopeLabel(table)==='MAS'}" >  {{getScopeLabel(table)}}{{displayVersion(table)}}</span> {{table.bindingIdentifier}}-{{table.description}}
                            </span>
                        </div>
                    </li>
                </ol>
            </li>
        </ol>
    </div>
</script>
<script type="text/ng-template" id="DatatypeListReadOnly.html">
    <div ui-tree ng-controller="TreeCtrl">
        <span style="font-size:18px;" data-nodrag ng-click="editMetadata()"><strong>{{datatypeLibrary.metaData.name}}</strong></span>
        <ol ui-tree-nodes="" ng-model="DataTypeTree">
            <li ng-repeat="dataLibrary in DataTypeTree" ui-tree-node>
                <div ui-tree-handle data-nodrag>
                    <i data-nodrag ng-click="toggle(this)" class="fa fa-caret-down" ng-class="{'fa-caret-down': !collapsed, 'fa-caret-right': collapsed}"></i> Datatypes
                </div>
                <div ng-if="filteringModeON" data-nodrag ui-tree-handle style="margin-bottom:5px;"> <span class="badge label-default" ng-click="resetLibFilter()" ng-if="!collapsed&&filteringModeON"> <i class="fa fa-times" aria-hidden="true"></i> Clear Filter</span></div>
                <ol ui-tree-nodes="" ng-model="datatypes">
                    <li ng-repeat="data in datatypes |orderBy:['-scope','label']" ui-tree-node ng-if="!collapsed">
                        <div ui-tree-handle data-nodrag style="font-weight:normal;cursor:pointer;">
                            <input data-nodrag type="radio" name="datatypeRadio" value="data" ng-model="data.checked" ng-click="filterByDatatype(data)" title="Filter By This Datatype" /> <span class="label label-icon" ng-class="{'label-HL7' : getScopeLabel(data)==='HL7',
                                'label-USE':  getScopeLabel(data)==='USR','label-MASTER':getScopeLabel(data)==='MAS'}">{{getScopeLabel(data)}}{{displayVersion(data)}}</span>
                            <span data-nodrag ng-class="{selected : data.id===activeModel}" ng-click="editDatatype(data); Activate(data.id)">{{getLabelOfData(data.name, data.ext)}}-{{data.description}}</span>
                        </div>
                    </li>
                </ol>
                <ol ui-tree-nodes="" ng-model="tables" ng-show="!profilecollapsed" data-type="tables">
                    <div ui-tree-handle data-nodrag ng-click="editMetadata()">
                        <i data-nodrag ng-click="collapseTables()" class="fa fa-caret-down" ng-class="{'fa-caret-down': !tableCollapsed, 'fa-caret-right': tableCollapsed}"></i> Derived Value Sets <span class="badge">{{tables.length}}</span>
                    </div>
                    <li ng-repeat="table in tables |  orderBy :'name'" ui-tree-node data-type="table" ng-if="!tableCollapsed">
                        <div ui-tree-handle data-nodrag ng-click="editTableINLIB(table); Activate(table.id)">
                            <span style="font-weight:normal;" ng-class="{selected : table.id===activeModel}">
                                     <span class="label label-icon" ng-class="{'label-HL7' : getScopeLabel(table)==='HL7',
                                   'label-USE': getScopeLabel(table)==='USR','label-MASTER':getScopeLabel(table)==='MAS'}" >  {{getScopeLabel(table)}}{{displayVersion(table)}}</span> {{table.bindingIdentifier}}-{{table.description}}
                            </span>
                        </div>
                    </li>
                </ol>
            </li>
        </ol>
    </div>
</script>
<script type="text/ng-template" id="addingView.html">
    <div class="" style="margin-bottom: 20px">
        <div class="row">
<!--             <div class="input-group col-md-10">
                <span class="input-group-addon header5" id="basic-addon1">Add Datatypes From</span>
                <select class="form-control  col-md-5 input-sm" ng-model="lib" ng-change="setLibrary(lib)" class="col-md-4">
                    <option ng-repeat="lib in datatypeLibList" value='{{lib}}'>{{lib.metaData.name}} ({{lib.scope}})</option>
                </select>
            </div> -->
            <div class="col-md-3">
            
            <span class="col-md-1"> <strong> Scope: </strong></span>


            <select class="form-control  input-sm col-md-2" ng-model="chosedScope">
            <option ng-repeat="chosedscope in ['HL7STANDARD','MASTER','USER']" value='{{chosedscope}}'>{{chosedscope}}</option>
            </select>
            </div>

            <div>
             <span class="col-md-1"> <strong> HL7 version: </strong></span>
            <div class="col-md-2">
            <select class="form-control input-sm" ng-model="standard.hl7Version" required>
                <option ng-repeat="vr in hl7Versions">{{vr}}</option>
            </select>

            </div>
            </div>
            </dir>
            </div>
            <div class="col-md-2 pull-right">
                <button title="submit" class="btn btn-raised btn-sm btn-primary" style="margin-left:5px;" ng-disabled="addedDatatypes.length===0" ng-click="submit()">
                    <span><i class="fa fa-check fa-fw"></i> Submit</span>
                </button>
            </div>
        </div>
    </div>
    <div class="col-md-12">
        <div class="col-md-4" style="margin-right:5px;">
            <div align="right">
                <i class="icon-search"></i>
                <input type="search" class="form-control" placeholder="Search Datatypes" ng-model="search.name" />
            </div>
            <div class="scrollit">
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr class="tbl-header">
                            <th class="col-md-1">As a flavor </th>
                            <th class="col-md-1">As is</th>
                            <th class="col-md-3">Name</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="data in datataypestoAdd| filter:search">
                            <!--                             <td class="col-md-1">
                                <i class="fa fa-bullseye fa-lg" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{onStart:'startCallback(data, $index)',placeholder:'keep',animate:true}"></i>
                            </td> -->
                            <td class="col-md-1"> <i class="fa fa-plus fa-fw" ng-click="AddAsFlavor(data)"></i></td>
                            <td class="col-md-1">
                                <i ng-click="AddAsIs(data)" class="fa fa-plus fa-fw" ng-hide="miniDTMap[data.id]||datatypesMap[data.id]"></i>
                                <p ng-show="miniDTMap[data.id]" style="color:red;">Added</p>
                                <p ng-show="datatypesMap[data.id]" style="color:red;">Already exists in the Library</p>
                            </td>
                            <td class="col-md-3">
                                <span>{{getLabelOfData(getLabelOfData(data.name, data.ext))}}</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-md-7" ng-hide="addedDatatypes.length===0">
            <div style="right: 0px;margin-right:2px">
                <i class="icon-search"></i>
                <input type="search" class="form-control" placeholder="Search" ng-model="searchinselected.name" />
            </div>
            <table class="table table-striped table-bordered  toc-container" data-drop="true" ng-model="addedDatatypes" jqyoui-droppable="{onDrop:'dropCallback'}">
                <thead>
                    <tr class="tbl-header">
                        <th class="col-md-1">Name</th>
                        <th class="col-md-2">Extension</th>
                        <th class="col-md-3">Description
                        </th>
                        <th class="col-md-1">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="data in addedDatatypes track by $index |filter:searchinselected">
                        <td class="col-md-1">
                            <span>{{data.name}}</span>
                        </td>
                        <td class="col-md-2">
                            <input type="text" ng-model="data.ext" ng-show="data.status!=='PUBLISHED'"></input>
                            <span ng-show="data.status==='PUBLISHED'">{{data.ext}}</span>
                            <span id="helpBlock2" class="help-block" style="color:red" ng-show="isDuplicatedTwoContexts(data, 'name', 'ext', datatypeLibCopy.children)|| isDuplicatedTwoContexts(data, 'name', 'ext', addedDatatypes)"> Extension already used</span>
                        </td>
                        <td class="col-md-3">
                            <!--       <select name="multipleSelect" id="multipleSelect" ng-model="data.scope" >
                            <option value="HL7STANDARD"> <span ng-click="data.ext=''">HL7<span></option>
                            <option value="MASTER">MASTER</option>
                            </select><br> -->
                            {{data.description}}
                        </td>
                        <td class="col-md-1">
                            <button class="btn btn-raised btn-xs btn-danger" ng-click="addedDatatypes.splice($index,1);miniDTMap[data.id]=false">X</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</script>
<script type="text/ng-template" id="addingViewForMaster.html">

	<div class="page-header" style="margin-bottom: 20px">
                        <span class="header4 ng-binding">Add HL7 Flavors</span>
                        <span class="pull-right">

         <button title="submit" type="button" class="btn btn-raised btn-sm btn-success" ng-disabled="addedDatatypes.length===0 ||exist"  ng-click="submit()" aria-hidden="false">
             <span><i class="fa fa-check fa-fw"></i> Submit</span>
                        </button>
                        </span>
                    </div>


    <div class="col-md-12">
        <div class="col-md-4" style="margin-right:5px;">
            <div align="right">
                <i class="icon-search"></i>
                <input type="search" class="form-control" placeholder="Search Datatypes" ng-model="search.name" />
            </div>
            <div >
                <table class="table table-bordered table-stripped">
                    <thead>
                        <tr class="tbl-header">
                            <th class="col-md-1">Name</th>
                            <th class="col-md-2">Versions</th>
                            <th class="col-md-1"></th>

                        </tr>
                    </thead>
                    <tbody ng-show="search.name&&search.name!==''">
                        <tr ng-repeat="data in AllUnchanged| filter:search">
                            <td class="col-md-1">
                                <span>{{data.name}}</span>
                            </td>
                            <td class="col-md-2">
<!--                                 <span>{{data.versions}}</span>
 -->                         <ul>
                                    <li ng-repeat="version in data.versions">{{version}}</li></ul>
                            </td>
                            <td class="col-md-1">
                                <i ng-click="getDatatypeFromUnchanged(data)" class="fa fa-plus fa-fw" style="color:blue;cursor:pointer !important"></i>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-md-1"></div>
        <div class="col-md-6">
            <div style="right: 0px;margin-right:2px">
                <i class="icon-search"></i>
                <input type="search" class="form-control" placeholder="Search" ng-model="search1.name" />
            </div>
            <table class="table table-bordered table-stripped">
                <thead>
                    <tr class="tbl-header">
                        <th class="col-md-1">Name</th>
                        <th class="col-md-1">Extension</th>
						<th class="col-md-1">Versions</th>
                        <th class="col-md-2">Description
                        </th>
                        <th class="col-md-1">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="data in addedDatatypes| filter:search1">
                        <td class="col-md-1">
                            <span>{{data.name}}</span>
                        </td>
                        <td class="col-md-1">
                            <input type="text" class="form-control" ng-model="data.ext" required></input>
							<span style="color:red;" ng-if="existingExtension(data,addedDatatypes)">Extesion already exists</span>
                        </td>
                     	<td class="col-md-1">
						  <ul>
                                    <li ng-repeat="version in data.hl7versions">{{version}}</li></ul>
                        </td>
                        <td class="col-md-2">
                            {{data.description}}
                        </td>
                        <td class="col-md-1">
                            <button class="btn btn-raised btn-xs btn-danger" ng-click="addedDatatypes.splice($index,1);miniDTMap[data.id]=false">X</button>
                        </td>
                    </tr>
                </tbody>
            </table>



        </div>
    </div>
</script>
<script type="text/ng-template" id="standardDatatypeDlg.html">
    <div id="standard-datatypelibrary-dialog">
        <div style="padding : 10px 10px 10px 10px;">
            <div class="modal-header">
                <h3 class="modal-title">New Data Type Library</h3>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <div class="container" style="max-width: 100%; max-height: 100px; white-space:nowrap;">
<!--                             <div class="row">

                            <label class="control-label col-xs-2" style="margin-top : 10px">HL7 Versions</label>

                            <div class="col-md-1">
                            <select class="form-control input-sm" ng-change="okDisabled = false;" ng-model="standard.hl7Version" required>
                                    <option ng-repeat="vr in hl7Versions">{{vr}}</option>
                            </select>

                            </div>
                            </div> -->
                            <div class="row">
                                <label for="name" class="control-label col-xs-2">Name</label>
                                <input type="text" name="name" class="form-control col-xs-10" ng-model="standard.name" required style="width : 350px; height : 30px;" />
                            </div>
                            <div class="row">
                                <label class="control-label col-xs-2" for="Description">Description</label>
                                <input type="text" name="description" class="form-control col-xs-10" ng-model="standard.description" style="width : 350px; height : 30px;" />
                            </div>
							<div class="row">
                                <label class="control-label col-xs-2" for="Description">Steward</label>
                                <input type="text" name="Steward" class="form-control col-xs-10" ng-model="standard.orgName"  value="NIST" style="width : 350px; height : 30px;" />
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-raised btn-primary" type="submit" ng-disabled="standard.name==''" ng-click="ok()">Ok</button>
                        <button class="btn btn-raised btn-warning" type="button" ng-click="cancel()">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</script>

<script type="text/ng-template" id="evolution.html">
    <div id="standard-datatypelibrary-dialog">
        <div style="padding : 10px 10px 10px 10px;">
            <div class="modal-header">
                <h3 class="modal-title">HL7 Standard Datatypes Evolution</h3>
            </div>
            		<div class="modal-body container">
     				<table class="table-bordered table-fix-header table-condensed igl-list-table container col-md-12">
					<thead >
						<tr class="tbl-header">
						<th ng-repeat="v in vrs">{{v}}</th>
						</tr>
					</thead>
					<tbody class="scrollit">
					<tr ng-repeat="dt in matrix | orderBy: 'name'">
						<td class="tbl-header">{{dt.name}}</td>
						<td ng-repeat = 'va in adjusted'><span>{{dt.links[va])}}</span></td>
					</tr>
					</tbody>
					</table>
                    </div>
                    <div class="modal-footer ">
                        <button class="btn btn-raised btn-primary" type="button"  ng-click="ok()">close</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="datatypeListDlg.html">
    <div id="datatypelibrary-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Data Types</h3>
            </div>
            <form>
                <div class="modal-body">
                    <div class="container">
                        <div class="row">HL7 Version:{{hl7Version}}</div>
                        <div class="row" style="margin-top : 20px;">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <table st-table="datatypeLibDisplay" st-safe-src="datatypesLibStruct" st-sticky-header class="table table-striped table-bordered">
                                        <thead>
                                            <tr class="row tbl-header">
                                                <th st-ratio="2">&nbsp;</th>
                                                <th st-ratio="48">Title</th>
                                                <th st-ratio="48">Scope</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="row" ng-repeat="dtLib in datatypeLibDisplay">
                                                <td st-ratio="2">
                                                    <input id="dtLib.id" name="dtLibs" type="radio" ng-bind="selectedLib" ng-click="libSelected(dtLib)" />
                                                </td>
                                                <td st-ratio="48">{{getLabel(dtLib.metaData.name, dtLib.metaData.ext)}}</td>
                                                <td st-ratio="48">{{dtLib.scope}}</td>
                                            </tr>
                                        </tbody>
                                        <tfoot ng-show="datatypesLibStruct.length >= 5">
                                            <tr style="margin-right: {{scrollbarWidth}}px;">
                                                <td colspan="5" class="text-center">
                                                    <span st-pagination="" st-items-by-page="5" st-displayed-pages="7"></span>
                                                </td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                            <div class="col-sm-6" ng-show="selectedLib" style="max-width: 100%">
                                <table st-table="datatypesDisplay" st-safe-src="selectedLib.children" st-sticky-header class="table table-striped table-bordered">
                                    <thead>
                                        <tr class="row tbl-header">
                                            <th st-ratio="2">&nbsp;</th>
                                            <th st-ratio="48">Label</th>
                                            <th st-ratio="48">Ext</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="row" ng-repeat="dt in datatypesDisplay | orderBy: 'name'">
                                            <td st-ratio="2">
                                                <input value="1" name="datatypesDisplay.id" type="checkbox" ng-model="bool" ng-click="trackSelections(bool, dt)" />
                                            </td>
                                            <td st-ratio="48">{{dt.name}}</td>
                                            <td st-ratio="48">{{dt.ext}}</td>
                                        </tr>
                                    </tbody>
                                        <tr ng-show="selectedLib.children.length >= 5">
                                            <td colspan="5" class="text-center">
                                                <span st-pagination="" st-items-by-page="5" st-displayed-pages="7"></span>
                                            </td>
                                        </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-raised btn-primary" ng-disabled="okDisabled" type="button" ng-click="ok()">Ok</button>
                    <button class="btn btn-raised btn-warning" type="button" ng-click="cancel()">Cancel</button>
                </div>
            </form>
        </div>
    </div>
</script>
<script type="text/ng-template" id="DatatypeReferencesCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Data Type References Found
            <button class="btn btn-raised btn-xs btn-primary pull-right" ng-click="ok()"><span><i class="fa fa-times fa-fw">
                &nbsp; </i>Close</span>
            </button>
        </h3>
    </div>
    <div class="modal-body">
        <p>We cannot delete this data type because it is being referenced by elements below:</p>
        <div class="igl-table">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr class="tbl-header">
                        <th>Name</th>
                        <th>Path</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="ref in references track by $index ">
                        <td>
                            <span>
                            <span ng-show="ref.type === 'field'" class="label label-field label-icon">F</span>
                            <span ng-show="ref.type === 'component'" class="label label-component label-icon">C</span>
                            <span ng-show="ref.type === 'subcomponent'" class="label label-sub-component label-icon">S</span>
                            <span style="width:60%" name="name" ng-bind="ref.name"></span>
                            <span ng-bind="ref.description"></span>
                            </span>
                        </td>
                        <td>
                            <div>{{ref.path}}</div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</script>
<script type="text/ng-template" id="ConfirmDatatypeLibraryDeleteCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Delete Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>Are you sure you want to delete the Data Type Library? This operation is irreversible</p>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-danger btn-sm" ng-disabled="loading" ng-click="delete()"><span><i
                class="fa fa-trash-o fa-fw">&nbsp; </i>Delete</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>
<script type="text/ng-template" id="ConfirmDatatypeDeleteCtl.html">
    <div class="modal-header">
        <h3 class="modal-title">Delete Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>Are you sure you want to delete this Data Type? This operation is irreversible</p>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-danger btn-sm" ng-disabled="loading" ng-click="delete()"><span><i
                class="fa fa-trash-o fa-fw">&nbsp; </i>Delete</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>
<script type="text/ng-template" id="PreventDatatypeDeleteCtl.html">
    <div class="modal-header">
        <h3 class="modal-title">Delete Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>You cannot delete a published datatype</p>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>
<script type="text/ng-template" id="AbortPublishCtl.html">
    <div class="modal-header">
        <h3 class="modal-title">
        </h3>
    </div>
    <div class="modal-body">
        <p>You cannot publish this datatype since it contains unpublished elements </p>
        <div ng-show="unpublishedDatatypes.length>0">
            <h4>Datatype<h4>
        <div class="igl-table" ng-show="unpublishedDatatypes.length>0">
            <table class="table table-striped table-condensed table-bordered">
                <thead>
                <tr class="tbl-header">
                    <th>Component</th>
                    <th>Unpublished Datatype</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="obj in unpublishedDatatypes" class="ng-scope">
                    <td>
                            <span>
                                <img style="width:15px; height:15px" ng-src="images/component.png" src="images/component.png">
                                <span style="width:60%" name="name" ng-bind="obj.location.name" class="ng-binding"> </span>
                                <span ng-bind="obj.location.description" class="ng-binding"></span>
                                </span>

                    </td>
                    <td>
                        <div class="ng-binding">{{obj.datatype.name+ obj.datatype.ext}}</div>
                    </td>
                </tr><!-- end ngRepeat: ref in references -->
                </tbody>
            </table>
        </div>

        </div>

        <div ng-show="unpublishedTables.length>0">
         <h4>Tables<h4>

        <div class="igl-table" ng-show="unpublishedTables.length>0">
            <table class="table table-striped table-condensed table-bordered">
                <thead>
                <tr class="tbl-header">
                    <th>Component</th>
                    <th>Unpublished Tables</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="obj in unpublishedTables" class="ng-scope">
                    <td>
                            <span>
                                <img style="width:15px; height:15px" ng-src="images/component.png" src="images/component.png">
                                <span style="width:60%" name="name" ng-bind="obj.location.name" class="ng-binding"> </span>
                                <span ng-bind="obj.location.description" class="ng-binding"></span>
                                </span>

                    </td>
                    <td>
                        <div class="ng-binding">{{obj.table.bindingIdentifier +obj.table.ext}}</div>
                    </td>
                </tr><!-- end ngRepeat: ref in references -->
                </tbody>
            </table>
        </div>

        </div>




    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>


<script type="text/ng-template" id="ConfirmDatatypePublishCtl.html">
    <div class="modal-header">
        <h3 class="modal-title">Publish Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>Are you sure you want to publish this Data Type?</p>
        <p>Data Type will no longer be editable.</p>
        <p>This operation is irreversible.</p>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-success btn-sm" ng-disabled="loading" ng-click="delete()"><span><i
                class="fa fa-trash-o fa-fw">&nbsp; </i>Confirm</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>

<script type="text/ng-template" id="ConfirmTablePublishCtl.html">
    <div class="modal-header">
        <h3 class="modal-title">Publish Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>Are you sure you want to publish this Table?</p>
        <p>Data Type will no longer be editable.</p>
        <p>This operation is irreversible.</p>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-success btn-sm" ng-disabled="loading" ng-click="delete()"><span><i
                class="fa fa-trash-o fa-fw">&nbsp; </i>Confirm</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>
<script type="text/ng-template" id="EditTablesINLIB.html">
    <div ng-controller="TableListCtrlForDtLib" ng-init="init()" class="container">
        <div ng-show="loadingSelection" style="text-align: center; padding-top:20px">
            <i class="fa fa-spinner fa-pulse fa-align-center fa-2x"></i>
        </div>
        <div ng-show="!loadingSelection">
            <div ng-show="table !== null" id="executionPanel">
                <div class="row" style="margin-left:0px; margin-right: 20px">
                    <div class="page-header" style="margin-bottom: 20px">
                        <span class="header4">Value Set: {{table.bindingIdentifier}}</span>
                        <span class="pull-right">
						<input type="checkbox" ng-click="confirmPublishTable(table)" ng-model="table.status" ng-true-value="'PUBLISHED'"  ng-disabled="table.status === 'PUBLISHED'|| readOnly||table.scope=='HL7STANDARD'" style="margin-right : 8px"/>Published</label>

						<button title="Save Changes" type="button" class="btn btn-raised btn-sm btn-success"
								ng-disabled="editForm.$invalid || !editForm.$dirty"
                	 			ng-click="save()">
							<span><i class="fa fa-check fa-fw"></i> Save</span>
                        </button>
                        <button title="Reset Changes" type="button" class="btn btn-raised btn-sm btn-warning" ng-disabled="!editForm.$dirty" ng-click="reset()">
							<span><i class="fa fa-times fa-fw"></i> Reset</span>
						</button>
                        </span>
                    </div>

                    <div class="" ng-controller="cmpTableCtrl">
                        <tabset>
                            <tab ng-click="setDeltaToF()">
                                <tab-heading>
                                    <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i> Value Set MetaData
                                </tab-heading>
                                <div style="margin-top: 20px">
                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.tableIndentifier.$invalid}">
                                        <label class="col-md-2 control-label">Mapping Identifier*</label>

                                        <div class="controls col-md-10">
                                            <input type="text" name="tableIndentifier" class="form-control" ng-model="table.bindingIdentifier" required ng-change="setDirty()">
                                        </div>
                                    </div>

                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.name.$invalid}">
                                        <label class="col-md-2 control-label">Name*</label>

                                        <div class="controls col-md-10">
                                            <input type="text" ng-disabled="!table.newTable" name="name" class="form-control" ng-model="table.name" required ng-change="setDirty()">
                                        </div>
                                    </div>

                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.decription.$invalid}">
                                        <label class="col-md-2 control-label">Description</label>

                                        <div class="controls col-md-10">
                                            <input type="text" name="description" class="form-control" ng-model="table.description" ng-change="setDirty()">
                                        </div>
                                    </div>


                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.oid.$invalid}">
                                        <label class="col-md-2 control-label">OID</label>

                                        <div class="controls col-md-10">
                                            <input type="text" name="oid" class="form-control" ng-model="table.oid" ng-change="setDirty()">
                                        </div>
                                    </div>

                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.version.$invalid}">
                                        <label class="col-md-2 control-label">Version</label>

                                        <div class="controls col-md-10">
                                            <input type="text" name="version" class="form-control" ng-model="table.version" ng-change="setDirty()">
                                        </div>
                                    </div>
                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.version.$invalid}">
                                        <label class="col-md-2 control-label">Hl7 Version</label>

                                        <div class="controls col-md-10">
                                            <input type="text" name="version" class="form-control" ng-model="table.hl7Version" disabled>
                                        </div>
                                    </div>

                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.extensibility.$invalid}">
                                        <label class="col-md-2 control-label">Extensibility</label>

                                        <div class="controls col-md-10">
                                            <select class="form-control" name="extensibility" ng-model="table.extensibility" ng-options="extensibility for extensibility in config.tableExtensibilities" ng-change="setDirty()" />
                                        </div>
                                    </div>

                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.stability.$invalid}">
                                        <label class="col-md-2 control-label">Stability</label>

                                        <div class="controls col-md-10">
                                            <select class="form-control" name="stability" ng-model="table.stability" ng-options="stability for stability in config.tableStabilities" ng-change="setDirty()" />
                                        </div>
                                    </div>

                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.contentDefinition.$invalid}">
                                        <label class="col-md-2 control-label">Content Definition</label>

                                        <div class="controls col-md-10">
                                            <select class="form-control" name="contentDefinition" ng-model="table.contentDefinition" ng-options="contentDefinition for contentDefinition in config.tableContentDefinitions" ng-change="setDirty()" />
                                        </div>
                                    </div>

                                    <div class="form-group control-group">
                                        <label class="col-md-2 control-label">Code Systems*</label>

                                        <div class="controls col-md-10">
                                            <div class="form-control">
                                                <span ng-repeat="cs in codeSystems">
											<span ng-hide="codeSysEditMode">{{cs}}</span>
                                                <input ng-model="cs" type="text" ng-show="codeSysEditMode" />
                                                <a ng-click="delCodeSystem(cs)" ng-show="codeSysEditMode" class="point">
                                                    <span><i class="fa fa-times-circle fa-fw"></i></span>
                                                </a>
                                                <span ng-hide="$last">,</span>
                                                </span>
                                                <div class="pull-right">
                                                    <a ng-click="makeCodeSystemEditable()" ng-hide="codeSysEditMode" class="point">
                                                        <span><i class="fa fa-pencil fa-fw"></i></span>
                                                    </a>
                                                    <input ng-model="codeSysForm.str" placeholder="type new codeSystem" type="text" ng-show="codeSysEditMode" />
                                                    <a ng-click="addCodeSystem()" ng-show="codeSysEditMode" class="point">
                                                        <span><i class="fa fa-plus-circle fa-fw"></i></span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.comment.$invalid}">
                                        <label class="col-md-2 control-label">Comment</label>
                                        <div class="controls col-md-10">
                                            <textarea rows="3" cols="20" ng-change="setDirty()" name="comment" id="comment" class="form-control" ng-model="table.comment" />
                                        </div>
                                    </div>
                                </div>
                            </tab>
                            <tab ng-click="setDeltaToF()">
                                <tab-heading>
                                    <i class="fa fa-table fa-fw" aria-hidden="true"></i> Value Set Definition
                                </tab-heading>

                                <div class="el-def" style="margin-top: 20px">

                                    <accordion>
                                        <div accordion-group class="panel-primary" is-open="accordStatus.isFirstOpen">
                                            <accordion-heading>
                                                <span style="color:white;">Definition Pre-Text</span> <i class="pull-left fa" style="color:white;" ng-class="{'fa-chevron-down': accordStatus.isFirstOpen, 'fa-chevron-right': !accordStatus.isFirstOpen}"></i>                                                </accordion-heading>
                                            <div class="panel-body">
                                                <div ng-if="!readOnly && table.scope === 'USER'">
                                                    <textarea froala="froalaEditorOptions" ng-model="table.defPreText" name="text" id="defPreText" ng-change="setDirty()"></textarea>
                                                </div>
                                                <div ng-if="readOnly" || (table.scope === 'HL7STANDARD' || table.scope === 'MASTER')">
                                                    <div class="fr-view">
                                                        <div froala-view="table.defPreText"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div accordion-group class="panel-primary" is-open="accordStatus.isSecondOpen">
                                            <accordion-heading>
                                                <span style="color:white;">Value Set Definition </span><i class="pull-left fa" style="color:white;" ng-class="{'fa-chevron-down': accordStatus.isSecondOpen, 'fa-chevron-right': !accordStatus.isSecondOpen}"></i>
                                            </accordion-heading>
                                            <div class="panel-body">
                                    <div class="">
                                        <span class="pull-right">
											<button title="Add new Value" type="button" class="btn btn-raised btn-sm btn-info" ng-click="addValue();">
												<span><i class="fa fa-plus fa-fw"></i>Add Value</span>
                                        </button>
                                        <button title="Delete Values" type="button" class="btn btn-raised btn-xs btn-danger" ng-click="deleteSlectedValues()" ng-disabled="selectedCodes.length===0">
                                                <i class="fa fa-trash-o fa-fw"></i>Delete Values <span class="badge" ng-if="selectedCodes.length>0">{{selectedCodes.length}}</span>
                                                </button>
                                        </span>
                                        <span class="form-group">
                                        <label> Codes By Page </label>
                                        <input class="input-sm form group" name="items" id="items" type="number" ng-model="itemsByPage"/>
                                        </span>

                                 <div class="">
                                            <table st-safe-src="table.codes" st-table="displayCollection" class="table table-striped table-condensed table-bordered">
                                                <thead>
                                <tr>
                                        <th colspan="6">
                                        <input st-search placeholder="Search" class="input-sm form-control" type="search" />
                                        </th>
                                    </tr>
                                                    <tr class="tbl-header">
                                                        <th class="col-md-1">
                                                        <input type="checkbox" ng-model="checkAll" ng-change="ProcessChecking(checkAll)"> 
                                                        <span ng-if="checkAll">UnCheck All</span>
                                                        <span ng-if="!checkAll"> Check All</span>
                                                        </input>

                                                        </th>
                                                        <th st-sort="value" class="col-md-2">Value</th>
                                                        <th st-sort="label" class="col-md-3">Description</th>
                                                        <th class="col-md-2">CodeSystem</th>
                                                        <th class="col-md-1">Usage  <span class="btn-group btn-group-xs btn-info" role="group" aria-label="...">
                                                                <button type="button" ng-click="setAllCodeUsage(table, 'R')" class="btn btn-raised btn-default btn-info">R</button>
                                                                <button type="button" ng-click="setAllCodeUsage(table, 'P')" class="btn btn-raised btn-default btn-info">P</button>
                                                                <button type="button" ng-click="setAllCodeUsage(table, 'E')" class="btn btn-raised btn-default btn-info">E</button>
                                                            </span></th>
                                                        <th class="col-md-3">Comments</th>
                                                        
                                                    </tr>
                                                </thead>

                                                <tbody>


                                                    <tr ng-repeat="c in displayCollection">
                                                        <td cs-select="col-md-1">
                                                            <input type="checkbox" ng-model="c.selected" ng-change="addOrRemoveValue(c)">
                                                        </td>
                                                        <td class="col-md-2">
                                                            <div ng-show="isDuplicatedTwoContexts(c,'value', 'codeSystem', table.codes)">
                                                                <input type="text" style="width: 100%" name="Value" ng-change="setDirty()" class="form-control-warning" ng-model="c.value" />
                                                                <span style="color:red">Duplicated</span>
                                                            </div>
                                                            <div ng-hide="isDuplicatedTwoContexts(c,'value', 'codeSystem', table.codes)">
                                                                <input type="text" style="width: 100%" name="Value" ng-change="setDirty()" class="form-control" ng-model="c.value" />
                                                            </div>
                                                        </td>

                                                        <td class="col-md-3">
                                                            <div ng-show="isDuplicatedTwoContexts(c,'label', 'codeSystem' , table.codes)">
                                                                <input type="text" style="width: 100%" name="Label" ng-change="setDirty()" class="form-control-warning" ng-model="c.label" />
                                                                <span style="color:red">Duplicated</span>
                                                            </div>

                                                            <div ng-hide="isDuplicatedTwoContexts(c,'label', 'codeSystem' , table.codes)">
                                                                <input type="text" style="width: 100%" name="Label" ng-change="setDirty()" class="form-control" ng-model="c.label" />
                                                            </div>
                                                        </td>

                                                        <td class="col-md-2">
                                                            <div ng-show="!c.codeSystem || c.codeSystem === ''">
                                                                <select class="form-control-warning" ng-change="setDirty()" ng-model="c.codeSystem" ng-options="cs for cs in codeSystems">
														</select>
                                                                <span style="color:red">Missing CodeSystem</span>
                                                            </div>
                                                            <div ng-hide="!c.codeSystem || c.codeSystem === ''">
                                                                <select class="form-control" ng-change="setDirty()" ng-model="c.codeSystem" ng-options="cs for cs in codeSystems">
														</select>
                                                            </div>
                                                        </td>
                                                        <td class="col-md-1">
                                                            <select class="form-control" name="Usage" ng-change="setDirty()" ng-model="c.codeUsage" ng-options="codeUsage for codeUsage in config.codeUsages">
													        </select>
                                                        </td>

                                                        <td class="col-md-3">
                                                            <textarea rows="2" ng-change="setDirty()" class="form-control" ng-model="c.comments" />
                                                        </td>

<!--                                                         <td class="col-md-1">
                                                            <button title="Delete" type="button" class="btn btn-raised btn-xs btn-danger" ng-click="deleteValue(c)">
														<i class="fa fa-trash-o fa-fw"></i> -->
<!-- 													</button>
                                                        </td> -->
                                                    </tr>
                                                </tbody>
                    <tr style="float:center !important;">
                        <td colspan="6" class="text-center" style="float:center !important;">
                            <div st-pagination="" st-items-by-page="itemsByPage" st-displayed-pages="7" style="float:center !important;"></div>
                        </td>
                    </tr>

                                            </table>


                                        </div>
                                        </div>
                                                </div>
                                            </div>

                                    <div accordion-group class="panel-primary" is-open="accordStatus.isThirdOpen">
                                        <accordion-heading>
                                            <span style="color:white;">Definition Post-Text </span><i class="pull-left fa" style="color:white;" ng-class="{'fa-chevron-down': accordStatus.isThirdOpen, 'fa-chevron-right': !accordStatus.isThirdOpen}"></i>
                                        </accordion-heading>
                                        <div class="panel-body">
                                            <div ng-if="!readOnly && table.scope === 'USER'">
                                                <textarea froala="froalaEditorOptions" ng-model="table.defPostText" name="text" id="defPostText" ng-change="setDirty()"></textarea>
                                            </div>
                                            <div ng-if="readOnly || (table.scope === 'HL7STANDARD' || table.scope === 'MASTER')">
                                                <div class="fr-view">
                                                    <div froala-view="table.defPostText"></div>
                                                </div>
                                            </div>
                                        </div>
                                        </div>
                                  </accordion>

                                    </div>

                            </tab>

                              <tab ng-click="setDeltaToF()">
                                <tab-heading>
                                    <i class="fa fa-link" aria-hidden="true"></i> Value Set Cross-References <span class="badge">{{references.length}}</span>
                                </tab-heading>
                                <div class="el-def" style="margin-top:20px">
                                    <span class="pull-right">
                                        <button ng-click="AddBindingForValueSet(table)" class="btn btn-raised btn-info btn-md"><i class="fa fa-check"></i> Add Binding</button>
                                    </span>
                                    <table st-safe-src="references" st-table="displayReferences" class="table table-striped table-bordered table-condensed">
                                        <thead>
                                        <tr class="tbl-header">
                                            <td st-ratio="5">#</td>
                                            <th st-ratio="15">Path</th>
                                            <th st-ratio="15">Name</th>
                                            <th st-ratio="10">Usage</th>
                                            <th st-ratio="10">DataType</th>
                                            <th st-ratio="20">Value Set</th>
                                            <th st-ratio="10">Binding Location</th>
                                            <th st-ratio="10">Binding Strength</th>
                                            <th st-ratio="5">Status</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="ref in displayReferences">
                                            <td st-ratio="5">{{$index + 1}}
                                                <span ng-if="ref.type === 'field'" class="label label-field label-icon">F</span>
                                                <span ng-if="ref.type === 'component'" class="label label-component label-icon">C</span>
                                            </td>
                                            <td st-ratio="15">
                                                <a ng-if="ref.type === 'field'" ng-click="redirectSeg(ref.target)">{{::ref.path}}</a>
                                                <a ng-if="ref.type === 'component'" ng-click="redirectDT(ref.target)">{{::ref.path}}</a>
                                                
                                            </td>
                                            <td st-ratio="15">
                                                {{::ref.name}}
                                            </td>
                                            <td st-ratio="10">
                                                {{::ref.usage}}
                                            </td>
                                            <td st-ratio="10">
                                                <a ng-click="redirectDT(ref.datatype)">{{::getDatatypeLabel(datatypesMap[ref.datatype.id])}}</a>
                                            </td>
                                            
                                            <td st-ratio="20">
                                                <span ng-if="ref.target.status == 'UPUBLUSHED'">
                                                    {{::tablesMap[ref.tableLink.id].bindingIdentifier}}-{{::tablesMap[ref.tableLink.id].description}}
                                                </span>
                                                <select ng-if="ref.target.scope == 'UNPUBLISHED'" class="form-control" ng-change="changeTableLink(ref.tableLink)" ng-model="ref.tableLink.id">
                                                    <option value="">No Value Set</option>
                                                    <option ng-repeat="t in tables |orderBy:'+bindingIdentifier'" value="{{t.id}}">
                                                        {{::t.bindingIdentifier}}-{{::t.description}}
                                                    </option>
                                                </select>
                                            </td>
                                            <td st-ratio="10">
                                                <span ng-if="ref.target.status === 'PUBLISHED'">
                                                    {{::ref.tableLink.bindingLocation}}
                                                </span>
                                                <select ng-if="ref.target.scope == 'UPUBLISHED'" class="form-control" ng-change="changeTableLink(ref.tableLink)" ng-model="ref.tableLink.bindingLocation">
                                                    <option ng-repeat="component in datatypesMap[ref.datatype.id].components |orderBy:'+position'" value="{{component.position}}">
                                                        {{::getDatatypeLabel(datatypesMap[ref.datatype.id])}}.{{::component.position}} ({{::component.name}})
                                                    </option>
                                                </select>
                                            </td>
                                            <td st-ratio="10">
                                                <span ng-if="ref.target.status == 'PUBLISHED'">
                                                    {{::ref.tableLink.bindingStrength}}
                                                </span>
                                                <select ng-if="ref.target.status == 'UNPUBLISHED'" class="form-control" ng-change="changeTableLink(ref.tableLink)" ng-model="ref.tableLink.bindingStrength">
                                                    <option value="R">Required</option>
                                                    <option value="S">Suggested</option>
                                                    <option value="U">Undermined</option>
                                                </select>
                                            </td>
                                            <td st-ratio="5">
                                                <span ng-if="ref.tableLink.isNew">New</span>
                                                <span ng-if="!ref.tableLink.isNew && ref.tableLink.isChanged">Changed</span>
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tr ng-if="references.length > 10">
                                            <td colspan="9" class="text-center">
                                                <div st-pagination="" st-items-by-page="10" st-displayed-pages="10"></div>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </tab>
                        </tabset>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/ng-template" id="EditTablesINLIBReadOnly.html">
    <div ng-controller="TableListCtrlForDtLib" ng-init="init()" class="container">
        <div ng-show="loadingSelection" style="text-align: center; padding-top:20px">
            <i class="fa fa-spinner fa-pulse fa-align-center fa-2x"></i>
        </div>
        <div ng-show="!loadingSelection">
            <div ng-show="table !== null" id="executionPanel">
                <div class="row" style="margin-left:0px; margin-right: 20px">
                    <div class="page-header" style="margin-bottom: 20px">
                        <span class="header4">Value Set: {{table.bindingIdentifier}}</span>
                        <span class="pull-right">
						<button title="Save Changes" type="button" class="btn btn-raised btn-sm btn-success"
                                ng-disabled="!isBindingChanged()"
                                ng-click="saveBindingForValueSet()">
							<span><i class="fa fa-check fa-fw"></i> Save</span>
                        </button>
                        <button title="Reset Changes" type="button" class="btn btn-raised btn-sm btn-warning" ng-disabled="!isBindingChanged()" ng-click="reset()">
							<span><i class="fa fa-times fa-fw"></i> Reset</span>
						</button>
                        </span>
                    </div>

                    <div class="" ng-controller="cmpTableCtrl">
                        <tabset>
                            <tab ng-click="setDeltaToF()">
                                <tab-heading>
                                    <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i> Value Set MetaData
                                </tab-heading>
                                <div style="margin-top: 20px">
                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.tableIndentifier.$invalid}">
                                        <label class="col-md-2 control-label">Mapping Identifier*</label>

                                        <div class="controls col-md-10">
                                            <input type="text" name="tableIndentifier" class="form-control" ng-model="table.bindingIdentifier" disabled required ng-change="setDirty()">
                                        </div>
                                    </div>

                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.name.$invalid}">
                                        <label class="col-md-2 control-label">Name*</label>

                                        <div class="controls col-md-10">
                                            <input type="text" ng-disabled="!table.newTable" name="name" class="form-control" disabled ng-model="table.name" required ng-change="setDirty()">
                                        </div>
                                    </div>

                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.decription.$invalid}">
                                        <label class="col-md-2 control-label">Description</label>

                                        <div class="controls col-md-10">
                                            <input type="text" name="description" class="form-control" ng-model="table.description" disabled>
                                        </div>
                                    </div>


                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.oid.$invalid}">
                                        <label class="col-md-2 control-label">OID</label>

                                        <div class="controls col-md-10">
                                            <input type="text" name="oid" class="form-control" ng-model="table.oid" disabled>
                                        </div>
                                    </div>

                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.version.$invalid}">
                                        <label class="col-md-2 control-label">Version</label>

                                        <div class="controls col-md-10">
                                            <input type="text" name="version" class="form-control" ng-model="table.version" disabled>
                                        </div>
                                    </div>
                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.version.$invalid}">
                                        <label class="col-md-2 control-label">Hl7 Version</label>

                                        <div class="controls col-md-10">
                                            <input type="text" name="version" class="form-control" ng-model="table.hl7Version" disabled>
                                        </div>
                                    </div>

                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.extensibility.$invalid}">
                                        <label class="col-md-2 control-label">Extensibility</label>

                                        <div class="controls col-md-10">
                                            <select class="form-control" name="extensibility" ng-model="table.extensibility" ng-options="extensibility for extensibility in config.tableExtensibilities" disabled />
                                        </div>
                                    </div>

                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.stability.$invalid}">
                                        <label class="col-md-2 control-label">Stability</label>

                                        <div class="controls col-md-10">
                                            <select class="form-control" name="stability" ng-model="table.stability" ng-options="stability for stability in config.tableStabilities" diabled />
                                        </div>
                                    </div>

                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.contentDefinition.$invalid}">
                                        <label class="col-md-2 control-label">Content Definition</label>

                                        <div class="controls col-md-10">
                                            <select class="form-control" name="contentDefinition" ng-model="table.contentDefinition" ng-options="contentDefinition for contentDefinition in config.tableContentDefinitions" disabled />
                                        </div>
                                    </div>

                                    <div class="form-group control-group">
                                        <label class="col-md-2 control-label">Code Systems*</label>

                                        <div class="controls col-md-10">
                                            <div class="form-control">
                                                <span ng-repeat="cs in codeSystems">
											<span ng-hide="codeSysEditMode">{{cs}}</span>
                                                <input ng-model="cs" type="text" ng-show="codeSysEditMode" disabled/>
                                                <a ng-click="delCodeSystem(cs)" ng-show="codeSysEditMode" class="point" disabled>
                                                    <span><i class="fa fa-times-circle fa-fw"></i></span>
                                                </a>
                                                <span ng-hide="$last">,</span>
                                                </span>
                                                <div class="pull-right">
                                                    <a ng-click="makeCodeSystemEditable()" ng-hide="codeSysEditMode" class="point" disabled>
                                                        <span><i class="fa fa-pencil fa-fw"></i></span>
                                                    </a>
                                                    <input ng-model="codeSysForm.str" placeholder="type new codeSystem" type="text" ng-show="codeSysEditMode" disabled />
                                                    <a ng-click="addCodeSystem()" ng-show="codeSysEditMode" class="point">
                                                        <span><i class="fa fa-plus-circle fa-fw"></i></span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.comment.$invalid}">
                                        <label class="col-md-2 control-label">Comment</label>
                                        <div class="controls col-md-10">
                                            <textarea rows="3" cols="20" disabled name="comment" id="comment" class="form-control" ng-model="table.comment" />
                                        </div>
                                    </div>
                                </div>
                            </tab>
                            <tab ng-click="setDeltaToF()">
                                <tab-heading>
                                    <i class="fa fa-table fa-fw" aria-hidden="true"></i> Value Set Definition
                                </tab-heading>

                                <div class="el-def" style="margin-top: 20px">

                                    <accordion>
                                        <div accordion-group class="panel-primary" is-open="accordStatus.isFirstOpen">
                                            <accordion-heading>
                                                <span style="color:white;">Definition Pre-Text</span> <i class="pull-left fa" style="color:white;" ng-class="{'fa-chevron-down': accordStatus.isFirstOpen, 'fa-chevron-right': !accordStatus.isFirstOpen}"></i>                                                </accordion-heading>
                                            <div class="panel-body">
                                                <div ng-if="!readonly && table.scope === 'USER'">
                                                    <textarea froala="froalaEditorOptions" ng-model="table.defPreText" name="text" id="defPreText" disabled></textarea>
                                                </div>
                                                <div ng-if="readonly || (table.scope === 'HL7STANDARD' || table.status === 'PUBLISHED')">
                                                    <div class="fr-view">
                                                        <div froala-view="table.defPreText"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div accordion-group class="panel-primary" is-open="accordStatus.isSecondOpen">
                                            <accordion-heading>
                                                <span style="color:white;">Value Set Definition </span><i class="pull-left fa" style="color:white;" ng-class="{'fa-chevron-down': accordStatus.isSecondOpen, 'fa-chevron-right': !accordStatus.isSecondOpen}"></i>
                                            </accordion-heading>
                                            <div class="panel-body">
                                    <div class="">
                                        <span class="pull-right">
											<button title="Add new Value" type="button" class="btn btn-raised btn-sm btn-info" disabled>
												<span><i class="fa fa-plus fa-fw"></i>Add Value</span>
                                        </button>
                                        <button title="Delete Values" type="button" class="btn btn-raised btn-xs btn-danger" disabled>
                                                <i class="fa fa-trash-o fa-fw"></i>Delete Values <span class="badge" ng-if="selectedCodes.length>0">{{selectedCodes.length}}</span>
                                                </button>
                                        </span>
                                        <span class="form-group">
                                        <label> Codes By Page </label>
                                        <input class="input-sm form group" name="items" id="items" type="number" ng-model="itemsByPage"/>
                                        </span>

                                 <div class="">
                                            <table st-safe-src="table.codes" st-table="displayCollection" class="table table-striped table-condensed table-bordered">
                                                <thead>
                                <tr>
                                        <th colspan="6">
                                        <input st-search placeholder="Search" class="input-sm form-control" type="search" />
                                        </th>
                                    </tr>
                                                    <tr class="tbl-header">
                                                        <th class="col-md-1">
                                                        <input type="checkbox" ng-model="checkAll" ng-change="ProcessChecking(checkAll)"> 
                                                        <span ng-if="checkAll">UnCheck All</span>
                                                        <span ng-if="!checkAll"> Check All</span>
                                                        </input>

                                                        </th>
                                                        <th st-sort="value" class="col-md-2">Value</th>
                                                        <th st-sort="label" class="col-md-3">Description</th>
                                                        <th class="col-md-2">CodeSystem</th>
                                                        <th class="col-md-1">Usage  <span class="btn-group btn-group-xs btn-info" role="group" aria-label="...">
                                                                <button type="button" ng-click="setAllCodeUsage(table, 'R')" class="btn btn-raised btn-default btn-info">R</button>
                                                                <button type="button" ng-click="setAllCodeUsage(table, 'P')" class="btn btn-raised btn-default btn-info">P</button>
                                                                <button type="button" ng-click="setAllCodeUsage(table, 'E')" class="btn btn-raised btn-default btn-info">E</button>
                                                            </span></th>
                                                        <th class="col-md-3">Comments</th>
                                                        
                                                    </tr>
                                                </thead>

                                                <tbody>

                                                    <tr ng-repeat="c in displayCollection">
                                                        <td cs-select="col-md-1">
                                                            <input type="checkbox" ng-model="c.selected" ng-change="addOrRemoveValue(c)">
                                                        </td>
                                                        <td class="col-md-2">
                                                            <div ng-show="isDuplicatedTwoContexts(c,'value', 'codeSystem', table.codes)">
                                                                <input type="text" style="width: 100%" name="Value" disabled class="form-control-warning" ng-model="c.value" />
                                                                <span style="color:red">Duplicated</span>
                                                            </div>
                                                            <div ng-hide="isDuplicatedTwoContexts(c,'value', 'codeSystem', table.codes)">
                                                                <input type="text" style="width: 100%" name="Value" disabled class="form-control" ng-model="c.value" />
                                                            </div>
                                                        </td>

                                                        <td class="col-md-3">
                                                            <div ng-show="isDuplicatedTwoContexts(c,'label', 'codeSystem' , table.codes)">
                                                                <input type="text" style="width: 100%" name="Label" disabled class="form-control-warning" ng-model="c.label" />
                                                                <span style="color:red">Duplicated</span>
                                                            </div>

                                                            <div ng-hide="isDuplicatedTwoContexts(c,'label', 'codeSystem' , table.codes)">
                                                                <input type="text" style="width: 100%" name="Label" disabled class="form-control" ng-model="c.label" />
                                                            </div>
                                                        </td>

                                                        <td class="col-md-2">
                                                            <div ng-show="!c.codeSystem || c.codeSystem === ''">
                                                                <select class="form-control-warning" disabled ng-model="c.codeSystem" ng-options="cs for cs in codeSystems">
														</select>
                                                                <span style="color:red">Missing CodeSystem</span>
                                                            </div>
                                                            <div ng-hide="!c.codeSystem || c.codeSystem === ''">
                                                                <select class="form-control" disabled ng-model="c.codeSystem" ng-options="cs for cs in codeSystems">
														</select>
                                                            </div>
                                                        </td>
                                                        <td class="col-md-1">
                                                            <select class="form-control" name="Usage" disabled ng-model="c.codeUsage" ng-options="codeUsage for codeUsage in config.codeUsages">
													        </select>
                                                        </td>

                                                        <td class="col-md-3">
                                                            <textarea rows="2" disabled class="form-control" ng-model="c.comments" />
                                                        </td>

<!--                                                         <td class="col-md-1">
                                                            <button title="Delete" type="button" class="btn btn-raised btn-xs btn-danger" ng-click="deleteValue(c)">
														<i class="fa fa-trash-o fa-fw"></i> -->
<!-- 													</button>
                                                        </td> -->
                                                    </tr>
                                                </tbody>
                    <tr style="float:center !important;">
                        <td colspan="6" class="text-center" style="float:center !important;">
                            <div st-pagination="" st-items-by-page="itemsByPage" st-displayed-pages="7" style="float:center !important;"></div>
                        </td>
                    </tr>

                                            </table>


                                        </div>
                                        </div>
                                                </div>
                                            </div>

                                    <div accordion-group class="panel-primary" is-open="accordStatus.isThirdOpen">
                                        <accordion-heading>
                                            <span style="color:white;">Definition Post-Text </span><i class="pull-left fa" style="color:white;" ng-class="{'fa-chevron-down': accordStatus.isThirdOpen, 'fa-chevron-right': !accordStatus.isThirdOpen}"></i>
                                        </accordion-heading>
                                        <div class="panel-body">
                                            <div ng-if="!readOnly && table.scope === 'USER'">
                                                <textarea froala="froalaEditorOptions" ng-model="table.defPostText" name="text" id="defPostText" disabled></textarea>
                                            </div>
                                            <div ng-if="readonly || (table.scope === 'HL7STANDARD' || table.scope === 'MASTER')">
                                                <div class="fr-view">
                                                    <div froala-view="table.defPostText"></div>
                                                </div>
                                            </div>
                                        </div>
                                        </div>
                                  </accordion>

                                    </div>

                            </tab>

                             <tab ng-click="setDeltaToF()">
                                <tab-heading>
                                    <i class="fa fa-link" aria-hidden="true"></i> Value Set Cross-References <span class="badge">{{references.length}}</span>
                                </tab-heading>
                                <div class="el-def" style="margin-top:20px">
                                    <span class="pull-right">
                                        <button ng-click="AddBindingForValueSet(table)" class="btn btn-raised btn-info btn-md"><i class="fa fa-check"></i> Add Binding</button>
                                    </span>
                                    <table st-safe-src="references" st-table="displayReferences" class="table table-striped table-bordered table-condensed">
                                        <thead>
                                        <tr class="tbl-header">
                                            <td st-ratio="5">#</td>
                                            <th st-ratio="15">Path</th>
                                            <th st-ratio="15">Name</th>
                                            <th st-ratio="10">Usage</th>
                                            <th st-ratio="10">DataType</th>
                                            <th st-ratio="20">Value Set</th>
                                            <th st-ratio="10">Binding Location</th>
                                            <th st-ratio="10">Binding Strength</th>
                                            <th st-ratio="5">Status</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="ref in displayReferences">
                                            <td st-ratio="5">{{$index + 1}}
                                                <span ng-if="ref.type === 'field'" class="label label-field label-icon">F</span>
                                                <span ng-if="ref.type === 'component'" class="label label-component label-icon">C</span>
                                            </td>
                                            <td st-ratio="15">
                                                <a ng-if="ref.type === 'field'" ng-click="redirectSeg(ref.target)">{{::ref.path}}</a>
                                                <a ng-if="ref.type === 'component'" ng-click="redirectDT(ref.target)">{{::ref.path}}</a>
                                                
                                            </td>
                                            <td st-ratio="15">
                                                {{::ref.name}}
                                            </td>
                                            <td st-ratio="10">
                                                {{::ref.usage}}
                                            </td>
                                            <td st-ratio="10">
                                                <a ng-click="redirectDT(ref.datatype)">{{::getDatatypeLabel(datatypesMap[ref.datatype.id])}}</a>
                                            </td>
                                            
                                            <td st-ratio="20">
                                                <span ng-if="ref.target.status == 'PUBLISHED'">
                                                    {{::tablesMap[ref.tableLink.id].bindingIdentifier}}-{{::tablesMap[ref.tableLink.id].description}}
                                                </span>
                                                <select ng-if="ref.target.status == 'UNPUBLISHED'" class="form-control" ng-change="changeTableLink(ref.tableLink)" ng-model="ref.tableLink.id">
                                                    <option value="">No Value Set</option>
                                                    <option ng-repeat="t in tables |orderBy:'+bindingIdentifier'" value="{{t.id}}">
                                                        {{::t.bindingIdentifier}}-{{::t.description}}
                                                    </option>
                                                </select>
                                            </td>
                                            <td st-ratio="10">
                                                <span ng-if="ref.target.status == 'PUBLISHED'">
                                                    {{::ref.tableLink.bindingLocation}}
                                                </span>
                                                <select ng-if="ref.target.status == 'UNPUBLISHED'" class="form-control" ng-change="changeTableLink(ref.tableLink)" ng-model="ref.tableLink.bindingLocation">
                                                    <option ng-repeat="component in datatypesMap[ref.datatype.id].components |orderBy:'+position'" value="{{component.position}}">
                                                        {{::getDatatypeLabel(datatypesMap[ref.datatype.id])}}.{{::component.position}} ({{::component.name}})
                                                    </option>
                                                </select>
                                            </td>
                                            <td st-ratio="10">
                                                <span ng-if="ref.target.status == 'PUBLISHED'">
                                                    {{::ref.tableLink.bindingStrength}}
                                                </span>
                                                <select ng-if="ref.target.status == 'UNPUBLISHED'" class="form-control" ng-change="changeTableLink(ref.tableLink)" ng-model="ref.tableLink.bindingStrength">
                                                    <option value="R">Required</option>
                                                    <option value="S">Suggested</option>
                                                    <option value="U">Undermined</option>
                                                </select>
                                            </td>
                                            <td st-ratio="5">
                                                <span ng-if="ref.tableLink.isNew">New</span>
                                                <span ng-if="!ref.tableLink.isNew && ref.tableLink.isChanged">Changed</span>
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tr ng-if="references.length > 10">
                                            <td colspan="9" class="text-center">
                                                <div st-pagination="" st-items-by-page="10" st-displayed-pages="10"></div>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </tab>
                        </tabset>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/ng-template" id="ConfirmRedirect.html">
    <div class="modal-header">
        <h3 class="modal-title">Redirecting confirmation
        </h3>
    </div>
    <div class="modal-body">
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-success btn-sm" ng-disabled="loading" ng-click="delete()"><span><i
                class="fa fa-trash-o fa-fw">&nbsp; </i>Confirm</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>
<script type="text/ng-template" id="PredicateDatatypeLibraryCtrl.html">
    <div class="modal-header">
        <h3 ng-show="selectedNode === null" class="header4">Predicate for {{datatype.name}}</h3>
        <h3 ng-show="selectedNode !== null" class="header4">Predicate for {{datatype.name}}-{{selectedNode.position}}</h3>
    </div>
    <div class="modal-body">
        <form role="form">
            <span class="pull-right">
    <select class="form-control input-sm" ng-model="selectedNode"

            ng-options="component as (datatype.name + '.' + component.position + ': ' + component.name) for component in datatype.components | filter:{usage : 'C'}">
        <option value="">Root of {{datatype.name}}</option>
    </select>
</span>
            <div class="">
                <div class="page-header">
                    <span class="header5">List of Predicates</span>
                </div>
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr class="tbl-header">
                            <th class="col-md-1" style="width: 4.1667%">Draggable</th>
                            <th class="col-md-8">Desciption (
                                <input type="checkbox" ng-model="viewAssertion"> view assertion )</th>
                            <th class="col-md-1">True Usage</th>
                            <th class="col-md-1">False Usage</th>
                            <th class="col-md-1"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="p in tempPredicates | filter:{constraintTarget:selectedNode == null ? '.' : selectedNode.position + '[1]'}:true">
                            <td class="col-md-1" align="center" style="width: 4.1667%">
                                <i class="fa fa-bullseye fa-lg" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="p" jqyoui-draggable="{placeholder:'keep',animate:true}"></i>
                            </td>
                            <td class="col-md-8">
                                <input class="form-control" ng-model="p.description" ng-change="setChanged()" type="text" />
                                <span ng-show="viewAssertion">{{p.assertion}}</span>
                            </td>
                            <td class="col-md-1">
                                <select class="form-control" ng-model="p.trueUsage" ng-change="setChanged()" ng-options="usage for usage in config.usages" />
                            </td>
                            <td class="col-md-1">
                                <select class="form-control" ng-model="p.falseUsage" ng-change="setChanged()" ng-options="usage for usage in config.usages" />
                            </td>
                            <td class="col-md-1" align="center">
                                <button class="btn btn-raised btn-danger btn-xxs" ng-click="deletePredicate(p)"><span><i class="fa fa-trash fa-fw">
                &nbsp; </i>Del</span></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <span class="pull-left">
        <span class="header5" ng-show="constraintType === 'Plain'">Add new plain predicate</span>
                <span class="header5" ng-show="constraintType === 'Complex'">Add new complex predicate</span>
                </span>
                <span class="pull-right">
        <div class="btn-group btn-group-sm" data-toggle="buttons">
            <label class="btn btn-raised btn-info btn-xs" ng-click="constraintType = 'Plain'"
                   ng-class="{'active':constraintType === 'Plain'}">
                <input type="radio" ng-value="constraintType">Add plain predicate
            </label>
            <label class="btn btn-raised btn-info btn-xs" ng-click="constraintType = 'Complex'"
                   ng-class="{'active':constraintType === 'Complex'}">
                <input type="radio" ng-value="constraintType">Add complex predicate
            </label>
        </div>
    </span>
                <table class="table table-striped table-bordered" ng-show="constraintType === 'Plain'">
                    <thead>
                        <tr class="tbl-header">
                            <th class="col-md-1" style="width: 4.1667%"></th>
                            <th class="col-md-2">Node</th>
                            <th class="col-md-2">Verb</th>
                            <th class="col-md-2">Constraint Pattern</th>
                            <th class="col-md-2">Value</th>
                            <th class="col-md-1">True Usage</th>
                            <th class="col-md-1">False Usage</th>
                            <th class="col-md-1"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="col-md-1" align="center" style="width: 4.1667%">
                                <button class="btn btn-raised btn-info btn-xxs" ng-click="initPredicate()"><span><i class="fa fa-refresh fa-fw">
                &nbsp; </i>Reset</span></button>
                            </td>
                            <td class="col-md-2">
                                <span>{{newConstraint.datatype}}.</span>
                                <select class="form-control form-control-short" ng-class="{'form-control-invalid': isEmptyConstraintNode(newConstraint, 'datatype')}" ng-model="newConstraint.component_1" ng-options="component as component.position for component in datatype.components" />
                                <span ng-show="datatypesMap[newConstraint.component_1.datatype].components.length > 0">.
                        <select class="form-control form-control-short" ng-model="newConstraint.subComponent_1"
                                ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_1.datatype].components"/>
                    </span>
                                <span style="color:red;" ng-show="isEmptyConstraintNode(newConstraint, 'datatype')">Empty node</span>
                            </td>
                            <td class="col-md-2">
                                <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintVerb(newConstraint)}" ng-model="newConstraint.verb" ng-options="constraintVerb for constraintVerb in config.constraintVerbs | orderBy:'toString()'" />
                                <span style="color:red;" ng-show="isEmptyConstraintVerb(newConstraint)">Empty verb</span>
                            </td>
                            <td class="col-md-2">
                                <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintPattern(newConstraint)}" ng-model="newConstraint.contraintType" ng-options="contraintType for contraintType in config.constraintTypes | orderBy:'toString()'" />
                                <span style="color:red;" ng-show="isEmptyConstraintPattern(newConstraint)">Empty constraint pattern</span>
                            </td>
                            <td class="col-md-2">
                                <span ng-show="newConstraint.contraintType == 'a literal value' || 
                                   newConstraint.contraintType == 'equal to' ||
                                   newConstraint.contraintType == 'not-equal to' ||
                                   newConstraint.contraintType == 'greater than' ||
                                   newConstraint.contraintType == 'equal to or greater than' ||
                                   newConstraint.contraintType == 'less than' ||
                                   newConstraint.contraintType == 'equal to or less than'">
                        <input class="form-control"
                               ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}"
                               ng-model="newConstraint.value" type="text"/>
                        <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty value</span>
                                </span>
                                <span ng-show="newConstraint.contraintType == 'one of list values'">
                        <input class="form-control"
                               ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}"
                               ng-model="newConstraint.value" placeholder="Comma-Separated Values(CSV)" type="text"/>
                        <span style="color:red;"
                              ng-show="isEmptyConstraintValue(newConstraint)">Empty list of values</span>
                                </span>
                                <span ng-show="newConstraint.contraintType == 'formatted value'">
                        <select class="form-control"
                                ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}"
                                ng-model="newConstraint.value"
                                ng-options="predefinedFormat for predefinedFormat in config.predefinedFormats | orderBy:'toString()'"/>
                        <div ng-show="newConstraint.value === 'Regular expression'">
                            <input class="form-control"
                                   ng-class="{'form-control-invalid': isEmptyConstraintValue2(newConstraint)}"
                                   ng-model="newConstraint.value2" placeholder="Regular expression" type="text"/>
                        </div>
                        <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty format</span>
                                <span style="color:red;" ng-show="isEmptyConstraintValue2(newConstraint)">Empty regular expression</span>
                                </span>
                                <span ng-show="newConstraint.contraintType == 'identical to another node' ||
                                   newConstraint.contraintType == 'equal to another node' ||
                                   newConstraint.contraintType == 'not-equal to another node' ||
                                   newConstraint.contraintType == 'greater than another node' ||
                                   newConstraint.contraintType == 'equal to or greater than another node' ||
                                   newConstraint.contraintType == 'less than another node' ||
                                   newConstraint.contraintType == 'equal to or less than another node'">
                        <span>{{newConstraint.datatype}}.</span>
                                <select class="form-control form-control-short" ng-class="{'form-control-invalid': isEmptyConstraintAnotherNode(newConstraint, 'datatype')}" ng-change="updateComponent_2()" ng-model="newConstraint.component_2" ng-options="component as component.position for component in datatype.components" />
                                <span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
                            <select class="form-control form-control-short" ng-model="newConstraint.subComponent_2"
                                    ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components"/>
                        </span>
                                <span style="color:red;" ng-show="isEmptyConstraintAnotherNode(newConstraint, 'datatype')">Empty another node</span>
                                </span>
                                <span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                        <span>ValueSet ID: </span>
                                <select class="form-control form-control-short" ng-class="{'form-control-invalid': isEmptyConstraintValueSet(newConstraint)}" ng-model="newConstraint.valueSetId">
                                    <option ng-repeat="table in tables|orderBy:'+bindingIdentifier'" value="{{table.bindingIdentifier}}">
                                        {{table.bindingIdentifier}}
                                    </option>
                                </select>
                                <span style="color:red;" ng-show="isEmptyConstraintValueSet(newConstraint)">Empty value set</span>
                                <br/>
                                <span>BindingStrength: </span>
                                <select name="bindingStrength" class="form-control form-control-short" ng-model="newConstraint.bindingStrength">
                                    <option value="R">R</option>
                                    <option value="S">S</option>
                                    <option value="U">U</option>
                                </select>
                                <br/>
                                <span>BindingLocation: </span>
                                <input class="form-control form-control-short" ng-model="newConstraint.bindingLocation" type="text" />
                                </span>
                            </td>
                            <td class="col-md-1">
                                <select class="form-control" ng-class="{'form-control-invalid': !newConstraint.trueUsage}" ng-model="newConstraint.trueUsage" ng-options="usage for usage in config.usages" />
                                <span style="color:red;" ng-show="!newConstraint.trueUsage">Empty true usage</span>
                            </td>
                            <td class="col-md-1">
                                <select class="form-control" ng-class="{'form-control-invalid': !newConstraint.falseUsage}" ng-model="newConstraint.falseUsage" ng-options="usage for usage in config.usages" />
                                <span style="color:red;" ng-show="!newConstraint.falseUsage">Empty false usage</span>
                            </td>
                            <td class="col-md-1" align="center">
                                <button class="btn btn-raised btn-primary btn-xxs" ng-click="addPredicate();" ng-disabled="erorrForPredicate(newConstraint, 'datatype')"><span><i class="fa fa-plus fa-fw">
                &nbsp; </i>Add</span></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
                    <thead>
                        <tr class="tbl-header">
                            <th class="col-md-1" style="width: 4.1667%"></th>
                            <th class="col-md-2">Complex Type</th>
                            <th class="col-md-1" style="width: 4.1667%"></th>
                            <th class="col-md-2">First Constraint</th>
                            <th class="col-md-1" style="width: 4.1667%"></th>
                            <th class="col-md-2">Second Constraint</th>
                            <th class="col-md-1">True Usage</th>
                            <th class="col-md-1">False Usage
                                <</th>
                                    <th class="col-md-1"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="col-md-1" style="width: 4.1667%" align="center">
                                <button class="btn btn-raised btn-info btn-xxs" ng-click="initComplexPredicate()"><span><i class="fa fa-refresh fa-fw">
                &nbsp; </i>Reset</span></button>
                            </td>
                            <td class="col-md-2">
                                <select class="form-control" ng-class="{'form-control-invalid': isEmptyCompositeType(compositeType)}" ng-model="compositeType">
                                    <option value="AND">AND</option>
                                    <option value="OR">OR</option>
                                    <option value="IFTHEN">IFTHEN</option>
                                </select>
                                <span style="color:red;" ng-show="isEmptyCompositeType(compositeType)">Empty composite type</span>
                            </td>
                            <td class="col-md-1" align="center" style="width: 4.1667%">
                                <span ng-show="compositeType == 'IFTHEN'">IF</span>
                            </td>
                            <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
                                <span style="color:red;" ng-hide="firstConstraint">Drop the first constraint here!</span>
                                <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
                            </td>
                            <td class="col-md-1" align="center" style="width: 4.1667%">
                                <span ng-show="compositeType == 'AND'">AND</span>
                                <span ng-show="compositeType == 'OR'">OR</span>
                                <span ng-show="compositeType == 'IFTHEN'">THEN</span>
                            </td>
                            <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
                                <span style="color:red;" ng-hide="secondConstraint">Drop the second constraint here!</span>
                                <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
                            </td>
                            <td class="col-md-1">
                                <select class="form-control" ng-class="{'form-control-invalid': !complexConstraintTrueUsage}" ng-model="complexConstraintTrueUsage" ng-options="usage for usage in config.usages" />
                                <span style="color:red;" ng-show="!complexConstraintTrueUsage">Empty true usage</span>
                            </td>
                            <td class="col-md-1">
                                <select class="form-control" ng-class="{'form-control-invalid': !complexConstraintFalseUsage}" ng-model="complexConstraintFalseUsage" ng-options="usage for usage in config.usages" />
                                <span style="color:red;" ng-show="!complexConstraintFalseUsage">Empty true usage</span>
                            </td>
                            <td class="col-md-1" align="center">
                                <button class="btn btn-raised btn-primary btn-xxs" ng-click="addComplexPredicate()">
                                    <span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-primary btn-sm" ng-show="changed" ng-click="saveclose()"><span><i class="fa fa-check fa-fw">
        &nbsp; </i>Save</span></button>
        <button class="btn btn-raised btn-warning btn-sm" ng-show="changed" ng-click="ok()"><span><i class="fa fa-times fa-fw">
        &nbsp; </i>Close</span></button>
        <button class="btn btn-raised btn-warning btn-sm" ng-hide="changed" ng-click="ok()"><span><i class="fa fa-times fa-fw">
        &nbsp; </i>Close</span></button>
    </div>
</script>

<script type="text/ng-template" id="AddTableOpenCtrlLIB.html">
    <div class="page-header">
        <h2 class="modal-title">Add Value Set</h2>
    </div>
    <div class="modal-body">
        <form class="form-horizontal" novalidate>
            <div class="row">
                <div class="col-md-12">
                    <div class="btn-group btn-group-sm pull-left" data-toggle="buttons">
                        <label class="btn btn-raised btn-primary btn-xs" ng-click="source = 'HL7'; listHL7Versions()" ng-class="{'active':source === 'HL7'}">
                            <input ng-disabled="loading" type="radio" ng-value="source" ng-model="$parent.source">From HL7 Standard
                        </label>
                        <label class="btn btn-raised btn-primary btn-xs" ng-click="source = 'PHINVADS'" ng-class="{'active':source === 'PHINVADS'}">
                            <input ng-disabled="loading" type="radio" ng-value="source" ng-model="$parent.source">From PHINVADS
                        </label>
                    </div>
                </div>
                <div ng-show="source==='HL7'" class="col-md-12">
                    <div class="btn-group btn-group-sm pull-left" data-toggle="buttons">
                        <label class="btn btn-raised btn-primary btn-xs" ng-click="selectedHL7Version = vr; loadTablesByVersion(vr)" ng-class="{'active':vr === selectedHL7Version}" ng-repeat="vr in hl7Versions">
                            <input type="radio" ng-value="vr" ng-model="$parent.selectedHL7Version">{{vr}}</input>
                        </label>
                    </div>
                </div>
                <div ng-show="source==='PHINVADS'" class="col-md-12">
                    <input class="form-control" placeholder="type PHINVADS OID" type="text" name="searchText" ng-model="searchText">
                    <button title="Find valueset" type="button" class="btn btn-raised btn-xs btn-info" ng-disabled="oid === null || oid === ''" ng-click="searchPhinvads(searchText)">
                        <span><i class="fa fa-search fa-fw"></i>&nbsp; Serach</span>
                    </button>
                </div>
                <div class="col-md-6" ng-show="source==='PHINVADS'">
                    <div ng-show="loading" style="text-align:center">
                        <i class="fa fa-spinner fa-pulse fa-2x"></i>
                    </div>
                    <div ng-show="!loading" class="igl-table">
                        <h5>Tables from PHINVADS</h5>
                        <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                            <thead>
                                <tr>
                                    <th>Binding Identifier</th>
                                    <th>Name</th>
                                    <th/>
                                </tr>
                                <tr>
                                    <th>
                                        <input ng-model="search.bindingIdentifier" class="form-control" placeholder="by id">
                                    </th>
                                    <th>
                                        <input ng-model="search.name" class="form-control" placeholder="by name">
                                    </th>
                                    <th/>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="table in phinvadsTables | orderBy:'bindingIdentifier' |  filter:search:strict">
                                    <td>{{table.bindingIdentifier}}</td>
                                    <td>{{table.name}}</td>
                                    <td><a class="pointer" ng-click="addTable(table)"><i class="fa fa-plus fa-fw"></i></a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-md-6" ng-show="source==='HL7' && selectedHL7Version !== ''">
                    <div ng-show="loading" style="text-align:center">
                        <i class="fa fa-spinner fa-pulse fa-2x"></i>
                    </div>
                    <div ng-show="!loading" class="igl-table">
                        <h5>Tables for {{source}} {{selectedHL7Version}}</h5>
                        <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                            <thead>
                                <tr>
                                    <th>Binding Identifier</th>
                                    <th>Name</th>
                                    <th/>
                                </tr>
                                <tr>
                                    <th>
                                        <input ng-model="search.bindingIdentifier" class="form-control" placeholder="by id">
                                    </th>
                                    <th>
                                        <input ng-model="search.name" class="form-control" placeholder="by name">
                                    </th>
                                    <th/>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="table in hl7Tables | orderBy:'bindingIdentifier' |  filter:search:strict">
                                    <td>{{table.bindingIdentifier}}</td>
                                    <td>{{table.name}}</td>
                                    <td><a class="pointer" ng-click="addTable(table)"><i class="fa fa-plus fa-fw"></i></a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-md-6" ng-show="selectedTables.length > 0">
                    <div class="igl-table">
                        <h5>Selected tables</h5>
                        <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                            <thead>
                                <tr>
                                    <th>Binding Identifier</th>
                                    <th>Name</th>
                                    <th>soruce</th>
                                    <th>oid</th>
                                    <th/>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="table in selectedTables">
                                    <td>{{table.bindingIdentifier}}</td>
                                    <td>{{table.name}}</td>
                                    <td>{{table.source}}</td>
                                    <td>{{table.oid}}</td>
                                    <td><a class="pointer" ng-click="deleteTable(table)"><i
                                        class="fa fa-times fa-fw"></i></a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-primary btn-sm" ng-show="selectedTables.length > 0" ng-disabled="loading" ng-click="save()"><span><i
                class="fa fa-plus fa-fw">&nbsp; </i>Save</span></button>
        <button class="btn btn-raised btn-warning btn-sm" ng-show="selectedTables.length > 0" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Close</span></button>
        <button class="btn btn-raised btn-warning btn-sm" ng-show="selectedTables.length === 0" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Close</span></button>
    </div>
</script>
<script type="text/ng-template" id="RichTextCtrl.html">
    <div class="modal-header modal-wide">
        <h3 class="modal-title">{{editorTarget.obj.position}} . {{editorTarget.obj.name}} :
            {{editorTarget.title}}</h3>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-md-12">
                <div ng-if="!editorTarget.disabled">
                    <textarea froala="froalaEditorOptions" ng-model="editorTarget.obj[editorTarget.key]" id="globalEditor" name="content" ng-change="recordChanged()"></textarea>
                </div>
                <div ng-if="editorTarget.disabled">
                    <div froala-view="editorTarget.obj[editorTarget.key]"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-primary" ng-click="close()"><span><i class="fa fa-times fa-fw">
            &nbsp; </i>Close</span>
        </button>
    </div>
</script>
<script type="text/ng-template" id="AddBindingForValueSetINLIB.html">
    <div class="modal-header">
        <h3 class="modal-title">Add Binding for Value Set : {{::table.bindingIdentifier}}</h3>
    </div>
    <div class="modal-body" ng-init="init()">
        <div>
            <table class="table table-striped table-bordered table-condensed">
                <thead>
                <tr class="tbl-header">
                    <th class="col-md-3">Datatype</th>
                    <th class="col-md-3">Component</th>
                    <th class="col-md-3">Binding Location</th>
                    <th class="col-md-3">Binding Strength</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td class="col-md-3">
                        <select ng-model='selectedDatatypeForBinding' class="form-control" ng-change="selectDatatype();" ng-options="dt as getDatatypeLabel(dt) for dt in datatypes | filter:{ status : 'PUBLISHED' }" />
                    </td>
                    <td class="col-md-3">
                        <select ng-show='selectedDatatypeForBinding != null' ng-model='selectedComponentForBinding' class="form-control">
                            <option ng-repeat="c in selectedDatatypeForBinding.components | orderBy:'+position'" value="{{c}}" ng-disabled="checkDuplicated(getDatatypeLabel(selectedDatatypeForBinding) + '.' + c.position)">
                                {{::c.position}}. {{::c.name}}
                            </option>
                        </select>
                    </td>
                    <td class="col-md-3">
                        <select ng-show="selectedComponentForBinding != null" class="form-control" ng-model="selectedBindingLocation">
                            <option ng-repeat="component in datatypesMap[selectedFieldForBinding.datatype.id].components |orderBy:'+position'" value="{{component.position}}">
                                {{::getDatatypeLabel(datatypesMap[selectedFieldForBinding.datatype.id])}}.{{::component.position}} ({{::component.name}})
                            </option>
                        </select>
                    </td>
                    <td class="col-md-3">
                        <select ng-show="selectedComponentForBinding != null" class="form-control" ng-model="selectedBindingStrength">
                            <option value="R">Required</option>
                            <option value="S">Suggested</option>
                            <option value="U">Undermined</option>
                        </select>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-info btn-sm" ng-disabled="selectedComponentForBinding == null && selectedFieldForBinding == null" ng-click="save(bindingTargetType)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>ADD</span>
        </button>
    </div>
</script>
