<style id="antiClickjack">
    body {
        display: none !important;
    }
</style>
<script type="text/javascript">
    if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
    } else {
        top.location = self.location;
    }
</script>
<script type="text/ng-template" id="EditProfileComponent.html">
    <div ng-show="isAuthenticated()" ng-controller="ListProfileComponentCtrl" ng-cloak>
        <div ng-show="!isPending()">
            <div style="padding-top:10px">
                <div style="margin:5px">
                    <div class="page-header" style="margin-bottom: 20px">
                        <span class="header4">Profile Component: {{profileComponent.name}} </span>
                        <div class="pull-right">
                            <md-button ng-disabled="editForm.$invalid||!editForm.$dirty||viewSettings.tableReadonly||editForm.$pristine" title="Save Changes" type="button"
                                    class="btn btn-raised btn-sm btn-success" ng-click="save()">
                                <span><i class="fa fa-check fa-fw"></i> Save</span>
                            </md-button>
                            <!--<md-button ng-click="print(editForm)">-->
                                <!--<span><i class="fa fa-check fa-fw"></i> print</span>-->
                            <!--</md-button>-->
                        </div>
                    </div>
                    <div class="static_info">
                        <i class="fa fa-calendar" aria-hidden="true"></i> Updated {{profileComponent.dateUpdated | date:dateFormat}}
                    </div>
                    <md-tabs md-dynamic-height md-border-bottom md-selected="tabStatus.active">
                        <md-tab>
                            <md-tab-label>
                                <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i> MetaData
                            </md-tab-label>
                            <md-tab-body>
                                <div style="margin-top: 20px" ng-cloak class="md-inline-form metadata-scroll" layout="column">
                                    <md-content layout-padding>
                                        <label class="input-left igamt-label">Name*</label>

                                        <md-input-container class="md-block igamt-input-block" flex-gt-sm>
                                            <input type="text" name="name" ng-model="profileComponent.name" required ng-disabled="viewSettings.tableReadonly">
                                            <div role="alert"  style="color:red" ng-if="isDuplicated(profileComponent,profileComponents)">
                                                <div class="my-message">Name is already used.</div>
                                            </div>
                                        </md-input-container>

                                        <label class="input-left igamt-label" ng-show="!viewSettings.tableReadonly">Author Notes</label>

                                        <div ng-if="!viewSettings.tableReadonly">
                                            <textarea froala="froalaEditorOptions" ng-model="profileComponent.authorNotes" name="text" id="authorNotes"></textarea>
                                        </div>
                                        <div ng-if="viewSettings.tableReadonly">
                                            <div class="fr-view">
                                                <div froala-view="profileComponent.authorNotes"></div>
                                            </div>
                                        </div>
                                </div>
                            </md-tab-body>
                        </md-tab>
                        <md-tab>
                            <md-tab-label>
                                <i class="fa fa-table fa-fw" aria-hidden="true"></i>Definition
                            </md-tab-label>
                            <md-tab-body>
                                <div style="margin-top: 20px" class="">

                                    <md-tabs md-dynamic-height md-border-bottom md-selected="defTabStatus.active">
                                        <md-tab>
                                            <md-tab-label>
                                                <span>Pre-Text</span>
                                            </md-tab-label>
                                            <md-tab-body>

                                        <div  class="panel-primary">
                                            <div class="panel-body">
                                                <div ng-if="!viewSettings.tableReadonly">
                                                    <textarea ng-disabled="viewSettings.tableReadonly" froala="froalaEditorOptions" ng-model="profileComponent.defPreText" name="text" id="defPreText"></textarea>

                                                </div>
                                                <div class="fr-view" ng-if="viewSettings.tableReadonly">
                                                    <div froala-view="profileComponent.defPreText"></div>
                                                </div>

                                            </div>
                                        </div>
                                            </md-tab-body>
                                        </md-tab>

                                        <md-tab>
                                            <md-tab-label>
                                                <span>Structure</span>
                                            </md-tab-label>
                                            <md-tab-body>
                                                <div layout="column">
                                                    <div flex layout="row" layout-align="start start">
                                                        <div class="table-context">
                                                            <strong> Context :</strong>
                                                            <span class="label-message-icon"><i class="fa fa-circle fa-fw"/></span>
                                                            message
                                                            <span class="label-field-icon"><i class="fa fa-circle fa-fw"/></span>
                                                            segment
                                                            <span class="label-component-icon"><i class="fa fa-circle fa-fw"/></span>
                                                            Field
                                                            <span class="label-sub-component-icon"><i class="fa fa-circle fa-fw"/></span>
                                                            Component
                                                        </div>
                                                        <div flex class="pull-right">
                                                                <button ng-click="addPComponents()" class="btn btn-sm btn-raised menu-table-add pull-right">
                                                                    <i class="fa fa-plus fa-fw"></i> Add Items
                                                                </button>
                                                        </div>

                                                    </div>
                                                </div>

                                        <div class="panel-primary">

                                            <div class="panel-body">
                                                <div>
                                                    <div class="col-md-12" ng-show="profileComponent.children.length>0" style="overflow-y:auto;">
                                                        <table class="table table-bordered table-fix-header table-condensed profile-table">
                                                            <thead>
                                                            <tr class="tbl-header">
                                                                <th class="col-md-1 col-fixed-250" rowspan="2">Position</th>
                                                                <th class="col-md-1 col-fixed-250" rowspan="2">Location</th>
                                                                <th>Name</th>
                                                                <th class="col-md-2 col-fixed-80" rowspan="2">Usage</th>
                                                                <th class="col-md-1 col-fixed-100" rowspan="2">Cardinality</th>
                                                                <th class="col-md-1 col-fixed-100" rowspan="2">Length</th>
                                                                <th class="col-md-1 col-fixed-30" rowspan="2" ng-show="showConfLength()"> ConfLength</th>
                                                                <th class="col-md-2 col-fixed-350" rowspan="2">Data Type</th>
                                                                <th class="col-md-1 col-fixed-330" rowspan="2">ValueSet/Single Code</th>
                                                                <th class="col-md-1 col-fixed-330" rowspan="2">Constant Value</th>
                                                                <th class="col-md-1" ng-style="predWidthx" rowspan="2">Predicate</th>
                                                                <th class="col-md-1" ng-style="csWidthx" rowspan="2">Conformance Statement</th>
                                                                <th rowspan="2">Dynamic Mapping</th>
                                                                <th rowspan="2">CoConstraints</th>
                                                                <th class="col-md-1 col-fixed-80" rowspan="2">Definition Text</th>
                                                                <th class="col-md-1" ng-style="commentWidth" rowspan="2">Comment</th>
                                                                <th class="col-md-1" ng-style="commentWidth" rowspan="2">Action</th>
                                                            </tr>

                                                            </thead>
                                                            <tbody dnd-list="profileComponent.children">
                                                            <tr ng-repeat="node in profileComponent.children" dnd-draggable="node" dnd-moved="profileComponent.children.splice($index, 1);updatePosition();">
                                                                <td class="col-md-1 col-fixed-250">
                                                                    <span ng-click="printNode(node)" ng-bind="node.position"></span>
                                                                </td>
                                                                <td class="col-md-1 col-fixed-250">
                                                                    <span ng-if="node.type=='datatype'" class="label label-default label-icon">D</span>
                                                                    <span ng-if="node.type=='group'" class="label label-success label-icon">G</span>
                                                                    <span ng-if="node.type=='message'" class="label label-success label-icon">M</span>
                                                                    <span ng-if="node.type=='segmentRef'||node.type=='segment'" class="label label-segment label-icon">S</span>
                                                                    <span class="label label-field label-icon" ng-if="node.type==='field'">F</span>
                                                                    <span class="label label-component label-icon" ng-if="node.type==='component'">C</span>
                                                                    <span ng-bind="node.path"></span>
                                                                </td>
                                                                <td ng-class="{'input-change ':node.attributes.ref.id!==node.attributes.oldRef.id,'':node.attributes.ref.id===node.attributes.oldRef.id}" ng-if="node.type==='segment' || node.type==='segmentRef'">
                                                                        <!--<display-label of="segmentsMap[node.source.segmentId]" desc="false"></display-label>-->

                                                                        <!--<span title="Change Segment" ng-click="editRef(node)" ng-if="!viewSettings.tableReadonly">-->
                                                                                    <!--<i class="fa fa-pencil fa-fw edit-icon"></i>-->

                                                                        <!--</span>-->
                                                                     <!--<md-select ng-disabled="viewSettings.tableReadonly" ng-model="node.attributes.ref" ng-show="editableRef===node.id"-->
                                                                               <!--ng-change="selectFlavor()" placeholder="Select Flavor"-->
                                                                        <!--<md-option ng-repeat="seg in segFlavors" ng-value="seg">-->
                                                                            <!--<display-label of="segmentsMap[seg.id]" desc="false"></display-label>-->
                                                                        <!--</md-option>-->
                                                                     <!--</md-select>-->

                                                                    <!--<a ng-show="editableRef===node.id && !viewSettings.tableReadonly" ng-click="backRef()" class="point">-->
                                                                        <!--<span><i class="glyphicon glyphicon-remove"></i></span>-->
                                                                    <!--</a>-->
                                                                    <ng-form name="innerForm" class="form-inline" ng-controller="FormRowCtrl" ng-init="init(node)">
                                                                    <div>
                                                                                <span class="badge label-white" ng-show="editableRef!==node.id" style="text-align:left">
                                                                                    <display-label of="segmentsMap[node.attributes.ref.id]" desc="false"></display-label>
                                                                                    <span title="Change segment" ng-click="editRef(node)" ng-if="!viewSettings.tableReadonly && node.from !== 'message'">
                                                                                    <i class="fa fa-pencil fa-fw edit-icon"></i></span>
                                                                                </span>
                                                                        <div ng-if="editableRef===node.id" style="text-align:left">
                                                                            <md-select placeholder="Select Segment" ng-model="node.attributes.ref" ng-change="selectFlavor(node)" ng-disabled="viewSettings.tableReadonly">
                                                                                <md-option ng-repeat="seg in segFlavors" ng-value="seg">
                                                                                <display-label of="segmentsMap[seg.id]" desc="false"></display-label>
                                                                                </md-option>
                                                                            </md-select>
                                                                        </div>
                                                                        <div align="center">
                                                                            <a ng-show="editableRef===node.id && !viewSettings.tableReadonly" ng-click="backRef()" class="point" >
                                                                                <span><i class="glyphicon glyphicon-remove"></i></span>
                                                                            </a>
                                                                        </div>
                                                                    </div>
                                                                    </ng-form>




                                                                </td>
                                                                <td class="col-md-2 col-fixed-40" ng-if="node.type !== 'segment' &&  node.type !== 'segmentRef'">
                                                                    <span ng-bind="node.name"></span>
                                                                </td>
                                                                <td ng-class="{'col-md-2 col-fixed-80 select-change':node.attributes.usage,'col-md-2 col-fixed-80':!node.attributes.usage,'emptyCol':node.type==='message'}">
                                                                    <div ng-if="node.usage !== 'C'  || (node.usage === 'C' && !findPredicate(node))" ng-hide="node.type==='message'">
                                                                        <md-select ng-disabled="viewSettings.tableReadonly" ng-init="initUsage(node)"
                                                                                   placeholder="Select Usage"
                                                                                   name="usage" id="usage"
                                                                                   class="inside-table"
                                                                                   ng-change="updateUsage(node);"
                                                                                   ng-if="node.from !== 'segment' || node.type !== 'segmentRef'"
                                                                                   required
                                                                                   ng-model="node.usage">
                                                                            <md-option ng-repeat="usage in config.usages" ng-value="usage">
                                                                                {{usage}}
                                                                            </md-option>
                                                                        </md-select>
                                                                        <!--<md-select ng-init="initUsage(node)"-->
                                                                                   <!--placeholder="Select Usage"-->
                                                                                   <!--name="usage"-->
                                                                                   <!--id="usage"-->
                                                                                   <!--class="inside-table"-->
                                                                                   <!--ng-change="updateUsage(node);"-->
                                                                                   <!--ng-if="node.from === 'segment' && node.type === 'segmentRef'"-->
                                                                                   <!--required-->
                                                                                   <!--ng-model="node.usage" ng-disabled="viewSettings.tableReadonly">-->
                                                                            <!--<md-option ng-repeat="usage in config.usages" ng-disabled="usage === 'C'" ng-value="usage">-->
                                                                                <!--{{usage}}-->
                                                                            <!--</md-option>-->
                                                                        <!--</md-select>-->
                                                                    </div>
                                                                    <span ng-if="node.usage === 'C' && findPredicate(node) != null && findPredicate(node) != undefined" class="badge label-white">
                                                                        <span>C({{findPredicate(node).trueUsage}}/{{findPredicate(node).falseUsage}})</span>
                                                                    </span>
                                                                    <a ng-show="node.attributes.usage && !findPredicate(node)" ng-click="cancelUsage(node)" ng-if="!viewSettings.tableReadonly"><i class="fa fa-remove fa-fw"></i></a>
                                                                </td>
                                                                <td class="col-md-1 col-fixed-100" ng-class="{'emptyCol': node.usage == 'X' || node.type==='component'|| node.type==='message', 'input-change':node.usage != 'X' && (node.attributes.min || node.attributes.max)}">
                                                                    <div ng-show="node.usage != 'X' && node.type!=='component' && node.type!=='message' && (node.from !== 'segment'|| node.type !== 'segmentRef')" class="form-inline" layout="row" layout-align="center center" >
                                                                        <md-input-container flex="50" class="withoutMargin">
                                                                            <input ng-disabled="viewSettings.tableReadonly" aria-label="minC" style="width:50px;"
                                                                                   name="min" type="text"
                                                                                   ng-init="initMinCard(node)"
                                                                                   ng-change="updateMinCard(node);"
                                                                                   ng-pattern="/^\d+$/"
                                                                                   ng-model="node.min"
                                                                                   ng-minlength="1"/>
                                                                        </md-input-container>
                                                                        <md-input-container flex="50" class="withoutMargin">
                                                                            <input ng-disabled="viewSettings.tableReadonly" aria-label="MaxC" style="width:50px;"
                                                                                   type="text" name="max"
                                                                                   ng-init="initMaxCard(node)"
                                                                                   ng-change="updateMaxCard(node);"
                                                                                   ng-pattern="/^\d+$|^\*?$/"
                                                                                   ng-model="node.max">
                                                                        </md-input-container>
                                                                        <a  ng-if="!viewSettings.tableReadonly" class="point" ng-show="node.attributes.min || node.attributes.max" ng-click="cancelCard(node)"><i class="fa fa-remove fa-fw"></i></a>
                                                                    </div>
                                                                </td>
                                                                <td classs="col-md-1 col-fixed-100" ng-class="{'emptyCol': node.usage == 'X' || (node.type!=='field' && node.type!=='component') || datatypesMap[node.datatype.id].components.length > 0, 'input-change ': node.usage != 'X' && (node.attributes.minLength || node.attributes.maxLength)}">
                                                                    <div ng-show="node.usage != 'X' && (node.type==='field' || node.type==='component') && datatypesMap[node.datatype.id].components.length == 0">
                                                                        <div ng-if="node.attributes.minLength !== 'NA' && node.attributes.maxLength !== 'NA' && node.minLength !== 'NA' && node.maxLength !== 'NA'" class="form-inline" layout="row" layout-align="center center">
                                                                            <md-input-container flex="50" class="withoutMargin">
                                                                                <input  ng-disabled="viewSettings.tableReadonly" aria-label="minL"
                                                                                       style="width:50px;"
                                                                                       name="minLength"
                                                                                       ng-init="initMinL(node)"
                                                                                       ng-change="updateMinL(node);"
                                                                                       ng-pattern="/^\d+$|^NA$/"
                                                                                       ng-model="node.minLength"
                                                                                       ng-minlength="1">
                                                                            </md-input-container>
                                                                            <md-input-container flex="50" class="withoutMargin">
                                                                                <input ng-disabled="viewSettings.tableReadonly" aria-label="maxL" type="text"
                                                                                       name="maxLength"
                                                                                       style="width:50px;"
                                                                                       ng-init="initMaxL(node)"
                                                                                       ng-change="updateMaxL(node);"
                                                                                       ng-pattern="/^\d+$|^\*?$|^NA$/"
                                                                                       ng-model="node.maxLength">
                                                                            </md-input-container>
                                                                            <a title="Reset to base values" ng-show="node.attributes.minLength || node.attributes.maxLength" ng-click="cancelL(node)" ng-if="!viewSettings.tableReadonly"><i class="fa fa-remove fa-fw"></i></a>
                                                                            <a title="Set to NA" ng-show="!node.attributes.minLength && !node.attributes.maxLength" ng-click="clearL(node)" ng-if="!viewSettings.tableReadonly"><i class="fa fa-remove fa-fw"></i></a>
                                                                        </div>
                                                                        <div ng-if="node.attributes.minLength === 'NA' || node.attributes.maxLength === 'NA' || node.minLength === 'NA' || node.attributes.maxLength === 'NA'">
                                                                            <span ng-if="!viewSettings.tableReadonly" ng-click="editL(node)" class="point">NA <i class="fa fa-pencil fa-fw edit-icon"></i></span>
                                                                        </div>
                                                                    </div>
                                                                </td>
                                                                <td ng-show="showConfLength()" class="col-md-1 col-fixed-30" ng-class="{'emptyCol':node.usage == 'X' || (node.type!=='field' && node.type!=='component') || datatypesMap[node.datatype.id].components.length > 0, 'input-change': node.usage != 'X' && node.attributes.confLength}">
                                                                    <div ng-show="node.usage != 'X' && (node.type==='field' || node.type==='component') && datatypesMap[node.datatype.id].components.length == 0">
                                                                        <div ng-if="node.attributes.confLength !== 'NA' && node.confLength !== 'NA'" class="form-inline" layout="row" layout-align="center center">
                                                                            <md-input-container flex="100" class="withoutMargin">
                                                                                <input  ng-disabled="viewSettings.tableReadonly" aria-label="conf"
                                                                                       name="confLength"
                                                                                       style="width:50px;"
                                                                                       ng-init="initConfL(node)"
                                                                                       ng-change="updateConfL(node);"
                                                                                       ng-pattern="confLengthPattern"
                                                                                       ng-model="node.confLength">
                                                                            </md-input-container>
                                                                            <a title="Reset to base values" ng-show="node.attributes.confLength" ng-click="cancelConfL(node)" ng-if="!viewSettings.tableReadonly"><i class="fa fa-remove fa-fw"></i></a>
                                                                            <a title="Set to NA" ng-show="!node.attributes.confLength" ng-click="clearConfL(node)" ng-if="!viewSettings.tableReadonly"><i class="fa fa-remove fa-fw"></i></a>
                                                                        </div>
                                                                        <div ng-if="node.attributes.confLength === 'NA' || node.confLength === 'NA'">
                                                                            <span ng-click="editConfL(node)" class="point" ng-if="!viewSettings.tableReadonly">NA <i class="fa fa-pencil fa-fw edit-icon"></i></span>
                                                                        </div>
                                                                    </div>
                                                                </td>

                                                                <td ng-class="{'col-md-2 col-fixed-350 input-change ':node.attributes.datatype,'col-md-2 col-fixed-350':!node.attributes.datatype}">
                                                                    <div ng-if="node.type==='field' || node.type==='component'">
                                                                        <ng-form name="innerForm" class="form-inline" ng-controller="FormRowCtrl" ng-init="initDatatype(node)">
                                                                            <div ng-if="node.datatype != null && datatypesMap[node.datatype.id] != null && datatypesMap[node.datatype.id] != undefined">
                                                                                <span class="badge label-white" ng-show="editableDT!==node.id" style="text-align:left">
                                                                                    <display-label of="datatypesMap[node.datatype.id]" desc="false" ng-click="redirectDT(datatypesMap[node.datatype.id])"></display-label>
                                                                                    <span title="Change Datatype" ng-click="editDatatype=true;editDT(node)" ng-if="!viewSettings.tableReadonly">
                                                                                    <i class="fa fa-pencil fa-fw edit-icon"></i></span>
                                                                                </span>
                                                                                <div ng-if="editableDT===node.id" style="text-align:left">
                                                                                    <md-select placeholder="Select Data type" ng-model="node.datatype" ng-change="selectDT(node)" ng-controller="FormRowCtrl" ng-init="init(node)" ng-disabled="viewSettings.tableReadonly">
                                                                                        <md-option ng-value="datatype" ng-repeat="datatype in datatypes">
                                                                                            <display-label of="datatypesMap[datatype.id]" desc="false"></display-label>
                                                                                        </md-option>
                                                                                    </md-select>
                                                                                </div>
                                                                                <div align="center">
                                                                                    <a ng-show="editableDT===node.id && !viewSettings.tableReadonly" ng-click="backDT()" class="point" >
                                                                                        <span><i class="glyphicon glyphicon-remove"></i></span>
                                                                                    </a>
                                                                                    <a ng-show="node.attributes.datatype" ng-show="node.datatype && editableDT!==node.id&&viewSettings.tableReadonly" ng-click="editDatatype=false;cancelDatatype(node)" class="point">
                                                                                        <span><i class="glyphicon glyphicon-remove"></i></span>
                                                                                    </a>
                                                                                </div>
                                                                            </div>
                                                                        </ng-form>
                                                                    </div>
                                                                </td>
                                                                <td ng-class="{'col-md-1 col-fixed-330 emptyCol':!isAvailableForValueSet(node),'col-md-1 col-fixed-330 input-change':(node.valueSetBindings && node.valueSetBindings.length>0)}" style="text-align:center">
                                                                    <div ng-show="isAvailableForValueSet(node)">
                                                                        <div ng-repeat="binding in findingBindingsPc(node)">
                                                                            <span class="badge label-white">
                                                                                <span ng-class="{'label-message-icon' : binding.bindingFrom == 'message', 'label-field-icon' : binding.bindingFrom == 'segment', 'label-component-icon' : binding.bindingFrom == 'field', 'label-sub-component-icon' : binding.bindingFrom == 'component'}"><i class="fa fa-circle fa-fw"/></span>
                                                                                <span title="For {{getValueSetContext(node)}}" ng-show="binding.type == 'valueset'" ng-click="redirectVS(binding)">{{getTableLabel(binding)}}</span>
                                                                            </span>
                                                                            <span title="For {{getValueSetContext(node)}}" ng-show=" binding.type == 'singlecode'" ng-click="redirectVS(binding)">{{binding.code.value}}
                                                                                <i class="fa fa-arrow-right" aria-hidden="true"></i>[{{binding.code.codeSystem}}]
                                                                            </span>
                                                                        </div>
                                                                        <a class="point" ng-if="!viewSettings.tableReadonly">
                                                                            <span ng-click="editModalBindingForMsg(node)" ng-if="!viewSettings.tableReadonly"><i class="fa fa-pencil fa-fw edit-icon"></i></span>
                                                                            <a ng-show="node.valueSetBindings && node.valueSetBindings.length>0" ng-click="cancelBinding(node)"  ng-if="!viewSettings.tableReadonly"><i class="fa fa-remove fa-fw"></i></a>
                                                                        </a>
                                                                    </div>
                                                                </td>
                                                                <td ng-class="{'emptyCol':!isAvailableConstantValue(node),'input-change':(node.singleElementValues && node.singleElementValues.location)}" style="text-align:center">
                                                                    <div ng-init="initSev(node)" ng-show="isAvailableConstantValue(node)">
                                                                        <div>
                                                                            <span ng-show="node.sev" class="badge label-white">
                                                                                <span ng-show="node.sev.value!=='' && node.sev.value!==null" ng-class="{'label-message-icon' : node.from == 'message', 'label-field-icon' : node.from == 'segment'}"><i class="fa fa-circle fa-fw"/></span>
                                                                                <span>{{node.sev.value}}</span>
                                                                                <span ng-show="node.sev.value!=='' && node.sev.value!==null&&!viewSettings.tableReadonly" title="Edit SingleElement" ng-click="openDialogForEditSev(node)">
                                                                                    <i class="fa fa-pencil fa-fw edit-icon"></i>
                                                                                </span>
                                                                                <span ng-show="node.singleElementValues && node.singleElementValues.location&&!viewSettings.tableReadonly" title="Cancel SingleElement" ng-click="cancelSev(node)">
                                                                                    <i class="fa fa-times fa-fw edit-icon"></i>
                                                                                </span>
                                                                            </span>
                                                                            <a  ng-show="(!node.sev || !node.sev.value)&&!viewSettings.tableReadonly" class="point" ng-click="openDialogForEditSev(node)">
                                                                                <span><i class="fa fa-plus fa-fw"></i></span>
                                                                            </a>
                                                                        </div>
                                                                    </div>
                                                                </td>
                                                                <td ng-class="{'has-error': node.usage === 'C' && !findPredicate(node) , 'emptyCol':node.usage !== 'C','input-change':node.attributes.predicate}">
                                                                    <div>
                                                                        <div ng-show="node.usage==='C' && !findPredicate(node) && node.from==='message'">
                                                                            <a ng-if="!viewSettings.tableReadonly" ng-click="openDialogPCMessagePredicate(node)" class="point">
                                                                                <span><i class="fa fa-plus fa-fw"></i></span>
                                                                                <p class="warning">Need predicate</p>
                                                                            </a>
                                                                        </div>
                                                                        <div ng-show="node.usage==='C' && !findPredicate(node) && node.from==='segment'">
                                                                            <a ng-if="!viewSettings.tableReadonly" ng-click="openDialogPCSegmentPredicate(node)"
                                                                               class="point">
                                                                                <span><i class="fa fa-plus fa-fw"></i></span>
                                                                                <p class="warning">Need predicate</p>
                                                                            </a>
                                                                        </div>
                                                                        <div ng-show="node.usage==='C' && findPredicate(node)">
                                                                            <span title="{{getPredicateAsString(findPredicate(node))}}" class="badge label-white">
                                                                                <span ng-class="{'label-message-icon' : findPredicate(node).context.type === 'message', 'label-field-icon' : findPredicate(node).context.type === 'segment','label-component-icon':findPredicate(node).context.type === 'field', 'label-sub-component-icon' : findPredicate(node).context.type === 'component'}">
                                                                                    <i class="fa fa-circle fa-fw"></i>
                                                                                </span>
                                                                                <span ng-show="node.from==='segment'">
                                                                                    {{getConstraintAsTruncatedString(findPredicate(node), 15)}}
                                                                                    <i class="fa fa-pencil fa-fw edit-icon" ng-show="findPredicate(node).context.type === 'segment'&&!viewSettings.tableReadonly" ng-click="openDialogPCSegmentPredicate(node)"></i>
                                                                                </span>
                                                                                <span ng-show="node.from==='message'">
                                                                                    {{getConstraintAsTruncatedString(findPredicate(node), 15)}}
                                                                                    <i class="fa fa-pencil fa-fw edit-icon" ng-show="findPredicate(node).context.type === 'message'&&!viewSettings.tableReadonly" ng-click="openDialogPCMessagePredicate(node)"></i>
                                                                                </span>
                                                                                <span ng-show="node.attributes.predicate &&!viewSettings.tableReadonly" ng-click="cancelPredicate(node)">
                                                                                    <i class="fa fa-times fa-fw edit-icon"></i>
                                                                                </span>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </td>
                                                                <td style="text-align:center" ng-class="{'emptyCol':(node.type!=='message' && node.type!=='group' && node.type!=='segment' && node.type!=='segmentRef'),'input-change': node.attributes.conformanceStatements}">
                                                                    <span>
                                                                        <a ng-click="openDialogPCMessageConformanceStatements(node)" class="point" ng-if="node.type==='message' || node.type==='group' || node.type==='segment'">
                                                                            <span ng-if="findingConfSt(node)">{{findingConfSt(node).length}}</span>
                                                                            <i class="fa fa-pencil fa-fw" ng-if="(findingConfSt(node) && findingConfSt(node).length>0)&&!viewSettings.tableReadonly"></i>
                                                                            <i class="fa fa-plus fa-fw" ng-if="!(findingConfSt(node) && findingConfSt(node).length>0)&&!viewSettings.tableReadonly"></i>
                                                                        </a>
                                                                        <a ng-click="openDialogPCSegmentConformanceStatements(node)" class="point" ng-if="node.type==='segmentRef'&&!viewSettings.tableReadonly">
                                                                            <span ng-if="findingConfSt(node)">{{findingConfSt(node).length}}</span>
                                                                            <i class="fa fa-pencil fa-fw" ng-if="(findingConfSt(node) && findingConfSt(node).length>0)&&!viewSettings.tableReadonly"></i>
                                                                            <i class="fa fa-plus fa-fw" ng-if="!(findingConfSt(node) && findingConfSt(node).length>0)&&!viewSettings.tableReadonly"></i>
                                                                        </a>
                                                                        <i ng-click="cancelConfSt(node)" ng-show="node.attributes.conformanceStatements&&!viewSettings.tableReadonly" class="fa fa-times fa-fw"></i>
                                                                    </span>
                                                                </td>
                                                                <td ng-class="{'emptyCol':!hasDynamicMapping(node),'input-change':node.attributes.dynamicMappingDefinition}">
                                                                    <span ng-show="hasDynamicMapping(node)">
                                                                        <a class="point">
                                                                            <i ng-click="openAddDynamicMappingDialog(node,'edit')" ng-if="!viewSettings.tableReadonly" class="fa fa-pencil fa-fw"/>
                                                                            <i ng-show="node.attributes.dynamicMappingDefinition&&viewSettings.tableReadonly" ng-click="openAddDynamicMappingDialog(node,'see')" class="fa fa-eye fa-fw"/>

                                                                            <i ng-click="cancelDynMap(node)" ng-show="node.attributes.dynamicMappingDefinition&&!viewSettings.tableReadonly" class="fa fa-times fa-fw"/>
                                                                        </a>
                                                                    </span>
                                                                </td>
                                                                <td ng-class="{'emptyCol':!hasCoConstraints(node),'input-change':node.attributes.coConstraintsTable}">
                                                                    <span ng-show="hasCoConstraints(node)">
                                                                        <a class="point">
                                                                            <i ng-click="openAddCoConstraintsDialog(node,'edit')" ng-if="!viewSettings.tableReadonly" class="fa fa-pencil fa-fw"></i>
                                                                            <i ng-if="!node.attributes.coConstraintsTable&&viewSettings.tableReadonly" ng-click="openAddCoConstraintsDialog(node,'see')" class="fa fa-eye fa-fw"></i>

                                                                            <i ng-click="cancelCoCon(node)" ng-show="node.attributes.coConstraintsTable" class="fa fa-times fa-fw"></i>
                                                                        </a>
                                                                    </span>
                                                                </td>
                                                                <td class="col-md-1 col-fixed-80 emptyCol" ng-if="node.type!=='field' && node.type!=='component'">
                                                                </td>
                                                                <td class="col-md-1 col-fixed-80" ng-class="{'input-change':(node.attributes.text && node.attributes.text !== '' && node.attributes.text !== null)}" ng-if="node.type==='field' || node.type==='component'">
                                                                    <a ng-click="addDefText(node)" class="point" ng-if="!viewSettings.tableReadonly">
                                                                        <i class="fa fa-pencil fa-fw" ng-if="node.attributes.text && node.attributes.text !== '' && node.attributes.text !== null"></i>
                                                                        <i class="fa fa-plus fa-fw" ng-if="!node.attributes.text || node.attributes.text === '' || node.attributes.text === null"></i>
                                                                    </a>
                                                                    <a ng-click="cancelDefText(node)" ng-show="node.attributes.text && node.attributes.text !== '' && node.attributes.text !== null&&!viewSettings.tableReadonly">
                                                                        <i class="fa fa-times fa-fw"></i>
                                                                    </a>
                                                                </td>
                                                                <td style="text-align:center" ng-class="{'input-change':(node.comments && node.comments.length>0),'emptyCol':node.type==='message'}">
                                                                    <div ng-repeat="comment in findingCommentsInPC(node)">
                                                                        <span class="badge label-white">
                                                                            <span ng-class="{'label-message-icon' : comment.from == 'message', 'label-field-icon' : comment.from == 'segment', 'label-component-icon' : comment.from == 'field', 'label-sub-component-icon' : comment.from == 'component'}"><i class="fa fa-circle fa-fw"/></span>
                                                                            <span ng-if="!viewSettings.tableReadonly" title="{{comment.description}}@{{comment.lastUpdatedDate|date:dateFormat}}" ng-click="editCommentDlg(node, comment, false, 'compositeProfile')">{{comment.lastUpdatedDate|date:dateFormat}}</span>
                                                                            <span ng-if="viewSettings.tableReadonly" title="{{comment.description}}@{{comment.lastUpdatedDate|date:dateFormat}}">{{comment.lastUpdatedDate|date:dateFormat}}</span>

                                                                        </span>
                                                                    </div>
                                                                    <a class="point" ng-hide="node.type==='message'" ng-if="!viewSettings.tableReadonly">
                                                                        <span ng-click="editCommentDlg(node, null, false, 'message')"><i class="fa fa-plus fa-fw"></i></span>
                                                                        <a ng-if="!viewSettings.tableReadonly" ng-show="node.comments && node.comments.length>0" ng-click="cancelComments(node)"><i class="fa fa-remove fa-fw"></i></a>
                                                                    </a>
                                                                </td>

                                                                <td class="col-md-1" ng-style="commentWidth">
                                                                    <button type="button" ng-if="!viewSettings.tableReadonly"
                                                                            class="btn btn-raised btn-raised btn-xs btn-danger"
                                                                            ng-click="removePcEntry(node)">
                                                                        <span><i class="fa fa-times fa-fw"></i></span>
                                                                    </button>
                                                                </td>
                                                            </tr>
                                                            <tr class="dndPlaceholder">
                                                                <td colspan="13" style="height:20px; background-color:lightgrey">
                                                                    Drop Here
                                                                </td>
                                                            </tr>
                                                            </tbody>
                                                        </table>
                                                        <div class=" panel panel-primary" style="margin-top:10px;" ng-show="showConfSt">
                                                            <div class="panel-heading">Conformance Statements</div>
                                                            <div class="panel-body">
                                                                <span class="pull-right" class="margin-right:5px">
                                                                    <button ng-if="!viewSettings.tableReadonly" title="Add/Edit Conformance Statements" type="button" class="btn btn-raised btn-sm btn-success" ng-click="openAddGlobalConformanceStatementDialog(currentNode)">
                                                                        <span><i class="fa fa-plus fa-fw"></i> Add/Edit Conformance Statements</span>
                                                                    </button>
                                                                </span>
                                                                <div class="col-md-12">
                                                                    <span ng-hide="findingConfSt(currentNode) && findingConfSt(currentNode).length>0">No Conformance statement</span>
                                                                    <div>
                                                                        <span ng-show="currentNode.type =='group'">Group : {{currentNode.name}}</span>
                                                                        <span ng-show="currentNode.type =='message'">Message : {{currentNode.name}}</span>
                                                                        <table st-table="displayedConf" st-safe-src="findingConfSt(currentNode)" class="table table-striped table-bordered">
                                                                            <thead>
                                                                            <tr class="tbl-header">
                                                                                <th st-sort="constraintId" class="col-md-2">ID</th>
                                                                                <th class="col-md-10">Description</th>
                                                                            </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                            <tr ng-repeat="c in displayedConf">
                                                                                <td class="col-md-2">{{c.constraintId}}</td>
                                                                                <td class="col-md-10">{{c.description}}</td>
                                                                            </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                            </md-tab-body>
                                        </md-tab>
                                        <md-tab>
                                            <md-tab-label>
                                                <span>Post-Text</span>
                                            </md-tab-label>
                                            <md-tab-body>
                                        <div class="panel-primary">
                                            <div class="panel-body">
                                                <div ng-if="!viewSettings.tableReadonly">
                                                    <textarea froala="froalaEditorOptions" ng-model="profileComponent.defPostText" name="text" id="defPostText" ng-change="recordChanged()"></textarea>
                                                </div>

                                                <div class="fr-view" ng-if="viewSettings.tableReadonly">
                                                    <div froala-view="profileComponent.defPostText"></div>
                                                </div>

                                            </div>
                                        </div>
                                            </md-tab-body>
                                        </md-tab>
                                    </md-tabs>
                                </div>
                            </md-tab-body>
                        </md-tab>
                        <md-tab>
                            <md-tab-label>
                                <i class="fa fa-link fa-fw" aria-hidden="true"></i>Cross-References
                            </md-tab-label>
                            <md-tab-body>
                                <div style="margin-top: 20px" class="metadata-scroll">
                                    <div class="col-md-12">
                                        <div class="pull-right">
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <table id="applyPcToTable" tt-table tt-params="applyPcToParams" class="table table-bordered table-fix-header table-condensed profile-table">
                                            <thead>
                                            <tr class="tbl-header" style="">
                                                <th class="col-md-3">Composite Profile Name</th>
                                                <th class="col-md-3">Core Profile Name</th>
                                                <th class="col-md-3">Applied Profile Components</th>
                                            </tr>
                                            </thead>
                                            <tbody/>
                                        </table>
                                    </div>
                                </div>
                            </md-tab-body>
                        </md-tab>
                    </md-tabs>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="profileComponentTable">

    <tr tt-node is-branch="false">
        <td class="col-md-1 col-fixed-250">

            <span ng-bind="node.position"></span>
        </td>
        <td class="col-md-1 col-fixed-250">
            <span ng-if="node.type=='datatype'" class="label label-default label-icon">D</span>
            <span ng-if="node.type=='group'" class="label label-success label-icon">G</span>
            <span ng-if="node.type=='segmentRef'||node.type=='segment'" class="label label-segment label-icon">S</span>
            <span class="label label-field label-icon" ng-if="node.type==='field'">F</span>
            <span class="label label-component label-icon" ng-if="node.type==='component'">C</span>

            <span ng-bind="node.path"></span>
        </td>


        <td ng-class="{'col-md-2 col-fixed-40 input-change ':node.attributes.ref.id!==node.attributes.oldRef.id,'col-md-2 col-fixed-40':node.attributes.ref.id===node.attributes.oldRef.id}">
            <div ng-if="node.type==='segment' || node.type==='segmentRef'">
            <span ng-show="editableRef!==node.id && !node.attributes.ref">
                <span>{{node.attributes.oldRef.name}}</span><span
                    ng-if="node.attributes.oldRef.ext && node.attributes.oldRef.ext!==null">_{{node.attributes.oldRef.ext}}</span>
            </span>
                <span ng-show="editableRef!==node.id && node.attributes.ref">
                <span>{{node.attributes.ref.name}}</span><span
                        ng-if="node.attributes.ref.ext && node.attributes.ref.ext!==null">_{{node.attributes.ref.ext}}</span>
            </span>
                <a ng-show="editableRef!==node.id" ng-click="editRef(node)" class="point">
                    <span><i class="fa fa-pencil fa-fw"></i></span>
                </a>
                <select ng-change="selectFlavor(node,segFlavor)" ng-show="editableRef===node.id"
                        class="form-control input-sm" name="flavor" ng-model="segFlavor"
                        ng-options="segFlavor as segFlavor.label for segFlavor in segFlavors"/>
                <a ng-click="cancelRef(node)"><i class="fa fa-remove fa-fw"></i></a>
            </div>
            <div ng-if="node.type!=='segment' &&  node.type!=='segmentRef'">
                <span ng-bind="node.name"></span>
            </div>
        </td>

        <td ng-class="{'col-md-2 col-fixed-80 select-change':node.attributes.usage,'col-md-2 col-fixed-80':!node.attributes.usage}">
            <!--<a ng-click="edit=true;" ng-hide="edit || node.attributes.usage"><i class="fa fa-plus fa-fw"></i></a>-->
            <!--<select ng-change="recordChanged()" class="form-control input-sm" ng-model="node.attributes.usage" name="usage" ng-options="usage for usage in config.usages" ng-selected="node.attributes.oldUsage" style="width: auto;">-->
            <!--</select> ng-selected="node.attributes.usage===null && node.attributes.oldUsage===usage"-->
            <select ng-init="initUsage(node)" name="usage" ng-change="updateUsage(node);"
                    class="form-control input-sm" ng-model="node.usage">
                <option ng-repeat="usage in config.usages">{{usage}}</option>
            </select>
            <a ng-click="cancelUsage(node)"><i class="fa fa-remove fa-fw"></i></a>
        </td>


        <td ng-class="{'col-md-1 col-fixed-100 input-change ':node.attributes.min,'col-md-1 col-fixed-100':!node.attributes.min,'emptyCol': node.type==='component'}">
            <div ng-if="node.type!=='component'">
                <input ng-init="initMinCard(node)" ng-change="recordChanged();updateMinCard(node);" class="form-control"
                       name="min" ng-pattern="/^\d+$/" ng-model="node.min" ng-minlength="1">
                <a ng-click="cancelMinCard(node)"><i class="fa fa-remove fa-fw"></i></a>
            </div>
        </td>


        <td ng-class="{'col-md-1 col-fixed-100 input-change ':node.attributes.max,'col-md-1 col-fixed-100':!node.attributes.max,'emptyCol': node.type==='component'}">
            <div ng-if="node.type!=='component'">
                <input ng-init="initMaxCard(node)" ng-change="recordChanged();updateMaxCard(node);" class="form-control"
                       name="max" ng-pattern="/^\d+$|^\*?$/" ng-model="node.max">
                <a ng-click="cancelMaxCard(node)"><i class="fa fa-remove fa-fw"></i></a>
            </div>
        </td>


        <!--<td class="col-md-1 col-fixed-100 emptyCol" ng-if="node.type!=='field' && node.type!=='component'">-->

        <!--</td>-->


        <td ng-class="{'col-md-1 col-fixed-100 input-change ':node.attributes.minLength,'col-md-1 col-fixed-100':!node.attributes.minLength,'emptyCol': node.type!=='field' && node.type!=='component'}">
            <div ng-if="node.type==='field' || node.type==='component'">
                <input ng-init="initMinL(node)" ng-change="recordChanged();updateMinL(node);" class="form-control"
                       name="minL" ng-model="node.minLength">
                <a ng-click="cancelMinL(node)"><i class="fa fa-remove fa-fw"></i></a>
            </div>
        </td>

        <td ng-class="{'col-md-1 col-fixed-100 input-change ':node.attributes.maxLength,'col-md-1 col-fixed-100':!node.attributes.maxLength,'emptyCol': node.type!=='field' && node.type!=='component'}">
            <div ng-if="node.type==='field' || node.type==='component'">
                <input ng-init="initMaxL(node)" ng-change="updateMaxL(node);" class="form-control"
                       name="maxL" ng-model="node.maxLength">
                <a ng-click="cancelMaxL(node)"><i class="fa fa-remove fa-fw"></i></a>
            </div>
        </td>

        <td ng-show="showConfLength()"
            ng-class="{'col-md-1 col-fixed-30 input-change ':node.attributes.confLength,'col-md-1 col-fixed-30':!node.attributes.confLength,'emptyCol': node.type!=='field' && node.type!=='component'}">
            <div ng-if="node.type==='field' || node.type==='component'">
                <input ng-init="initConfL(node)" ng-change="updateConfL(node);" class="form-control"
                       name="confL" ng-model="node.confLength">
                <a ng-click="cancelConfL(node)"><i class="fa fa-remove fa-fw"></i></a>
            </div>
        </td>

        <td class="col-md-2 col-fixed-350" ng-if="node.type==='field' || node.type==='component'">
            <a class="point" ng-show="editableDT!==node.id" ng-click="redirectDT(node.attributes.datatype)">
                {{getDatatypeLabel(datatypesMap[node.attributes.datatype.id])}}
            </a>
            <a ng-show="editableDT!==node.id&&node.attributes.datatype" ng-click="editDT(node)" class="point">
                <span><i class="fa fa-pencil fa-fw"></i></span>
            </a>
            <a ng-click="editDatatype=true;editDT(node);" ng-hide="node.attributes.datatype||editableDT===node.id"><i
                    class="fa fa-plus fa-fw"></i></a>
            <select ng-show="editableDT===node.id" ng-model="datatype" ng-change="selectDT(node,datatype)"
                    class="form-control">
                <option ng-repeat="datatype in datatypes" value="{{datatype}}"> {{getDatatypeLabel(datatype)}}
                    {{::datatype.hl7Version}}
                </option>
                <option ng-click="otherDT(node)" value="Others"> Others</option>
            </select>
            <a ng-click="editDatatype=false;cancelDatatype(node)"
               ng-show="node.attributes.datatype||editableDT===node.id"><i class="fa fa-remove fa-fw"></i>
            </a>


        </td>

        <td class="col-md-1 col-fixed-330" ng-class="{'emptyCol': node.type!=='field' && node.type!=='component'}">

            <div ng-if="node.type==='field' || node.type==='component'">

                <div ng-if="node.attributes.tables && node.attributes.tables.length!==0">
                    <a class="point" ng-repeat="table in node.attributes.tables">
                        <span ng-click="redirectVS(table)">{{getTableLabel(tablesMap[table.id])}}</span>
                    </a>
                    <a ng-click="editVSModal(node)" class="point">
                        <span><i class="fa fa-pencil fa-fw"></i></span>
                    </a>

                </div>
                <div ng-if="!node.attributes.tables || node.attributes.tables.length===0">
                    <a ng-click="editVSModal(node)" class="point">
                        <span><i class="fa fa-plus fa-fw"></i></span>
                    </a>
                </div>
                <a ng-click="cancelTables(node)" ng-show="node.attributes.tables"><i class="fa fa-remove fa-fw"></i></a>
            </div>
        </td>


        <td class="col-md-1">
        </td>
        <td class="col-md-1">
        </td>

        <td class="col-md-1 col-fixed-80" ng-class="{'emptyCol': node.type!=='field' && node.type!=='component'}">
            <div ng-if="node.type==='field' || node.type==='component'">
                <a ng-click="addDefText(node)" class="point">
                    <i class="fa fa-pencil fa-fw"
                       ng-if="node.attributes.text && node.attributes.text !== '' && node.attributes.text !== null"></i>
                    <i class="fa fa-plus fa-fw"
                       ng-if="!node.attributes.text || node.attributes.text === '' || node.attributes.text === null"></i>
                </a>
                <a ng-click="cancelDefText(node)"
                   ng-show="node.attributes.text && node.attributes.text !== '' && node.attributes.text !== null">
                    <i class="fa fa-times fa-fw"></i>
                </a>
            </div>
        </td>


        <td class="col-md-1" ng-style="commentWidth">
            <a ng-click="addComment(node)" class="point" tooltip-html="node.attributes.comment"
               tooltip-append-to-body="true" tooltip-class="constraints-tooltip" tooltip-trigger
               tooltip-animation="false" tooltip-placement="left">
                <i class="fa fa-pencil fa-fw"
                   ng-if="node.attributes.comment && node.attributes.comment !== '' && node.attributes.comment !== null"></i>
                <i class="fa fa-plus fa-fw"
                   ng-if="!node.attributes.comment || node.attributes.comment === '' || node.attributes.comment === null"></i>
            </a>
            <a ng-click="cancelComment(node)"
               ng-show="node.attributes.comment && node.attributes.comment !== '' && node.attributes.comment !== null">
                <i class="fa fa-times fa-fw"></i>
            </a>
        </td>

        <td class="col-md-1" ng-style="commentWidth">
            <!--<i ng-click="removePcEntry(node)" class="fa fa-times" aria-hidden="true"></i>-->
            <button type="button" class="btn btn-raised btn-raised btn-xs btn-danger" ng-click="removePcEntry(node)">
                <span><i class="fa fa-times fa-fw"></i></span>
            </button>
        </td>
    </tr>

</script>
<script type="text/ng-template" id="addCommentModal.html">
    <div class="modal-header">
        <h3>{{field.name}} : Comment</h3>


    </div>
    <div class="modal-body">
        <form class="form-horizontal" novalidate>
            <div class="row">
                <div class="col-md-12">
                    <textarea rows="10" type="text" style="width:100%;" autofocus name="inputEditor"
                              class="form-control" ng-model="field.attributes.comment"></textarea>
                </div>
            </div>
        </form>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-primary btn-md" ng-click="close()"><span><i class="fa fa-times fa-fw">
            &nbsp; </i>Close</span>
        </button>
    </div>
</script>
<script type="text/ng-template" id="addDefTextModal.html">
    <md-dialog aria-label="defTxt">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> {{field.name}} : Definition Text</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="close()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                    <div>
                    <textarea ng-if="!viewSettings.tableReadonly" rows="10" froala="froalaEditorOptions" style="width:100%;" autofocus ng-model="field.attributes.text" id="globalEditor" name="content"></textarea>
                        <div class="fr-view" ng-if="viewSettings.tableReadonly">
                            <div froala-view="field.attributes.text"></div>
                        </div>
                    </div>

                </div>
            </md-dialog-content>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="applyPcTo.html">
    <div class="modal-header">
        <h3 class="modal-title">Apply Profile Component: {{profileComponent.name}}</h3>
    </div>
    <div class="modal-body">
        <!--<div class="container" style="margin-bottom: 20px;margin-top: 10px">
            <div class="row" style="padding-top:10px">
                <div class="col-md-6">
                    <select class="form-control input-sm" ng-model="applyTo" ng-options="message as message.name for message in msgs" />
                </div>

                <div class="col-md-6" ng-show="addedField.length> 0">

                </div>

            </div>


        </div>-->
    </div>
    <div class="container" style="margin-bottom: 20px;margin-top: 10px">
        <div class="row" style="padding-top:10px">

            <div class="col-md-6">

                <table id="applyTable" tt-table tt-params="ApplyToComponentParams"
                       class="table table-striped table-borderless table-condensed hl7-versions-valueset table-fixed">
                    <thead>
                    <tr class="tbl-header">
                        <th>Choose Conformance Profile</th>

                    </tr>

                    </thead>
                    <tbody></tbody>
                </table>

            </div>


            <div class="col-md-6" ng-show="applyToList.length> 0">
                <div class="igl-table">
                    <h5>Selected Conformance Profiles</h5>
                    <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                        <thead>
                        <tr class="tbl-header">
                            <th class="col-md-3">Conformance Profile</th>
                            <th class="col-md-2">Position</th>


                            <th class="col-md-1"/>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="applyTo in applyToList">
                            <td class="col-md-3">
                                {{applyTo.name}}
                            </td>
                            <td class="col-md-2"><span>


                                    <span>{{applyTo.position}}</span>

                                    </span>

                            </td>


                            <td class="col-md-1"><a class="pointer" ng-click="removeSelectedApplyTo(applyTo)"><i
                                    class="fa fa-times fa-fw"></i></a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>


        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-info btn-sm" ng-click="apply()"><span><i class="fa fa-check fa-fw">&nbsp; </i>Apply</span>
        </button>
    </div>
</script>
<script type="text/ng-template" id="applyTable">

    <tr tt-node is-branch="false">

        <td>
            <a class="pointer" ng-click="addApplyToMsg(node)"><i class="fa fa-plus fa-fw"></i></a>


            <span ng-bind="node.name"></span>
        </td>

    </tr>

</script>
<script type="text/ng-template" id="applyPcToTable">

    <tr tt-node is-branch="false">
        <td class="col-md-3">
            <span ng-bind="node.compositeName"></span>
        </td>
        <td class="col-md-3">
            <span ng-bind="node.coreMessageName"></span>
        </td>
        <td class="col-md-3">
            <span ng-repeat="pcInfo in node.pcs">{{pcInfo.name}}<br></span>
        </td>


    </tr>

</script>
<script type="text/ng-template" id="addComponents.html">
    <md-dialog aria-label="Items" style="width:100%;">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Add Items </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content" style="overflow:scroll;">
                    <div class="modal-body">

                        <div layout="row" style="padding-top:10px" layout-align="center center">
                            <div flex="50">
                                <md-tabs md-dynamic-height md-border-bottom md-selected="0">
                                    <md-tab>
                                        <md-tab-label>Message</md-tab-label>
                                        <md-tab-body>
                                            <div class=" panel panel-primary metadata-scroll">
                                                <div class="panel-heading">Choose Items</div>
                                                <div class="panel-body">

                                                    <table id="MsgProfileComponentTable" tt-table
                                                           tt-params="MsgProfileComponentParams"
                                                           class="table table-striped table-borderless table-condensed hl7-versions-valueset table-fixed">
                                                        <thead>
                                                        <!--<tr class="tbl-header">
                                            <th>Choose Profile Component</th>

                                        </tr>-->

                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                </div>

                                            </div>
                                        </md-tab-body>

                                    </md-tab>
                                    <md-tab>
                                        <md-tab-label>Segment</md-tab-label>
                                        <md-tab-body>
                                            <div class=" panel panel-primary metadata-scroll">
                                                <div class="panel-heading">Choose Items</div>
                                                <div class="panel-body">

                                                    <table id="SegProfileComponentTable" tt-table
                                                           tt-params="SegProfileComponentParams"
                                                           class="table table-striped table-borderless table-condensed hl7-versions-valueset table-fixed">
                                                        <thead>


                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                </div>

                                            </div>

                                        </md-tab-body>

                                    </md-tab>
                                    <md-tab></md-tab>
                                </md-tabs>
                            </div>
                            <div flex="50">
                                <div class=" panel panel-primary" ng-show="selectedPC.length> 0"
                                     style="margin-top:47px;">
                                    <div class="panel-heading">Selected Items</div>
                                    <div class="panel-body" style="overflow-y: auto;height: 250px;">
                                        <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-3">Path</th>
                                                <th class="col-md-2">Name</th>


                                                <th class="col-md-1"/>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="pc in selectedPC">
                                                <td class="col-md-3">
                                                    <span ng-if="pc.type=='datatype'"
                                                          class="label label-default label-icon">D</span>

                                                    <span ng-if="pc.type=='group'"
                                                          class="label label-success label-icon">G</span>
                                                    <span ng-if="pc.type=='segmentRef'||pc.type=='segment'"
                                                          class="label label-segment label-icon">S</span>
                                                    <span class="label label-field label-icon"
                                                          ng-if="pc.type==='field'">F</span>
                                                    <span class="label label-component label-icon"
                                                          ng-if="pc.type==='component'">C</span> {{pc.path}}
                                                </td>
                                                <td class="col-md-2"><span>

                                        <span ng-if="pc.type==='segmentRef'">{{pc.attributes.oldRef.name}}</span>
                                                        <span ng-if="pc.type!=='segmentRef'">{{pc.name}}</span>

                                                        </span>
                                                    <!--<a class="pointer" ng-show="!edit && dt.ext!==null && dt.ext!==' '&& dt.scope!=='MASTER '" ng-click="edit=true;checkExt(dt)"><i class="fa fa-pencil fa-fw"></i></a>
                                            <input ng-show="edit" ng-change="checkExt(dt)" ng-model="dt.ext" />-->
                                                    <!--<a class="pointer" ng-show="edit && checkedExt && NocheckedExt" ng-click="edit=false"><i class="fa fa-check-circle"></i></a>
                                            <span ng-if="edit && !checkedExt" class="danger">This extension already exists</span>
                                            <span ng-if="edit && !NocheckedExt" class="danger">A flavor must have an extension</span>-->
                                                </td>


                                                <td class="col-md-1"><a class="pointer"
                                                                        ng-click="removeSelectedComp(pc)"><i
                                                        class="fa fa-times fa-fw"></i></a>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                </div>
                            </div>
                            <!--<div flex ng-show="selectedPC.length> 0">
                                        <div class="igl-table">
                                            <h5>Selected Profile Components</h5>
                                            <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                                                <thead>
                                                    <tr class="tbl-header">
                                                        <th class="col-md-3">Path</th>
                                                        <th class="col-md-2">Name</th>



                                                        <th class="col-md-1" />
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="pc in selectedPC">
                                                        <td class="col-md-3">
                                                            <span ng-if="pc.type=='datatype'" class="label label-default label-icon">D</span>

                                                            <span ng-if="pc.type=='group'" class="label label-success label-icon">G</span>
                                                            <span ng-if="pc.type=='segmentRef'||pc.type=='segment'" class="label label-segment label-icon">S</span>
                                                            <span class="label label-field label-icon" ng-if="pc.type==='field'">F</span>
                                                            <span class="label label-component label-icon" ng-if="pc.type==='component'">C</span> {{pc.path}}
                                                        </td>
                                                        <td class="col-md-2"><span>

                                                            <span ng-if="pc.type==='segmentRef'">{{pc.attributes.oldRef.name}}</span>
                                                            <span ng-if="pc.type!=='segmentRef'">{{pc.name}}</span>

                                                            </span>

                                                        </td>


                                                        <td class="col-md-1"> <a class="pointer" ng-click="removeSelectedComp(pc)"><i class="fa fa-times fa-fw"></i></a>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>-->


                        </div>

                    </div>
                </div>
                <md-dialog-actions layout="row">
                    <md-button class="md-primary md-raised" md-autofocus ng-click="add()">
                        Save
                    </md-button>
                </md-dialog-actions>
            </md-dialog-content>


        </form>
    </md-dialog>


</script>
<script type="text/ng-template" id="MsgProfileComponentTable">

    <tr tt-node is-branch="node.children!==undefined && node.children.length>0">

        <td>
            <a ng-if="node.type==='group'||node.type==='segmentRef'||node.type==='field'||node.type==='component'|| node.type==='message'"
               class="pointer" ng-click="addElementPc(node,$event)"><i class="fa fa-plus fa-fw"></i></a>

            <span ng-if="node.type==='group'" class="label label-success label-icon">G</span>
            <span ng-if="node.type==='segmentRef'" class="label label-segment label-icon">S</span>
            <span ng-if="node.type==='field'" class="label label-field label-icon">F</span>
            <span ng-if="node.type==='component'" class="label label-component label-icon">C</span>

            <span ng-bind="node.position"></span>.
            <span ng-if="node.name" ng-bind="node.name"></span>
            <span ng-if="node.ref.name" ng-bind="$root.segmentsMap[node.ref.id].label"></span>
        </td>

    </tr>

</script>
<script type="text/ng-template" id="SegProfileComponentTable">

    <tr tt-node is-branch="node.fields!==undefined && node.fields.length>0">

        <td>
            <a class="pointer" ng-click="addElementPc(node,$event)"><i class="fa fa-plus fa-fw"></i></a>
            <span ng-if="node.type=='segment'" class="label label-segment label-icon">S</span>

            <span ng-if="node.type=='field'" class="label label-field label-icon">F</span>
            <span ng-if="node.type=='component'" class="label label-component label-icon">C</span>


            <span ng-if="node.position" ng-bind="node.position"></span><span ng-if="node.position">.</span>
            <span ng-if="node.label && node.name" ng-bind="node.label"></span>
            <span ng-if="node.name && !node.label" ng-bind="node.name"></span>
        </td>

    </tr>

</script>
<script type="text/ng-template" id="DTProfileComponentTable">

    <tr tt-node is-branch="node.components!==undefined && node.components.length>0">

        <td>
            <a class="pointer" ng-click="addElementPc(node,$event)"><i class="fa fa-plus fa-fw"></i></a>
            <span ng-if="node.type=='datatype'" class="label label-default label-icon">D</span>

            <span ng-if="node.type=='component'" class="label label-component label-icon">C</span>

            <span ng-if="node.position" ng-bind="node.position"></span><span ng-if="node.position">.</span>

            <span ng-if="node.label && node.name" ng-bind="node.label"></span>
            <span ng-if="node.name && !node.label" ng-bind="node.name"></span>
        </td>

    </tr>

</script>
<script type="text/ng-template" id="AddCoConstraintCtrlInPc.html">
    <md-dialog aria-label="CoConstraints" style="width:2000px; max-height:100%">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> CoConstraints of {{node.attributes.ref.name}} </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>
            <md-dialog-content>
                <div class="md-dialog-content" style="overflow:scroll;">
                    <div class="pull-right" ng-show="coConTable">
                        <button class="btn btn-raised btn-primary btn-sm" ng-click="addCoConstraintRow();">
                            <span><i class="fa fa-plus fa-fw">&nbsp; </i>Add CoConstraint Row</span>
                        </button>
                    </div>

                    <div class="table-container" ng-show="coConTable">
                        <table style="table-layout: fixed; border: 0;" class="table table-bordered table-fix-header table-condensed profile-table">
                            <thead>
                            <tr>
                                <th bgcolor="white" rowspan="2" style="overflow: hidden;width: 20px;text-align:center;border:0;"/>
                                <th bgcolor="#1565c0" style="font-weight: bold;color:white;text-align:center;overflow: hidden;width: 200px;">If Column</th>
                                <th ng-show="!coConstraintsTable.thenColumnDefinitionListForDisplay || coConstraintsTable.thenColumnDefinitionListForDisplay.length == 0" bgcolor="#efefef" style="text-align:center;color:black;overflow: hidden;width: 50px;">Then Column</th>
                                <th ng-show="coConstraintsTable.thenColumnDefinitionListForDisplay && coConstraintsTable.thenColumnDefinitionListForDisplay.length > 0" colspan="{{coConstraintsTable.thenColumnDefinitionListForDisplay.length * 4 + 1}}" bgcolor="#efefef" style="overflow: hidden;width: {{coConstraintsTable.thenColumnDefinitionListForDisplay.length * 200 + 50}}px;text-align:center;color:black;">Then Columns</th>
                                <th ng-show="!coConstraintsTable.userColumnDefinitionList || coConstraintsTable.userColumnDefinitionList.length == 0" bgcolor="#4caf50" style="overflow: hidden;width: 50px;text-align:center;color:black;">User Column</th>
                                <th ng-show="coConstraintsTable.userColumnDefinitionList && coConstraintsTable.userColumnDefinitionList.length > 0" colspan="{{coConstraintsTable.userColumnDefinitionList.length * 4 + 1}}" bgcolor="#4caf50" style="overflow: hidden;width: {{coConstraintsTable.userColumnDefinitionList.length * 200 + 50}}px;text-align:center;color:black;">User Columns</th>
                                <th bgcolor="white" rowspan="2" style="border: 0;overflow: hidden;width: 50px;text-align:center;border:0;"/>
                            </tr>
                            <tr>
                                <th style="font-weight: bold;text-align:center;overflow: hidden;width: 200px;" bgcolor="#1565c0" ng-show="coConstraintsTable.ifColumnDefinition">
                                    <span ng-show="coConstraintsTable.ifColumnDefinition.type=='field'" class="label label-field label-icon">F</span>
                                    <span ng-show="coConstraintsTable.ifColumnDefinition.type=='component'" class="label label-component label-icon">C</span>
                                    <span ng-show="coConstraintsTable.ifColumnDefinition.type=='subcomponent'" class="label label-sub-component-icon label-icon">C</span>
                                    <span style="font-weight: bold;color:white">{{node.attributes.ref.name}}-{{coConstraintsTable.ifColumnDefinition.path}}</span>
                                    <span ng-show="coConstraintsTable.ifColumnDefinition.constraintType=='value'" class="label label-icon">Value</span>
                                    <span ng-show="coConstraintsTable.ifColumnDefinition.constraintType=='valueset'" class="label label-icon">ValueSet</span>
                                    <span style="font-weight: bold;color:white" ng-click="coConstraintIFDefinition(coConstraintsTable.ifColumnDefinition);"><i class="fa fa-pencil" aria-hidden="true"></i></span>
                                </th>
                                <th style="font-weight: bold;text-align:center;overflow: hidden;width: 200px;" bgcolor="#1565c0" ng-show="!coConstraintsTable.ifColumnDefinition">
                                    <span style="font-weight: bold;color:white" ng-click="coConstraintIFDefinition();"><i class="fa fa-plus" aria-hidden="true"></i> Define IF Column</span>
                                </th>
                                <th style="text-align:center;overflow: hidden;width: 200px;" bgcolor="#efefef" colspan="4" ng-repeat="columnDefinition in coConstraintsTable.thenColumnDefinitionListForDisplay">
                                    <span ng-show="columnDefinition.type=='field'" class="label label-field label-icon">F</span>
                                    <span ng-show="columnDefinition.type=='component'" class="label label-component label-icon">C</span>
                                    <span ng-show="columnDefinition.type=='subcomponent'" class="label label-sub-component-icon label-icon">C</span>
                                    <span style="color:black">{{node.attributes.ref.name}}-{{columnDefinition.path}}</span>
                                    <span ng-show="columnDefinition.constraintType=='value'" class="label label-icon">Value</span>
                                    <span ng-show="columnDefinition.constraintType=='valueset'" class="label label-icon">ValueSet</span>
                                    <span ng-show="columnDefinition.constraintType=='dmr'" class="label label-icon">Value</span>
                                    <span ng-show="columnDefinition.constraintType=='dmf'" class="label label-icon">DM_Flavor</span>
                                    <span style="color:black" ng-click="coConstraintTHENDefinition(columnDefinition);" ng-hide="columnDefinition.constraintType=='dmf'"><i class="fa fa-pencil" aria-hidden="true"></i></span>
                                    <span style="color:red" ng-click="delCoConstraintTHENDefinition(columnDefinition);" ng-hide="columnDefinition.constraintType=='dmf'"><i class="fa fa-times" aria-hidden="true"></i></span>
                                </th>
                                <th style="text-align:center;overflow: hidden;width: 50px;" bgcolor="#efefef">
                                    <span style="color:black" ng-click="coConstraintTHENDefinition();"><i class="fa fa-plus" aria-hidden="true"></i></span>
                                </th>
                                <th style="text-align:center;overflow: hidden;width: 200px;" bgcolor="#4caf50" colspan="4" ng-repeat="columnDefinition in coConstraintsTable.userColumnDefinitionList">
                                    <span style="color:black">{{columnDefinition.title}}</span>
                                    <span style="color:black" ng-click="coConstraintUSERDefinitionF(columnDefinition);" ng-hide="viewSettings.tableReadonly"><i class="fa fa-pencil" aria-hidden="true"></i></span>
                                    <span style="color:red" ng-click="delCoConstraintUSERDefinition(columnDefinition);" ng-hide="viewSettings.tableReadonly"><i class="fa fa-times" aria-hidden="true"></i></span>
                                </th>
                                <th style="color:black;text-align:center;" bgcolor="#4caf50">
                                    <span style="color:black" ng-click="coConstraintUSERDefinitionF();"><i class="fa fa-plus" aria-hidden="true"></i></span>
                                </th>
                            </tr>
                            </thead>
                            <tbody ui-sortable="coConSortableOption" ng-model="coConRowIndexList">
                            <tr style="cursor: move;" ng-show="coConstraintsTable.rowSize > 0" ng-repeat="rowObject in coConRowIndexList">
                                <td style="border: 0;">
                                    <div ng-show="coConstraintsTable.ifColumnData[rowObject.rowIndex].isNew">
                                        <span title="This is NEW!!!!!" class="badge" style="background-color:yellow; color:black;">
                                            <span><i class="fa fa-flag fa-fw"></i></span>
                                        </span>
                                    </div>
                                </td>

                                <td style="font-weight: bold;overflow: hidden;width: 200px;text-align:center;background-color: #b1daff !important;" ng-show="coConstraintsTable.ifColumnDefinition">
                                    <div layout="row" layout-align="start center">
                                        <md-input-container flex="100" ng-show="coConstraintsTable.ifColumnDefinition.primitive" style="margin:17px;font-weight: bold;">
                                            <input ng-model="coConstraintsTable.ifColumnData[rowObject.rowIndex].valueData.value"
                                                   ng-change="coconstrsaintChanged();"
                                                   style="font-weight: bold;"
                                                   ng-disabled="viewSettings.tableReadonly">
                                        </md-input-container>

                                        <md-input-container flex="70" ng-show="!coConstraintsTable.ifColumnDefinition.primitive" style="margin:17px;font-weight: bold;">
                                            <input ng-model="coConstraintsTable.ifColumnData[rowObject.rowIndex].valueData.value"
                                                   ng-change="coconstrsaintChanged();"
                                                   style="font-weight: bold;"
                                                   ng-disabled="viewSettings.tableReadonly">
                                        </md-input-container>
                                        <md-input-container flex="30" ng-show="!coConstraintsTable.ifColumnDefinition.primitive" style="margin-top: -5px;">
                                            <md-select placeholder="Select BindingLocation" ng-model='coConstraintsTable.ifColumnData[rowObject.rowIndex].valueData.bindingLocation' ng-change="coconstrsaintChanged()" ng-disabled="viewSettings.tableReadonly">
                                                <md-option ng-repeat="option in findOptions(coConstraintsTable.ifColumnDefinition.dtId)" ng-value="option">
                                                    {{option}}
                                                </md-option>
                                            </md-select>
                                        </md-input-container>
                                    </div>
                                </td>

                                <td ng-show="!coConstraintsTable.ifColumnDefinition" style="font-weight: bold;overflow: hidden;width: 200px;background-color: #b1daff !important;"/>

                                <td ng-repeat="columnDefinition in coConstraintsTable.thenColumnDefinitionListForDisplay" colspan="4" style="overflow: hidden;width: 200px;text-align:center;">
                                    <div ng-show="isDual(columnDefinition)">
                                        <div ng-hide="viewSettings.tableReadonly" ng-if="(!coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets || coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets.length === 0) &&
                                                                                    (!coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData || !coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value)">

                                            <span ng-click="editValueSetForVaries(columnDefinition.id, rowObject.rowIndex)" class="label label-icon">ValueSet</span>
                                            or
                                            <span ng-click="editValueForVaries(columnDefinition.id, rowObject.rowIndex)" class="label label-icon">Value</span>
                                        </div>

                                        <div layout="row" layout-align="start center" ng-if="coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData && coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value">
                                            <md-input-container flex="100" ng-show="columnDefinition.primitive" style="margin:17px;">
                                                <input ng-model="coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value"
                                                       ng-change="coconstrsaintChanged();"
                                                       ng-disabled="viewSettings.tableReadonly">
                                            </md-input-container>
                                            <md-input-container flex="70" ng-show="!columnDefinition.primitive" style="margin:17px;">
                                                <input ng-model="coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value"
                                                       ng-change="coconstrsaintChanged();"
                                                       ng-disabled="viewSettings.tableReadonly">
                                            </md-input-container>
                                            <md-input-container flex="30" ng-show="!columnDefinition.primitive" style="margin-top: -5px;">
                                                <md-select placeholder="Select BindingLocation" ng-model='coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.bindingLocation' ng-change="coconstrsaintChanged()" ng-disabled="viewSettings.tableReadonly">
                                                    <md-option ng-repeat="option in findOptions(columnDefinition.dtId)" ng-value="option">
                                                        {{option}}
                                                    </md-option>
                                                </md-select>
                                            </md-input-container>
                                        </div>

                                        <div ng-if="coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets && coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets.length > 0">
                                            <div ng-repeat="vs in coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets">
                                                <span title="{{$root.tablesMap[vs.tableId].bindingIdentifier}}" class="badge label-white">
                                                    <span class="label label-sub-component-icon label-icon">VS</span>
                                                    <span>{{$root.getTextAsTruncatedString($root.tablesMap[vs.tableId].bindingIdentifier, 10)}}</span>
                                                    <span ng-hide="viewSettings.tableReadonly" ng-click="deleteVS(vs, coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets)"><i class="fa fa-times fa-fw edit-icon"></i></span>
                                                </span>
                                            </div>
                                            <a ng-hide="viewSettings.tableReadonly" class="point">
                                                <span ng-click="editValueSetThenMapData(columnDefinition.id, rowObject.rowIndex)"><i class="fa fa-plus fa-fw edit-icon"></i></span>
                                            </a>
                                        </div>
                                    </div>
                                    <div ng-show="columnDefinition.constraintType === 'value' && !isDual(columnDefinition)">
                                        <div layout="row" layout-align="start center">
                                            <md-input-container flex="100" ng-show="columnDefinition.primitive" style="margin:17px;">
                                                <input ng-model="coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value"
                                                       ng-change="coconstrsaintChanged();"
                                                       ng-disabled="viewSettings.tableReadonly">
                                            </md-input-container>
                                            <md-input-container flex="70" ng-show="!columnDefinition.primitive" style="margin:17px;">
                                                <input ng-model="coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value"
                                                       ng-change="coconstrsaintChanged();"
                                                       ng-disabled="viewSettings.tableReadonly">
                                            </md-input-container>
                                            <md-input-container flex="30" ng-show="!columnDefinition.primitive" style="margin-top: -5px;">
                                                <md-select placeholder="Select BindingLocation" ng-model='coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.bindingLocation' ng-change="coconstrsaintChanged()" ng-disabled="viewSettings.tableReadonly">
                                                    <md-option ng-repeat="option in findOptions(columnDefinition.dtId)" ng-value="option">
                                                        {{option}}
                                                    </md-option>
                                                </md-select>
                                            </md-input-container>
                                        </div>
                                    </div>
                                    <div ng-show="columnDefinition.constraintType === 'valueset' && !isDual(columnDefinition)">
                                        <div ng-show="!coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets || coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets.length === 0">
                                            <span ng-hide="viewSettings.tableReadonly" ng-click="editValueSetThenMapData(columnDefinition.id, rowObject.rowIndex)"><i class="fa fa-plus fa-fw edit-icon"></i></span>
                                        </div>
                                        <div ng-hide="!coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets || coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets.length === 0">
                                            <div ng-repeat="vs in coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets">
                                                <span title="{{$root.tablesMap[vs.tableId].bindingIdentifier}}" class="badge label-white">
                                                    <span class="label label-sub-component-icon label-icon">VS</span>
                                                    <span>{{$root.getTextAsTruncatedString($root.tablesMap[vs.tableId].bindingIdentifier, 10)}}</span>
                                                    <span ng-hide="viewSettings.tableReadonly" ng-click="deleteVS(vs, coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets)"><i class="fa fa-times fa-fw edit-icon"></i></span>
                                                </span>
                                            </div>
                                            <a ng-hide="viewSettings.tableReadonly" class="point">
                                                <span ng-click="editValueSetThenMapData(columnDefinition.id, rowObject.rowIndex)"><i class="fa fa-plus fa-fw edit-icon"></i></span>
                                            </a>
                                        </div>
                                    </div>
                                    <div ng-show="columnDefinition.constraintType === 'dmr'">
                                        <div layout="row" layout-align="start center">
                                            <md-input-container flex="100">
                                                <md-select placeholder="Select DT BaseName"
                                                           ng-model='coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value'
                                                           ng-change="coconstrsaintChanged()"
                                                           ng-disabled="viewSettings.tableReadonly">
                                                    <md-option ng-repeat="c in dynamicMappingTable.codes | orderBy:'value'" ng-value="c.value">
                                                        {{c.value}}
                                                    </md-option>
                                                </md-select>
                                            </md-input-container>
                                        </div>
                                    </div>
                                    <div ng-show="columnDefinition.constraintType === 'dmf'">
                                        <div layout="row" layout-align="start center" ng-show="coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value">
                                            <md-input-container flex="100">
                                                <md-select placeholder="Select DT Flavor"
                                                           ng-model="coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].datatypeId"
                                                           ng-change="coconstrsaintChanged()"
                                                           ng-disabled="viewSettings.tableReadonly">
                                                    <md-option ng-repeat="link in $root.igdocument.profile.datatypeLibrary.children | filter: {name: coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value}  : true" ng-value="link.id">
                                                        {{$root.getDatatypeLabel($root.datatypesMap[link.id])}}
                                                    </md-option>
                                                </md-select>
                                            </md-input-container>
                                        </div>
                                    </div>
                                </td>

                                <td style=""/>

                                <td ng-repeat="columnDefinition in coConstraintsTable.userColumnDefinitionList" colspan="4" style="overflow: hidden;width: 200px;text-align:center;background-color: #a7d6a9 !important;" >
                                    <div ng-show="coConstraintsTable.userMapData[columnDefinition.id][rowObject.rowIndex].text && coConstraintsTable.userMapData[columnDefinition.id][rowObject.rowIndex].text !== ''">
                                        <span title="{{coConstraintsTable.userMapData[columnDefinition.id][rowObject.rowIndex].text}}" class="badge" style="background-color: #a7d6a9; color:black;">
                                            <span>{{root.getTextAsTruncatedString(coConstraintsTable.userMapData[columnDefinition.id][rowObject.rowIndex].text, 20)}}</span>
                                            <span ng-hide="viewSettings.tableReadonly" ng-click="editUserData(columnDefinition.id, rowObject.rowIndex)"><i class="fa fa-pencil fa-fw edit-icon"></i></span>
                                            <span ng-hide="viewSettings.tableReadonly" ng-click="coConstraintsTable.userMapData[columnDefinition.id][rowObject.rowIndex].text = null"><i class="fa fa-times fa-fw edit-icon"></i></span>
                                        </span>
                                    </div>
                                    <div ng-hide="viewSettings.tableReadonly || (coConstraintsTable.userMapData[columnDefinition.id][rowObject.rowIndex].text && coConstraintsTable.userMapData[columnDefinition.id][rowObject.rowIndex].text !== '')">
                                        <span ng-click="editUserData(columnDefinition.id, rowObject.rowIndex)"><i class="fa fa-plus fa-fw edit-icon"></i></span>
                                    </div>
                                </td>

                                <td style="background-color: #a7d6a9 !important;"/>

                                <td style="overflow: hidden;width: 50px;text-align:center;">
                                    <span ng-hide="viewSettings.tableReadonly"ng-click="cloneCoConstraintRow(rowObject.rowIndex);" title="Clone Row data" style="color:#2d9de7;"><i class="fa fa-plus fa-fw"></i></span>
                                    <span ng-hide="viewSettings.tableReadonly" ng-click="delCoConstraintRow(rowObject.rowIndex);" title="Del Row data" style="color:red"><i class="fa fa-times fa-fw"></i></span>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="row" ng-show="ifAddCoCon">
                        <div class="panel panel-primary">
                            <div class="panel-heading">Edit IF Column Definition</div>
                            <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                                <form class="form-horizontal" novalidate>
                                    <div layout="row" style="margin-top:15px;margin-left:15px;">
                                        <md-input-container>
                                            <label>{{seg.name}}</label>
                                            <md-select aria-label="if" ng-model="selectedFieldPosition" ng-change="updateFieldIF();">
                                                <md-option ng-repeat="field in seg.fields" ng-value="field.position">
                                                    {{field.position}}. {{field.name}}
                                                </md-option>
                                            </md-select>
                                        </md-input-container>
                                        <md-input-container>
                                            <label>Component</label>
                                            <md-select aria-label="if" ng-show="components" ng-model='selectedComponentPosition' ng-change="updateComponentIF();">
                                                <md-option ng-repeat="component in components" ng-value="component.position">
                                                    {{component.position}}. {{component.name}}
                                                </md-option>
                                            </md-select>
                                        </md-input-container>

                                        <md-input-container>
                                            <label>Sub Component</label>
                                            <md-select aria-label="if" ng-show="subComponents" ng-model='selectedSubComponentPosition' ng-change="updateSubComponentIF();">
                                                <md-option ng-repeat="component in components" ng-value="component.position">
                                                    {{component.position}}. {{component.name}}
                                                </md-option>
                                            </md-select>
                                        </md-input-container>
                                    </div>
                                    <div class="row" style="margin-top:15px;margin-left:15px;">
                                        <div class="col-md-9">Type:
                                            <md-radio-group ng-model="coConstraintType">
                                                <md-radio-button value="value" class="md-primary">Value</md-radio-button>
                                            </md-radio-group>
                                        </div>
                                    </div>
                                    <span class="header3" style="margin-left:15px;">
                                        <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>The 'Value Set' is not allowed for IF Statement.
                                    </span>
                                </form>
                            </div>
                        </div>
                    </div>

                    <div class="row" ng-show="thenAddCoCon">
                        <div class="panel panel-primary">
                            <div class="panel-heading">
                                Edit/Add THEN Column Definition
                            </div>
                            <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                                <form class="form-horizontal" novalidate>
                                    <div class="row" style="margin-top:15px;margin-left:15px;">
                                        <md-input-container>
                                            <label>{{seg.name}}</label>
                                            <md-select aria-label="if" ng-model="selectedFieldPosition" ng-change="updateFieldTHEN();">
                                                <md-option ng-repeat="field in seg.fields" ng-value="field.position">
                                                    {{field.position}}. {{field.name}}
                                                </md-option>
                                            </md-select>
                                        </md-input-container>
                                        <md-input-container>
                                            <label>Component</label>
                                            <md-select aria-label="if" ng-show="components" ng-model='selectedComponentPosition' ng-change="updateComponentTHEN();">
                                                <md-option ng-repeat="component in components" ng-value="component.position">{{component.position}}. {{component.name}}
                                                </md-option>
                                            </md-select>
                                        </md-input-container>
                                        <md-input-container>
                                            <label>Sub Component</label>
                                            <md-select aria-label="if" ng-show="subComponents" ng-model='selectedSubComponentPosition' ng-change="updateSubComponentTHEN();">
                                                <md-option ng-repeat="component in components" ng-value="component.position">
                                                    {{component.position}}. {{component.name}}
                                                </md-option>
                                            </md-select>
                                        </md-input-container>
                                    </div>
                                    <div class="row" ng-show="!dMReference" style="margin-top:15px;margin-left:15px;">
                                        <div class="col-md-9">Type:
                                            <md-radio-group ng-model="coConstraintType">
                                                <md-radio-button value="value" class="md-primary" ng-disabled="isVariesDT()">Value
                                                </md-radio-button>
                                                <md-radio-button value="valueset">Value Set</md-radio-button>
                                            </md-radio-group>
                                        </div>
                                    </div>
                                    <span class="header3" ng-show="isVariesDT()" style="margin-left:15px;">
                                        <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>This Datatype is varies, so just 'Value Set' is allowed.
                                    </span>
                                    <span class="header3" ng-show="dMReference" style="margin-left:15px;">
                                        <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>This is Dynamic Mapping Reference Field. Data cell requires DT base name and Flavor.
                                    </span>
                                </form>
                            </div>
                        </div>
                    </div>

                    <div class="row" ng-show="userAddCoCon">
                        <div class="panel panel-primary">
                            <div class="panel-heading">
                                Edit/Add USER Column Definition
                            </div>
                            <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                                <form class="form-horizontal" novalidate>
                                    <md-input-container layout="row" style="margin-top:15px;margin-left:15px;">
                                        <label flex="30" class="input-left">Title</label>
                                        <input flex="70" type="text" ng-change="coconstrsaintChanged()" name="title" ng-model="title" required>
                                    </md-input-container>
                                </form>
                            </div>
                        </div>
                    </div>

                    <div class="row" ng-show="userData">
                        <div class="panel panel-primary">
                            <div class="panel-heading">
                                Edit/Add USER Data
                            </div>
                            <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                                <form class="form-horizontal" novalidate>
                                    <md-input-container class="md-block">
                                        <textarea ng-model="data.text" rows="3" md-select-on-focus></textarea>
                                    </md-input-container>
                                </form>
                            </div>
                        </div>
                    </div>

                    <div class="row" ng-show="thenData">
                        <div class="panel panel-primary">
                            <div class="panel-heading">
                                Edit Value Set Data
                            </div>
                            <div class="panel-body" style="min-height:200px; max-height:400px;">
                                <form class="form-horizontal" novalidate>
                                    <div class="row" style="min-height:200px; max-height:300px;overflow-y: scroll;">
                                        <div class="col-md-12">
                                            <table class="table table-striped table-bordered table-fix-header normal-table">
                                                <thead>
                                                <tr class="tbl-header">
                                                    <th class="col-md-1" style="text-align:center">#</th>
                                                    <th class="col-md-3" style="text-align:center">Binding Identifier</th>
                                                    <th class="col-md-3" style="text-align:center">Name</th>
                                                    <th class="col-md-2" style="text-align:center">Binding Strength</th>
                                                    <th class="col-md-2" style="text-align:center">Binding Location</th>
                                                    <th class="col-md-1" style="text-align:center"></th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr ng-repeat="vs in data.valueSets">
                                                    <td class="col-md-1" style="text-align:center">
                                                        <span>{{$index + 1}}</span>
                                                    </td>
                                                    <td class="col-md-3">{{$root.tablesMap[vs.tableId].bindingIdentifier}}</td>
                                                    <td class="col-md-3">{{$root.tablesMap[vs.tableId].name}}</td>
                                                    <td class="col-md-2">
                                                        <md-select class="inside-table" aria-label="if" ng-model='vs.bindingStrength'>
                                                            <md-option value="R">Required</md-option>
                                                            <md-option value="S">Suggested</md-option>
                                                            <md-option value="U">Unspecified</md-option>
                                                        </md-select>
                                                    </td>
                                                    <td class="col-md-2">
                                                        <md-select class="inside-table" aria-label="if" ng-show="listOfBindingLocations" ng-model='vs.bindingLocation'>
                                                            <md-option ng-repeat="bl in listOfBindingLocations" ng-value="bl">{{bl}}</md-option>
                                                        </md-select>
                                                    </td>
                                                    <td class="col-md-1" style="text-align:center">
                                                        <span ng-click="deleteValueSet($index);"><i class="fa fa-times" aria-hidden="true"></i></span>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                            <table st-safe-src="$root.tables" st-table="displayCollection" class="table table-striped table-bordered normal-table">
                                                <thead>
                                                <tr class="tbl-header">
                                                    <th st-sort="scope" class="col-md-1">Scope/Version</th>
                                                    <th st-sort="bindingIdentifier" class="col-md-3">BindingIdentifier</th>
                                                    <th class="col-md-7">Name</th>
                                                    <th class="col-md-1">Action</th>
                                                </tr>
                                                <tr>
                                                    <th colspan="5">
                                                        <input st-search="bindingIdentifier" placeholder="search for BindingIdentifier" class="input-sm form-control" type="search"/>
                                                    </th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr ng-repeat="v in displayCollection">
                                                    <td class="col-md-1">
                                                        <span class="badge" ng-class="{'label-HL7' : $root.getScopeLabel(v)==='HL7', 'label-USE': $root.getScopeLabel(v)==='USR','label-MASTER':$root.getScopeLabel(v)==='MAS','label-PRL':$root.getScopeLabel(v)==='PRL','label-PVS':$root.getScopeLabel(v)==='PVS'}">{{$root.getScopeLabel(v)}} {{$root.hasSameVersion(v)}}</span>
                                                    </td>
                                                    <td class="col-md-3">
                                                        {{v.bindingIdentifier}}
                                                    </td>
                                                    <td class="col-md-7">
                                                        {{v.name}}
                                                    </td>
                                                    <td class="col-md-1" align="center">
                                                        <span><md-checkbox ng-checked="isSelected(v)" ng-click="toggleVs(v)"></md-checkbox></span>
                                                        <!--<a ng-show="!isSelected(v)" ng-click="selectValueSet(v)" class="point">-->
                                                            <!--<i class="icon-size-15 fa-circle-thin fa"></i>-->
                                                        <!--</a>-->
                                                        <!--<a ng-show="isSelected(v)" ng-click="unselectValueSet(v)" class="point">-->
                                                            <!--<i class="icon-size-15 fa-check-circle fa"></i>-->
                                                        <!--</a>-->
                                                    </td>
                                                </tr>
                                                </tbody>
                                                <tr style="float:center !important;" ng-if="$root.tables.length > 5">
                                                    <td colspan="5" class="text-center" style="float:center !important;">
                                                        <div st-pagination="" st-items-by-page="5" st-displayed-pages="5" style="float:center !important;"></div>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <md-dialog-actions layout="row">
                    <md-button class="md-raised md-warn" ng-show="!coConTable" ng-click="backToCoConTable()">BACK</md-button>
                    <md-button class="md-raised md-primary" ng-show="thenData" ng-click="saveValueSet()">SAVE</md-button>
                    <md-button class="md-raised md-primary" ng-show="userData" ng-click="saveUSERData()">SAVE</md-button>
                    <md-button ng-disabled="!selectedFieldPosition" class="md-raised md-primary" ng-show="ifAddCoCon" ng-click="saveIF()">SAVE</md-button>
                    <md-button ng-disabled="!selectedFieldPosition" class="md-raised md-primary" ng-show="thenAddCoCon" ng-click="saveTHEN()">SAVE</md-button>
                    <md-button ng-disabled="!title"                 class="md-raised md-primary" ng-show="userAddCoCon" ng-click="saveUSER()">SAVE</md-button>
                    <md-button class="md-primary md-raised" md-autofocus ng-disabled="!Cchanged" ng-show="coConTable" ng-click="saveclose()">Save</md-button>
                </md-dialog-actions>
            </md-dialog-content>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="AddDynamicMappingCtrlInPc.html">
    <md-dialog aria-label="Dynamic Mapping">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2 ng-hide="seeOrEdit==='see'"> Dynamic Mapping of {{node.name}} </h2>
                    <h2 ng-show="seeOrEdit==='see'"> Dynamic Mapping of {{node.ref.label}} </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content" style="overflow:scroll;">
                    <div class="col-md-12">
                        <h3 class="modal-title">Dynamic Mapping List</h3>
                        <span class="header3">
                                                            <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>
                                                            Dynamic Datatype Field: {{dynamicMappingDefinition.mappingStructure.segmentName}}-{{dynamicMappingDefinition.mappingStructure.targetLocation}}
                                                        </span>
                        <br/>
                        <span class="header3">
                                                            <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>
                                                            Reference: {{dynamicMappingDefinition.mappingStructure.segmentName}}-{{dynamicMappingDefinition.mappingStructure.referenceLocation}}
                                                        </span>
                        <br/>
                        <span ng-show="dynamicMappingDefinition.mappingStructure.secondRefereceLocation"
                              class="header3">
                                                            <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>
                                                            Second Reference: {{dynamicMappingDefinition.mappingStructure.segmentName}}-{{dynamicMappingDefinition.mappingStructure.secondRefereceLocation}}
                                                        </span>

                        <br/>
                        <table st-safe-src="dynamicMappingDefinition.dynamicMappingItems" st-table="displayItems"
                               class="table table-striped table-condensed table-bordered">
                            <thead>
                            <tr class="tbl-header">
                                <th st-sort="firstReferenceValue" class="col-md-3">Reference Value</th>

                                <th class="col-md-5">Datatype</th>
                                <th ng-hide="seeOrEdit==='see'" class="col-md-1" style="text-align:left">
                                    <span ng-hide="seeOrEdit==='see'" ng-click="addMappingItem()"><i
                                            class="material-icons" style="color:black;">add</i></span>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="item in displayItems">
                                <td class="col-md-3">
                                    <md-select ng-model="item.firstReferenceValue" placeholder="Select DT Base Name" ng-disabled="seeOrEdit==='see'" ng-change="setChanged();">
                                        <md-option ng-repeat="c in dynamicMappingTable.codes | orderBy:'value'" value="{{c.value}}">
                                            {{c.value}}({{c.label}})
                                        </md-option>
                                    </md-select>
                                </td>
                                <td class="col-md-5">
                                    <md-select ng-model="item.datatypeId"
                                               ng-show="item.firstReferenceValue"
                                               placeholder="Select DT Flavor"
                                               ng-disabled="seeOrEdit==='see'" ng-change="setChanged()">
                                        <md-option ng-repeat="link in $root.igdocument.profile.datatypeLibrary.children | filter: {name: item.firstReferenceValue}" value="{{link.id}}">
                                            {{$root.getDatatypeLabel($root.datatypesMap[link.id])}}
                                        </md-option>
                                    </md-select>
                                </td>
                                <td ng-hide="seeOrEdit==='see'" class="col-md-1" style="text-align:left">
                                    <span ng-hide="seeOrEdit==='see'" ng-click="deleteMappingItem(item)"><i
                                            class="material-icons" style="color:red;">clear</i></span>
                                </td>
                            </tr>
                            </tbody>
                            <tr style="float:center !important;"
                                ng-if="dynamicMappingDefinition.dynamicMappingItems.length > 10">
                                <td colspan="6" class="text-center" style="float:center !important;">
                                    <div st-pagination="" st-items-by-page="10" st-displayed-pages="7"
                                         style="float:center !important;"></div>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>

                <md-dialog-actions layout="row">
                    <md-button ng-hide="seeOrEdit==='see'" class="md-primary md-raised" md-autofocus
                               ng-disabled="!changed" ng-click="saveclose()">
                        Save
                    </md-button>
                </md-dialog-actions>
            </md-dialog-content>
        </form>
    </md-dialog>
</script>