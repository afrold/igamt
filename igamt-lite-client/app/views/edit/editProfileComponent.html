<style id="antiClickjack">
    body {
        display: none !important;
    }
</style>
<script type="text/javascript">
    if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
    } else {
        top.location = self.location;
    }
</script>
<script type="text/ng-template" id="EditProfileComponent.html">
    <div ng-show="isAuthenticated()" ng-controller="ListProfileComponentCtrl">
        <!--<div class="row">-->
        <div ng-show="!isPending()">
            <div style="padding-top:10px">
                <div style="margin:5px">
                    <div class="page-header" style="margin-bottom: 20px">
                        <span class="header4">Profile Component: {{profileComponent.name}} </span>
                        <div class="pull-right">
                            <button ng-disabled="editForm.$invalid ||!editForm.$dirty" title="Save Changes" type="button" class="btn btn-raised btn-sm btn-success" ng-click="save()">
                                                            <span><i class="fa fa-check fa-fw"></i> Save</span>
                                                        </button>
                        </div>
                    </div>
                    <div class="static_info">
                        <i class="fa fa-calendar" aria-hidden="true"></i> Updated {{profileComponent.dateUpdated | date:dateFormat}}


                    </div>
                    <md-tabs md-dynamic-height md-border-bottom md-selected="tabStatus.active">
                        <md-tab>
                            <md-tab-label>
                                <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i> MetaData
                            </md-tab-label>
                            <md-tab-body>
                                <div style="margin-top: 20px" ng-cloak class="md-inline-form" layout="column">

                                    <md-content layout-padding>
                                        <md-input-container class="md-block" flex-gt-sm>
                                            <label class="input-left">Name</label>
                                            <input type="text" name="name" ng-change="setDirty()" ng-model="profileComponent.name" required>

                                        </md-input-container>
                                        <md-input-container class="md-block" flex-gt-sm>
                                            <label class="input-left">Description</label>
                                            <input type="text" name="description" ng-change="setDirty()" ng-model="profileComponent.description">
                                        </md-input-container>
                                        <md-input-container class="md-block" flex-gt-sm>
                                            <label class="input-left">Comment</label>
                                            <textarea rows="3" ng-change="setDirty()" name="comment" id="comment" ng-model="profileComponent.comment" />
                                        </md-input-container>
                                      
                                    </md-content>
                                </div>
                            </md-tab-body>
                        </md-tab>
                        <md-tab>
                            <md-tab-label>
                                <i class="fa fa-table fa-fw " aria-hidden="true "></i>Definition
                            </md-tab-label>
                            <md-tab-body>
                                <div style="margin-top: 20px ">
                                    <div class="pull-left">
                                        <ul class="list-group">
                                            <li class="list-group-item">
                                                <span class="label-message-icon"><i class="fa fa-circle fa-fw"/></span> From Message
                                            </li>
                                            <li class="list-group-item">
                                                <span class="label-field-icon"><i class="fa fa-circle fa-fw"/></span> From Segment
                                            </li>
                                            <li class="list-group-item">
                                                <span class="label-component-icon"><i class="fa fa-circle fa-fw"/></span> From Field's Data Type
                                            </li>
                                            <li class="list-group-item">
                                                <span class="label-sub-component-icon"><i class="fa fa-circle fa-fw"/></span> From Component's Data Type
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-12 ">
                                        <div class="pull-left " style="margin-right:20px ">
                                            <button type="button " class="btn btn-raised btn-info btn-xs " style="padding-top:10px " ng-click="addPComponents() "><i class="fa fa-plus "></i> Add Items </button>
                                        </div>
                                    </div>
                                    <div class="col-md-12 " ng-show="profileComponent.children.length>0" style="overflow-y:auto;">
                                        <table class="table table-bordered table-fix-header table-condensed profile-table">
                                            <thead>
                                                <tr class="tbl-header" style="">
                                                    <th class="col-md-1 col-fixed-250" rowspan="2">Position</th>
                                                    <th class="col-md-1 col-fixed-250" rowspan="2">Location</th>
                                                    <th class="col-md-1 col-fixed-40" rowspan="2"> Name</th>
                                                    <th class="col-md-2 col-fixed-80" rowspan="2">Usage</th>
                                                    <th class="col-md-1 col-fixed-100" colspan="2">Cardinality</th>
                                                    <th class="col-md-1 col-fixed-100" colspan="2">Length</th>
                                                    <th class="col-md-1 col-fixed-30" rowspan="2" ng-show="showConfLength()"> ConfLength </th>
                                                    <th class="col-md-2 col-fixed-350" rowspan="2">Data Type
                                                    </th>
                                                    <th class="col-md-1 col-fixed-330" rowspan="2">Value Set/Single Code
                                                    </th>
                                                    <th class="col-md-1 col-fixed-330" rowspan="2">Constant Value
                                                    </th>
                                                    <th class="col-md-1" ng-style="predWidthx" rowspan="2">Predicate
                                                    </th>
                                                    <th class="col-md-1" ng-style="csWidthx" rowspan="2">Conformance Statement
                                                    </th>
                                                    <th class="col-md-1 col-fixed-80" rowspan="2">Definition Text
                                                    </th>
                                                    <th class="col-md-1" ng-style="commentWidth" rowspan="2">Comment
                                                    </th>

                                                    <th class="col-md-1" ng-style="commentWidth" rowspan="2">Action
                                                    </th>
                                                </tr>
                                                <tr class="tbl-header">
                                                    <th class="col-xs-1 col-fixed-50" style="width:2%">min</th>
                                                    <th class="col-xs-1 col-fixed-50" style="width:2%">max</th>
                                                    <th class="col-xs-1 col-fixed-50" style="width:2%">min</th>
                                                    <th class="col-xs-1 col-fixed-50" style="width:2%">max</th>
                                                </tr>
                                            </thead>
                                            <tbody dnd-list="profileComponent.children">
                                                <tr ng-repeat="node in profileComponent.children" dnd-draggable="node" dnd-moved="profileComponent.children.splice($index, 1);updatePosition();">
                                                    <td class="col-md-1 col-fixed-250">

                                                        <span ng-bind="node.position"></span>
                                                    </td>
                                                    <td class="col-md-1 col-fixed-250">
                                                        <span ng-if="node.type=='datatype'" class="label label-default label-icon">D</span>
                                                        <span ng-if="node.type=='group'" class="label label-success label-icon">G</span>
                                                        <span ng-if="node.type=='segmentRef'||node.type=='segment'" class="label label-segment label-icon">S</span>
                                                        <span class="label label-field label-icon" ng-if="node.type==='field'">F</span>
                                                        <span class="label label-component label-icon" ng-if="node.type==='component'">C</span>

                                                        <span ng-bind="node.path"></span>
                                                    </td>


                                                    <td ng-class="{'col-md-2 col-fixed-40 input-change ':node.attributes.ref.id!==node.attributes.oldRef.id,'col-md-2 col-fixed-40':node.attributes.ref.id===node.attributes.oldRef.id}" ng-if="node.type==='segment' || node.type==='segmentRef'">
                                                        <span ng-show="editableRef!==node.id && !node.attributes.ref">
                                                        <span>{{node.attributes.oldRef.name}}</span><span ng-if="node.attributes.oldRef.ext && node.attributes.oldRef.ext!==null">_{{node.attributes.oldRef.ext}}</span>
                                                        </span>
                                                        <span ng-show="editableRef!==node.id && node.attributes.ref">
                                                        <span>{{node.attributes.ref.name}}</span><span ng-if="node.attributes.ref.ext && node.attributes.ref.ext!==null">_{{node.attributes.ref.ext}}</span>
                                                        </span>
                                                        <!--<a ng-show="editableRef!==node.id" ng-click="editRef(node)" class="point">
                                                            <span><i class="fa fa-pencil fa-fw"></i></span>
                                                        </a>-->
                                                        <select style="width:50px;" ng-change="selectFlavor(node,segFlavor)" ng-show="editableRef===node.id" class="form-control input-sm" name="flavor" ng-model="segFlavor" ng-options="segFlavor as segFlavor.label for segFlavor in segFlavors" />
                                                        <!--<a ng-show="node.attributes.ref.id!==node.attributes.oldRef.id" ng-click="cancelRef(node)"><i class="fa fa-remove fa-fw"></i></a>-->
                                                    </td>
                                                    <td class="col-md-2 col-fixed-40" ng-if="node.type!=='segment' &&  node.type!=='segmentRef'">
                                                        <span ng-bind="node.name"></span>


                                                    </td>
                                                    <td ng-class="{'col-md-2 col-fixed-80 select-change':node.attributes.usage,'col-md-2 col-fixed-80':!node.attributes.usage}">
                                                        <div ng-if="node.usage !== 'C'  || (node.usage === 'C' && !findingPredicates(node))">
                                                            <select style="width:50px;" ng-init="initUsage(node)" name="usage" ng-change="setDirty();updateUsage(node);" class="form-control input-sm" ng-model="node.usage">
                                                                <option ng-repeat="usage in config.usages">{{usage}}</option>
                                                            </select>
                                                        </div>

                                                        <span ng-if="findingPredicates(node)" class="badge label-white">
                                                                <span>C({{findingPredicates(node).trueUsage}}/{{findingPredicates(node).falseUsage}})</span>
                                                       
                                                        </span>


                                                        <a ng-show="node.attributes.usage && !findingPredicates(node)" ng-click="cancelUsage(node)"><i class="fa fa-remove fa-fw"></i></a>
                                                    </td>


                                                    <td class="col-md-1 col-fixed-100 emptyCol" ng-if="node.type==='component'">
                                                    </td>
                                                    <td ng-class="{'col-md-1 col-fixed-100 input-change ':node.attributes.min,'col-md-1 col-fixed-100':!node.attributes.min}" ng-if="node.type!=='component'">
                                                        <input style="width:50px;" ng-init="initMinCard(node)" ng-change="setDirty();updateMinCard(node);" class="form-control" name="min" ng-pattern="/^\d+$/" ng-model="node.min" ng-minlength="1">
                                                        <a ng-show="node.attributes.min" ng-click="cancelMinCard(node)"><i class="fa fa-remove fa-fw"></i></a>
                                                    </td>


                                                    <td class="col-md-1 col-fixed-100 emptyCol" ng-if="node.type==='component'">
                                                    </td>
                                                    <td ng-class="{'col-md-1 col-fixed-100 input-change ':node.attributes.max,'col-md-1 col-fixed-100':!node.attributes.max}" ng-if="node.type!=='component'">
                                                        <input style="width:50px;" ng-init="initMaxCard(node)" ng-change="setDirty();updateMaxCard(node);" class="form-control" name="max" ng-pattern="/^\d+$|^\*?$/" ng-model="node.max">
                                                        <a ng-show="node.attributes.max" ng-click="cancelMaxCard(node)"><i class="fa fa-remove fa-fw"></i></a>
                                                    </td>


                                                    <td class="col-md-1 col-fixed-100 emptyCol" ng-if="node.type!=='field' && node.type!=='component'">

                                                    </td>
                                                    <td ng-class="{'col-md-1 col-fixed-100 input-change ':node.attributes.minLength,'col-md-1 col-fixed-100':!node.attributes.minLength}" ng-if="node.type==='field' || node.type==='component'">
                                                        <input style="width:50px;" ng-init="initMinL(node)" ng-change="setDirty();updateMinL(node);" class="form-control" name="minL" ng-model="node.minLength">
                                                        <a ng-show="node.attributes.minLength" ng-click="cancelMinL(node)"><i class="fa fa-remove fa-fw"></i></a>
                                                    </td>


                                                    <td class="col-md-1 col-fixed-100 emptyCol" ng-if="node.type!=='field' && node.type!=='component'">
                                                    </td>
                                                    <td ng-class="{'col-md-1 col-fixed-100 input-change ':node.attributes.maxLength,'col-md-1 col-fixed-100':!node.attributes.maxLength}" ng-if="node.type==='field' || node.type==='component'">
                                                        <input style="width:50px;" ng-init="initMaxL(node)" ng-change="setDirty();updateMaxL(node);" class="form-control" name="maxL" ng-model="node.maxLength">
                                                        <a ng-show="node.attributes.maxLength" ng-click="cancelMaxL(node)"><i class="fa fa-remove fa-fw"></i></a>
                                                    </td>


                                                    <td class="col-md-1 col-fixed-30 emptyCol" ng-if="node.type!=='field' && node.type!=='component'">
                                                    </td>
                                                    <td ng-show="showConfLength()" ng-class="{'col-md-1 col-fixed-30 input-change ':node.attributes.confLength,'col-md-1 col-fixed-30':!node.attributes.confLength}" ng-if="node.type==='field' || node.type==='component'">
                                                        <input style="width:50px;" ng-init="initConfL(node)" ng-change="setDirty();updateConfL(node);" class="form-control" name="confL" ng-model="node.confLength">
                                                        <a ng-show="node.attributes.confLength" ng-click="cancelConfL(node)"><i class="fa fa-remove fa-fw"></i></a>
                                                    </td>


                                                    <td ng-show="showConfLength()" class="col-md-2 col-fixed-350 emptyCol" ng-if="node.type!=='field' && node.type!=='component'">

                                                    </td>
                                                    <td ng-class="{'col-md-2 col-fixed-350 input-change ':node.attributes.datatype,'col-md-2 col-fixed-350':!node.attributes.datatype}" ng-if="node.type==='field' || node.type==='component'">
                                                        <!--<a ng-init="initDatatype(node)" class="point" ng-show="editableDT!==node.id" ng-click="redirectDT(node.datatype)">
                                                        {{getDatatypeLabel(datatypesMap[node.datatype.id])}}
                                                    </a>
                                                        <a ng-show="editableDT!==node.id&&node.datatype" ng-click="editDT(node)" class="point">
                                                            <span><i class="fa fa-pencil fa-fw"></i></span>
                                                        </a>
                                                        <a ng-click="editDatatype=true;editDT(node);" ng-hide="node.datatype||editableDT===node.id"><i class="fa fa-plus fa-fw"></i></a>
                                                        <select ng-show="editableDT===node.id" ng-model="node.datatype" ng-change="selectDT(node)" class="form-control">
                                                        <option ng-repeat="datatype in datatypes" value="{{datatype}}" ng-selected="node.datatype.id===datatype.id"> {{getDatatypeLabel(datatype)}} {{::datatype.hl7Version}}
                                                        </option>
                                                        <option ng-click="otherDT(node)" value="Others"> Others</option>
                                                    </select>
                                                        <a ng-click="editDatatype=false;cancelDatatype(node)" ng-show="node.datatype||editableDT===node.id"><i class="fa fa-remove fa-fw"></i></a>-->
                                                        <ng-form name="innerForm" class="form-inline" ng-controller="DatatypeRowCtrl" ng-init="init(node);initDatatype(node)">
                                                            <div ng-if="node.datatype != null && datatypesMap[node.datatype.id] != null && datatypesMap[node.datatype.id] != undefined">
                                                                <span class="badge label-white" ng-show="editableDT!==node.id">
                                                                 <display-label of="datatypesMap[node.datatype.id]" desc="false"  ng-click="redirectDT(node.datatype)"></display-label>
                                                                <span title="Change Datatype" ng-click="editDatatype=true;editDT(node)">
                                                                <i class="fa fa-pencil fa-fw edit-icon"></i></span>
                                                                </span>

                                                                <div ng-if="editableDT===node.id">
                                                                    <md-select placeholder="Select Data type" ng-model="node.datatype" ng-change="selectDT(node)" ng-controller="DatatypeRowCtrl" ng-init="init(node)">
                                                                        <md-option ng-value="datatype" ng-repeat="datatype in datatypes">
                                                                            <display-label of="datatypesMap[datatype.id]" desc="false"></display-label>
                                                                        </md-option>
                                                                    </md-select>
                                                                </div>

                                                                <div align="center">
                                                                    <a ng-show="node.attributes.datatype" ng-show="node.datatype||editableDT===node.id" ng-click="editDatatype=false;cancelDatatype(node)" class="point">
                                                                        <span><i class="glyphicon glyphicon-remove"></i></span>
                                                                    </a>
                                                                    <!--<a ng-show="datatypesMap[node.datatype.id].name.toUpperCase() === 'varies'.toUpperCase()" ng-click="showEditDynamicMappingDlg(node)" class="point">
                                                                        <span><i class="fa fa-cog" aria-hidden="true"></i></span>
                                                                    </a>-->
                                                                </div>
                                                            </div>
                                                        </ng-form>
                                                    </td>




                                                    <td ng-class="{'col-md-1 col-fixed-330 emptyCol':!isAvailableForValueSet(node),'col-md-1 col-fixed-330 input-change':(node.valueSetBindings && node.valueSetBindings.length>0)}" style="text-align:center">

                                                        <div ng-show="isAvailableForValueSet(node)">
                                                            <div ng-repeat="binding in findingBindings(node)">
                                                                <span class="badge label-white">
                                                                <span ng-class="{'label-message-icon' : binding.bindingFrom == 'message', 'label-field-icon' : binding.bindingFrom == 'segment', 'label-component-icon' : binding.bindingFrom == 'field', 'label-sub-component-icon' : binding.bindingFrom == 'component'}"><i class="fa fa-circle fa-fw"/></span>


                                                                <span title="For {{getValueSetContext(node)}}" ng-show=" binding.type == 'valueset'" ng-click="redirectVS(binding)">{{getTableLabel(binding)}}</span>
                                                                </span>
                                                                <span title="For {{getValueSetContext(node)}}" ng-show=" binding.type == 'singlecode'" ng-click="redirectVS(binding)">{{binding.code.value}}<i class="fa fa-arrow-right" aria-hidden="true"></i>[{{binding.code.codeSystem}}]</span>
                                                                </span>
                                                            </div>
                                                            <a class="point">
                                                                <span ng-click="editModalBindingForMsg(node)"><i class="fa fa-plus fa-fw"></i></span>
                                                                <a ng-show="node.valueSetBindings && node.valueSetBindings.length>0" ng-click="cancelBinding(node)"><i class="fa fa-remove fa-fw"></i></a>
                                                            </a>
                                                        </div>
                                                    </td>
                                                    <td ng-class="{'emptyCol':!isAvailableConstantValue(node),'input-change':(node.singleElementValues && node.singleElementValues.location)}" style="text-align:center">
                                                        <div ng-init="initSev(node)" ng-show="isAvailableConstantValue(node)">
                                                            <div>

                                                                <span ng-show="node.sev" class="badge label-white">
                                                                    <span ng-show="node.sev.value!=='' && node.sev.value!==null" ng-class="{'label-message-icon' : node.from == 'message', 'label-field-icon' : node.from == 'segment'}"><i class="fa fa-circle fa-fw"/></span>
                                                                <span>{{node.sev.value}}</span>
                                                                <span ng-show="node.sev.value!=='' && node.sev.value!==null" title="Edit SingleElement" ng-click="openDialogForEditSev(node)"><i class="fa fa-pencil fa-fw edit-icon"></i></span>
                                                                <span ng-show="node.singleElementValues && node.singleElementValues.location" title="Cancel SingleElement" ng-click="cancelSev(node)"><i class="fa fa-times fa-fw edit-icon"></i></span>
                                                                </span>
                                                                <a ng-show="!node.sev || !node.sev.value" class="point" ng-click="openDialogForEditSev(node)">
                                                                    <span><i class="fa fa-plus fa-fw"></i></span>
                                                                </a>
                                                            </div>


                                                        </div>
                                                    </td>
                                                    <td ng-class="{'has-error': node.usage === 'C' && !findingPredicates(node) , 'emptyCol':node.usage !== 'C','input-change':node.predicates.length>0}">
                                                        <div>

                                                            <div ng-show="node.usage==='C' && !findingPredicates(node) && node.from==='message'">
                                                                <a ng-click="openAddGlobalPredicateDialogMsg(node)" class="point">
                                                                    <span><i class="fa fa-plus fa-fw"></i></span>
                                                                    <p class="warning">Need predicate</p>
                                                                </a>
                                                            </div>
                                                            <div ng-show="node.usage==='C' && !findingPredicates(node) && node.from==='segment' && node.type==='field'">
                                                                <a ng-click="openAddGlobalPredicateDialogSeg(node)" class="point">
                                                                    <span><i class="fa fa-plus fa-fw"></i></span>
                                                                    <p class="warning">Need predicate</p>
                                                                </a>
                                                            </div>

                                                            <div ng-show="node.usage==='C' && findingPredicates(node) ">

                                                                <span title="{{getPredicateAsString(findingPredicates(node))}}" class="badge label-white">
                                                                    <span ng-class="{'label-message-icon' : findingPredicates(node).bindingFrom == 'message', 'label-field-icon' : findingPredicates(node).bindingFrom == 'segment','label-component-icon':findingPredicates(node).bindingFrom==='field','label-sub-component-icon' : findingPredicates(node).bindingFrom == 'component'}"><i class="fa fa-circle fa-fw"/></span>
                                                                <span ng-show="findingPredicates(node).bindingFrom === 'message' && node.from==='message' " ng-click="openAddGlobalPredicateDialogMsg(node)">{{getConstraintAsTruncatedString(findingPredicates(node), 15)}}
                                                                    <i class="fa fa-pencil fa-fw edit-icon"></i>
                                                                </span>
                                                                <span ng-show="(findingPredicates(node).bindingFrom === 'segment' && node.from==='segment' && node.type==='field') " ng-click="openAddGlobalPredicateDialogSeg(node)">{{getConstraintAsTruncatedString(findingPredicates(node), 15)}}
                                                                    <i class="fa fa-pencil fa-fw edit-icon"></i>
                                                                </span>
                                                                <span ng-show="(node.from==='message' && (findingPredicates(node).bindingFrom !=='message')) || (node.from==='segment' && (findingPredicates(node).bindingFrom !=='segment'))">{{getConstraintAsTruncatedString(findingPredicates(node), 15)}}
                                                                    
                                                                </span>

                                                                <!--<span ng-show="(findingPredicates(node).bindingFrom == 'message' && node.from==='message')||(findingPredicates(node).bindingFrom == 'segment' && node.from==='segment') " ng-click="openAddGlobalPredicateDialog(node)"><i class="fa fa-pencil fa-fw edit-icon"></i></span>-->
                                                                <span ng-show="((findingPredicates(node).bindingFrom == 'message' && node.from==='message')||(findingPredicates(node).bindingFrom == 'segment' && node.from==='segment')) &&  node.predicates.length>0" ng-click="cancelPredicate(node)"><i class="fa fa-times fa-fw edit-icon"></i></span>
                                                                </span>
                                                                <div ng-show="countPredicate(node.path) > 1">
                                                                    <p class="warning">Multiple predicates</p>
                                                                </div>
                                                            </div>



                                                        </div>
                                                    </td>
                                                    <td class="col-md-1">
                                                    </td>


                                                    <td class="col-md-1 col-fixed-80 emptyCol" ng-if="node.type!=='field' && node.type!=='component'">
                                                    </td>
                                                    <td class="col-md-1 col-fixed-80 " ng-class="{'input-change':(node.attributes.text && node.attributes.text !== '' && node.attributes.text !== null)}" ng-if="node.type==='field' || node.type==='component'">

                                                        <a ng-click="addDefText(node)" class="point">
                                                            <i class="fa fa-pencil fa-fw" ng-if="node.attributes.text && node.attributes.text !== '' && node.attributes.text !== null "></i>
                                                            <i class="fa fa-plus fa-fw" ng-if="!node.attributes.text || node.attributes.text === '' || node.attributes.text === null"></i>
                                                        </a>
                                                        <a ng-click="cancelDefText(node)" ng-show="node.attributes.text && node.attributes.text !== '' && node.attributes.text !== null">
                                                            <i class="fa fa-times fa-fw"></i>
                                                        </a>
                                                    </td>


                                                    <td style="text-align:center" ng-class="{'input-change':(node.comments && node.comments.length>0)}">
                                                        <div ng-repeat="comment in findingComments(node)">
                                                            <span class="badge label-white">
                                                        <span ng-class="{'label-message-icon' : comment.from == 'message', 'label-field-icon' : comment.from == 'segment', 'label-component-icon' : comment.from == 'field', 'label-sub-component-icon' : comment.from == 'component'}"><i class="fa fa-circle fa-fw"/></span>
                                                            <span title="{{comment.description}}@{{comment.lastUpdatedDate|date:dateFormat}}" ng-click="editCommentDlg(node, comment, false, 'compositeProfile')">{{comment.lastUpdatedDate|date:dateFormat}}</span>
                                                            </span>
                                                        </div>
                                                        <a class="point">
                                                            <span ng-click="editCommentDlg(node, null, false, 'message')"><i class="fa fa-plus fa-fw"></i></span>
                                                            <a ng-show="node.comments && node.comments.length>0" ng-click="cancelComments(node)"><i class="fa fa-remove fa-fw"></i></a>

                                                        </a>
                                                    </td>

                                                    <td class="col-md-1" ng-style="commentWidth">
                                                        <button type="button" class="btn btn-raised btn-raised btn-xs btn-danger" ng-click="removePcEntry(node)">
                                                        <span><i class="fa fa-times fa-fw"></i></span>
                                                    </button>
                                                    </td>
                                                </tr>
                                                <tr class="dndPlaceholder">
                                                    <td colspan="13" style="height:20px; background-color:lightgrey"> Drop Here</td>
                                                </tr>
                                            </tbody>
                                        </table>

                                    </div>


                                </div>
                            </md-tab-body>

                        </md-tab>
                        <md-tab>
                            <md-tab-label>
                                <i class="fa fa-link fa-fw" aria-hidden="true"></i>Cross-References
                            </md-tab-label>
                            <md-tab-body>
                                <div style="margin-top: 20px">
                                    <div class="col-md-12">
                                        <div class="pull-right">

                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <table id="applyPcToTable" tt-table tt-params="applyPcToParams" class="table table-bordered table-fix-header table-condensed profile-table">
                                            <thead>
                                                <tr class="tbl-header" style="">
                                                    <th class="col-md-3">Composite Profile Name</th>
                                                    <th class="col-md-3">Core Profile Name</th>
                                                    <th class="col-md-3">Applied Profile Components</th>

                                                </tr>

                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>

                                </div>
                            </md-tab-body>
                        </md-tab>
                    </md-tabs>






                </div>



            </div>
        </div>
    </div>


</script>



<script type="text/ng-template" id="profileComponentTable">

    <tr tt-node is-branch="false">
        <td class="col-md-1 col-fixed-250">

            <span ng-bind="node.position"></span>
        </td>
        <td class="col-md-1 col-fixed-250">
            <span ng-if="node.type=='datatype'" class="label label-default label-icon">D</span>
            <span ng-if="node.type=='group'" class="label label-success label-icon">G</span>
            <span ng-if="node.type=='segmentRef'||node.type=='segment'" class="label label-segment label-icon">S</span>
            <span class="label label-field label-icon" ng-if="node.type==='field'">F</span>
            <span class="label label-component label-icon" ng-if="node.type==='component'">C</span>

            <span ng-bind="node.path"></span>
        </td>


        <td ng-class="{'col-md-2 col-fixed-40 input-change ':node.attributes.ref.id!==node.attributes.oldRef.id,'col-md-2 col-fixed-40':node.attributes.ref.id===node.attributes.oldRef.id}" ng-if="node.type==='segment' || node.type==='segmentRef'">
            <span ng-show="editableRef!==node.id && !node.attributes.ref">
                <span>{{node.attributes.oldRef.name}}</span><span ng-if="node.attributes.oldRef.ext && node.attributes.oldRef.ext!==null">_{{node.attributes.oldRef.ext}}</span>
            </span>
            <span ng-show="editableRef!==node.id && node.attributes.ref">
                <span>{{node.attributes.ref.name}}</span><span ng-if="node.attributes.ref.ext && node.attributes.ref.ext!==null">_{{node.attributes.ref.ext}}</span>
            </span>
            <a ng-show="editableRef!==node.id" ng-click="editRef(node)" class="point">
                <span><i class="fa fa-pencil fa-fw"></i></span>
            </a>
            <select ng-change="selectFlavor(node,segFlavor)" ng-show="editableRef===node.id" class="form-control input-sm" name="flavor" ng-model="segFlavor" ng-options="segFlavor as segFlavor.label for segFlavor in segFlavors" />
            <a ng-click="cancelRef(node)"><i class="fa fa-remove fa-fw"></i></a>
        </td>
        <td class="col-md-2 col-fixed-40" ng-if="node.type!=='segment' &&  node.type!=='segmentRef'">
            <span ng-bind="node.name"></span>


        </td>
        <td ng-class="{'col-md-2 col-fixed-80 select-change':node.attributes.usage,'col-md-2 col-fixed-80':!node.attributes.usage}">
            <!--<a ng-click="edit=true;" ng-hide="edit || node.attributes.usage "><i class="fa fa-plus fa-fw"></i></a>-->
            <!--<select ng-change="setDirty()" class="form-control input-sm" ng-model="node.attributes.usage" name="usage" ng-options="usage for usage in config.usages" ng-selected="node.attributes.oldUsage" style="width: auto;">-->
            <!--</select> ng-selected="node.attributes.usage===null && node.attributes.oldUsage===usage"-->
            <select ng-init="initUsage(node)" name="usage" ng-change="setDirty();updateUsage(node);" class="form-control input-sm" ng-model="node.usage">
                <option ng-repeat="usage in config.usages">{{usage}}</option>
            </select>
            <a ng-click="cancelUsage(node)"><i class="fa fa-remove fa-fw"></i></a>
        </td>


        <td class="col-md-1 col-fixed-100 emptyCol" ng-if="node.type==='component'">
        </td>
        <td ng-class="{'col-md-1 col-fixed-100 input-change ':node.attributes.min,'col-md-1 col-fixed-100':!node.attributes.min}" ng-if="node.type!=='component'">
            <input ng-init="initMinCard(node)" ng-change="setDirty();updateMinCard(node);" class="form-control" name="min" ng-pattern="/^\d+$/" ng-model="node.min" ng-minlength="1">
            <a ng-click="cancelMinCard(node)"><i class="fa fa-remove fa-fw"></i></a>
        </td>


        <td class="col-md-1 col-fixed-100 emptyCol" ng-if="node.type==='component'">
        </td>
        <td ng-class="{'col-md-1 col-fixed-100 input-change ':node.attributes.max,'col-md-1 col-fixed-100':!node.attributes.max}" ng-if="node.type!=='component'">
            <input ng-init="initMaxCard(node)" ng-change="setDirty();updateMaxCard(node);" class="form-control" name="max" ng-pattern="/^\d+$|^\*?$/" ng-model="node.max">
            <a ng-click="cancelMaxCard(node)"><i class="fa fa-remove fa-fw"></i></a>
        </td>


        <td class="col-md-1 col-fixed-100 emptyCol" ng-if="node.type!=='field' && node.type!=='component'">

        </td>
        <td ng-class="{'col-md-1 col-fixed-100 input-change ':node.attributes.minLength,'col-md-1 col-fixed-100':!node.attributes.minLength}" ng-if="node.type==='field' || node.type==='component'">
            <input ng-init="initMinL(node)" ng-change="setDirty();updateMinL(node);" class="form-control" name="minL" ng-model="node.minLength">
            <a ng-click="cancelMinL(node)"><i class="fa fa-remove fa-fw"></i></a>
        </td>


        <td class="col-md-1 col-fixed-100 emptyCol" ng-if="node.type!=='field' && node.type!=='component'">
        </td>
        <td ng-class="{'col-md-1 col-fixed-100 input-change ':node.attributes.maxLength,'col-md-1 col-fixed-100':!node.attributes.maxLength}" ng-if="node.type==='field' || node.type==='component'">
            <input ng-init="initMaxL(node)" ng-change="setDirty();updateMaxL(node);" class="form-control" name="maxL" ng-model="node.maxLength">
            <a ng-click="cancelMaxL(node)"><i class="fa fa-remove fa-fw"></i></a>
        </td>


        <td class="col-md-1 col-fixed-30 emptyCol" ng-if="node.type!=='field' && node.type!=='component'">
        </td>
        <td ng-show="showConfLength()" ng-class="{'col-md-1 col-fixed-30 input-change ':node.attributes.confLength,'col-md-1 col-fixed-30':!node.attributes.confLength}" ng-if="node.type==='field' || node.type==='component'">
            <input ng-init="initConfL(node)" ng-change="setDirty();updateConfL(node);" class="form-control" name="confL" ng-model="node.confLength">
            <a ng-click="cancelConfL(node)"><i class="fa fa-remove fa-fw"></i></a>
        </td>


        <td ng-show="showConfLength()" class="col-md-2 col-fixed-350 emptyCol" ng-if="node.type!=='field' && node.type!=='component'">

        </td>
        <td class="col-md-2 col-fixed-350 " ng-if="node.type==='field' || node.type==='component'">
            <a class="point" ng-show="editableDT!==node.id" ng-click="redirectDT(node.attributes.datatype)">
                {{getDatatypeLabel(datatypesMap[node.attributes.datatype.id])}}
            </a>
            <a ng-show="editableDT!==node.id&&node.attributes.datatype" ng-click="editDT(node)" class="point">
                <span><i class="fa fa-pencil fa-fw"></i></span>
            </a>
            <a ng-click="editDatatype=true;editDT(node);" ng-hide="node.attributes.datatype||editableDT===node.id"><i class="fa fa-plus fa-fw"></i></a>
            <select ng-show="editableDT===node.id" ng-model="datatype" ng-change="selectDT(node,datatype)" class="form-control">
                    <option ng-repeat="datatype in datatypes" value="{{datatype}}" > {{getDatatypeLabel(datatype)}} {{::datatype.hl7Version}}
                    </option>
                    <option ng-click="otherDT(node)" value="Others"> Others</option>
                </select>
            <a ng-click="editDatatype=false;cancelDatatype(node)" ng-show="node.attributes.datatype||editableDT===node.id"><i class="fa fa-remove fa-fw"></i></a>



        </td>


        <td class="col-md-1 col-fixed-330 emptyCol" ng-if="node.type!=='field' && node.type!=='component'">
        </td>
        <td class="col-md-1 col-fixed-330" ng-if="node.type==='field' || node.type==='component'">

            <div ng-if="node.attributes.tables && node.attributes.tables.length!==0 ">
                <a class="point" ng-repeat="table in node.attributes.tables">
                    <span ng-click="redirectVS(table)">{{getTableLabel(tablesMap[table.id])}}</span>
                </a>
                <a ng-click="editVSModal(node)" class="point">
                    <span><i class="fa fa-pencil fa-fw"></i></span>
                </a>

            </div>
            <div ng-if="!node.attributes.tables || node.attributes.tables.length===0 ">
                <a ng-click="editVSModal(node)" class="point">
                    <span><i class="fa fa-plus fa-fw"></i></span>
                </a>
            </div>
            <a ng-click="cancelTables(node)" ng-show="node.attributes.tables"><i class="fa fa-remove fa-fw"></i></a>

        </td>



        <td class="col-md-1">
        </td>
        <td class="col-md-1">
        </td>


        <td class="col-md-1 col-fixed-80 emptyCol" ng-if="node.type!=='field' && node.type!=='component'">
        </td>
        <td class="col-md-1 col-fixed-80 " ng-if="node.type==='field' || node.type==='component'">

            <a ng-click="addDefText(node)" class="point">
                <i class="fa fa-pencil fa-fw" ng-if="node.attributes.text && node.attributes.text !== '' && node.attributes.text !== null "></i>
                <i class="fa fa-plus fa-fw" ng-if="!node.attributes.text || node.attributes.text === '' || node.attributes.text === null"></i>
            </a>
            <a ng-click="cancelDefText(node)" ng-show="node.attributes.text && node.attributes.text !== '' && node.attributes.text !== null">
                <i class="fa fa-times fa-fw"></i>
            </a>
        </td>


        <td class="col-md-1" ng-style="commentWidth">
            <a ng-click="addComment(node)" class="point" tooltip-html="node.attributes.comment" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" tooltip-trigger tooltip-animation="false" tooltip-placement="left">
                <i class="fa fa-pencil fa-fw" ng-if="node.attributes.comment && node.attributes.comment !== '' && node.attributes.comment !== null "></i>
                <i class="fa fa-plus fa-fw" ng-if="!node.attributes.comment || node.attributes.comment === '' || node.attributes.comment === null"></i>
            </a>
            <a ng-click="cancelComment(node)" ng-show="node.attributes.comment && node.attributes.comment !== '' && node.attributes.comment !== null">
                <i class="fa fa-times fa-fw"></i>
            </a>
        </td>

        <td class="col-md-1" ng-style="commentWidth">
            <!--<i ng-click="removePcEntry(node)" class="fa fa-times" aria-hidden="true"></i>-->
            <button type="button" class="btn btn-raised btn-raised btn-xs btn-danger" ng-click="removePcEntry(node)">
				<span><i class="fa fa-times fa-fw"></i></span>
			</button>
        </td>
    </tr>

</script>

<script type="text/ng-template" id="addCommentModal.html">
    <div class="modal-header">
        <h3>{{field.name}} : Comment</h3>




    </div>
    <div class="modal-body">
        <form class="form-horizontal" novalidate>
            <div class="row">
                <div class="col-md-12">
                    <textarea rows="10" type="text" style="width:100%;" autofocus name="inputEditor" class="form-control" ng-model="field.attributes.comment"></textarea>
                </div>
            </div>
        </form>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-primary btn-md" ng-click="close()"><span><i class="fa fa-times fa-fw">
            &nbsp; </i>Close</span>
        </button>
    </div>
</script>

<script type="text/ng-template" id="addDefTextModal.html">
    <div class="modal-header modal-wide ">
        <h3 class="modal-title ">{{field.name}} : Definition Text</h3>
    </div>
    <div class="modal-body ">
        <div class="row ">
            <div class="col-md-12 ">
                <div>
                    <textarea rows="10 " froala="froalaEditorOptions " style="width:100%; " autofocus ng-model="field.attributes.text" id="globalEditor " name="content "></textarea>
                </div>

            </div>
        </div>
    </div>
    <div class="modal-footer ">
        <button class="btn btn-raised btn-primary btn-md " ng-click="close() "><span><i class="fa fa-times fa-fw ">
            &nbsp; </i>Close</span>
        </button>
    </div>
</script>

<script type="text/ng-template" id="applyPcTo.html">
    <div class="modal-header">
        <h3 class="modal-title">Apply Profile Component: {{profileComponent.name}}</h3>
    </div>
    <div class="modal-body">
        <!--<div class="container" style="margin-bottom: 20px;margin-top: 10px">
            <div class="row" style="padding-top:10px">
                <div class="col-md-6">
                    <select class="form-control input-sm" ng-model="applyTo" ng-options="message as message.name for message in msgs" />
                </div>

                <div class="col-md-6 " ng-show="addedField.length> 0">

                </div>

            </div>


        </div>-->
    </div>
    <div class="container" style="margin-bottom: 20px;margin-top: 10px">
        <div class="row" style="padding-top:10px">

            <div class="col-md-6">

                <table id="applyTable" tt-table tt-params="ApplyToComponentParams" class="table table-striped table-borderless table-condensed hl7-versions-valueset table-fixed">
                    <thead>
                        <tr class="tbl-header">
                            <th>Choose Conformance Profile</th>

                        </tr>

                    </thead>
                    <tbody></tbody>
                </table>

            </div>




            <div class="col-md-6 " ng-show="applyToList.length> 0">
                <div class="igl-table">
                    <h5>Selected Conformance Profiles</h5>
                    <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                        <thead>
                            <tr class="tbl-header">
                                <th class="col-md-3">Conformance Profile</th>
                                <th class="col-md-2">Position</th>



                                <th class="col-md-1" />
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="applyTo in applyToList">
                                <td class="col-md-3">
                                    {{applyTo.name}}
                                </td>
                                <td class="col-md-2"><span>
                                        
                                        
                                    <span>{{applyTo.position}}</span>

                                    </span>

                                </td>


                                <td class="col-md-1"> <a class="pointer" ng-click="removeSelectedApplyTo(applyTo)"><i class="fa fa-times fa-fw"></i></a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>



        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-info btn-sm" ng-click="apply()"><span><i class="fa fa-check fa-fw">&nbsp; </i>Apply</span>
        </button>
    </div>
</script>
<script type="text/ng-template" id="applyTable">

    <tr tt-node is-branch="false">

        <td>
            <a class="pointer " ng-click="addApplyToMsg(node) "><i class="fa fa-plus fa-fw "></i></a>


            <span ng-bind="node.name"></span>
        </td>

    </tr>

</script>

<script type="text/ng-template" id="applyPcToTable">

    <tr tt-node is-branch="false">
        <td class="col-md-3">
            <span ng-bind="node.compositeName"></span>
        </td>
        <td class="col-md-3">
            <span ng-bind="node.coreMessageName"></span>
        </td>
        <td class="col-md-3">
            <span ng-repeat="pcInfo in node.pcs">{{pcInfo.name}}<br></span>
        </td>


    </tr>

</script>




<script type="text/ng-template" id="addComponents.html">
    <div class="modal-header">
        <h3 class="modal-title">Add profile Components</h3>
    </div>
    <div class="modal-body">
        <div class="container" style="margin-bottom: 20px;margin-top: 10px">
            <div layout="row" style="padding-top:10px" layout-align="center center">
                <div flex="50">
                    <md-tabs md-dynamic-height md-border-bottom md-selected="tabStatus.active">
                        <md-tab>
                            <md-tab-label>Message</md-tab-label>
                            <md-tab-body>
                                <div class=" panel panel-default">
                                    <div class="panel-heading">Choose Items</div>
                                    <div class="panel-body">

                                        <table id="MsgProfileComponentTable" tt-table tt-params="MsgProfileComponentParams" class="table table-striped table-borderless table-condensed hl7-versions-valueset table-fixed">
                                            <thead>
                                                <!--<tr class="tbl-header">
                                                <th>Choose Profile Component</th>

                                            </tr>-->

                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>

                                </div>
                            </md-tab-body>

                        </md-tab>
                        <md-tab>
                            <md-tab-label>Segment</md-tab-label>
                            <md-tab-body>
                                <div class=" panel panel-default">
                                    <div class="panel-heading">Choose Items</div>
                                    <div class="panel-body">

                                        <table id="SegProfileComponentTable" tt-table tt-params="SegProfileComponentParams" class="table table-striped table-borderless table-condensed hl7-versions-valueset table-fixed">
                                            <thead>


                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>

                                </div>

                            </md-tab-body>

                        </md-tab>

                    </md-tabs>
                </div>
                <div flex="50">
                    <div class=" panel panel-default" ng-show="selectedPC.length> 0" style="margin-top:47px;">
                        <div class="panel-heading">Selected Items</div>
                        <div class="panel-body" style="overflow-y: auto;height: 250px;">
                            <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-3">Path</th>
                                        <th class="col-md-2">Name</th>



                                        <th class="col-md-1" />
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="pc in selectedPC">
                                        <td class="col-md-3">
                                            <span ng-if="pc.type=='datatype'" class="label label-default label-icon">D</span>

                                            <span ng-if="pc.type=='group'" class="label label-success label-icon">G</span>
                                            <span ng-if="pc.type=='segmentRef'||pc.type=='segment'" class="label label-segment label-icon">S</span>
                                            <span class="label label-field label-icon" ng-if="pc.type==='field'">F</span>
                                            <span class="label label-component label-icon" ng-if="pc.type==='component'">C</span> {{pc.path}}
                                        </td>
                                        <td class="col-md-2"><span>
                                        
                                        <span ng-if="pc.type==='segmentRef'">{{pc.attributes.oldRef.name}}</span>
                                            <span ng-if="pc.type!=='segmentRef'">{{pc.name}}</span>

                                            </span>
                                            <!--<a class="pointer" ng-show="!edit && dt.ext!==null && dt.ext!==' '&& dt.scope!=='MASTER '" ng-click="edit=true;checkExt(dt)"><i class="fa fa-pencil fa-fw"></i></a>
                                                <input ng-show="edit" ng-change="checkExt(dt)" ng-model="dt.ext" />-->
                                            <!--<a class="pointer" ng-show="edit && checkedExt && NocheckedExt" ng-click="edit=false"><i class="fa fa-check-circle"></i></a>
                                                <span ng-if="edit && !checkedExt" class="danger">This extension already exists</span>
                                                <span ng-if="edit && !NocheckedExt" class="danger">A flavor must have an extension</span>-->
                                        </td>


                                        <td class="col-md-1"> <a class="pointer" ng-click="removeSelectedComp(pc)"><i class="fa fa-times fa-fw"></i></a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>
                <!--<div flex ng-show="selectedPC.length> 0">
                    <div class="igl-table">
                        <h5>Selected Profile Components</h5>
                        <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                            <thead>
                                <tr class="tbl-header">
                                    <th class="col-md-3">Path</th>
                                    <th class="col-md-2">Name</th>



                                    <th class="col-md-1" />
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="pc in selectedPC">
                                    <td class="col-md-3">
                                        <span ng-if="pc.type=='datatype'" class="label label-default label-icon">D</span>

                                        <span ng-if="pc.type=='group'" class="label label-success label-icon">G</span>
                                        <span ng-if="pc.type=='segmentRef'||pc.type=='segment'" class="label label-segment label-icon">S</span>
                                        <span class="label label-field label-icon" ng-if="pc.type==='field'">F</span>
                                        <span class="label label-component label-icon" ng-if="pc.type==='component'">C</span> {{pc.path}}
                                    </td>
                                    <td class="col-md-2"><span>
                                        
                                        <span ng-if="pc.type==='segmentRef'">{{pc.attributes.oldRef.name}}</span>
                                        <span ng-if="pc.type!=='segmentRef'">{{pc.name}}</span>

                                        </span>
                                     
                                    </td>


                                    <td class="col-md-1"> <a class="pointer" ng-click="removeSelectedComp(pc)"><i class="fa fa-times fa-fw"></i></a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>-->



            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-info btn-sm" ng-click="add()"><span><i class="fa fa-check fa-fw">&nbsp; </i>Add</span>
        </button>
    </div>
</script>



<script type="text/ng-template" id="MsgProfileComponentTable">

    <tr tt-node is-branch="node.children!==undefined && node.children.length>0">

        <td>
            <a ng-if="node.type==='group'||node.type==='segmentRef'||node.type==='field'||node.type==='component'" class="pointer " ng-click="addElementPc(node,$event) "><i class="fa fa-plus fa-fw "></i></a>

            <span ng-if="node.type==='group'" class="label label-success label-icon">G</span>
            <span ng-if="node.type==='segmentRef'" class="label label-segment label-icon">S</span>
            <span ng-if="node.type==='field'" class="label label-field label-icon">F</span>
            <span ng-if="node.type==='component'" class="label label-component label-icon">C</span>

            <span ng-bind="node.position"></span>.
            <span ng-if="node.name" ng-bind="node.name"></span>
            <span ng-if="node.ref.name" ng-bind="segmentsMap[node.ref.id].label"></span>
        </td>

    </tr>

</script>
<script type="text/ng-template" id="SegProfileComponentTable">

    <tr tt-node is-branch="node.fields!==undefined && node.fields.length>0">

        <td>
            <a class="pointer " ng-click="addElementPc(node,$event) "><i class="fa fa-plus fa-fw "></i></a>
            <span ng-if="node.type=='segment'" class="label label-segment label-icon">S</span>

            <span ng-if="node.type=='field'" class="label label-field label-icon">F</span>
            <span ng-if="node.type=='component'" class="label label-component label-icon">C</span>


            <span ng-if="node.position" ng-bind="node.position"></span><span ng-if="node.position">.</span>
            <span ng-if="node.label && node.name" ng-bind="node.label"></span>
            <span ng-if="node.name && !node.label" ng-bind="node.name"></span>
        </td>

    </tr>

</script>

<script type="text/ng-template" id="DTProfileComponentTable">

    <tr tt-node is-branch="node.components!==undefined && node.components.length>0">

        <td>
            <a class="pointer " ng-click="addElementPc(node,$event) "><i class="fa fa-plus fa-fw "></i></a>
            <span ng-if="node.type=='datatype' " class="label label-default label-icon ">D</span>

            <span ng-if="node.type=='component' " class="label label-component label-icon ">C</span>

            <span ng-if="node.position " ng-bind="node.position "></span><span ng-if="node.position ">.</span>

            <span ng-if="node.label && node.name " ng-bind="node.label "></span>
            <span ng-if="node.name && !node.label " ng-bind="node.name "></span>
        </td>

    </tr>

</script>