<script type="text/ng-template" id="EditProfileComponent.html">
    <div ng-show="isAuthenticated()" ng-controller="ListProfileComponentCtrl">
        <!--<div class="row">-->
        <div ng-show="!isPending()">
            <div style="padding-top:10px">
                <div style="margin:5px">
                    <tabset active="tabStatus.active">
                        <tab>
                            <tab-heading>
                                <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i> Edit Profile Component
                            </tab-heading>
                            <div style="margin-top: 20px">

                                <div class="col-md-12">
                                    <div class="pull-left" style="margin-right:20px">
                                        <button type="button" class="btn btn-raised btn-info btn-xs" style="padding-top:10px" ng-click="addPComponents()"><i class="fa fa-plus"></i> Add components </button>
                                    </div>
                                    <div class="pull-right">
                                        <button title="Save Changes" type="button" class="btn btn-raised btn-sm btn-success" ng-click="save()">
                                                    <span><i class="fa fa-check fa-fw"></i> Save</span>
                                                </button>
                                    </div>


                                </div>
                                <div class="col-md-12">

                                    <table id="profileComponentTable" tt-table tt-params="profileComponentParams" class="table table-bordered table-fix-header table-condensed profile-table">
                                        <thead>
                                            <tr class="tbl-header" style="">
                                                <th class="col-md-1 col-fixed-60" rowspan="2">Path</th>
                                                <th class="col-md-2 col-fixed-250" rowspan="2"> Name</th>
                                                <th class="col-md-1 col-fixed-80" rowspan="2">Usage</th>
                                                <th class="col-md-1 col-fixed-100" colspan="2">Cardinality</th>
                                                <th class="col-md-1 col-fixed-100" colspan="2">Length</th>
                                                <th class="col-md-1 col-fixed-80" rowspan="2"> ConfLength </th>
                                                <th class="col-md-1 col-fixed-100" rowspan="2">Data Type
                                                </th>
                                                <th class="col-md-1 col-fixed-130" rowspan="2">Value Set
                                                </th>
                                                <th class="col-md-1" ng-style="predWidthx" rowspan="2">Predicate
                                                </th>
                                                <th class="col-md-1" ng-style="csWidthx" rowspan="2">Conformance Statement
                                                </th>
                                                <th class="col-md-1 col-fixed-80" rowspan="2">Definition Text
                                                </th>
                                                <th class="col-md-1" ng-style="commentWidth" rowspan="2">Comment
                                                </th>
                                                <th class="col-md-1" ng-style="commentWidth" rowspan="2">Applied To
                                                </th>
                                                <th class="col-md-1" ng-style="commentWidth" rowspan="2">Action
                                                </th>
                                            </tr>
                                            <tr class="tbl-header">
                                                <th class="col-xs-1 col-fixed-50" style="width:2%">min</th>
                                                <th class="col-xs-1 col-fixed-50" style="width:2%">max</th>
                                                <th class="col-xs-1 col-fixed-50" style="width:2%">min</th>
                                                <th class="col-xs-1 col-fixed-50" style="width:2%">max</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>

                                </div>


                            </div>
                        </tab>
                        <tab>
                            <tab-heading>
                                <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i> Apply Profile Component
                            </tab-heading>
                            <div style="margin-top: 20px">
                                <div class="col-md-12">
                                    <div class="pull-right">
                                        <button type="button" class="btn btn-raised btn-sm btn-success" ng-click="applyPcTo()">
                                                    <span><i class="fa fa-check fa-fw"></i> Apply To</span>
                                        </button>
                                    </div>
                                </div>

                            </div>
                        </tab>
                    </tabset>






                </div>



            </div>
        </div>
    </div>
    <div ng-show="!isAuthenticated()" style="font-size: 18px;text-align: center;margin:auto">
        <p>Please <a href="" ng-click="loginReq()"><i class="fa fa-sign-in"></i>&nbsp;login</a> to access this page. You can also <a href="#/registration"><i class="fa fa-chevron-circle-right"></i>&nbsp;register</a></p>
    </div>
    </div>
</script>



<script type="text/ng-template" id="profileComponentTable">
    <tr tt-node is-branch="false">
        <td class="col-md-1 col-fixed-60">
            <span ng-bind="node.path"></span>
        </td>
        <td class="col-md-2 col-fixed-250">
            <span ng-if="node.type=='group'" class="label label-success label-icon">G</span>
            <span ng-if="node.type=='segmentRef'||node.type=='segment'" class="label label-segment label-icon">S</span>
            <span class="label label-field label-icon" ng-if="node.type==='field'">F</span>
            <span class="label label-component label-icon" ng-if="node.type==='component'">C</span>

            <span ng-bind="node.name"></span>
        </td>
        <td class="col-md-1 col-fixed-80">
            <a ng-click="edit=true;" ng-hide="edit || node.attributes.usage "><i class="fa fa-plus fa-fw"></i></a>
            <select ng-show="edit || node.attributes.usage" class="form-control input-sm" name="usage" ng-model="node.attributes.usage" ng-options="usage for usage in config.usages" />
            <a ng-click="edit=false;cancelUsage(node)" ng-show="edit|| node.attributes.usage"><i class="fa fa-remove fa-fw"></i></a>
        </td>
        <td class="col-md-1 col-fixed-100">
            <a ng-click="editMin=true;" ng-hide="editMin ||node.attributes.min"><i class="fa fa-plus fa-fw"></i></a>
            <input ng-show="editMin||node.attributes.min" class="form-control" name="min" ng-pattern="/^\d+$/" ng-model="node.attributes.min" ng-minlength="1">
            <a ng-click="editMin=false;cancelMinCard(node)" ng-show="editMin ||node.attributes.min"><i class="fa fa-remove fa-fw"></i></a>
        </td>
        <td class="col-md-1 col-fixed-100">
            <a ng-click="editMax=true;" ng-hide="editMax||node.attributes.max"><i class="fa fa-plus fa-fw"></i></a>
            <input ng-show="editMax||node.attributes.max" class="form-control" name="max" ng-pattern="/^\d+$|^\*?$/" ng-model="node.attributes.max">
            <a ng-click="editMax=false;cancelMaxCard(node)" ng-show="editMax ||node.attributes.max"><i class="fa fa-remove fa-fw"></i></a>
        </td>
        <td class="col-md-1 col-fixed-100">
            <a ng-click="editMinLength=true;" ng-hide="editMinLength||node.attributes.minLength"><i class="fa fa-plus fa-fw"></i></a>
            <input ng-show="editMinLength||node.attributes.minLength" class="form-control" name="minL" ng-model="node.attributes.minLength">
            <a ng-click="editMinLength=false;cancelMinL(node)" ng-show="editMinLength ||node.attributes.minLength"><i class="fa fa-remove fa-fw"></i></a>
        </td>
        <td class="col-md-1 col-fixed-100">
            <a ng-click="editMaxLength=true;" ng-hide="editMaxLength||node.attributes.maxLength"><i class="fa fa-plus fa-fw"></i></a>
            <input ng-show="editMaxLength||node.attributes.maxLength" class="form-control" name="maxL" ng-model="node.attributes.maxLength">
            <a ng-click="editMaxLength=false;cancelMaxL(node)" ng-show="editMaxLength||node.attributes.maxLength"><i class="fa fa-remove fa-fw"></i></a>
        </td>
        <td class="col-md-1 col-fixed-80">
            <a ng-click="editConfLength=true;" ng-hide="editConfLength||node.attributes.confLength"><i class="fa fa-plus fa-fw"></i></a>
            <input ng-show="editConfLength||node.attributes.confLength" class="form-control" name="maxL" ng-model="node.attributes.confLength">
            <a ng-click="editConfLength=false;cancelConfL(node)" ng-show="editConfLength||node.attributes.confLength"><i class="fa fa-remove fa-fw"></i></a>
        </td>
        <td class="col-md-1 col-fixed-100">

        </td>
        <td class="col-md-1 col-fixed-130">
        </td>
        <td class="col-md-1">
        </td>
        <td class="col-md-1">
        </td>
        <td class="col-md-1 col-fixed-80 ">
        </td>
        <td class="col-md-1" ng-style="commentWidth">
        </td>
        <td class="col-md-1" ng-style="commentWidth">
            <a ng-click="applyPcTo(node)"><i class="fa fa-plus fa-fw"></i></a>
        </td>
        <td class="col-md-1" ng-style="commentWidth">
            <i class="fa fa-times" aria-hidden="true"></i>

        </td>
    </tr>

</script>


<script type="text/ng-template" id="applyPcTo.html">
    <div class="modal-header">
        <h3 class="modal-title">Apply {{profileComponent.name}}</h3>
    </div>
    <div class="modal-body">
        <div class="container" style="margin-bottom: 20px;margin-top: 10px">
            <div class="row" style="padding-top:10px">
                <div class="col-md-6">
                    <select class="form-control input-sm" ng-model="applyTo" ng-options="message as message.name for message in message" />
                </div>

                <div class="col-md-6 " ng-show="addedField.length> 0">

                </div>

            </div>


        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-info btn-sm" ng-click="apply()"><span><i class="fa fa-check fa-fw">&nbsp; </i>Apply</span>
        </button>
    </div>
</script>




<script type="text/ng-template" id="addComponents.html">
    <div class="modal-header">
        <h3 class="modal-title">Add profile Components</h3>
    </div>
    <div class="modal-body">
        <div class="container" style="margin-bottom: 20px;margin-top: 10px">
            <div class="row" style="padding-top:10px">
                <tabset>
                    <tab>
                        <tab-heading>Message</tab-heading>
                        <div class="col-md-6">
                            <table id="MsgProfileComponentTable" tt-table tt-params="MsgProfileComponentParams" class="table table-striped table-bordered table-condensed hl7-versions-valueset table-fixed">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-3"> Name</th>

                                    </tr>

                                </thead>
                                <tbody></tbody>
                            </table>

                        </div>

                    </tab>
                    <tab>
                        <tab-heading>Segment</tab-heading>
                        <div class="col-md-6">
                            <table id="SegProfileComponentTable" tt-table tt-params="SegProfileComponentParams" class="table table-striped table-bordered table-condensed hl7-versions-valueset table-fixed">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-3"> Name</th>

                                    </tr>

                                </thead>
                                <tbody></tbody>
                            </table>


                        </div>

                    </tab>
                    <tab>
                        <tab-heading>Datatype</tab-heading>
                        <div class="col-md-6">
                            <table id="DTProfileComponentTable" tt-table tt-params="DTProfileComponentParams" class="table table-striped table-bordered table-condensed hl7-versions-valueset table-fixed">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-3"> Name</th>

                                    </tr>

                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                    </tab>
                </tabset>




                <div class="col-md-6 " ng-show="selectedPC.length> 0">
                    <div class="igl-table">
                        <h5>Selected Profile Components</h5>
                        <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                            <thead>
                                <tr>
                                    <th>Path</th>
                                    <th>Name</th>


                                    <th/>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="pc in selectedPC">
                                    <td>{{pc.path}}</td>
                                    <td><span>{{pc.name}}</span>
                                        <!--<a class="pointer" ng-show="!edit && dt.ext!==null && dt.ext!==''&& dt.scope!=='MASTER'" ng-click="edit=true;checkExt(dt)"><i class="fa fa-pencil fa-fw"></i></a>
                                                <input ng-show="edit" ng-change="checkExt(dt)" ng-model="dt.ext" />-->
                                        <!--<a class="pointer" ng-show="edit && checkedExt && NocheckedExt" ng-click="edit=false"><i class="fa fa-check-circle"></i></a>
                                                <span ng-if="edit && !checkedExt" class="danger">This extension already exists</span>
                                                <span ng-if="edit && !NocheckedExt" class="danger">A flavor must have an extension</span>-->
                                    </td>


                                    <td><a class="pointer" ng-click="deleteDt(dt)"><i
                                                                                    class="fa fa-times fa-fw"></i></a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>



            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-info btn-sm" ng-click="add()"><span><i class="fa fa-check fa-fw">&nbsp; </i>Add</span>
        </button>
    </div>
</script>



<script type="text/ng-template" id="MsgProfileComponentTable">

    <tr tt-node is-branch="node.children!==undefined">

        <td class="col-md-3">
            <a ng-if="node.type=='group'||node.type=='segmentRef'" class="pointer " ng-click="addElementPc(node,$event) "><i class="fa fa-plus fa-fw "></i></a>
            <span ng-if="node.type=='group'" class="label label-success label-icon">G</span>
            <span ng-if="node.type=='segmentRef'" class="label label-segment label-icon">S</span>

            <span ng-bind="node.position"></span>.
            <span ng-if="node.name" ng-bind="node.name"></span>
            <span ng-if="node.ref.name" ng-bind="segmentsMap[node.ref.id].label"></span>
        </td>

    </tr>

</script>
<script type="text/ng-template" id="SegProfileComponentTable">

    <tr tt-node is-branch="node.fields!==undefined">

        <td class="col-md-3">
            <a class="pointer " ng-click="addElementPc(node,$event) "><i class="fa fa-plus fa-fw "></i></a>
            <span ng-if="node.type=='segment'" class="label label-segment label-icon">S</span>

            <span ng-if="node.type=='field'" class="label label-field label-icon">F</span>

            <span ng-if="node.position" ng-bind="node.position"></span><span ng-if="node.position">.</span>
            <span ng-if="node.label && node.name" ng-bind="node.label"></span>
            <span ng-if="node.name && !node.label" ng-bind="node.name"></span>
        </td>

    </tr>

</script>

<script type="text/ng-template" id="DTProfileComponentTable">

    <tr tt-node is-branch="node.components!==undefined">

        <td class="col-md-3">
            <a class="pointer " ng-click="addElementPc(node,$event) "><i class="fa fa-plus fa-fw "></i></a>
            <span ng-if="node.type=='component'" class="label label-component label-icon">C</span>

            <span ng-if="node.position" ng-bind="node.position"></span><span ng-if="node.position">.</span>

            <span ng-if="node.label && node.name" ng-bind="node.label"></span>
            <span ng-if="node.name && !node.label" ng-bind="node.name"></span>
        </td>

    </tr>

</script>