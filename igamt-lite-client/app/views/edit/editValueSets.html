<style id="antiClickjack">
    body {
        display: none !important;
    }
</style>
<script type="text/javascript">
    if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
    } else {
        top.location = self.location;
    }
</script>
<script type="text/ng-template" id="EditValueSets.html">
    <div ng-controller="TableListCtrl" ng-init="init()" class="container">
        <div ng-show="loadingSelection" style="text-align: center; padding-top:20px">
            <div layout="row" layout-sm="column" layout-align="space-around">
                <md-progress-circular class="md-hue-2" md-diameter="40px"></md-progress-circular>
            </div>
        </div>
        <div ng-show="!loadingSelection">
            <div ng-show="table !== null" id="executionPanel">
                <div class="container">
                    <div class="page-header">
                        <span class="header4">Value Set: {{table.bindingIdentifier}}</span> <span class="version-badge-label" ng-if="table.publicationVersion">v{{table.publicationVersion}}</span></span>
                        <span class="pull-right">
                            <div class="btn-group" ng-hide="table.scope !== 'USER'" style="margin-bottom: 0px;" ng-if="!igdocument">
                                <button type="button" class="btn btn-raised btn-primary btn-sm" ng-class="" ng-click="shareModal(table)">
                                    <i class="fa fa-share-alt" aria-hidden="true"></i> Share<span class="badge" ng-bind="table.shareParticipantIds.length" style="margin-right:5px;"></span>
                                </button>
                                <button type="button" class="btn btn-raised btn-info btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false"> <span class="caret"></span> <span class="sr-only">Toggle Dropdown</span> </button>
                                <ul class="dropdown-menu igl-menu" role="menu">
                                    <li ng-repeat="participant in table.shareParticipantIds"><a><i class="fa fa-user" aria-hidden="true"></i> {{participant.username}} <span ng-if="participant.pendingApproval">(Pending...)</span></a></li>
                                </ul>
                            </div>

                            <button title="Save Changes" type="button" class="btn btn-raised btn-sm btn-success"
								ng-disabled="editForm.$invalid || !editForm.$dirty"
                	 			ng-click="save()">
                                <span><i class="fa fa-check fa-fw"></i> Save</span>
                            </button>
                            <button title="Reset Changes" type="button" class="btn btn-raised btn-sm btn-warning" ng-disabled="!editForm.$dirty" ng-click="reset()">
                                <span><i class="fa fa-times fa-fw"></i> Reset</span>
                            </button>
                            <button title="commit" type="button" class="btn btn-raised btn-sm btn-info" ng-click="publishTable(table)" ng-if="table.status !== 'PUBLISHED'"><span><i class="fa fa-check" aria-hidden="true"></i> Publish</span></button>
                        </span>
                    </div>

                    <div class="static_info">
                        <i class="fa fa-calendar" aria-hidden="true"></i>Updated :{{table.dateUpdated | date:dateFormat}}<span ng-if="table.owner" style="font-style: italic;"><i class="fa fa-user" aria-hidden="true"></i>{{table.owner}}</span>
                        <span>HL7 Version: {{table.hl7Version}}</span>
                        <span ng-if="table.publicationVersion">Version: {{table.publicationVersion}}</span>
                    </div>

                    <div class="" ng-controller="cmpTableCtrl">
                        <md-tabs md-dynamic-height md-border-bottom md-selected="tabStatus.active">
                            <md-tab>
                                <md-tab-label>
                                    <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>MetaData
                                </md-tab-label>
                                <md-tab-body>
                                    <div style="margin-top: 20px" ng-cloak class="md-inline-form" layout="column">
                                        <md-content layout-padding>
                                            <md-input-container class="md-block" flex-gt-sm>
                                                <label class="input-left">Mapping Identifier</label>
                                                <input ng-disabled="versionAndUseMap[table.id].sourceId" type="text" name="tableIdentifier" ng-model="table.bindingIdentifier" required ng-change="setDirty()">
                                                <div ng-messages="editForm.tableIdentifier.$error">
                                                    <div ng-message="required">Mapping Identifier is required.</div>
                                                </div>
                                            </md-input-container>

                                            <md-input-container class="md-block" flex-gt-sm>
                                                <label class="input-left">Name</label>
                                                <input type="text"  ng-disabled="versionAndUseMap[table.id].sourceId" name="name"  ng-model="table.name" required ng-change="setDirty()">
                                                <div ng-messages="editForm.name.$error">
                                                    <div ng-message="required">Name is required.</div>
                                                </div>
                                            </md-input-container>


                                            <md-input-container class="md-block" flex-gt-sm>
                                                <label class="input-left">Description</label>
                                                <input type="text" name="description" ng-disabled="versionAndUseMap[table.id].sourceId"  ng-model="table.description" ng-change="setDirty()">
                                                <div ng-messages="editForm.description.$error">
                                                    <div ng-message="required">description is required.</div>
                                                </div>
                                            </md-input-container>

                                            <md-input-container class="md-block" flex-gt-sm>
                                                <label class="input-left">OID</label>
                                                <input type="text" name="oid" ng-disabled="versionAndUseMap[table.id].sourceId" ng-model="table.oid" ng-change="setDirty()">
                                                <div ng-messages="editForm.oid.$error">
                                                    <div ng-message="required">OID is required.</div>
                                                </div>
                                            </md-input-container>

                                            <div layout-gt-sm="row">
                                                <md-input-container class="md-block" flex-gt-sm>
                                                    <label class="input-left">Extensibility</label>
                                                    <md-select ng-change="setDirty()" ng-model="table.extensibility">
                                                        <md-option ng-repeat="extensibility in config.tableExtensibilities" value="{{extensibility}}">
                                                            {{extensibility}}
                                                        </md-option>
                                                    </md-select>
                                                </md-input-container>

                                                <md-input-container class="md-block" flex-gt-sm>
                                                    <label class="input-left">Stability</label>
                                                    <md-select ng-change="setDirty()" ng-model="table.stability">
                                                        <md-option ng-repeat="stability in config.tableStabilities" value="{{stability}}">
                                                            {{stability}}
                                                        </md-option>
                                                    </md-select>
                                                </md-input-container>

                                                <md-input-container class="md-block" flex-gt-sm>
                                                    <label class="input-left">Content Definition</label>
                                                    <md-select ng-change="setDirty()" ng-model="table.contentDefinition">
                                                        <md-option ng-repeat="contentDefinition in config.tableContentDefinitions" value="{{contentDefinition}}">
                                                            {{contentDefinition}}
                                                        </md-option>
                                                    </md-select>
                                                </md-input-container>
                                            </div>
                                            <md-input-container class="md-block" flex-gt-sm>
                                                <label class="input-left">Code Systems</label>
                                                <span ng-repeat="cs in codeSystems">
											<span ng-hide="codeSysEditMode">{{cs}}</span>
                                                <input ng-model="cs" type="text" ng-show="codeSysEditMode" />
                                                <a ng-click="delCodeSystem(cs)" ng-show="codeSysEditMode" class="point">
                                                    <span><i class="fa fa-times-circle fa-fw"></i></span>
                                                </a>
                                                <span ng-hide="$last">,</span>
                                                </span>
                                                <div class="pull-right">
                                                    <a ng-click="makeCodeSystemEditable()" ng-hide="codeSysEditMode" class="point">
                                                        <span><i class="fa fa-pencil fa-fw"></i></span>
                                                    </a>
                                                    <input ng-model="codeSysForm.str" placeholder="type new codeSystem" type="text" ng-show="codeSysEditMode" />
                                                    <a ng-click="addCodeSystem()" ng-show="codeSysEditMode" class="point">
                                                        <span><i class="fa fa-plus-circle fa-fw"></i></span>
                                                    </a>
                                                </div>
                                            </md-input-container>

                                            <md-input-container class="md-block" flex-gt-sm >
                                                <label class="input-left">Comment</label>
                                                <textarea rows="3"  md-select-on-focus  ng-change="setDirty()" name="comment" id="comment" ng-model="table.comment"/>
                                            </md-input-container>

                                            <md-input-container class="md-block" flex-gt-sm
                                                                ng-show="table.scope === 'HL7STANDARD' && table.hl7Section != null && table.hl7Section != '' && table.hl7Section != undefined">
                                                <label class="input-left" >HL7 Section</label>
                                                <input type="text" disabled
                                                       name="hl7Section"
                                                       id="hl7Section"
                                                       ng-model="table.hl7Section" />
                                            </md-input-container>
                                        </md-content>
                                    </div>
                                </md-tab-body>
                            </md-tab>
                            <md-tab md-on-select="setDeltaToF()">
                                <md-tab-label>
                                    <i class="fa fa-table fa-fw" aria-hidden="true"></i>Definition
                                </md-tab-label>
                                <md-tab-body>
                                    <div class="el-def igl-def-table-container" style="margin-top: 20px">
                                        <accordion>
                                            <div accordion-group class="panel-primary" is-open="accordStatus.isFirstOpen">
                                                <accordion-heading>
                                                    <span style="color:white;">Definition Pre-Text</span> <i class="pull-left fa" style="color:white;" ng-class="{'fa-chevron-down': accordStatus.isFirstOpen, 'fa-chevron-right': !accordStatus.isFirstOpen}"></i>                                                </accordion-heading>
                                                <div class="panel-body">
                                                    <div ng-if="!viewSettings.tableReadonly && table.status==='UNPUBLISHED'">
                                                        <textarea froala="froalaEditorOptions" ng-model="table.defPreText" name="text" id="defPreText" ng-change="setDirty()"></textarea>
                                                    </div>
                                                    <div ng-if="viewSettings.tableReadonly || (table.scope === 'HL7STANDARD' || table.status==='PUBLISHED')">
                                                        <div class="fr-view">
                                                            <div froala-view="table.defPreText"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div accordion-group class="panel-primary" is-open="accordStatus.isSecondOpen">
                                                <accordion-heading>
                                                    <span style="color:white;">Value Set Definition </span>
                                                    <i class="pull-left fa" style="color:white;" ng-class="{'fa-chevron-down': accordStatus.isSecondOpen, 'fa-chevron-right': !accordStatus.isSecondOpen}"></i>
                                                </accordion-heading>
                                                <div class="igl-def-table-container">
                                                    <div class="">
                                                        <span class="pull-left">
                                                            <span>Values # of Page : </span>
                                                            <md-input-container class="normal">
                                                                <label></label>
                                                                <input type="number" ng-model="itemsByPage" no-dirty-check/>
                                                            </md-input-container>
                                                        </span>
                                                        <span class="pull-right" style="margin-bottom: 10px">
											                <button title="Add new Value" type="button" class="btn btn-raised btn-sm btn-info" ng-click="addValue();">
												                <span><i class="fa fa-plus fa-fw"></i>Add Value</span>
                                                            </button>
                                                            <button title="Delete Values" type="button" class="btn btn-raised btn-xs btn-danger" ng-click="deleteSlectedValues()" ng-disabled="selectedCodes.length===0">
                                                                <i class="fa fa-trash-o fa-fw"></i>Delete Values <span class="badge" ng-if="selectedCodes.length>0">{{selectedCodes.length}}</span>
                                                            </button>
                                                        </span>

                                                        <div>
                                                            <div ng-if="table.codes.length >= 1000" style="margin-bottom: 10px">
                                                                <div class="alert alert-warning" role="alert">
                                                                    Due to the large size of codes, only the first 1000 of {{table.codes.length}} will be displayed.
                                                                </div>
                                                            </div>
                                                            <table st-safe-src="table.smallCodes" st-table="displayCollection" class="table table-striped table-condensed table-bordered">
                                                                <thead>
                                                                <tr class="tbl-header">
                                                                    <th class="col-md-1">
                                                                        <input type="checkbox" ng-model="checkAll" ng-change="ProcessChecking(checkAll)">
                                                                        <span ng-if="checkAll">UnCheck All</span>
                                                                        <span ng-if="!checkAll">Check All</span>
                                                                        </input>
                                                                    </th>
                                                                    <th st-sort="value" class="col-md-2">Value</th>
                                                                    <th st-sort="label" class="col-md-3">Description</th>
                                                                    <th class="col-md-2">CodeSystem</th>
                                                                    <th class="col-md-1">Usage
                                                                        <span class="btn-group btn-group-xs btn-info" role="group" aria-label="...">
                                                                            <button type="button" ng-click="setAllCodeUsage(table, 'R')" class="btn btn-raised btn-default btn-info">R</button>
                                                                            <button type="button" ng-click="setAllCodeUsage(table, 'P')" class="btn btn-raised btn-default btn-info">P</button>
                                                                            <button type="button" ng-click="setAllCodeUsage(table, 'E')" class="btn btn-raised btn-default btn-info">E</button>
                                                                        </span>
                                                                    </th>
                                                                    <th class="col-md-3">Comments</th>
                                                                </tr>
                                                                <tr>
                                                                    <th/>
                                                                    <th>
                                                                        <div layout="row">
                                                                            <md-input-container flex="100" class="normal">
                                                                                <label></label>
                                                                                <input st-search="'value'" placeholder="Search for value" type="search" />
                                                                            </md-input-container>
                                                                        </div>
                                                                    </th>
                                                                    <th>
                                                                        <div layout="row">
                                                                            <md-input-container flex="100" class="normal">
                                                                                <label></label>
                                                                                <input st-search="'label'" placeholder="Search for description" type="search" />
                                                                            </md-input-container>
                                                                        </div>
                                                                    </th>
                                                                    <th/>
                                                                    <th/>
                                                                    <th/>
                                                                </tr>
                                                                </thead>
                                                                <tbody>
                                                                <tr ng-repeat="c in displayCollection">
                                                                    <td cs-select="col-md-1" align="center">
                                                                        <div layout="row" layout-align="center center">
                                                                            <md-checkbox ng-model="c.selected" style="margin-top: 10px;" ng-change="addOrRemoveValue(c)" aria-label="selectCheckBox">
                                                                            </md-checkbox>
                                                                        </div>
                                                                    </td>
                                                                    <td class="col-md-2">
                                                                        <div layout="row">
                                                                            <md-input-container flex="100" class="normal">
                                                                                <input ng-model="c.value"
                                                                                       ng-class="{'form-control-warning': isDuplicatedTwoContexts(c,'value', 'codeSystem' , table.codes)}"
                                                                                       ng-change="setDirty()"
                                                                                       type="text"/>
                                                                            </md-input-container>
                                                                        </div>
                                                                        <span ng-if="isDuplicatedTwoContexts(c,'value', 'codeSystem', table.codes)" style="color:red">Duplicated</span>
                                                                    </td>
                                                                    <td class="col-md-3">
                                                                        <div layout="row">
                                                                            <md-input-container flex="100" class="normal">
                                                                                <input ng-model="c.label"
                                                                                       ng-class="{'form-control-warning': isDuplicatedTwoContexts(c,'label', 'codeSystem' , table.codes)}"
                                                                                       ng-change="setDirty()"
                                                                                       type="text"/>
                                                                            </md-input-container>
                                                                        </div>
                                                                        <span ng-if="isDuplicatedTwoContexts(c,'label', 'codeSystem' , table.codes)" style="color:red">Duplicated</span>
                                                                    </td>
                                                                    <td class="col-md-2">
                                                                        <div ng-show="!codeSystems || codeSystems.length === 0">
                                                                            <span style="color:red">There is no CodeSystem in this ValueSet Metadata.</span>
                                                                        </div>
                                                                        <div ng-hide="!codeSystems || codeSystems.length === 0">
                                                                            <div layout="row">
                                                                                <md-input-container flex="100" class="normal">
                                                                                    <md-select placeholder="Select CodeSystem"
                                                                                               style="margin-top: 20px;"
                                                                                               ng-change="setDirty()"
                                                                                               ng-model="c.codeSystem">
                                                                                        <md-option ng-repeat="cs in codeSystems" ng-value="cs">
                                                                                            {{::cs}}
                                                                                        </md-option>
                                                                                    </md-select>
                                                                                </md-input-container>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <td class="col-md-1">
                                                                        <div layout="row">
                                                                            <md-input-container flex="100" class="normal">
                                                                                <md-select placeholder="Select CodeUsage"
                                                                                           style="margin-top: 20px;"
                                                                                           ng-change="setDirty()"
                                                                                           ng-model="c.codeUsage">
                                                                                    <md-option ng-repeat="codeUsage in config.codeUsages" ng-value="codeUsage">
                                                                                        {{::codeUsage}}
                                                                                    </md-option>
                                                                                </md-select>
                                                                            </md-input-container>
                                                                        </div>
                                                                    </td>
                                                                    <td class="col-md-3">
                                                                        <div layout="row">
                                                                            <md-input-container flex="100" class="normal">
                                                                                <textarea ng-model="c.comments"
                                                                                          style="margin-top: 5px;"
                                                                                          ng-change="setDirty()"
                                                                                          rows="1"
                                                                                          md-select-on-focus></textarea>
                                                                            </md-input-container>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                                <tr style="float:center !important;" ng-show="table.smallCodes.length > itemsByPage">
                                                                    <td colspan="6" class="text-center" style="float:center !important;">
                                                                        <div st-pagination="" st-items-by-page="itemsByPage" st-displayed-pages="7" style="float:center !important;"></div>
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div accordion-group class="panel-primary" is-open="accordStatus.isThirdOpen">
                                                <accordion-heading>
                                                    <span style="color:white;">Definition Post-Text </span><i class="pull-left fa" style="color:white;" ng-class="{'fa-chevron-down': accordStatus.isThirdOpen, 'fa-chevron-right': !accordStatus.isThirdOpen}"></i>
                                                </accordion-heading>
                                                <div class="panel-body">
                                                    <div ng-if="!viewSettings.tableReadonly && table.status==='UNPUBLISHED'">
                                                        <textarea froala="froalaEditorOptions" ng-model="table.defPostText" name="text" id="defPostText" ng-change="setDirty()"></textarea>
                                                    </div>
                                                    <div ng-if="viewSettings.tableReadonly || (table.scope === 'HL7STANDARD' || table.status==='PUBLISHED')">
                                                        <div class="fr-view">
                                                            <div froala-view="table.defPostText"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </accordion>
                                    </div>
                                </md-tab-body>
                            </md-tab>
                            <md-tab md-on-select="callVSDelta()" ng-if="igdocument">
                                <md-tab-label>
                                    <i class="fa fa-table fa-fw" aria-hidden="true"></i>Delta
                                </md-tab-label>
                                <md-tab-body>
                                    <div class="panel-body" style="margin:5px;">
                                        <accordion>
                                            <div accordion-group class="panel-primary" is-open="status.isFirstOpen">
                                                <accordion-heading>
                                                    <span style="color:white;"> Delta Configuration</span> <i class="pull-left fa" style="color:white;" ng-class="{'fa-chevron-down': status.isFirstOpen, 'fa-chevron-right': !status.isFirstOpen}"></i>
                                                </accordion-heading>

                                                <table class="table table-stripped table-borderless table-condensed">
                                                    <thead>
                                                    <tr class="tbl-header">
                                                        <th class="col-md-1"></th>
                                                        <th class="col-md-2">HL7 Version</th>
                                                        <th class="col-md-2">Scope</th>
                                                        <th class="col-md-3">IG Document</th>
                                                        <th class="col-md-4">Value Set</th>
                                                    </thead>

                                                    <tbody>
                                                    <tr>
                                                        <td class="col-md-1">
                                                            <span class="label" style="background-color:#B5F7EC;color:black;">1</span>
                                                        </td>
                                                        <td class="col-md-2">
                                                            <select ng-model="version1" class="form-control" disabled>
                                                                <option ng-selected="version1"> {{version1}}</option>
                                                            </select>
                                                        </td>
                                                        <td class="col-md-2">
                                                            <select ng-model="scope1" class="form-control" disabled>
                                                                <option ng-selected="scope1"> {{scope1}}</option>
                                                            </select>
                                                        </td>
                                                        <td class="col-md-3">
                                                            <select ng-model="ig1" class="form-control" disabled>
                                                                <option ng-selected="ig1"> {{ig1}}</option>
                                                            </select>
                                                        </td>
                                                        <td class="col-md-4">
                                                            <select ng-model="table1" class="form-control" disabled>
                                                                <option ng-selected="table1"> {{table1.bindingIdentifier}}</option>
                                                            </select>
                                                        </td>
                                                    </tr>

                                                    <tr>
                                                        <td class="col-md-1">
                                                            <span class="label" style="background-color:#EDE1AF;color:black;">2</span>
                                                        </td>
                                                        <td class="col-md-2">
                                                            <select ng-model="version2" class="form-control" ng-change="setVersion2(version2)" no-dirty-check>
                                                                <option ng-repeat="vr in versions" value='{{vr}}' ng-selected="vr===version2"> {{vr}}</option>
                                                            </select>
                                                        </td>
                                                        <td class="col-md-2">
                                                            <select ng-model="scope2" class="form-control" ng-change="setScope2(scope2)" no-dirty-check>
                                                                <option ng-repeat="scope in scopes" value='{{scope.name}}' ng-selected="scope.name===scope2"> {{scope.alias}}</option>
                                                            </select>
                                                        </td>
                                                        <td class="col-md-3">
                                                            <select class="form-control" ng-options="ig as ig.title for ig in igList2 track by ig.id" ng-model="ig2" ng-change="setIG2(ig2)" ng-disabled="!scope2 || !version2 || igDisabled2" no-dirty-check></select>
                                                        </td>
                                                        <td class="col-md-4">
                                                            <select ng-model="cmp.tableId" class="form-control" ng-change="setTable2(cmp.tableId)" no-dirty-check>
                                                                <option value='-1'></option>
                                                                <option ng-repeat="table in tables2 " ng-disabled="disableVS(table,table1)" ng-hide="hideVS(table,table1)" value='{{$index}}'> {{table.bindingIdentifier}}</option>
                                                            </select>
                                                        </td>
                                                    </tr>
                                                    </tbody>


<!-- Material code is not working....
                                                    <tbody>

                                                    <tr>
                                                        <td class="col-md-1">
                                                            <span class="label" style="background-color:#B5F7EC;color:black;">1</span>
                                                        </td>
                                                        <td class="col-md-2">
                                                            <div layout="row">
                                                                <md-input-container flex="100" class="normal">
                                                                    <md-select ng-model="version1" disabled>
                                                                        <md-option ng-value="version1">{{version1}}</md-option>
                                                                    </md-select>
                                                                </md-input-container>
                                                            </div>
                                                        </td>
                                                        <td class="col-md-2">
                                                            <div layout="row">
                                                                <md-input-container flex="100" class="normal">
                                                                    <md-select ng-model="scope1" disabled>
                                                                        <md-option ng-value="scope1">{{scope1}}</md-option>
                                                                    </md-select>
                                                                </md-input-container>
                                                            </div>
                                                        </td>
                                                        <td class="col-md-3">
                                                            <div layout="row">
                                                                <md-input-container flex="100" class="normal">
                                                                    <md-select ng-model="ig1" disabled>
                                                                        <md-option ng-value="ig1">{{ig1}}</md-option>
                                                                    </md-select>
                                                                </md-input-container>
                                                            </div>
                                                        </td>
                                                        <td class="col-md-4">
                                                            <div layout="row">
                                                                <md-input-container flex="100" class="normal">
                                                                    <md-select ng-model="table1" disabled>
                                                                        <md-option ng-value="table1">{{table1.bindingIdentifier}}</md-option>
                                                                    </md-select>
                                                                </md-input-container>
                                                            </div>
                                                        </td>
                                                    </tr>

                                                    <tr>
                                                        <td class="col-md-1">
                                                            <span class="label" style="background-color:#EDE1AF;color:black;">2</span>
                                                        </td>
                                                        <td class="col-md-2">
                                                            <div layout="row">
                                                                <md-input-container flex="100" class="normal">
                                                                    <md-select ng-model="version2">
                                                                        <md-option ng-repeat="vr in versions" ng-value="vr" ng-selected="vr===version2">
                                                                            {{vr}}
                                                                        </md-option>
                                                                    </md-select>
                                                                </md-input-container>
                                                            </div>
                                                        </td>
                                                        <td class="col-md-2">
                                                            <div layout="row">
                                                                <md-input-container flex="100" class="normal">
                                                                    <md-select ng-model="scope2">
                                                                        <md-option ng-repeat="scope in scopes" ng-value="scope.name" ng-selected="scope.name===scope2">
                                                                            {{scope.alias}}
                                                                        </md-option>
                                                                    </md-select>
                                                                </md-input-container>
                                                            </div>
                                                        </td>
                                                        <td class="col-md-3">
                                                            <div layout="row">
                                                                <md-input-container flex="100" class="normal">
                                                                    <md-select ng-model="ig2" ng-change="setIG2(ig2)" ng-disabled="!scope2 || !version2 || igDisabled2">
                                                                        <md-option ng-repeat="ig in igList2 track by ig.id" ng-value="ig">
                                                                            {{ig.title}}
                                                                        </md-option>
                                                                    </md-select>
                                                                </md-input-container>
                                                            </div>
                                                        </td>
                                                        <td class="col-md-4">
                                                            <div layout="row">
                                                                <md-input-container flex="100" class="normal">
                                                                    <md-select ng-model="cmp.tableId" ng-change="setTable2(cmp.tableId)" ng-disabled="disableVS(table,table1)">
                                                                        <md-option value='-1'></md-option>
                                                                        <md-option ng-repeat="table in tables2" ng-hide="hideVS(table,table1)" ng-value="$index">
                                                                            {{table.bindingIdentifier}}
                                                                        </md-option>
                                                                    </md-select>
                                                                </md-input-container>
                                                            </div>
                                                        </td>
                                                    </tr>

                                                    </tbody>
-->
                                                </table>
                                                <div class="" align="center" style="margin-bottom:10px">

                                                    <button ng-click="cmpTable(table1,table2)" ng-disabled="!table1 || !table2||!vsChanged" class="btn btn-raised btn-info btn-md">
                                                        <i class="fa fa-check"></i> Delta</button>

                                                </div>
                                            </div>
                                            <div accordion-group class="panel-primary" is-open="status.isSecondOpen">
                                                <accordion-heading>
                                                    <span style="color:white;"> Delta Result</span> <i class="pull-left fa" style="color:white;" ng-class="{'fa-chevron-down': status.isSecondOpen, 'fa-chevron-right': !status.isSecondOpen}"></i> </accordion-heading>
                                                </accordion-heading>
                                                <div class="panel-body">
                                                    <table tt-table tt-params="dynamicVs_params" class=" table-marginless table-bordered table-condensed">
                                                        <thead>
                                                        <tr class="tbl-header">
                                                            <th class="col-md-2">Name</th>
                                                            <th class="col-md-1">Content Definition</th>
                                                            <th class="col-md-1">Code System</th>
                                                            <th class="col-md-1">Code Usage</th>
                                                        </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </accordion>

                                    </div>
                                </md-tab-body>
                            </md-tab>
                            <md-tab md-on-select="setDeltaToF()">
                                <md-tab-label>
                                    <i class="fa fa-link" aria-hidden="true"></i>Cross-References <span class="badge">{{references.length}}</span>
                                </md-tab-label>
                                <md-tab-body>
                                    <div class="el-def" style="margin-top:20px">
                                        <table st-safe-src="references" st-table="displayReferences" class="table table-striped table-bordered table-condensed">
                                            <thead>
                                            <tr class="tbl-header">
                                                <td st-ratio="10">#</td>
                                                <th st-ratio="30">Location</th>
                                                <th st-ratio="30">ValueSet</th>
                                                <th st-ratio="15">bindingLocation</th>
                                                <th st-ratio="15">bindingStrength</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="ref in displayReferences">
                                                <td st-ratio="10">{{$index + 1}}
                                                    <span class="badge" ng-if="ref.type === 'message'">Message</span>
                                                    <span class="badge" ng-if="ref.type === 'segment'">Segment</span>
                                                    <span class="badge" ng-if="ref.type === 'datatype'">Datatype</span>
                                                </td>
                                                <td st-ratio="30">
                                                    <span ng-if="ref.type === 'message'">{{messagesMap[ref.id].name}}.{{ref.location}}</span>
                                                    <span ng-if="ref.type === 'segment'">{{getSegmentLabel(segmentsMap[ref.id])}}-{{ref.location}}</span>
                                                    <span ng-if="ref.type === 'datatype'">{{getDatatypeLabel(datatypesMap[ref.id])}}.{{ref.location}}</span>
                                                </td>
                                                <td st-ratio="30">
                                                    {{tablesMap[ref.tableId].bindingIdentifier}}
                                                </td>
                                                <td st-ratio="15">
                                                    {{::ref.bindingLocation}}
                                                </td>
                                                <td st-ratio="15">
                                                    {{::ref.bindingStrength}}
                                                </td>
                                            </tr>
                                            </tbody>
                                            <tr ng-if="references.length > 10">
                                                <td colspan="9" class="text-center">
                                                    <div st-pagination="" st-items-by-page="10" st-displayed-pages="10"></div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </md-tab-body>
                            </md-tab>
                        </md-tabs>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/ng-template" id="ReadValueSets.html">
    <div ng-controller="TableListCtrl" ng-init="init()" class="container">
        <div ng-show="loadingSelection" style="text-align: center; padding-top:20px">
            <i class="fa fa-spinner fa-pulse fa-align-center fa-2x"></i>
        </div>
        <div ng-show="!loadingSelection">
            <div ng-show="table !== null" id="executionPanel">
                <div class="container">
                    <div class="page-header">
                        <span class="header4">Value Set: {{table.bindingIdentifier}}</span> <span class="version-badge-label" ng-if="versionAndUseMap[table.id].publicationVersion">v{{versionAndUseMap[table.id].publicationVersion}}</span></span>

                        <span class="pull-right" ng-if="!typeOfSharing">
                            <div class="btn-group" ng-hide="table.scope !== 'USER'" style="margin-bottom: 0px;">
                                <button type="button" class="btn btn-raised btn-primary btn-sm" ng-class="" ng-click="shareModal(table)">
                                    <i class="fa fa-share-alt" aria-hidden="true"></i> Share
                                    <span class="badge" ng-bind="table.shareParticipantIds.length" style="margin-right:5px;"></span>
                                </button>
                                <button type="button" class="btn btn-raised btn-info btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false"> <span class="caret"></span> <span class="sr-only">Toggle Dropdown</span> </button>
                                <ul class="dropdown-menu igl-menu" role="menu">
                                    <li ng-repeat="participant in table.shareParticipantIds"><a><i class="fa fa-user" aria-hidden="true"></i> {{participant.username}} <span ng-if="participant.pendingApproval">(Pending...)</span></a></li>
                                </ul>
                            </div>
                            <button title="Save Changes" type="button" class="btn btn-raised btn-sm btn-success"
                                ng-disabled="!isBindingChanged()"
                                ng-click="saveBindingForValueSet()">
                                <span><i class="fa fa-check fa-fw"></i> Save</span>
                            </button>
                            <button title="Reset Changes" type="button" class="btn btn-raised btn-sm btn-warning" ng-disabled="!isBindingChanged()" ng-click="reset()">
                                <span><i class="fa fa-times fa-fw"></i> Reset</span>
                            </button>
                        </span>

                        <span class="pull-right" ng-if="typeOfSharing && table.owner" style="font-style: italic;">
                          (Owner: {{table.owner}})
                        </span>

                        <div class="static_info">
                            <i class="fa fa-calendar" aria-hidden="true"></i>Updated :{{table.dateUpdated | date:dateFormat}}
                            <span ng-if="table.owner" style="font-style: italic;"><i class="fa fa-user" aria-hidden="true"></i>{{table.owner}}</span>
                            <span>HL7 Version: {{table.hl7Version}}</span>
                            <span ng-if="table.publicationVersion">Version: {{table.publicationVersion}}</span>
                        </div>
                    </div>

                    <div class="">
                        <md-tabs md-dynamic-height md-border-bottom md-selected="tabStatus.active">
                            <md-tab>
                                <md-tab-label>
                                    <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>MetaData
                                </md-tab-label>
                                <md-tab-body>
                                    <div style="margin-top: 20px" ng-cloak class="md-inline-form" layout="column">
                                        <md-content layout-padding>
                                            <md-input-container class="md-block" flex-gt-sm>
                                                <label class="input-left">Mapping Identifier</label>
                                                <input disabled type="text" name="tableIdentifier" ng-model="table.bindingIdentifier"  required ng-change="setDirty()" disabled>
                                                <div ng-messages="editForm.tableIdentifier.$error">
                                                    <div ng-message="required">Mapping Identifier is required.</div>
                                                </div>
                                            </md-input-container>
                                            <md-input-container class="md-block" flex-gt-sm>
                                                <label class="input-left">Name</label>
                                                <input type="text" disabled name="name"  ng-model="table.name" required>
                                                <div ng-messages="editForm.name.$error">
                                                    <div ng-message="required">Name is required.</div>
                                                </div>
                                            </md-input-container>
                                            <md-input-container class="md-block" flex-gt-sm>
                                                <label class="input-left">Description</label>
                                                <input type="text" name="description" disabled ng-model="table.description">
                                                <div ng-messages="editForm.description.$error">
                                                    <div ng-message="required">description is required.</div>
                                                </div>
                                            </md-input-container>
                                            <div layout-gt-sm="row">
                                                <md-input-container class="md-block" flex-gt-sm ng-if="table.publicationVersion">
                                                    <label class="input-left">Publication version</label>
                                                    <input type="text" name="publicationVersion" disabled ng-model="table.publicationVersion">
                                                    <div ng-messages="editForm.publicationVersion.$error">
                                                        <div ng-message="required">Publication version is required.</div>
                                                    </div>
                                                </md-input-container>
                                                <md-input-container class="md-block" flex-gt-sm ng-if="table.publicationDate">
                                                    <label class="input-left">Publication date</label>
                                                    <input type="text" name="publicationDate" disabled ng-model="table.publicationDate">
                                                    <div ng-messages="editForm.publicationDate.$error">
                                                        <div ng-message="required">Publication date is required.</div>
                                                    </div>
                                                </md-input-container>
                                            </div>
                                            <md-input-container class="md-block" flex-gt-sm>
                                                <label class="input-left">OID</label>
                                                <input type="text" name="oid" disabled ng-model="table.oid" ng-change="setDirty()">
                                                <div ng-messages="editForm.oid.$error">
                                                    <div ng-message="required">OID is required.</div>
                                                </div>
                                            </md-input-container>

                                            <md-input-container class="md-block" flex-gt-sm>
                                                <label class="input-left">Version</label>
                                                <input type="text" name="version" disabled ng-model="table.version" ng-change="setDirty()">
                                                <div ng-messages="editForm.version.$error">
                                                    <div ng-message="required">Version is required.</div>
                                                </div>
                                            </md-input-container>
                                            <div layout-gt-sm="row">

                                                <md-input-container class="md-block" flex-gt-sm>
                                                    <label class="input-left">Extensibility</label>
                                                    <md-select disabled ng-change="setDirty()" ng-model="table.extensibility">
                                                        <md-option ng-repeat="extensibility in config.tableExtensibilities" value="{{extensibility}}">
                                                            {{extensibility}}
                                                        </md-option>
                                                    </md-select>
                                                </md-input-container>
                                                <md-input-container class="md-block" flex-gt-sm>
                                                    <label class="input-left">Stability</label>
                                                    <md-select disabled ng-change="setDirty()" ng-model="table.stability">
                                                        <md-option ng-repeat="stability in config.tableStabilities" value="{{stability}}">
                                                            {{stability}}
                                                        </md-option>
                                                    </md-select>
                                                </md-input-container>

                                                <md-input-container class="md-block" flex-gt-sm>
                                                    <label class="input-left">Content Definition</label>
                                                    <md-select ng-change="setDirty()" disabled ng-model="table.contentDefinition">
                                                        <md-option ng-repeat="contentDefinition in config.tableContentDefinitions" value="{{contentDefinition}}">
                                                            {{contentDefinition}}
                                                        </md-option>
                                                    </md-select>
                                                </md-input-container>
                                            </div>
                                            <md-input-container class="md-block" flex-gt-sm>
                                                <label class="input-left">Code Systems</label>
                                                <span ng-repeat="cs in codeSystems">
													<span ng-hide="codeSysEditMode">{{cs}}</span>
                                                <span ng-hide="$last">,</span>
                                                </span>
                                            </md-input-container>

                                            <md-input-container class="md-block" flex-gt-sm >
                                                <label class="input-left">Comment</label>
                                                <textarea rows="3" disabled md-select-on-focus disabled
                                                          ng-change="setDirty()" name="comment" id="comment" class="form-control" ng-model="table.comment"/>
                                            </md-input-container>
                                            <md-input-container class="md-block" flex-gt-sm
                                                                ng-show="table.scope === 'HL7STANDARD' && table.hl7Section != null && table.hl7Section != '' && table.hl7Section != undefined">
                                                <label class="input-left" >HL7 Section</label>
                                                <input type="text" disabled
                                                       name="hl7Section"
                                                       id="hl7Section"
                                                       ng-model="table.hl7Section">
                                            </md-input-container>

                                        </md-content>
                                    </div>
                                </md-tab-body>
                            </md-tab>
                            <md-tab>
                                <md-tab-label>
                                    <i class="fa fa-table fa-fw" aria-hidden="true"></i>Definition
                                </md-tab-label>
                                <md-tab-body>
                                    <div class="el-def" style="margin-top: 20px">
                                        <div class="">
                                            <div class="">
                                                <span class="pull-left" style="margin-bottom: 10px">
                                                    <span>Values # of Page : </span>
                                                    <md-input-container class="normal">
                                                        <label></label>
                                                        <input type="number" ng-model="itemsByPage" no-dirty-check/>
                                                    </md-input-container>
                                                </span>
                                                <div ng-if="table.codes.length > 1000" style="margin-bottom: 10px">
                                                    <div class="alert alert-warning" role="alert">
                                                        Due to the large size of the codes, only the first 1000 of {{table.codes.length}} codes will be displayed.
                                                    </div>
                                                </div>

                                                <table st-safe-src="table.smallCodes" st-table="displayCollection" class="table table-striped table-condensed table-bordered">
                                                    <thead>
                                                    <tr class="tbl-header">
                                                        <th st-sort="value" class="col-md-2">Value</th>
                                                        <th st-sort="label" class="col-md-3">Description</th>
                                                        <th class="col-md-2">CodeSystem</th>
                                                        <th class="col-md-1">Usage</th>
                                                        <th class="col-md-3">Comments</th>
                                                    </tr>
                                                    <tr>
                                                        <th>
                                                            <div layout="row">
                                                                <md-input-container flex="100" class="normal">
                                                                    <label></label>
                                                                    <input st-search="'value'" placeholder="Search for value" type="search" />
                                                                </md-input-container>
                                                            </div>
                                                        </th>
                                                        <th>
                                                            <div layout="row">
                                                                <md-input-container flex="100" class="normal">
                                                                    <label></label>
                                                                    <input st-search="'label'" placeholder="Search for description" type="search" />
                                                                </md-input-container>
                                                            </div>
                                                        </th>
                                                        <th/>
                                                        <th/>
                                                        <th/>
                                                    </tr>
                                                    </thead>

                                                    <tbody>
                                                    <tr ng-repeat="c in displayCollection">
                                                        <td class="col-md-2">
                                                            <span>{{c.value}}</span>
                                                        </td>

                                                        <td class="col-md-3">
                                                            <span>{{c.label}}</span>
                                                        </td>

                                                        <td class="col-md-2">
                                                            <span>{{c.codeSystem}}</span>
                                                        </td>
                                                        <td class="col-md-1">
                                                            <span>{{c.codeUsage}}</span>
                                                        </td>
                                                        <td class="col-md-3">
                                                            <span>{{c.comments}}</span>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                    <tr style="float:center !important;" ng-if="table.smallCodes.length > itemsByPage">
                                                        <td colspan="6" class="text-center" style="float:center !important;">
                                                            <div st-pagination="" st-items-by-page="itemsByPage" st-displayed-pages="7" style="float:center !important;"></div>
                                                        </td>
                                                    </tr>

                                                </table>

                                            </div>
                                        </div>
                                    </div>
                                </md-tab-body>
                            </md-tab>
                            <md-tab>
                                <md-tab-label>
                                    <i class="fa fa-link" aria-hidden="true"></i>Cross-References <span class="badge">{{references.length}}</span>
                                </md-tab-label>
                                <md-tab-body>
                                    <div class="el-def" style="margin-top:20px">
                                        <table st-safe-src="references" st-table="displayReferences" class="table table-striped table-bordered table-condensed">
                                            <thead>
                                            <tr class="tbl-header">
                                                <td st-ratio="10">#</td>
                                                <th st-ratio="30">Location</th>
                                                <th st-ratio="30">ValueSet</th>
                                                <th st-ratio="15">bindingLocation</th>
                                                <th st-ratio="15">bindingStrength</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="ref in displayReferences">
                                                <td st-ratio="10">{{$index + 1}}
                                                    <span class="badge" ng-if="ref.type === 'message'">Message</span>
                                                    <span class="badge" ng-if="ref.type === 'segment'">Segment</span>
                                                    <span class="badge" ng-if="ref.type === 'datatype'">Datatype</span>
                                                </td>
                                                <td st-ratio="30">
                                                    <span ng-if="ref.type === 'message'">{{messagesMap[ref.id].name}}.{{ref.location}}</span>
                                                    <span ng-if="ref.type === 'segment'">{{getSegmentLabel(segmentsMap[ref.id])}}-{{ref.location}}</span>
                                                    <span ng-if="ref.type === 'datatype'">{{getDatatypeLabel(datatypesMap[ref.id])}}.{{ref.location}}</span>
                                                </td>
                                                <td st-ratio="30">
                                                    {{::table.bindingIdentifier}}
                                                </td>
                                                <td st-ratio="15">
                                                    {{::ref.bindingLocation}}
                                                </td>
                                                <td st-ratio="15">
                                                    {{::ref.bindingStrength}}
                                                </td>
                                            </tr>
                                            </tbody>
                                            <tr ng-if="references.length > 10">
                                                <td colspan="9" class="text-center">
                                                    <div st-pagination="" st-items-by-page="10" st-displayed-pages="10"></div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </md-tab-body>
                            </md-tab>
                        </md-tabs>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/ng-template" id="ConfirmValueSetDeleteCtrl.html">
    <md-dialog aria-label="abortDelete">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Value Set Cross Reference found</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                  <p>Are you sure you want to delete Value Set <display-label of="tableToDelete"></display-label> </p>
                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">
                <md-button  class="md-primary md-raised" md-autofocus ng-click="delete()">delete
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="ValueSetReferencesCtrl.html">
    <md-dialog aria-label="abortDelete">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Value Set Cross Reference found</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="ok()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                    <p>We cannot delete this value set because it is being referenced by elements below:</p>

                    <div class="igl-table">
                        <table class="table table-striped table-condensed table-bordered">
                            <thead>
                            <tr class="tbl-header">
                                <th>Name</th>
                                <th>Path</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="ref in referencesForMenu">
                                <td>
                            <span>
                                              <!--<img style="width:15px; height:15px"-->
                                                   <!--ng-src="images/{{ref.type}}.png">-->
                                             <span style="width:60%"
                                                   name="name"
                                                   ng-bind="ref.name"></span>
                            <span ng-bind="ref.description"></span>
                            </span>

                                </td>
                                <td>
                                    <div>{{ref.path}}</div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </md-dialog-content>
        </form>
    </md-dialog>
</script>

<script type="text/ng-template" id="valueSet_node">
    <tr tt-node is-branch="node.codes!==undefined">
        <td class="col-md-2">
            <table class=" table-borderless" ng-if="node.label.element && node.description.element">
                <tr>
                    <td class="col-sm-1">

                        <span ng-bind="node.label.element"></span><span ng-if="node.description.element">:<span ng-bind="node.description.element"></span></span>
                    </td>
                </tr>
            </table>
            <table class=" table-borderless" ng-if="(node.label.element1 && node.label.element2)|| (node.description.element1 && node.description.element2)">
                <tr style="background-color:#B5F7EC">
                    <td class="col-sm-1">
                        <span ng-bind="node.label.element"></span>
                        <span ng-bind="node.label.element1"></span>

                        <span ng-if="node.description">:
                        <span ng-if="node.description.element1" ng-bind="node.description.element1"></span>
                        <span ng-if="node.description.element" ng-bind="node.description.element"></span>
                        </span>
                    </td>
                </tr>
                <tr style="background-color:#EDE1AF">
                    <td class="col-sm-1">
                        <span ng-bind="node.label.element"></span>
                        <span ng-bind="node.label.element2"></span>

                        <span ng-if="node.description">:
                        <span ng-if="node.description.element2" ng-bind="node.description.element2"></span>
                        <span ng-if="node.description.element" ng-bind="node.description.element"></span>
                        </span>
                    </td>
                </tr>
            </table>
        </td>
        <td class="col-md-1" ng-if="node.contentDefinition">
            <div align="center">
                <table class=" table-borderless">
                    <tr>
                        <td class="col-md-1" style="background-color:#B5F7EC">
                            <div align="center"> <span ng-bind="node.contentDefinition.element1"></span></div>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-1" style="background-color:#EDE1AF">
                            <div align="center"> <span ng-bind="node.contentDefinition.element2"></span></div>
                        </td>
                    </tr>
                </table>
            </div>
        </td>
        <td class="col-md-1" ng-if="!node.contentDefinition">
            <div align="center"> - </div>
        </td>
        <td class="col-md-1" ng-if="node.codeSystem">
            <table class=" table-borderless">
                <tr>
                    <td class="col-md-1" style="background-color:#B5F7EC">
                        <div align="center"> <span ng-bind="node.codeSystem.element1"></span></div>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-1" style="background-color:#EDE1AF">
                        <div align="center"> <span ng-bind="node.codeSystem.element2"></span></div>
                    </td>
                </tr>
            </table>
        </td>
        <td class="col-md-1" ng-if="!node.codeSystem">
            <div align="center"> - </div>
        </td>
        <td class="col-md-1" ng-if="node.codeUsage">
            <table class="table-borderless">
                <tr>
                    <td class="col-md-1" style="background-color:#B5F7EC">
                        <div align="center"> <span ng-bind="node.codeUsage.element1"></span></div>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-1" style="background-color:#EDE1AF">
                        <div align="center"> <span ng-bind="node.codeUsage.element2"></span></div>
                    </td>
                </tr>
            </table>
        </td>
        <td class="col-md-1" ng-if="!node.codeUsage">
            <div align="center"> - </div>
        </td>

    </tr>
</script>

<script type="text/ng-template" id="AddBindingForValueSet.html">
    <div class="modal-header">
        <h3 class="modal-title">Add Binding for Value Set : {{::table.bindingIdentifier}}</h3>
    </div>
    <div class="modal-body">
        <span class="pull-right" ng-if="igdocument">
            <div class="btn-group btn-group-sm">
                <button type="button" class="btn btn-raised btn-primary btn-xs" ng-click="switchTo('SEGMENT'); " ng-class="{'active':bindingTargetType === 'SEGMENT'}">
                    To Segment
                </button>
                <button type="button" class="btn btn-raised btn-primary btn-xs" ng-click="switchTo('DATATYPE');" ng-class="{'active':bindingTargetType === 'DATATYPE'}">
                    To Datatype
               </button>
            </div>
        </span>

        <div ng-show="bindingTargetType=='SEGMENT'">
            <table class="table table-striped table-bordered table-condensed">
                <thead>
                    <tr class="tbl-header">
                        <th class="col-md-6">Segment</th>
                        <th class="col-md-6">Field</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="col-md-6">
                            <select ng-model='selectedSegmentForBinding' class="form-control" ng-change="selectSegment();" ng-options="seg as getSegmentLabel(seg) for seg in segments | filter:{ scope : 'USER' }" />
                        </td>
                        <td class="col-md-6">
                            <select ng-show='selectedSegmentForBinding != null' ng-model='selectedFieldForBinding' class="form-control">
                                <option ng-repeat="f in selectedSegmentForBinding.fields | orderBy:'+position'" value="{{f}}" ng-disabled="checkDuplicated(getSegmentLabel(selectedSegmentForBinding) + '-' + f.position)">
                                    {{::f.position}}. {{::f.name}}
                                </option>
                            </select>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div ng-if="bindingTargetType=='DATATYPE'">
            <table class="table table-striped table-bordered table-condensed">
                <thead>
                <tr class="tbl-header">
                    <th class="col-md-6">Datatype</th>
                    <th class="col-md-6">Component</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td class="col-md-6">
                        <select  class="form-control" ng-model="selectedDatatypeForBinding" ng-change="selectDatatype(selectedDatatypeForBinding);">
                            {{selectedDatatypeForBinding}}
                            <option ng-repeat="dt in datatypes | filter:{ status : 'UNPUBLISHED'}" value="{{dt}}" ng-show="dt.components.length" >
                            {{dt.name}}_{{dt.ext}}
                            </option>
                        </select>
                    </td>
                    <td class="col-md-6">
                        <select ng-show='selectedDatatypeForBinding !== null' ng-model="selectedComponentForBinding" class="form-control" ng-change="selectComponent(selectedComponentForBinding)">
                            <option ng-repeat="c in componentsToSelect | orderBy:'+position'" value="{{c}}" ng-disabled="checkDuplicated(getDatatypeLabel(selectedDatatypeForBinding) + '.' + c.position)">
                                {{c.position}}.{{c.name}}
                            </option>
                        </select>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-info btn-sm" ng-disabled="selectedComponentForBinding === null && selectedFieldForBinding === null" ng-click="save(bindingTargetType)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>ADD</span>
        </button>
    </div>
</script>
