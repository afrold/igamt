<style id="antiClickjack">
    body {
        display: none !important;
    }
</style>
<script type="text/javascript">
    if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
    } else {
        top.location = self.location;
    }
</script>
<script type="text/ng-template" id="EditSegments.html">
    <div ng-controller="SegmentListCtrl" ng-init="initSegment()" class="container" ng-cloak>
        <div ng-show="loadingSelection" style="text-align: center;">
            <div layout="row" layout-sm="column" layout-align="space-around">
                <md-progress-circular class="md-hue-2" md-diameter="40px"></md-progress-circular>
            </div>
        </div>
        <div ng-show="!loadingSelection">
            <div ng-show="segment !== null" id="executionPanel">
                <div class="container">
                    <div class="page-header">
                        <span class="header4">Segment: {{getSegmentLabel(segment)}}</span>
                        <span class="pull-right">
                            <md-button title="Save Changes" type="button" class="btn btn-raised btn-sm btn-success"
                                    ng-disabled="editForm.$invalid || !editForm.$dirty"
                                    ng-hide="viewSettings.tableReadonly || segment.scope !== 'USER'"
                                    ng-click="save()">
                                <span><i class="fa fa-check fa-fw"></i> Save</span>
                        </md-button>
                        <md-button title="Save Changes" type="button" class="btn btn-raised btn-sm btn-success" ng-disabled="!editForm.$dirty" ng-show="segment.scope !== 'USER'" ng-click="saveBindingForSegment();cleanState();">
                                <span><i class="fa fa-check fa-fw"></i> Save</span>
                            </md-button>
                        <md-button title="Reset Changes" type="button" class="btn btn-raised btn-sm btn-warning" ng-show="segment.scope !== 'USER'" ng-disabled="!editForm.$dirty" ng-click="reset()">
                                <span><i class="fa fa-times fa-fw"></i> Reset</span>
                            </md-button>
                        <md-button title="Reset Changes" type="button" class="btn btn-raised btn-sm btn-warning" ng-hide="viewSettings.tableReadonly || segment.scope !== 'USER'" ng-disabled="!editForm.$dirty" ng-click="reset()">
                                <span><i class="fa fa-times fa-fw"></i> Reset</span>
                            </md-button>
                        </span>
                    </div>
                <div class="static_info">
                 <i class="fa fa-calendar" aria-hidden="true"></i>
					Updated :{{segment.dateUpdated | date:dateFormat}}
                     <span ng-if="segment.owner" style="font-style: italic;">
                         <i class="fa fa-user" aria-hidden="true"></i> 
                         ,{{segment.owner}}
                    </span>
                    <span>,HL7 Version: {{segment.hl7Version}}</span>
                    <span ng-if="segment.publicationVersion">,Version: {{segment.publicationVersion}}</span>

                </div>
                    <div class="" ng-controller="cmpSegmentCtrl as cmp">
                        <md-tabs md-dynamic-height md-border-bottom md-selected="tabStatus.active">
                            <md-tab md-on-select="setDeltaToF()">
                                <md-tab-label>
                                    <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>MetaData
                                </md-tab-label>
                                <md-tab-body>
                                    <div style="margin-top: 20px" ng-cloak class="md-inline-form metadata-scroll" layout="column">
                                        <md-content layout-padding>
                                            <label class="input-left igamt-label">Name*</label>

                                            <md-input-container class="md-block igamt-input-block" flex-gt-sm>
                                                <input type="text" disabled name="identifier"  ng-model="segment.name" ng-change="setDirty()" required>
                                                <div ng-messages="editForm.name.$error">
                                                    <div ng-message="required">Name is required.</div>
                                                </div>
                                            </md-input-container>

                                            <label class="input-left igamt-label">Description*</label>

                                            <md-input-container class="md-block igamt-input-block" flex-gt-sm>
                                                <input type="text" disabled ng-change="setDirty()" name="description"
                                                       ng-model="segment.description" required>
                                                <div ng-messages="editForm.description.$error">
                                                    <div ng-message="required">description is required.</div>
                                                </div>
                                            </md-input-container>

                                            <label class="input-left igamt-label" ng-if="segment.ext&& segment.ext !=''">Extension*</label>

                                            <md-input-container class="md-block igamt-input-block" flex-gt-sm ng-hide="segment.scope === 'HL7STANDARD'">
                                                <input type="text" ng-disabled="viewSettings.tableReadonly || (segment.scope !== 'USER' && segment.scope !== 'MASTER')" ng-change="setDirty()" name="label" ng-model="segment.ext" required>
                                                <div role="alert"  style="color:red" ng-show="isDuplicatedTwoContexts(segment,'name', 'ext', segments)">
                                                    <div class="my-message">Extension is already used.</div>
                                                </div>
                                                <div ng-messages="editForm.ext.$error">
                                                    <div class="message-error" ng-message="required">Extension is required.</div>
                                                </div>
                                            </md-input-container>


                                            <label class="input-left igamt-label" ng-show="!viewSettings.tableReadonly">Author Notes</label>

                                            <div ng-if="!viewSettings.tableReadonly">
                                                <textarea froala="froalaEditorOptions" ng-model="segment.authorNotes" name="text" id="authorNotes"></textarea>
                                            </div>
                                            <div ng-if="viewSettings.tableReadonly">
                                                <div class="fr-view">
                                                    <div froala-view="segment.authorNotes"></div>
                                                </div>
                                            </div>

                                            <label class="input-left igamt-label" ng-show="segment.scope === 'HL7STANDARD' && segment.hl7Section != null && segment.hl7Section != ''">HL7 Section</label>

                                            <md-input-container class="md-block igamt-input-block" flex-gt-sm
                                                                ng-show="segment.scope === 'HL7STANDARD' && segment.hl7Section != null && segment.hl7Section != ''">
                                                <input type="text" disabled
                                                       name="hl7Section"
                                                       id="hl7Section"
                                                       ng-model="segment.hl7Section"
                                                >
                                            </md-input-container>
                                        </md-content>
                                    </div>
                                 </md-tab-body>
                            </md-tab>
                            <md-tab md-on-select="setDeltaToF()">
                                <md-tab-label>
                                    <i class="fa fa-table fa-fw" aria-hidden="true"></i>Definition
                                </md-tab-label>
                                <md-tab-body>
                                <div class="el-def" style="margin-top: 5px">

                                    <md-tabs md-dynamic-height md-border-bottom md-selected="defTabStatus.active">
                                        <md-tab>
                                            <md-tab-label>
                                                Pre-Text
                                            </md-tab-label>
                                            <md-tab-body>

                                        <div  class="panel-primary panel-level1">
                                            <div class="panel-body">
                                                <div ng-show="!viewSettings.tableReadonly && segment.scope === 'USER'">
                                                    <textarea froala="froalaEditorOptions" ng-model="segment.text1" id="text1" name="text1" ng-change="setDirty()"></textarea>
                                                  </div>
                                                <div ng-show="viewSettings.tableReadonly || (segment.scope !== 'USER' && segment.scope !== 'MASTER')">
                                                    <div froala-view="segment.text1"></div>
                                                </div>
                                            </div>
                                        </div>
                                            </md-tab-body>
                                        </md-tab>

                                        <md-tab>
                                            <md-tab-label>
                                                Structure
                                            </md-tab-label>
                                            <md-tab-body>
                                                <div layout="column">
                                                    <div flex layout="row" layout-align="start start">
                                                        <div class="table-context">
                                                            <strong> Context :</strong>
                                                            <span class="label-field-icon"><i class="fa fa-circle fa-fw"/></span>
                                                            segment
                                                            <span class="label-component-icon"><i class="fa fa-circle fa-fw"/></span>
                                                            Field
                                                            <span class="label-sub-component-icon"><i class="fa fa-circle fa-fw"/></span>
                                                            Component
                                                        </div>
                                                        <div flex class="pull-right">

                                                                <button ng-click="addFieldModal(segment)" class="btn btn-sm btn-raised menu-table menu-table-add pull-right" ng-if="segment.scope=='USER'">
                                                                    <i class="fa fa-plus fa-fw"></i> ADD
                                                                </button>
                                                            <!--<md-button ng-click="close()" md-colors="{background:'orange'}">-->


                                                            <button ng-if="segment.scope!=='HL7STANDARD'" class="pull-right btn btn-sm btn-raised menu-table menu-table-verify" title="Validate Segment" type="button"
                                                                    ng-click="validateSegment()">
                                                                <i class="fa fa-check fa-fw"></i> Verify
                                                            </button>
                                                            <md-select class="pull-right"  ng-model="viewSettings.visibleColumns"  md-selected-text="viewSettings.getPlaceHolder()" multiple ng-model-options="{trackBy: '$value.id'}" no-dirty-check>
                                                                <md-optgroup label="Columns">
                                                                    <md-option ng-repeat="opt in  viewSettings.columnOptions track by $index" ng-value="opt">{{opt.label}}</md-option>
                                                                </md-optgroup>
                                                            </md-select>
                                                            <!--<md-button ng-click="close()" md-colors="{background:'orange'}">-->
                                                        </div>
                                                    </div>
                                                </div>
                                                    <div class="" style="margin:5px 5px 5px 5px">
                                                      <div class="row" ng-show="showErrorCount(segment.id)  && showSegErrorNotification" style="margin-right: 15px;margin-left: 5px;">
                                                        <div class="alert has-error" ng-show="errorCount(segment.id)>0" >
                                                        <button type="button" ng-click="setErrorNotification();" class="close" aria-label="Close"><span>&times;</span></button>{{errorCount(segment.id)}} Errors

                                                        </div>
                                                       <div class="alert alert-success" ng-show="errorCount(segment.id)===0">
                                                        <button type="button" ng-click="setErrorNotification();" class="close" aria-label="Close"><span>&times;</span></button>{{errorCount(segment.id)}} Errors

                                                         </div>
                                                    </div>

                                                     </div>
                                                <div class="igl-def-table-container panel-primary" style="overflow-x: scroll">
                                                    <table id="treeTable" tt-table tt-params="segmentsParams" class="table table-bordered table-fix-header table-condensed profile-table">
                                                        <thead>
                                                            <tr class="tbl-header" style="">
                                                                <th class="col-fixed-name">Name</th>
                                                                <th class="col-fixed-usage">Usage
                                                                    <button type="button" ng-show="(segment.scope === 'USER') && !viewSettings.tableReadonly && (segment.fields.length>0)" class="btn btn-raised btn-info btn-xs" ng-click="OtoX(segment)">O to X
                                                                    </button>
                                                                </th>
                                                                <th  style="text-align:left" class="col-fixed-cardinality">Cardinality
                                                                </th>
                                                                <th style="text-align:left" class="col-fixed-length" ng-show="viewSettings.isVisibleColumn('length')">Length
                                                                </th>
                                                                <th class="col-fixed-confLength" ng-show="showConfLength() && viewSettings.isVisibleColumn('confLength')" style="text-align:left">Conf. Length
                                                                </th>
                                                                <th class="col-fixed-dataType" ng-show="viewSettings.isVisibleColumn('datatype')" style="text-align:left">Data Type
                                                                </th>
                                                                <th class="col-fixed-valueSet" ng-show="viewSettings.isVisibleColumn('valueSet')" style="text-align:left">Value Set/Single Code
                                                                </th>
                                                                <th class="col-fixed-constantValue" ng-show="viewSettings.isVisibleColumn('singleElm')" style="text-align:left">Constant Value
                                                                </th>
                                                                <th class="col-fixed-predicate" ng-show="viewSettings.isVisibleColumn('predicate')" style="text-align:left">Predicate
                                                                </th>
                                                                <th class="col-fixed-definitionText" ng-show="viewSettings.isVisibleColumn('defText')" style="text-align:left">Definition Text
                                                                </th>
                                                                <th class="col-fixed-comment" ng-show="viewSettings.isVisibleColumn('comment')" style="text-align:left">Comment
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                </div>
                                            </md-tab-body>
                                        </md-tab>

                                        <md-tab>
                                            <md-tab-label>
                                                Post-Text
                                            </md-tab-label>
                                            <md-tab-body>

                                        <div class="panel-primary panel-level1">
                                            <div class="panel-body">
                                                <div ng-show="!viewSettings.tableReadonly && segment.scope === 'USER'">
                                                    <textarea froala="froalaEditorOptions" ng-model="segment.text2" id="text2" name="text2" ng-change="setDirty()"></textarea>
                                                  </div>
                                                <div ng-show="viewSettings.tableReadonly || (segment.scope === 'MASTER' || segment.scope === 'HL7STANDARD')">
                                                    <div class="fr-view">
                                                        <div froala-view="segment.text2"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                            </md-tab-body></md-tab>


                                        <md-tab>
                                            <md-tab-label>
                                                Conf. Statements
                                            </md-tab-label>
                                            <md-tab-body>

                                        <div  class="panel-primary panel-level1">
                                              <div class="panel-body">
                                                <div class="col-md-12 igl-page-header">
                                                    <span class="pull-right">
                                                                    <button class="btn btn-raised btn-info btn-sm" ng-click="manageConformanceStatement();"  type="button"
                                                                            ng-hide="viewSettings.tableReadonly || (segment.scope !== 'USER' && segment.scope !== 'MASTER')">
                                                                        <span><i class="fa fa-plus fa-fw">&nbsp; </i>Add Conf.Statement</span></button>
                                                    </span>
                                                </div>
                                                <div class="col-md-12">
                                                    <!--<span ng-hide="segment.conformanceStatements.length > 0">No conformance statement</span>-->
                                                    <table st-table="displayedCS" st-safe-src="segment.conformanceStatements" class="table table-striped table-bordered table-condensed" ng-show="segment.conformanceStatements.length > 0">
                                                        <thead>
                                                            <tr class="tbl-header">
                                                                <th st-sort="constraintId" class="col-md-1">ID</th>
                                                                <th class="col-md-10">Description</th>
                                                                <th class="col-md-1"></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="c in displayedCS">
                                                                <td class="col-md-1">{{c.constraintId}}</td>
                                                                <td class="col-md-10">{{c.description}}</td>
                                                                <td class="col-md-1" align="center">
                                                                    <button class="btn btn-raised btn-danger btn-xxs" ng-click="deleteConformanceStatementFromList(c);" ng-hide="viewSettings.tableReadonly"><span><i class="fa fa-trash fa-fw">
                                                                                &nbsp; </i>Del</span>
                                                                        </button>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>

                                            </div>
                                        </div>

                                            </md-tab-body>
                                        </md-tab>

                                        <md-tab>
                                            <md-tab-label>
                                                Predicates
                                            </md-tab-label>
                                            <md-tab-body>

                                        <div class="panel-primary panel-level1">
                                            <div class="panel-body">
                                                <div class="col-md-12">
                                                    <!--<span ng-hide="segment.predicates.length > 0">No Conditional Predicate</span>-->
                                                    <table st-table="displayedCP" st-safe-src="segment.predicates" class="table table-striped table-bordered table-condensed" ng-show="segment.predicates.length > 0">
                                                        <thead>
                                                            <tr class="tbl-header">
                                                                <th st-sort="constraintTarget" class="col-md-3">Location</th>
                                                                <th class="col-md-6">Description</th>
                                                                <th class="col-md-1">True usage</th>
                                                                <th class="col-md-1">False usage</th>
                                                                <th class="col-md-1"></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="p in displayedCP">
                                                                <td class="col-md-3">
                                                                    <span ng-bind="displayLocationForSegment(segment, p.constraintTarget)" />
                                                                </td>
                                                                <td class="col-md-6">{{p.description}}</td>
                                                                <td class="col-md-1">{{p.trueUsage}}</td>
                                                                <td class="col-md-1">{{p.falseUsage}}</td>
                                                                <td class="col-md-1" align="center">
                                                                    <button class="btn btn-raised btn-danger btn-xxs" ng-click="deletePredicateFromList(p);" ng-disabled="viewSettings.tableReadonly"><span><i class="fa fa-trash fa-fw">
                                                                        &nbsp; </i>Del</span>
                                                                    </button>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                            </md-tab-body>

                                        </md-tab>

                                        <md-tab ng-if="segment.scope === 'USER'">
                                            <md-tab-label>
                                                Co-constraints
                                            </md-tab-label>
                                            <md-tab-body>

                                        <div class="panel-primary" >
                                            <div class="panel-body">
                                                <div>
                                                    <div ng-hide="viewSettings.tableReadonly" class="col-md-12" style="margin-bottom:20px">
                                                        <div class="pull-right" >
                                                            <md-button class="md-primary md-raised" md-autofocus ng-click="addCoConstraintRow();">
                                                                <span><i class="fa fa-plus fa-fw">&nbsp; </i>Add CoConstraint Row</span>
                                                            </md-button>
                                                            <md-button class="md-warn md-raised" md-autofocus ng-click="deleteCoConstraints();">
                                                                <span><i class="fa fa-trash fa-fw">&nbsp; </i>Delete CoConstraints Table</span>
                                                            </md-button>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12" style="overflow-y:auto;">
                                                        <span ng-show="viewSettings.tableReadonly && segment.coConstraintsTable.rowSize === 0">No Co-Constraint Definition</span>
                                                        <table style="table-layout: fixed; border: 0;" class="table table-bordered table-fix-header table-condensed profile-table" ng-hide="viewSettings.tableReadonly && segment.coConstraintsTable.rowSize === 0">
                                                            <thead>
                                                            <tr>
                                                                <th bgcolor="white" rowspan="2" style="overflow: hidden;width: 20px;text-align:center;border:0;">
                                                                </th>
                                                                <th ng-show="!segment.coConstraintsTable.ifColumnDefinition" bgcolor="#1565c0" style="font-weight: bold;color:white;text-align:center;overflow: hidden;width: 200px;">
                                                                    If Column<sup>*</sup>
                                                                </th>
                                                                <th ng-show="segment.coConstraintsTable.ifColumnDefinition" bgcolor="#1565c0" style="font-weight: bold;color:white;text-align:center;border:0;overflow: hidden;width: 200px;">
                                                                    If Column<sup>*</sup>
                                                                </th>
                                                                <th ng-show="!segment.coConstraintsTable.thenColumnDefinitionListForDisplay || segment.coConstraintsTable.thenColumnDefinitionListForDisplay.length == 0" bgcolor="#efefef" style="text-align:center;color:black;overflow: hidden;width: 50px;">
                                                                    Then Column
                                                                </th>
                                                                <th ng-show="segment.coConstraintsTable.thenColumnDefinitionListForDisplay && segment.coConstraintsTable.thenColumnDefinitionListForDisplay.length > 0" colspan="{{segment.coConstraintsTable.thenColumnDefinitionListForDisplay.length * 4 + 1}}" bgcolor="#efefef" style="overflow: hidden;width: {{segment.coConstraintsTable.thenColumnDefinitionListForDisplay.length * 200 + 50}}px;text-align:center;color:black;">
                                                                    Then Columns
                                                                </th>
                                                                <th ng-show="!segment.coConstraintsTable.userColumnDefinitionList || segment.coConstraintsTable.userColumnDefinitionList.length == 0" bgcolor="#4caf50" style="overflow: hidden;width: 50px;text-align:center;color:black;">
                                                                    User Column
                                                                </th>
                                                                <th ng-show="segment.coConstraintsTable.userColumnDefinitionList && segment.coConstraintsTable.userColumnDefinitionList.length > 0" colspan="{{segment.coConstraintsTable.userColumnDefinitionList.length * 4 + 1}}" bgcolor="#4caf50" style="overflow: hidden;width: {{segment.coConstraintsTable.userColumnDefinitionList.length * 200 + 50}}px;text-align:center;color:black;">
                                                                    User Columns
                                                                </th>
                                                                <th bgcolor="white" rowspan="2" style="border: 0;overflow: hidden;width: 50px;text-align:center;border:0;">
                                                                </th>
                                                            </tr>
                                                            <tr>
                                                                <th style="font-weight: bold;text-align:center;overflow: hidden;width: 200px;" bgcolor="#1565c0" ng-show="segment.coConstraintsTable.ifColumnDefinition">
                                                                    <span ng-show="segment.coConstraintsTable.ifColumnDefinition.type=='field'" class="label label-field label-icon">F</span>
                                                                    <span ng-show="segment.coConstraintsTable.ifColumnDefinition.type=='component'" class="label label-component label-icon">C</span>
                                                                    <span ng-show="segment.coConstraintsTable.ifColumnDefinition.type=='subcomponent'" class="label label-sub-component-icon label-icon">C</span>
                                                                    <span style="font-weight: bold;color:white">{{segment.name}}-{{segment.coConstraintsTable.ifColumnDefinition.path}}</span>
                                                                    <span style="font-weight: bold;color:white"><sup>*</sup></span>
                                                                    <span ng-show="segment.coConstraintsTable.ifColumnDefinition.constraintType=='value'" class="label label-icon">Value</span>
                                                                    <span ng-show="segment.coConstraintsTable.ifColumnDefinition.constraintType=='valueset'" class="label label-icon">ValueSet</span>
                                                                    <span style="font-weight: bold;color:white" ng-click="openDialogForEditCoConstraintIFDefinition(segment.coConstraintsTable.ifColumnDefinition);" ng-hide="viewSettings.tableReadonly"><i class="fa fa-pencil" aria-hidden="true"></i></span>
                                                                </th>
                                                                <th style="font-weight: bold;text-align:center;overflow: hidden;width: 200px;" bgcolor="#1565c0" ng-show="!segment.coConstraintsTable.ifColumnDefinition">
                                                                    <span style="font-weight: bold;color:white" ng-hide="viewSettings.tableReadonly" ng-click="openDialogForEditCoConstraintIFDefinition();"><i class="fa fa-plus" aria-hidden="true"></i> Set IF Column</span>
                                                                </th>
                                                                <th style="text-align:center;overflow: hidden;width: 200px;" bgcolor="#efefef" colspan="4" ng-repeat="columnDefinition in segment.coConstraintsTable.thenColumnDefinitionListForDisplay">
                                                                    <span ng-show="columnDefinition.type=='field'" class="label label-field label-icon">F</span>
                                                                    <span ng-show="columnDefinition.type=='component'" class="label label-component label-icon">C</span>
                                                                    <span ng-show="columnDefinition.type=='subcomponent'" class="label label-sub-component-icon label-icon">C</span>
                                                                    <span style="color:black">{{segment.name}}-{{columnDefinition.path}}</span>
                                                                    <span ng-show="columnDefinition.path=='2' || columnDefinition.path=='5'" style="color:black"><sup>*</sup></span>
                                                                    <span ng-show="columnDefinition.constraintType=='value'" class="label label-icon">Value</span>
                                                                    <span ng-show="columnDefinition.constraintType=='valueset'" class="label label-icon">ValueSet</span>
                                                                    <span ng-show="columnDefinition.constraintType=='dmr'" class="label label-icon">Value</span>
                                                                    <span ng-show="columnDefinition.constraintType=='dmf'" class="label label-icon">DM_Flavor</span>
                                                                    <span style="color:black" ng-click="openDialogForEditCoConstraintTHENDefinition(columnDefinition);" ng-hide="columnDefinition.constraintType=='dmf' || viewSettings.tableReadonly"><i class="fa fa-pencil" aria-hidden="true"></i></span>
                                                                    <span style="color:red" ng-click="delCoConstraintTHENDefinition(columnDefinition);" ng-hide="columnDefinition.constraintType=='dmf' || viewSettings.tableReadonly"><i class="fa fa-times" aria-hidden="true"></i></span>
                                                                </th>
                                                                <th style="text-align:center;overflow: hidden;width: 50px;" bgcolor="#efefef">
                                                                    <span style="color:black" ng-click="openDialogForEditCoConstraintTHENDefinition();" ng-hide="viewSettings.tableReadonly"><i class="fa fa-plus" aria-hidden="true"></i></span>
                                                                </th>
                                                                <th style="text-align:center;overflow: hidden;width: 200px;" bgcolor="#4caf50" colspan="4" ng-repeat="columnDefinition in segment.coConstraintsTable.userColumnDefinitionList">
                                                                    <span style="color:black">{{columnDefinition.title}}</span>
                                                                    <span style="color:black" ng-click="openDialogForEditCoConstraintUSERDefinition(columnDefinition);" ng-hide="viewSettings.tableReadonly"><i class="fa fa-pencil" aria-hidden="true"></i></span>
                                                                    <span style="color:red" ng-click="delCoConstraintUSERDefinition(columnDefinition);" ng-hide="viewSettings.tableReadonly"><i class="fa fa-times" aria-hidden="true"></i></span>
                                                                </th>
                                                                <th style="color:black;text-align:center;" bgcolor="#4caf50">
                                                                    <span style="color:black" ng-click="openDialogForEditCoConstraintUSERDefinition();" ng-hide="viewSettings.tableReadonly"><i class="fa fa-plus" aria-hidden="true"></i></span>
                                                                </th>
                                                            </tr>
                                                            </thead>
                                                            <tbody ui-sortable="coConSortableOption" ng-model="coConRowIndexList">
                                                            <tr style="cursor: move;" ng-show="segment.coConstraintsTable.rowSize > 0" ng-repeat="rowObject in coConRowIndexList">
                                                                <td style="border: 0;">
                                                                    <div ng-show="segment.coConstraintsTable.ifColumnData[rowObject.rowIndex].isNew">
                                                                        <span title="This is NEW!!!!!" class="badge" style="background-color:yellow; color:black;">
                                                                                <span><i class="fa fa-flag fa-fw"></i></span>
                                                                            </span>
                                                                    </div>
                                                                </td>

                                                                <td style="font-weight: bold;overflow: hidden;width: 200px;text-align:center;background-color: #b1daff !important;" ng-show="segment.coConstraintsTable.ifColumnDefinition">
                                                                    <div layout="row" layout-align="start center">
                                                                        <md-input-container flex="100" ng-show="segment.coConstraintsTable.ifColumnDefinition.primitive" style="margin:17px;font-weight: bold;">
                                                                            <input ng-model="segment.coConstraintsTable.ifColumnData[rowObject.rowIndex].valueData.value"
                                                                                   ng-change="setDirty();"
                                                                                   style="font-weight: bold;"
                                                                                   ng-disabled="viewSettings.tableReadonly">
                                                                        </md-input-container>
                                                                        <md-input-container flex="70" ng-show="!segment.coConstraintsTable.ifColumnDefinition.primitive" style="margin:17px;font-weight: bold;">
                                                                            <input ng-model="segment.coConstraintsTable.ifColumnData[rowObject.rowIndex].valueData.value"
                                                                                   ng-change="setDirty();"
                                                                                   style="font-weight: bold;"
                                                                                   ng-disabled="viewSettings.tableReadonly">
                                                                        </md-input-container>
                                                                        <md-input-container flex="30" ng-show="!segment.coConstraintsTable.ifColumnDefinition.primitive" style="margin-top: -5px;">
                                                                            <md-select placeholder="Select BindingLocation" ng-model='segment.coConstraintsTable.ifColumnData[rowObject.rowIndex].valueData.bindingLocation' ng-change="setDirty()" ng-disabled="viewSettings.tableReadonly">
                                                                                <md-option ng-repeat="option in findOptions(segment.coConstraintsTable.ifColumnDefinition.dtId)" ng-value="option">
                                                                                    {{option}}
                                                                                </md-option>
                                                                            </md-select>
                                                                        </md-input-container>
                                                                    </div>
                                                                    <span ng-if="checkIfDataDuplicated(segment.coConstraintsTable.ifColumnData[rowObject.rowIndex].valueData.value, segment.coConstraintsTable.ifColumnData) && !isEmpty(segment.coConstraintsTable.ifColumnData[rowObject.rowIndex].valueData.value)" style="color:red">Duplicated</span>
                                                                    <span ng-if="!checkIfDataDuplicated(segment.coConstraintsTable.ifColumnData[rowObject.rowIndex].valueData.value, segment.coConstraintsTable.ifColumnData) && isEmpty(segment.coConstraintsTable.ifColumnData[rowObject.rowIndex].valueData.value)" style="color:red">Required</span>
                                                                    <span ng-if="checkIfDataDuplicated(segment.coConstraintsTable.ifColumnData[rowObject.rowIndex].valueData.value, segment.coConstraintsTable.ifColumnData) && isEmpty(segment.coConstraintsTable.ifColumnData[rowObject.rowIndex].valueData.value)" style="color:red">Required</span>
                                                                </td>

                                                                <td ng-show="!segment.coConstraintsTable.ifColumnDefinition" style="font-weight: bold;overflow: hidden;width: 200px;background-color: #b1daff !important;"/>

                                                                <td ng-repeat="columnDefinition in segment.coConstraintsTable.thenColumnDefinitionListForDisplay" colspan="4" style="overflow: hidden;width: 200px;text-align:center;">
                                                                    <div ng-show="isDual(columnDefinition)">
                                                                        <div ng-hide="viewSettings.tableReadonly" ng-if="(!segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets || segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets.length === 0) &&
                                                                                    (!segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData || !segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value)">

                                                                            <span ng-click="editValueSetForVaries(columnDefinition.id, rowObject.rowIndex)" class="label label-icon">ValueSet</span>
                                                                            or
                                                                            <span ng-click="editValueForVaries(columnDefinition.id, rowObject.rowIndex)" class="label label-icon">Value</span>
                                                                        </div>

                                                                        <div layout="row" layout-align="start center" ng-if="segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData && segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value">
                                                                            <md-input-container flex="100" ng-show="columnDefinition.primitive" style="margin:17px;">
                                                                                <input ng-model="segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value"
                                                                                       ng-change="setDirty();"
                                                                                       ng-disabled="viewSettings.tableReadonly">
                                                                            </md-input-container>
                                                                            <md-input-container flex="70" ng-show="!columnDefinition.primitive" style="margin:17px;">
                                                                                <input ng-model="segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value"
                                                                                       ng-change="setDirty();"
                                                                                       ng-disabled="viewSettings.tableReadonly">
                                                                            </md-input-container>
                                                                            <md-input-container flex="30" ng-show="!columnDefinition.primitive" style="margin-top: -5px;">
                                                                                <md-select placeholder="Select BindingLocation" ng-model='segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.bindingLocation' ng-change="setDirty()" ng-disabled="viewSettings.tableReadonly">
                                                                                    <md-option ng-repeat="option in findOptions(columnDefinition.dtId)" ng-value="option">
                                                                                        {{option}}
                                                                                    </md-option>
                                                                                </md-select>
                                                                            </md-input-container>
                                                                        </div>


                                                                        <div ng-if="segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets && segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets.length > 0">
                                                                            <div ng-repeat="vs in segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets">
                                                                                    <span title="{{tablesMap[vs.tableId].bindingIdentifier}}" class="badge label-white">
                                                                                        <span class="label label-sub-component-icon label-icon">VS</span>
                                                                                        <span>{{getTextAsTruncatedString(tablesMap[vs.tableId].bindingIdentifier, 10)}}</span>
                                                                                        <span ng-hide="viewSettings.tableReadonly" ng-click="deleteVS(vs, segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets)"><i class="fa fa-times fa-fw edit-icon"></i></span>
                                                                                    </span>
                                                                            </div>
                                                                            <a ng-hide="viewSettings.tableReadonly" class="point">
                                                                                <span ng-click="openDialogForEditValueSetThenMapData(columnDefinition.id, rowObject.rowIndex)"><i class="fa fa-plus fa-fw edit-icon"></i></span>
                                                                            </a>
                                                                        </div>
                                                                    </div>
                                                                    <div ng-show="columnDefinition.constraintType === 'value' && !isDual(columnDefinition)">
                                                                        <div layout="row" layout-align="start center">
                                                                            <md-input-container flex="100" ng-show="columnDefinition.primitive" style="margin:17px;">
                                                                                <input ng-model="segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value"
                                                                                       ng-change="setDirty();"
                                                                                       ng-disabled="viewSettings.tableReadonly">
                                                                            </md-input-container>
                                                                            <md-input-container flex="70" ng-show="!columnDefinition.primitive" style="margin:17px;">
                                                                                <input ng-model="segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value"
                                                                                       ng-change="setDirty();"
                                                                                       ng-disabled="viewSettings.tableReadonly">
                                                                            </md-input-container>
                                                                            <md-input-container flex="30" ng-show="!columnDefinition.primitive" style="margin-top: -5px;">
                                                                                <md-select placeholder="Select BindingLocation" ng-model='segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.bindingLocation' ng-change="setDirty()" ng-disabled="viewSettings.tableReadonly">
                                                                                    <md-option ng-repeat="option in findOptions(columnDefinition.dtId)" ng-value="option">
                                                                                        {{option}}
                                                                                    </md-option>
                                                                                </md-select>
                                                                            </md-input-container>
                                                                        </div>
                                                                    </div>
                                                                    <div ng-show="columnDefinition.constraintType === 'valueset' && !isDual(columnDefinition)">
                                                                        <div ng-show="!segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets || segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets.length === 0">
                                                                            <span ng-hide="viewSettings.tableReadonly" ng-click="openDialogForEditValueSetThenMapData(columnDefinition.id, rowObject.rowIndex)"><i class="fa fa-plus fa-fw edit-icon"></i></span>
                                                                        </div>
                                                                        <div ng-hide="!segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets || segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets.length === 0">
                                                                            <div ng-repeat="vs in segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets">
                                                                                    <span title="{{tablesMap[vs.tableId].bindingIdentifier}}" class="badge label-white">
                                                                                        <span class="label label-sub-component-icon label-icon">VS</span>
                                                                                        <span>{{getTextAsTruncatedString(tablesMap[vs.tableId].bindingIdentifier, 10)}}</span>
                                                                                        <span ng-hide="viewSettings.tableReadonly" ng-click="deleteVS(vs, segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueSets)"><i class="fa fa-times fa-fw edit-icon"></i></span>
                                                                                    </span>
                                                                            </div>
                                                                            <a ng-hide="viewSettings.tableReadonly" class="point">
                                                                                <span ng-click="openDialogForEditValueSetThenMapData(columnDefinition.id, rowObject.rowIndex)"><i class="fa fa-plus fa-fw edit-icon"></i></span>
                                                                            </a>
                                                                        </div>
                                                                    </div>
                                                                    <div ng-show="columnDefinition.constraintType === 'dmr'">
                                                                        <div layout="row" layout-align="start center">
                                                                            <md-input-container flex="100">
                                                                                <md-select placeholder="Select DT BaseName"
                                                                                           ng-model='segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value'
                                                                                           ng-change="setDirty();segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].datatypeId = null;"
                                                                                           ng-disabled="viewSettings.tableReadonly">
                                                                                    <md-option ng-repeat="c in dynamicMappingTable.codes | orderBy:'value'" ng-value="c.value">
                                                                                        {{c.value}}
                                                                                    </md-option>
                                                                                </md-select>
                                                                            </md-input-container>
                                                                        </div>
                                                                    </div>
                                                                    <div ng-show="columnDefinition.constraintType === 'dmf'">
                                                                        <div layout="row" layout-align="start center" ng-show="segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value">
                                                                            <md-input-container flex="100">
                                                                                <md-select placeholder="Select DT Flavor"
                                                                                           ng-model="segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].datatypeId"
                                                                                           ng-change="setDirty()"
                                                                                           ng-disabled="viewSettings.tableReadonly">
                                                                                    <md-option ng-repeat="link in igdocument.profile.datatypeLibrary.children | filter: {name: segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex].valueData.value}  : true" ng-value="link.id">
                                                                                        {{getDatatypeLabel(datatypesMap[link.id])}}
                                                                                    </md-option>
                                                                                </md-select>
                                                                            </md-input-container>
                                                                        </div>
                                                                    </div>
                                                                    <span ng-if="checkThenData(columnDefinition, segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex], dynamicMappingTable.codes, igdocument.profile.datatypeLibrary.children, tablesMap)" style="color:red">
                                                                        {{checkThenData(columnDefinition, segment.coConstraintsTable.thenMapData[columnDefinition.id][rowObject.rowIndex], dynamicMappingTable.codes, igdocument.profile.datatypeLibrary.children, tablesMap)}}
                                                                    </span>
                                                                </td>

                                                                <td style=""/>

                                                                <td ng-repeat="columnDefinition in segment.coConstraintsTable.userColumnDefinitionList" colspan="4" style="overflow: hidden;width: 200px;text-align:center;background-color: #a7d6a9 !important;" >
                                                                    <div ng-show="segment.coConstraintsTable.userMapData[columnDefinition.id][rowObject.rowIndex].text && segment.coConstraintsTable.userMapData[columnDefinition.id][rowObject.rowIndex].text !== ''">
                                                                            <span title="{{segment.coConstraintsTable.userMapData[columnDefinition.id][rowObject.rowIndex].text}}" class="badge" style="background-color: #a7d6a9; color:black;">
                                                                                <span>{{getTextAsTruncatedString(segment.coConstraintsTable.userMapData[columnDefinition.id][rowObject.rowIndex].text, 20)}}</span>
                                                                                <span ng-hide="viewSettings.tableReadonly" ng-click="editUserData(columnDefinition, segment.coConstraintsTable.userMapData[columnDefinition.id][rowObject.rowIndex], false)"><i class="fa fa-pencil fa-fw edit-icon"></i></span>
                                                                                <span ng-hide="viewSettings.tableReadonly" ng-click="segment.coConstraintsTable.userMapData[columnDefinition.id][rowObject.rowIndex].text = null"><i class="fa fa-times fa-fw edit-icon"></i></span>
                                                                            </span>
                                                                    </div>
                                                                    <div ng-hide="viewSettings.tableReadonly || (segment.coConstraintsTable.userMapData[columnDefinition.id][rowObject.rowIndex].text && segment.coConstraintsTable.userMapData[columnDefinition.id][rowObject.rowIndex].text !== '')">
                                                                        <span ng-click="editUserData(columnDefinition, segment.coConstraintsTable.userMapData[columnDefinition.id][rowObject.rowIndex], false)"><i class="fa fa-plus fa-fw edit-icon"></i></span>
                                                                    </div>
                                                                </td>

                                                                <td style="background-color: #a7d6a9 !important;"/>

                                                                <td style="overflow: hidden;width: 50px;text-align:center;">
                                                                    <span ng-hide="viewSettings.tableReadonly"ng-click="cloneCoConstraintRow(rowObject.rowIndex);" title="Clone Row data" style="color:#2d9de7;"><i class="fa fa-plus fa-fw"></i></span>
                                                                    <span ng-hide="viewSettings.tableReadonly" ng-click="delCoConstraintRow(rowObject.rowIndex);" title="Del Row data" style="color:red"><i class="fa fa-times fa-fw"></i></span>
                                                                </td>
                                                            </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                            </md-tab-body>
                                        </md-tab>

                                        <md-tab ng-if="isDynamicMappingSegment">
                                            <md-tab-label>
                                                Dynamic Mapping
                                            </md-tab-label>
                                            <md-tab-body>

                                             <div class="panel-primary panel-level1" is-open="accordStatus.isSeventhOpen" style="margin-top: 5px">
                                                <div class="panel-body">
                                                    <div class="col-md-12">
                                                        <span class="header3">
                                                            <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>
                                                            Dynamic Datatype Field: {{segment.dynamicMappingDefinition.mappingStructure.segmentName}}-{{segment.dynamicMappingDefinition.mappingStructure.targetLocation}}
                                                        </span>
                                                        <br/>
                                                        <span class="header3">
                                                            <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>
                                                            Reference: {{segment.dynamicMappingDefinition.mappingStructure.segmentName}}-{{segment.dynamicMappingDefinition.mappingStructure.referenceLocation}}
                                                        </span>
                                                        <br/>
                                                        <span ng-show="segment.dynamicMappingDefinition.mappingStructure.secondRefereceLocation" class="header3">
                                                            <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>
                                                            Second Reference: {{segment.dynamicMappingDefinition.mappingStructure.segmentName}}-{{segment.dynamicMappingDefinition.mappingStructure.secondRefereceLocation}}
                                                        </span>
                                                        <!--<span ng-show="!segment.dynamicMappingDefinition.mappingStructure.secondRefereceLocation" class="header3">-->
                                                            <!--<i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>-->
                                                            <!--No second reference.-->
                                                        <!--</span>-->
                                                        <!--<span ng-show="!viewSettings.tableReadonly && segment.scope == 'USER' && segment.dynamicMappingDefinition.mappingStructure.secondRefereceLocation" ng-click="segment.dynamicMappingDefinition.mappingStructure.secondRefereceLocation = null; setDirty();"><i class="fa fa-times fa-fw edit-icon"></i></span>-->
                                                        <!--<span ng-show="!viewSettings.tableReadonly && segment.scope == 'USER'" ng-click="editDMSecondReferenceDlg()"><i class="fa fa-pencil fa-fw edit-icon"></i></span>-->
                                                        <br/>
                                                        <table st-safe-src="segment.dynamicMappingDefinition.dynamicMappingItems" st-table="displayItems" class="table table-striped table-condensed table-bordered">
                                                            <thead>
                                                            <tr class="tbl-header">
                                                                <th st-sort="firstReferenceValue" class="col-md-3">Reference Value</th>
                                                                <!--<th ng-show="segment.dynamicMappingDefinition.mappingStructure.secondRefereceLocation" st-sort="secondReferenceValue" class="col-md-3">Second Reference Value</th>-->
                                                                <th class="col-md-5">Datatype</th>
                                                                <th class="col-md-1" style="text-align:left">
                                                                    <span style="color:black" ng-show="!viewSettings.tableReadonly && segment.scope == 'USER'" ng-click="addMappingItem()"><i class="fa fa-plus fa-fw"></i></span>
                                                                </th>
                                                            </tr>
                                                            </thead>
                                                            <tbody>
                                                            <tr ng-repeat="item in displayItems">
                                                                <td class="col-md-3">

                                                                    <md-select ng-model="item.firstReferenceValue" placeholder="Select DT Base Name" ng-disabled="viewSettings.tableReadonly || segment.scope !== 'USER'" ng-change="setDirty();">
                                                                        <md-option ng-repeat="c in dynamicMappingTable.codes | orderBy:'value'" value="{{c.value}}">
                                                                            {{c.value}}({{c.label}})
                                                                        </md-option>
                                                                    </md-select>
                                                                </td>
                                                                <td class="col-md-5">
                                                                    <md-select ng-model="item.datatypeId"
                                                                               ng-show="item.firstReferenceValue"
                                                                               placeholder="Select DT Flavor"
                                                                               ng-change="setDirty()"
                                                                               ng-disabled="viewSettings.tableReadonly || segment.scope !== 'USER'">
                                                                           <md-option ng-repeat="link in igdocument.profile.datatypeLibrary.children | filter: {name: item.firstReferenceValue}" value="{{link.id}}">
                                                                               {{getDatatypeLabel(datatypesMap[link.id])}}
                                                                           </md-option>

                                                                    </md-select>
                                                                </td>
                                                                <td class="col-md-1" style="text-align:left">
                                                                    <span ng-show="!viewSettings.tableReadonly && segment.scope == 'USER'" ng-click="deleteMappingItem(item)"><i class="fa fa-times fa-fw edit-icon"></i></span>
                                                                </td>
                                                            </tr>
                                                            </tbody>
                                                            <tr style="float:center !important;" ng-if="segment.dynamicMappingDefinition.dynamicMappingItems.length > 10">
                                                                <td colspan="6" class="text-center" style="float:center !important;">
                                                                    <div st-pagination="" st-items-by-page="10" st-displayed-pages="7" style="float:center !important;"></div>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                        <h3 class="modal-title">Default DynamicMapping ValueSet</h3>
                                                        <span class="header3">
                                                            <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>
                                                            If you want to modify this list, update value set of  {{segment.dynamicMappingDefinition.mappingStructure.segmentName}}-{{segment.dynamicMappingDefinition.mappingStructure.referenceLocation}}.
                                                        </span>
                                                        <span ng-show="!dynamicMappingTable" class="header3">
                                                            <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>
                                                            No default value set, update value set of  {{segment.dynamicMappingDefinition.mappingStructure.segmentName}}-{{segment.dynamicMappingDefinition.mappingStructure.referenceLocation}}.
                                                        </span>
                                                        <table st-safe-src="dynamicMappingTable.codes" st-table="displayCodes" class="table table-striped table-condensed table-bordered">
                                                            <thead>
                                                                <tr class="tbl-header">
                                                                    <th st-sort="value" class="col-md-3">Value</th>
                                                                    <th st-sort="label" class="col-md-8">Description</th>
                                                                    <th class="col-md-1" style="text-align:left">Status</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr ng-repeat="c in displayCodes">
                                                                    <td class="col-md-3">
                                                                        <span>{{c.value}}</span>
                                                                    </td>
                                                                    <td class="col-md-8">
                                                                        <span>{{c.label}}</span>
                                                                    </td>
                                                                    <td class="col-md-1" style="text-align:left">
                                                                        <span title="This default mapping will be used." ng-show="getDefaultStatus(c) == 'full'">
                                                                            <i class="fa fa-circle" aria-hidden="true">&nbsp; Active</i>
                                                                        </span>
                                                                        <span ng-show="getDefaultStatus(c) == 'partial'">
                                                                            <i class="fa fa-dot-circle-o" aria-hidden="true"></i>
                                                                        </span>
                                                                        <span title="This default mapping is deprecated."  ng-show="getDefaultStatus(c) == 'empty'">
                                                                            <i class="fa fa-circle-o" aria-hidden="true">&nbsp; Inactive</i>
                                                                        </span>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                            <tr style="float:center !important;" ng-if="dynamicMappingTable.codes.length > 10">
                                                                <td colspan="6" class="text-center" style="float:center !important;">
                                                                    <div st-pagination="" st-items-by-page="10" st-displayed-pages="7" style="float:center !important;"></div>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                            </md-tab-body>
                                        </md-tab>
                                    </md-tabs>
                                </md-tab-body>
                            </md-tab>
                            <md-tab md-on-select="callSegDelta()">
                                <md-tab-label>
                                    <i class="fa fa-table fa-fw" aria-hidden="true"></i>Delta
                                </md-tab-label>
                                <md-tab-body>
                                <div class="panel-body metadata-scroll" style="margin:5px;">
                                    <md-tabs md-dynamic-height md-border-bottom md-selected="deltaTabStatus.active">
                                        <md-tab >
                                            <md-tab-label>
                                                <i class="fa fa-cog fa-fw"></i>Configuration
                                            </md-tab-label>
                                            <md-tab-body>

                                                <div class="panel-primary">
                                                    <div class="panel-body">
                                            <table class="table table-stripped table-borderless table-condensed">
                                                <thead>
                                                    <tr class="tbl-header">
                                                        <th class="col-md-1"></th>
                                                        <th class="col-md-2">HL7 Version</th>
                                                        <th class="col-md-2">Scope</th>
                                                        <th class="col-md-3">IG Document</th>
                                                        <th class="col-md-4">Segment</th>
                                                </thead>

                                                <tbody>

                                                    <tr>
                                                        <td class="col-md-1">
                                                            <span class="badge badge-delta badge-delta-1">1</span>
                                                        </td>
                                                        <td class="col-md-2">
                                                            <md-select ng-model="version1" disabled placeholder="{{version1}}">
                                                        </md-select>
                                                        </td>
                                                        <td class="col-md-2">
                                                            <md-select ng-model="scope1" disabled placeholder="{{scope1}}">
                                                        </md-select>
                                                        </td>
                                                        <td class="col-md-3">
                                                            <md-select ng-model="ig1" disabled placeholder="{{ig1}}">
                                                        </md-select>
                                                        </td>
                                                        <td class="col-md-4">
                                                            <md-select ng-model="segment1" disabled placeholder="{{getLabel(segment1)}}"></md-select>
                                                        </td>
                                                    </tr>

                                                    <tr>
                                                        <td class="col-md-1">
                                                            <span class="badge badge-delta badge-delta-2">2</span>
                                                        </td>
                                                        <td class="col-md-2">
                                                            <md-select ng-model="version2"  ng-change="setVersion2(version2)" no-dirty-check>
                                                            <md-option ng-repeat="vr in versions" value='{{vr}}' ng-selected="vr===version2"> {{vr}}</md-option>
                                                        </md-select>
                                                        </td>
                                                        <td class="col-md-2">
                                                            <md-select ng-model="scope2"  ng-change="setScope2(scope2)" no-dirty-check>
                                                            <md-option ng-repeat="scope in scopes" value='{{scope.name}}' ng-selected="scope.name===scope2"> {{scope.alias}}</md-option>
                                                        </md-select>
                                                        </td>
                                                        <td class="col-md-3">
                                                            <md-select ng-model="ig2" ng-change="setIG2(ig2)" ng-disabled="!scope2 || !version2 || igDisabled2" no-dirty-check>
                                                                <md-option ng-repeat="ig in igList2 track by ig.id" ng-value="ig">{{ig.title}}</md-option>
                                                            </md-select>
                                                        </td>
                                                        <td class="col-md-4">
                                                            <md-select ng-model="cmp.segmentId" ng-change="setSegment2(cmp.segmentId)" ng-disabled="!ig2" no-dirty-check placeholder="Select Segment">
                                                            <md-option ng-repeat="segment in segments2" ng-disabled="disableSeg(segment,segment1)" ng-hide="hideSeg(segment,segment1)" value='{{$index}}'> {{getLabel(segment)}}</md-option>
                                                        </md-select>
                                                        </td>

                                                    </tr>


                                                </tbody>

                                            </table>
                                            <div class="" align="center" style="margin-bottom:10px">
                                                <md-button ng-click="cmpSegment(segment1,segment2)" ng-disabled="!segment1 || cmp.segmentId===-1||!segChanged || !segment2" class="btn btn-raised btn-info btn-md">
                                                        <i class="fa fa-check"></i> View Delta</md-button>
                                            </div>
                                        </div>
                                                </div>
                                            </md-tab-body>
                                        </md-tab>

                                        <md-tab >
                                            <md-tab-label>
                                                <i class="fa fa-check fa-fw"></i> Result
                                            </md-tab-label>
                                            <md-tab-body>


                                        <div class="panel-primary panel-level1">
                                            <div class="panel-body">
                                                <table tt-table tt-params="dynamicSeg_params" class=" table-marginless table-bordered table-condensed">
                                                    <thead>
                                                        <tr class="tbl-header">
                                                            <th class="col-md-1" rowspan="2" style="width:14%;">Position</th>
                                                            <th class="col-md-2" rowspan="2" style="width:37%;">Name</th>
                                                            <th class="col-md-1" rowspan="2" style="width:2%">Usage</th>
                                                            <th class="col-md-1" colspan="2" style="width:4%">Cardinality</th>
                                                            <th class="col-md-1" colspan="2" style="width:4%">Length</th>
                                                            <th class="col-md-1" rowspan="2" style="width:2%">Conf. Length</th>
                                                            <th class="col-md-1" rowspan="2" style="width:21%">Data Type</th>
                                                            <th class="col-md-1" rowspan="2" style="width:16%">Value Set</th>
                                                        </tr>
                                                        <tr class="tbl-header">
                                                            <th class="col-md-1 col-fixed-10" style="width:2%">min</th>
                                                            <th class="col-md-1 col-fixed-10" style="width:2%">max</th>
                                                            <th class="col-md-1 col-fixed-10" style="width:2%">min</th>
                                                            <th class="col-md-1 col-fixed-10" style="width:2%">max</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                </table>
                                            </div>
                                        </div>
                                            </md-tab-body>
                                        </md-tab>
                                    </md-tabs>
                                </div>

                                </md-tab-body>
                            </md-tab>
                            <md-tab md-on-select="setDeltaToF()">
                                <md-tab-label>
                                    <i class="fa fa-link" aria-hidden="true"></i>Cross-References
                                </md-tab-label>
                                <md-tab-body>
                                <div class="el-def metadata-scroll" style="margin-top:20px">


                                    <div ng-show="crossRef.messageFounds != null && crossRef.messageFounds.length > 0">
                                        <h4>Conformance Profile Cross References</h4>

                                        <!--<span class="pull-right" style="margin-bottom:10px">-->
                                        <!--<md-button type="button" ng-click="AddBindingForSegment(segment)" class="btn btn-raised btn-info btn-md"><i class="fa fa-plus"></i> Add Binding</md-button>-->
                                        <!--</span>-->
                                        <table class="table table-striped table-bordered table-condensed">
                                            <thead>
                                                <tr class="tbl-header">
                                                    <td st-ratio="5">#</td>
                                                    <th st-ratio="70">Path</th>
                                                    <th st-ratio="5">Status</th>
                                                </tr>

                                            </thead>

                                            <tbody>
                                                <tr ng-repeat="ref in crossRef.messageFounds track by $index">
                                                    <td st-ratio="5">{{$index + 1}}
                                                    </td>
                                                    <td st-ratio="70"><span>{{ref.name}}-{{ref.identifier}}.{{ref.path}}</span></td>
                                                    <td st-ratio="20">
                                                        <md-select ng-change="changeSegmentLink(ref.segmentLink)" ng-model="ref.segmentLink.id">
                                                        <md-option ng-repeat="seg in segments |orderBy:'+name'" ng-hide="seg.name != segment.name" value="{{seg.id}}">
                                                            {{::getSegmentLabel(seg)}}
                                                        </md-option>
                                                        </md-select>
                                                    </td>
                                                    <td st-ratio="5">
                                                        <span ng-show="ref.segmentLink.isNew">New</span>
                                                        <span ng-show="!ref.segmentLink.isNew && ref.segmentLink.isChanged">Changed</span>
                                                    </td>

                                                </tr>
                                            </tbody>
                                            <!--<tr ng-show="crossRef.messageFounds > 15">-->
                                                <!--<td colspan="6" class="text-center">-->
                                                    <!--<div st-pagination="" st-items-by-page="5" st-displayed-pages="15"></div>-->
                                                <!--</td>-->
                                            <!--</tr>-->
                                        </table>
                                    </div>
                                    <div ng-show="crossRef.profileComponentFound != null && crossRef.profileComponentFound.length > 0">
                                        <h4>Profile Components Cross References</h4>


                                        <table class="table table-striped table-bordered table-condensed">
                                            <thead>
                                            <tr class="tbl-header">
                                                <td st-ratio="5">#</td>
                                                <th st-ratio="25">Name</th>
                                                <th st-ratio="40">Description</th>
                                                <th st-ratio="10">Target Position</th>
                                                <th st-ratio="20">Where</th>
                                            </tr>

                                            </thead>

                                            <tbody>
                                            <tr ng-repeat="ref in crossRef.profileComponentFound track by $index">
                                                <td st-ratio="5">{{$index + 1}}
                                                </td>
                                                <td st-ratio="25">
                                                    <span ng-bind="ref.name"></span>
                                                </td>
                                                <td st-ratio="40">
                                                    <span ng-bind="ref.description"></span>
                                                </td>
                                                <td st-ratio="10">
                                                    {{::ref.targetPosition}}
                                                </td>
                                                <td st-ratio="20">
                                                    {{::ref.where}}
                                                </td>


                                            </tr>
                                            </tbody>

                                        </table>
                                    </div>
                                    <div ng-if="crossRef.empty">
                                        <p>This Segment is not being used in this ig document</p>
                                    </div>

                                </div>
                                </md-tab-body>
                            </md-tab>
                        </md-tabs>
                    </div>
                </div>
            </div>


        </div>
    </div>
</script>
<script type="text/ng-template" id="SegmentFieldEditTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="(isVisible(node) &&( node.usage==='R' ||node.usage==='RE' ||node.usage==='C' )&& $root.usageF) || (isVisible(node) && !$root.usageF)" ng-class="{ 'new': isChildNew(node), 'selected': isChildSelected(node)}">
        <td ng-controller="FormRowCtrl">
            <a ng-show="editableField!==node.id" ng-if="node.added==='yes'" ng-click="editField(node)" class="point">
                <span><i class="fa fa-pencil fa-fw"></i></span>
            </a>
            <a ng-show="editableField!==node.id" ng-if="node.added==='yes'" ng-click="deleteField(node,segment)" class="point">
                <span><i class="glyphicon glyphicon-trash"></i></span>
            </a>
            <ng-form name="{{formName}}" class="form-inline">
                <span ng-show="hasError(node.id) && validationResult && isSegmentValidated()"><i class="fa fa-exclamation-triangle" style="color:red;"></i></span>
                <span ng-show="!hasError(node.id) && validationResult && isSegmentValidated()"><i class="fa fa-check-circle" style="color:green;"></i></span>
                <span class="label label-field label-icon">F</span>
                <span ng-show="editableField!==node.id">
                    <span ng-hide="isChildNew(node)"
                      tooltip-html="getFieldNodeName(node)" tooltip-append-to-body="true"
                      tooltip-class="constraints-tooltip" ng-bind-html="getFieldNodeName(node)" tooltip-trigger
                      tooltip-animation="false" tooltip-placement="left"></span>
                    <span ng-show="isChildNew(node)">{{node.position}}.
                        <input
                            class="form-control focus"
                            autofocus
                            style="width:65%"
                            name="name"
                            ng-change="recordDatatypeChange( 'field', 'edit',node.id, 'name', node.name)"
                            ng-class="{ 'has-error has-feedback' : {{formName}}.name.$invalid}"
                            ng-model="node.name" required/>
                    </span>
                </span>
                <span ng-show="editableField===node.id">
                    <select ng-model="position" ng-change="selectPos()" style="width:15%" class="form-control input-sm">
                        <option ng-repeat="child in segment.fields" ng-selected="node.position===child.position">{{child.position}}</option>
                    </select>
                    <input style="width:55%" class="form-control" ng-model="fieldName" type="text"/>
                </span>
                <div align="center">
                    <a ng-show="editableField===node.id && fieldName" ng-click="applyField(segment,node,fieldName,position)" class="point">
                        <span><i class="glyphicon glyphicon-ok"></i></span>
                    </a>
                    <a ng-show="editableField===node.id" ng-click="backField()" class="point">
                        <span><i class="glyphicon glyphicon-remove"></i></span>
                    </a>
                </div>
            </ng-form>
        </td>
        <td ng-class="hasUsageError(node.id)" data-toggle="tooltip" title="{{displayMessageError(node.id,'USAGE')}}">
            <span ng-show="node.usage !=='C' || (node.usage==='C' && countPredicate(node.position)===0 )" ng-controller="FormRowCtrl">
                <ng-form name="{{formName}}" class="form-inline">
                    <!--<select class="form-control input-sm" name="usage"-->
                            <!--ng-change="setUsage(node);setCardinalities(node);openPredicateDialog(node);"-->
                            <!--ng-class="{ 'has-error has-feedback' : {{formName}}.usage.$invalid}"-->
                            <!--required ng-model="node.usage" ng-options="usage for usage in config.usages"/>-->
                    <!---->
                             <md-select placeholder="Select Usage" name="usage" id="usage" class="inside-table"
                                        ng-change="setUsage(node); openPredicateDialog(node); setCardinalities(node)"
                                        ng-class="{ 'has-error has-feedback' : {{formName}}.usage.$invalid}"
                                        required ng-model="node.usage" >

                                 <md-option ng-repeat="usage in config.usages" ng-value="usage">
                                     {{usage}}

                                 </md-option>
                             </md-select>
                </ng-form>
            </span>
            <span ng-show="node.usage==='C' && countPredicate(node.position) !==0">
            <p ng-repeat="p in segment.predicates | filter:{constraintTarget:node.position + '[1]'}:true">
                <span class="badge label-white">
                    <span>C({{p.trueUsage}}/{{p.falseUsage}})</span>
                     <span ng-click="managePredicate(node)"><i class="fa fa-pencil fa-fw edit-icon"></i></span>
                     <span ng-click="deletePredicateByPosition(node.position, segment)"><i class="fa fa-times fa-fw edit-icon"></i></span>
                </span>
            </p>
            </span>
        </td>
        <td ng-class="{'has-validation-error':hasCardinalityError(node.id)}" data-toggle="tooltip" title="{{displayMessageError(node.id,'CARDINALITY')}}">

                <ng-form name="{{formName}}"  layout="row" class="form-inline" layout-align="center center" ng-controller="FormRowCtrl" ng-init="init(node)" >
                        <md-input-container flex="50" class="withoutMargin">
                                                <input
                                                       type="text"
                                                       name="min"
                                                       ng-change="setDirty()"
                                                       ng-pattern="/^\d+$/"
                                                       ng-class="{ 'has-error' : {{formName}}.min.$invalid}"
                                                       ng-model="node.min" required ng-minlength="1"/>
                        </md-input-container>

                         <md-input-container flex="50" class="withoutMargin">
                                                <input name="max"
                                                       type="text"
                                                       ng-change="setDirty()"
                                                       ng-class="{ 'has-error' : {{formName}}.max.$invalid}"
                                                       ng-pattern="/^\d+$|^\*?$/"
                                                       ng-model="node.max" required>

                        </md-input-container>
                </ng-form>

        </td>
        <td  ng-class="{'emptyCol':datatypesMap[node.datatype.id].components.length >0 || node.minLength === 'NA' || node.maxLength === 'NA','has-validation-error':hasLengthError(node.id)}" data-toggle="tooltip" title="{{displayMessageError(node.id,'LENGTH')}}" ng-show="viewSettings.isVisibleColumn('length')">
            <div ng-show="datatypesMap[node.datatype.id].components.length == 0" ng-controller="FormRowCtrl" ng-init="init(node)">
                <div ng-hide="node.minLength === 'NA' || node.maxLength === 'NA'">
                <ng-form name="{{formName}}" class="form-inline" layout="row" layout-align="center center">
                    <md-input-container flex="40" class="withoutMargin">
                                                <input name="minLength"
                                                       ng-change="setDirty()"
                                                       ng-pattern="/^\d+$|^NA$/"
                                                       ng-class="{ 'has-error' : {{formName}}.minLength.$invalid}"
                                                       ng-model="node.minLength" required ng-minlength="1">
                    </md-input-container>
                    <md-input-container flex="40" class="withoutMargin">
                                                <input type="text"
                                                       name="maxLength"
                                                       ng-change="setDirty()"
                                                       ng-class="{ 'has-error' : {{formName}}.maxLength.$invalid}"
                                                       ng-pattern="/^\d+$|^\*?$|^NA$/"
                                                       ng-model="node.maxLength" required>
                    </md-input-container>
                </ng-form>
                    <span flex="20" ng-click="clearLength(node)" class="point pull-right"><i class="fa fa-times fa-fw edit-icon"></i></span>

                </div>

                <div layout="row" ng-show="node.minLength === 'NA' || node.maxLength === 'NA'">
                    <span ng-click="editLength(node)" class="point"><i class="fa fa-pencil fa-fw edit-icon"></i></span>
                </div>
            </div>
        </td>
        <td ng-class="{'emptyCol':datatypesMap[node.datatype.id].components.length >0 || node.confLength === 'NA','has-validation-error':hasConfError(node.id) && datatypesMap[node.datatype.id].components.length===0}"  ng-show="showConfLength() && viewSettings.isVisibleColumn('confLength')" data-toggle="tooltip" title="{{displayMessageError(node.id,'CONFLENGTH')}}">
            <div ng-show="datatypesMap[node.datatype.id].components.length == 0" ng-controller="FormRowCtrl" ng-init="init(node)">
                <div ng-hide="node.confLength === 'NA'">
                <ng-form name="{{formName}}" class="form-inline" layout="row" layout-align="center center">
                    <md-input-container flex="80" class="withoutMargin">
                                            <input
                                                   name="confLength"
                                                   style="width:50px"
                                                   ng-change="setDirty()"
                                                   ng-class="{ 'has-error' : {{formName}}.confLength.$invalid}"
                                                   ng-pattern="confLengthPattern"
                                                   ng-model="node.confLength">
                    </md-input-container>
                </ng-form>
                    <span  flex="20" ng-click="clearConfLength(node)" class="point pull-right" ><i class="fa fa-times fa-fw edit-icon"></i></span>

                </div>
                <div ng-show="node.confLength === 'NA'" layout="row">
                    <span ng-click="editConfLength(node)" class="point"><i class="fa fa-pencil fa-fw edit-icon" ></i></span>
                </div>
            </div>
        </td>
        <td ng-show="viewSettings.isVisibleColumn('datatype')" ng-class="{'has-validation-error':hasDatatypeError(node.datatype.id)}" style="text-align:left">
            <ng-form name="innerForm" class="form-inline" ng-controller="FormRowCtrl" ng-init="init(node)">
                <div ng-if="node.datatype != null && datatypesMap[node.datatype.id] != null && datatypesMap[node.datatype.id] != undefined">
                    <span class="badge label-white" ng-show="editableDT!==node.id" style="text-align:left">
                         <display-label of="datatypesMap[node.datatype.id]" desc="false"  ng-click="redirectDT(node.datatype)"></display-label>
                            <span title="Change Datatype" ng-click="editDT(node)">
                            <i class="fa fa-pencil fa-fw edit-icon"></i></span>
                    </span>

                    <div ng-if="editableDT===node.id" style="text-align:left">
                        <md-select placeholder="Select Data type"  class="inside-table" ng-model="node.datatype" ng-change="backDT();setDirty()"  ng-controller="FormRowCtrl" ng-init="init(node)">
                            <md-option  ng-repeat="dt in results" ng-value="dt">
                                <display-label of="datatypesMap[dt.id]" desc="false"></display-label>
                            </md-option>
                            <md-option ng-click="otherDT(node)" value="none"> Change Data Type root</md-option>

                        </md-select>
                    </div>

                    <div align="center">
                        <a ng-show="editableDT===node.id" ng-click="backDT()" class="point">
                            <span><i class="glyphicon glyphicon-remove"></i></span>
                        </a>
                    </div>
                </div>
            </ng-form>
        </td>
        <td ng-class="{'emptyCol':!isAvailableForValueSet(node)}" ng-show="viewSettings.isVisibleColumn('valueSet')">
            <div ng-show="isAvailableForValueSet(node)">
                <div ng-repeat="binding in findingBindings(node)">
                    <span class="badge label-white">
                        <span ng-class="{'label-field-icon' : binding.bindingFrom === 'segment', 'label-component-icon' : binding.bindingFrom === 'field', 'label-sub-component-icon' : binding.bindingFrom === 'component'}">
                            <i class="fa fa-circle fa-fw"/>
                        </span>
                        <span ng-show="binding.type == 'valueset'" title="For {{getSegmentLabel(segment)}}" ng-click="redirectVS(binding)">{{getTableLabel(binding)}}</span>
                        <span ng-show="binding.type == 'singlecode'" title="For {{getSegmentLabel(segment)}}" ng-click="redirectVS(binding)">{{binding.code.value}}<i class="fa fa-arrow-right" aria-hidden="true"></i>[{{binding.code.codeSystem}}]</span>
                        <span title="Delete ValueSet Binding" ng-show="binding.bindingFrom === 'segment'" ng-click="deleteValueSetBinding(binding)"><i class="fa fa-times fa-fw edit-icon"></i></span>
                    </span>
                </div>
                <a ng-click="editModalBindingForSeg(node)" class="point">
                    <span><i class="fa fa-pencil fa-fw"></i></span>
                </a>
            </div>
        </td>
        <td ng-class="{'emptyCol':!isAvailableConstantValue(node)}" ng-show="viewSettings.isVisibleColumn('singleElm')">
            <div ng-show="isAvailableConstantValue(node)">
                <span ng-show="node.sev" class="badge label-white">
                    <span class="label-field-icon"><i class="fa fa-circle fa-fw"/></span>
                    <span>{{node.sev.value}}</span>
                    <span title="Edit SingleElement" ng-click="openDialogForEditSev(node)"><i class="fa fa-pencil fa-fw edit-icon"></i></span>
                    <span title="Delete SingleElement" ng-click="deleteSev(node)"><i class="fa fa-times fa-fw edit-icon"></i></span>
                </span>
                <a ng-show="!node.sev" class="point" ng-click="openDialogForEditSev(node)">
                    <span><i class="fa fa-plus fa-fw"></i></span>
                </a>
            </div>
        </td>
        <td ng-class="{'has-error': node.usage === 'C' && countPredicate(node.position) != 1, 'emptyCol':node.usage !== 'C'}" ng-show="viewSettings.isVisibleColumn('predicate')">
            <div>
                <div ng-show="countPredicate(node.position) === 0 && node.usage === 'C'">
                    <a ng-click="managePredicate(node)" class="point">
                        <i class="fa fa-plus fa-fw"></i>

                        <p class="warning">Need predicate</p>
                    </a>
                </div>

                <div ng-show="countPredicate(node.position) !== 0 && node.usage === 'C'">
                    <p ng-repeat="p in segment.predicates | filter:{constraintTarget:node.position + '[1]'}:true">
                        <span title="{{getPredicateAsString(p)}}" class="badge label-white">
                            <span class="label-field-icon"><i class="fa fa-circle fa-fw"/></span>
                            <span ng-click="managePredicate(node)">{{getConstraintAsTruncatedString(p, 15)}}</span>
                            <span ng-click="managePredicate(node)"><i class="fa fa-pencil fa-fw edit-icon"></i></span>
                            <span ng-click="deletePredicateByPosition(node.position, segment)"><i class="fa fa-times fa-fw edit-icon"></i></span>
                        </span>
                    </p>
                    <div ng-show="countPredicate(node.position) > 1">
                        <p class="warning">Multiple predicates</p>
                    </div>
                </div>
            </div>
        </td>
        <td ng-show="viewSettings.isVisibleColumn('defText')" style="text-align:left">
            <div>
                <a ng-click="openRichTextDlg(node, 'text', 'Definition Text', false)" class="point">
                    <i class="fa fa-pencil fa-fw" ng-show="node.text !=='' && node.text !==null && node.text !==undefined"></i>
                    <i class="fa fa-plus fa-fw" ng-show="node.text==='' || node.text===null || node.text===undefined"></i>
                </a>
                <a ng-click="node.text=''; recordChanged()" ng-show="node.text !=='' && node.text !==null && node.text !==undefined">
                    <i class="fa fa-times fa-fw"></i>
                </a>
            </div>
        </td>
        <td ng-show="viewSettings.isVisibleColumn('comment')" style="text-align:left">
            <div ng-repeat="comment in findingComments(node)">
                <span class="badge label-white">
                    <span class="label-field-icon"><i class="fa fa-circle fa-fw"/></span>
                    <span title="{{comment.description}}" ng-click="editCommentDlg(node, comment, false, 'segment')">{{comment.lastUpdatedDate|date:dateFormat}}</span>
                    <span title="Delete This Comments" ng-click="deleteComment(comment)"><i class="fa fa-times fa-fw edit-icon"></i></span>
                </span>
            </div>
            <a ng-click="editCommentDlg(node, null, false, 'segment')" class="point">
                <span><i class="fa fa-plus fa-fw"></i></span>
            </a>
        </td>
    </tr>
</script>
<script type="text/ng-template" id="SegmentFieldReadTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="(isVisible(node) &&( node.usage==='R' ||node.usage==='RE' ||node.usage==='C' )&& $root.usageF) || (isVisible(node) && !$root.usageF)">
        <td>
            <span ng-show="node.type==='field'" class="label label-field label-icon">F</span>
            <span ng-show="node.type==='component'" class="label label-component label-icon">C</span>
            <span ng-show="node.type==='subcomponent'" class="label label-sub-component label-icon">S</span>
            <span tooltip-html="getFieldNodeName(node)" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" ng-bind-html="getFieldNodeName(node)" tooltip-trigger tooltip-animation="false" tooltip-placement="left"></span>
        </td>
        <td ng-class="hasUsageError(node.id)" data-toggle="tooltip" title="{{displayMessageError(node.id,'USAGE')}}">
            <div>
                <span ng-show="node.usage !=='C' || (node.usage==='C' && countPredicate(node.position)===0 )">
                    <span>{{::node.usage}}</span>
                </span>
                <div ng-show="node.usage==='C' && countPredicate(node.position) !==0">
                    <p ng-repeat="p in datatype.predicates | filter:{constraintTarget:node.position + '[1]'}:true">
                        C({{::p.trueUsage}}/{{::p.falseUsage}})
                    </p>
                </div>
            </div>
        </td>
        <td>
            [{{::node.min}}, {{::node.max}}]
        </td>
        <td ng-class="{'emptyCol':datatypesMap[node.datatype.id].components.length >0 || node.minLength === 'NA' || node.maxLength === 'NA','has-validation-error':hasLengthError(node.id)}" data-toggle="tooltip" title="{{displayMessageError(node.id,'LENGTH')}}" ng-show="viewSettings.isVisibleColumn('length')">
            <div ng-show="datatypesMap[node.datatype.id].components.length == 0 && node.minLength !== 'NA' && node.maxLength !== 'NA'"> [{{::node.minLength}}, {{::node.maxLength}}]</div>
        </td>
        <td ng-class="{'emptyCol':datatypesMap[node.datatype.id].components.length >0 || node.confLength === 'NA','has-validation-error':hasConfError(node.id) && datatypesMap[node.datatype.id].components.length===0}" ng-show="showConfLength() && viewSettings.isVisibleColumn('confLength')" data-toggle="tooltip" title="{{displayMessageError(node.id,'CONFLENGTH')}}">
            <div ng-show="datatypesMap[node.datatype.id].components.length == 0 && node.confLength !== 'NA'"> {{::node.confLength}} </div>
        </td>
        <td ng-show="viewSettings.isVisibleColumn('datatype')" ng-class="{'has-validation-error':hasDatatypeError(node.datatype.id)}">

            <span ng-click="redirectDT(datatypesMap[node.datatype.id])" class="point">
                    <display-label of="datatypesMap[node.datatype.id]" desc="false"></display-label>
            </span>
        </td>
        <td ng-class="{'emptyCol':!isAvailableForValueSet(node)}" ng-show="viewSettings.isVisibleColumn('valueSet')" style="text-align:left">
            <div ng-show="isAvailableForValueSet(node)">
                <div ng-repeat="binding in findingBindings(node)">
                    <span class="badge label-white">
                        <span ng-class="{'label-field-icon' : binding.bindingFrom == 'segment', 'label-component-icon' : binding.bindingFrom == 'field', 'label-sub-component-icon' : binding.bindingFrom == 'component'}">
                            <i class="fa fa-circle fa-fw"/>
                        </span>
                        <span ng-show="binding.type == 'valueset'" title="For {{getSegmentLabel(segment)}}" ng-click="redirectVS(binding)">{{getTableLabel(binding)}}</span>
                        <span ng-show="binding.type == 'singlecode'" title="For {{getSegmentLabel(segment)}}" ng-click="redirectVS(binding)">{{binding.code.value}}<i class="fa fa-arrow-right" aria-hidden="true"></i>[{{binding.code.codeSystem}}]</span>
                    </span>
                </div>
            </div>
        </td>
        <td ng-class="{'emptyCol':!isAvailableConstantValue(node)}" ng-show="viewSettings.isVisibleColumn('singleElm')" style="text-align:left">
            <div ng-show="isAvailableConstantValue(node)">
                <span ng-show="node.sev" class="badge label-white">
                    <span class="label-field-icon"><i class="fa fa-circle fa-fw"/></span>
                    <span>{{node.sev.value}}</span>
                </span>
            </div>
        </td>
        <td ng-class="{'has-error': node.usage === 'C' && countPredicate(node.position) != 1, 'emptyCol':node.usage !== 'C'}" ng-show="viewSettings.isVisibleColumn('predicate')">
            <div>
                <div ng-show="countPredicate(node.position) !== 0 && node.usage === 'C'">
                    <p ng-repeat="p in segment.predicates | filter:{constraintTarget:node.position + '[1]'}:true">
                        <span title="{{getPredicateAsString(p)}}" class="badge label-white">
                            <span class="label-field-icon"><i class="fa fa-circle fa-fw"/></span>
                            <span>{{getConstraintAsTruncatedString(p, 15)}}</span>
                        </span>
                    </p>
                    <div ng-show="countPredicate(node.position) > 1">
                        <p class="warning">Multiple predicates</p>
                    </div>
                </div>
            </div>
        </td>
        <td ng-show="viewSettings.isVisibleColumn('defText')">
            <a ng-click="openRichTextDlg(node, 'text', 'Definition Text', true)" ng-show="node.text !=='' && node.text !==null && node.text !==undefined " class="point">
                <i class="fa fa-eye fa-fw"></i>
            </a>
        </td>
        <td ng-show="viewSettings.isVisibleColumn('comment')" style="text-align:left">
            <div ng-repeat="comment in findingComments(node)">
                <span class="badge label-white">
                    <span class="label-field-icon"><i class="fa fa-circle fa-fw"/></span>
                    <span title="{{comment.description}}" ng-click="editCommentDlg(node, comment, true, 'segment')">{{comment.lastUpdatedDate|date:dateFormat}}</span>
                </span>
            </div>
        </td>
    </tr>
</script>
<script type="text/ng-template" id="SegmentComponentEditTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td>
            <span ng-show="hasError(node.id) && validationResult && isSegmentValidated()"><i class="fa fa-exclamation-triangle" style="color:red;"></i></span>
            <span ng-show="!hasError(node.id) && validationResult && isSegmentValidated()"><i class="fa fa-check-circle" style="color:green;"></i></span>
            <span>
                <span ng-show="node.type==='component' && node.path.split('.').length - 1 == 1" class="label label-component label-icon">C</span>
                <span ng-show="node.type==='component' && node.path.split('.').length - 1 == 2" class="label label-sub-component label-icon">S</span>
                <span tooltip-html="getComponentNodeName(node)" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" ng-bind-html="getComponentNodeName(node)" tooltip-trigger tooltip-animation="false" tooltip-placement="left"></span>
            </span>
        </td>
        <td ng-class="hasUsageError(node.id)" data-toggle="tooltip" title="{{displayMessageError(node.id,'USAGE')}}">
            <span ng-show="node.usage !=='C' || (node.usage==='C' && countPredicateOnComponent(node.position, node.id)===0 )">
                {{::node.usage}}
            </span>
            <div ng-show="node.usage==='C' && countPredicateOnComponent(node.position, node.id) !==0">
                <p ng-repeat="p in parentsMap[node.id].predicates | filter:{constraintTarget:node.position + '[1]'}:true">
                    C({{::p.trueUsage}}/{{::p.falseUsage}})
                </p>
            </div>
        </td>
        <td class="emptyCol">
         </td>
        <td ng-show="viewSettings.isVisibleColumn('length')" ng-class="{'emptyCol':datatypesMap[node.datatype.id].components.length >0 || node.minLength === 'NA' || node.maxLength === 'NA','has-validation-error':hasLengthError(node.id)}" data-toggle="tooltip" title="{{displayMessageError(node.id,'LENGTH')}}">
            <div ng-show="datatypesMap[node.datatype.id].components.length == 0 && node.minLength !== 'NA' && node.maxLength !== 'NA'">
                [{{::node.minLength}},{{::node.maxLength}}]
            </div>
        </td>
        <td ng-class="{'emptyCol':datatypesMap[node.datatype.id].components.length >0 || node.confLength === 'NA','has-validation-error':hasConfError(node.id) && datatypesMap[node.datatype.id].components.length===0 }"  data-toggle="tooltip" title="{{displayMessageError(node.id,'CONFLENGTH')}}" ng-show="showConfLength() && viewSettings.isVisibleColumn('confLength')">
            <div ng-bind="node.confLength" ng-show="datatypesMap[node.datatype.id].components.length == 0 && node.confLength !== 'NA'">
            </div>
        </td>
        <td ng-show="viewSettings.isVisibleColumn('datatype')" ng-class="{'has-validation-error':hasDatatypeError(node.datatype.id)}" style="text-align:left">
            <span title="Go to datatype" ng-click="redirectDT(node.datatype)">
            <display-label of="datatypesMap[node.datatype.id]" desc="false"></display-label>
            </span>
        </td>
        <td ng-class="{'emptyCol':!isAvailableForValueSet(node)}" ng-show="viewSettings.isVisibleColumn('valueSet')" style="text-align:left">
            <div ng-show="isAvailableForValueSet(node)">
                <div ng-repeat="binding in findingBindings(node)">
                    <span class="badge label-white">
                        <span ng-class="{'label-field-icon' : binding.bindingFrom == 'segment', 'label-component-icon' : binding.bindingFrom == 'field', 'label-sub-component-icon' : binding.bindingFrom == 'component'}"><i class="fa fa-circle fa-fw"/></span>
                        <span title="For {{getSegmentLabel(segment)}}" ng-show="binding.bindingFrom == 'segment' && binding.type == 'valueset'" ng-click="redirectVS(binding)">{{getTableLabel(binding)}}</span>
                        <span title="For {{getDatatypeLabel(datatypesMap[node.fieldDT])}}" ng-show="binding.bindingFrom == 'field' && binding.type == 'valueset'" ng-click="redirectVS(binding)">{{getTableLabel(binding)}}</span>
                        <span title="For {{getDatatypeLabel(datatypesMap[node.componentDT])}}" ng-show="binding.bindingFrom == 'component' && binding.type == 'valueset'" ng-click="redirectVS(binding)">{{getTableLabel(binding)}}</span>
                        <span title="For {{getSegmentLabel(segment)}}" ng-show="binding.bindingFrom == 'segment' && binding.type == 'singlecode'" ng-click="redirectVS(binding)">{{binding.code.value}}<i class="fa fa-arrow-right" aria-hidden="true"></i>[{{binding.code.codeSystem}}]</span>
                        <span title="For {{getDatatypeLabel(datatypesMap[node.fieldDT])}}" ng-show="binding.bindingFrom == 'field' && binding.type == 'singlecode'" ng-click="redirectVS(binding)">{{binding.code.value}}<i class="fa fa-arrow-right" aria-hidden="true"></i>[{{binding.code.codeSystem}}]</span>
                        <span title="For {{getDatatypeLabel(datatypesMap[node.componentDT])}}" ng-show="binding.bindingFrom == 'component' && binding.type == 'singlecode'" ng-click="redirectVS(binding)">{{binding.code.value}}<i class="fa fa-arrow-right" aria-hidden="true"></i>[{{binding.code.codeSystem}}]</span>
                        <span title="Delete ValueSet Binding" ng-show="binding.bindingFrom == 'segment'" ng-click="deleteBinding(binding)"><i class="fa fa-times fa-fw edit-icon"></i></span>
                    </span>
                </div>

                <a ng-click="editModalBindingForSeg(node)" class="point">
                    <span><i class="fa fa-pencil fa-fw"></i></span>
                </a>
            </div>
        </td>
        <td ng-class="{'emptyCol':!isAvailableConstantValue(node)}" ng-show="viewSettings.isVisibleColumn('singleElm')" style="text-align:left">
            <div ng-show="isAvailableConstantValue(node)">
                <span ng-show="node.sev" class="badge label-white">
                    <span ng-class="{'label-field-icon' : node.sev.from == 'segment', 'label-component-icon' : node.sev.from == 'field', 'label-sub-component-icon' : node.sev.from == 'component'}"><i class="fa fa-circle fa-fw"/></span>
                    <span>{{node.sev.value}}</span>
                    <span title="Edit SingleElement" ng-show="node.sev.from == 'segment'" ng-click="openDialogForEditSev(node)"><i class="fa fa-pencil fa-fw edit-icon"></i></span>
                    <span title="Add SingleElement" ng-show="node.sev.from != 'segment'" ng-click="confirmDatatypeSingleElementDuplicated(node)"><i class="fa fa-pencil fa-fw edit-icon"></i></span>
                    <span title="Delete SingleElement" ng-show="node.sev.from == 'segment'" ng-click="deleteSev(node)"><i class="fa fa-times fa-fw edit-icon"></i></span>
                </span>
                <a ng-show="!node.sev" class="point" ng-click="openDialogForEditSev(node)">
                    <span><i class="fa fa-plus fa-fw"></i></span>
                </a>
            </div>
        </td>
        <td ng-show="viewSettings.isVisibleColumn('predicate')" ng-class="{'emptyCol':node.usage !== 'C'}">
            <div ng-repeat="p in parentsMap[node.id].predicates | filter:{constraintTarget:node.position + '[1]'}:true">
                <span title="{{getPredicateAsString(p)}}" class="badge label-white">
                    <span ng-class="{'label-component-icon' : node.path.split('.').length - 1 == 1, 'label-sub-component-icon' : node.path.split('.').length - 1 == 2}"><i class="fa fa-circle fa-fw"/></span>
                    <span>{{getConstraintAsTruncatedString(p, 15)}}</span>
                </span>
            </div>
        </td>
        <td ng-show="viewSettings.isVisibleColumn('defText')">
            <div>
                <a ng-click="openRichTextDlg(node, 'text', 'Definition Text', true)" ng-show="node.text !=='' && node.text !==null && node.text !==undefined" class="point">
                    <i class="fa fa-eye fa-fw"></i>
                </a>
            </div>
        </td>
        <td ng-show="viewSettings.isVisibleColumn('comment')" style="text-align:left">
            <div ng-repeat="comment in findingComments(node)">
                <span class="badge label-white">
                    <span ng-class="{'label-field-icon' : comment.from == 'segment', 'label-component-icon' : comment.from == 'field', 'label-sub-component-icon' : comment.from == 'component'}"><i class="fa fa-circle fa-fw"/></span>
                    <span title="{{comment.description}}" ng-show="comment.from == 'segment'" ng-click="editCommentDlg(node, comment, false, 'segment')">{{comment.lastUpdatedDate|date:dateFormat}}</span>
                    <span title="[{{getDatatypeLabel(datatypesMap[node.fieldDT])}}]{{comment.description}}" ng-show="comment.from == 'field'" ng-click="editCommentDlg(node, comment, true, 'segment')">{{comment.lastUpdatedDate|date:dateFormat}}</span>
                    <span title="[{{getDatatypeLabel(datatypesMap[node.componentDT])}}]{{comment.description}}" ng-show="comment.from == 'component'" ng-click="editCommentDlg(node, comment, true, 'segment')">{{comment.lastUpdatedDate|date:dateFormat}}</span>
                    <span title="Delete This Comments" ng-show="comment.from == 'segment'" ng-click="deleteComment(comment)"><i class="fa fa-times fa-fw edit-icon"></i></span>
                </span>
            </div>
            <a ng-click="editCommentDlg(node, null, false, 'segment')" class="point">
                <span><i class="fa fa-plus fa-fw"></i></span>
            </a>
        </td>
    </tr>
</script>
<script type="text/ng-template" id="SegmentComponentReadTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td>
            <span>
                <span ng-show="node.type==='field'" class="label label-field label-icon">F</span>
                <span ng-show="node.type==='component' && node.path.split('.').length - 1 == 1" class="label label-component label-icon">C</span>
                <span ng-show="node.type==='component' && node.path.split('.').length - 1 == 2" class="label label-sub-component label-icon">S</span>
                <span tooltip-html="getComponentNodeName(node)" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" ng-bind-html="getComponentNodeName(node)" tooltip-trigger tooltip-animation="false" tooltip-placement="left"></span>
            </span>
        </td>
        <td>
            <span ng-show="node.usage !=='C' || (node.usage==='C' && countPredicateOnComponent(node.position, node.id)===0 )">
                {{::node.usage}}
            </span>
            <div ng-show="node.usage==='C' && countPredicateOnComponent(node.position, node.id) !==0">
                <p ng-repeat="p in parentsMap[node.id].predicates | filter:{constraintTarget:node.position + '[1]'}:true">
                    C({{::p.trueUsage}}/{{::p.falseUsage}})
                </p>
            </div>
        </td>
        <td>
            <div>-</div>
        </td>
        <td ng-show="viewSettings.isVisibleColumn('length')" ng-class="{'emptyCol':datatypesMap[node.datatype.id].components.length >0 || node.minLength === 'NA' || node.maxLength === 'NA'}">
            <div ng-show="datatypesMap[node.datatype.id].components.length == 0 && node.minLength !== 'NA' && node.maxLength !== 'NA'">
                [{{::node.minLength}},{{::node.maxLength}}]
            </div>
        </td>
        <td ng-class="{'emptyCol':datatypesMap[node.datatype.id].components.length >0  || node.confLength === 'NA'}" ng-show="showConfLength() && viewSettings.isVisibleColumn('confLength')">
            <div ng-show="datatypesMap[node.datatype.id].components.length == 0 && node.confLength !== 'NA'" ng-bind="node.confLength">
            </div>
        </td>
        <td ng-show="viewSettings.isVisibleColumn('datatype')" style="text-align:left">
            <span ng-click="redirectDT(node.datatype)">
            <display-label of="datatypesMap[node.datatype.id]" desc="false"></display-label>
            </span>
        </td>
        <td ng-class="{'emptyCol':!isAvailableForValueSet(node)}" ng-show="viewSettings.isVisibleColumn('valueSet')" style="text-align:left">
            <div ng-show="isAvailableForValueSet(node)">
                <div ng-repeat="binding in findingBindings(node)">
                    <span class="badge label-white">
                        <span ng-class="{'label-field-icon' : binding.bindingFrom == 'segment', 'label-component-icon' : binding.bindingFrom == 'field', 'label-sub-component-icon' : binding.bindingFrom == 'component'}"><i class="fa fa-circle fa-fw"/></span>
                        <span title="For {{getSegmentLabel(segment)}}" ng-show="binding.bindingFrom == 'segment' && binding.type == 'valueset'" ng-click="redirectVS(binding)">{{getTableLabel(binding)}}</span>
                        <span title="For {{getDatatypeLabel(datatypesMap[node.fieldDT])}}" ng-show="binding.bindingFrom == 'field' && binding.type == 'valueset'" ng-click="redirectVS(binding)">{{getTableLabel(binding)}}</span>
                        <span title="For {{getDatatypeLabel(datatypesMap[node.componentDT])}}" ng-show="binding.bindingFrom == 'component' && binding.type == 'valueset'" ng-click="redirectVS(binding)">{{getTableLabel(binding)}}</span>
                        <span title="For {{getSegmentLabel(segment)}}" ng-show="binding.bindingFrom == 'segment' && binding.type == 'singlecode'" ng-click="redirectVS(binding)">{{binding.code.value}}<i class="fa fa-arrow-right" aria-hidden="true"></i>[{{binding.code.codeSystem}}]</span>
                        <span title="For {{getDatatypeLabel(datatypesMap[node.fieldDT])}}" ng-show="binding.bindingFrom == 'field' && binding.type == 'singlecode'" ng-click="redirectVS(binding)">{{binding.code.value}}<i class="fa fa-arrow-right" aria-hidden="true"></i>[{{binding.code.codeSystem}}]</span>
                        <span title="For {{getDatatypeLabel(datatypesMap[node.componentDT])}}" ng-show="binding.bindingFrom == 'component' && binding.type == 'singlecode'" ng-click="redirectVS(binding)">{{binding.code.value}}<i class="fa fa-arrow-right" aria-hidden="true"></i>[{{binding.code.codeSystem}}]</span>
                    </span>
                </div>
            </div>
        </td>
        <td ng-class="{'emptyCol':!isAvailableConstantValue(node)}" ng-show="viewSettings.isVisibleColumn('singleElm')" style="text-align:left">
            <div ng-show="isAvailableConstantValue(node)">
                <span ng-show="node.sev" class="badge label-white">
                    <span ng-class="{'label-field-icon' : node.sev.from == 'segment', 'label-component-icon' : node.sev.from == 'field', 'label-sub-component-icon' : node.sev.from == 'component'}"><i class="fa fa-circle fa-fw"/></span>
                    <span>{{node.sev.value}}</span>
                </span>
            </div>
        </td>
        <td ng-show="viewSettings.isVisibleColumn('predicate')" ng-class="{'emptyCol':node.usage !== 'C'}">
            <div ng-repeat="p in parentsMap[node.id].predicates | filter:{constraintTarget:node.position + '[1]'}:true">
                <span title="{{getPredicateAsString(p)}}" class="badge label-white">
                    <span ng-class="{'label-component-icon' : node.path.split('.').length - 1 == 1, 'label-sub-component-icon' : node.path.split('.').length - 1 == 2}"><i class="fa fa-circle fa-fw"/></span>
                    <span>{{getConstraintAsTruncatedString(p, 15)}}</span>
                </span>
            </div>
        </td>
        <td ng-show="viewSettings.isVisibleColumn('defText')">
            <a ng-show="node.text !=null" ng-click="openRichTextDlg(node, 'text', 'Definition Text', true)" class="point">
                <i class="fa fa-eye fa-fw"></i>
            </a>
        </td>
        <td ng-show="viewSettings.isVisibleColumn('comment')" style="text-align:left">
            <div ng-repeat="comment in findingComments(node)">
                <span class="badge label-white">
                    <span ng-class="{'label-field-icon' : comment.from == 'segment', 'label-component-icon' : comment.from == 'field', 'label-sub-component-icon' : comment.from == 'component'}"><i class="fa fa-circle fa-fw"/></span>
                    <span title="{{comment.description}}" ng-show="comment.from == 'segment'" ng-click="editCommentDlg(node, comment, true, 'segment')">{{comment.lastUpdatedDate|date:dateFormat}}</span>
                    <span title="[{{getDatatypeLabel(datatypesMap[node.fieldDT])}}]{{comment.description}}" ng-show="comment.from == 'field'" ng-click="editCommentDlg(node, comment, true, 'segment')">{{comment.lastUpdatedDate|date:dateFormat}}</span>
                    <span title="[{{getDatatypeLabel(datatypesMap[node.componentDT])}}]{{comment.description}}" ng-show="comment.from == 'component'" ng-click="editCommentDlg(node, comment, true, 'segment')">{{comment.lastUpdatedDate|date:dateFormat}}</span>
                </span>
            </div>
        </td>
    </tr>
</script>
<script type="text/ng-template" id="SegmentCaseReadTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td class="col-md-2 col-fixed-250">
            <span ng-show="node.type === 'case'" class="label label-dynamicCase label-icon">D</span>
            <span ng-bind="node.value"></span>
        </td>
        <td class="col-md-1 col-fixed-80 emptyCol">
        </td>
        <td class="col-md-1 col-fixed-100 emptyCol">
        </td>
        <td ng-show="viewSettings.isVisibleColumn('length')" class="col-md-1 col-fixed-100 emptyCol">
        </td>
        <td class="col-md-1 col-fixed-80 emptyCol" ng-show="showConfLength() && viewSettings.isVisibleColumn('confLength')">
        </td>
        <td class="col-md-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('datatype')">
            {{getDatatypeLabel(datatypesMap[node.datatype])}} <span class="version-badge-label" ng-if="datatypesMap[node.datatype.id].publicationVersion">v{{datatypesMap[node.datatype.id].publicationVersion}}</span>
        </td>
        <td class="col-md-1 col-fixed-130 emptyCol" ng-show="viewSettings.isVisibleColumn('valueSet')">
        </td>
        <td class="col-md-1 emptyCol" ng-style="predWidthx" ng-show="viewSettings.isVisibleColumn('predicate')">
        </td>
        <td class="col-md-1 emptyCol" ng-style="csWidthx" ng-show="viewSettings.isVisibleColumn('confStatement')">
        </td>
        <td class="col-md-1 emptyCol col-fixed-80" ng-show="viewSettings.isVisibleColumn('defText')">
        </td>
        <td class="col-md-1 emptyCol" ng-style="commentWidth" ng-show="viewSettings.isVisibleColumn('comment')">
        </td>
    </tr>
</script>
<script type="text/ng-template" id="tag-template">
    <div>
        <span ng-bind-html="$highlight($getDisplayText())"></span>
        <span>{{data.table.bindingIdentifier}}</span>
    </div>
</script>
<script type="text/ng-template" id="DynamicMappingCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Edit Dynamic Mapping for {{::segment.name}}-{{::selectedNode.position}}</h3>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-md-4">
                First Reference:
            </div>
            <div class="col-md-8">
                <select class="form-control" name="reference" ng-change="recordChange()" ng-model="selectedMapping.reference" ng-options="field.position as segment.name + '-' + field.position + ' : ' + field.name for field in segment.fields" />
            </div>
            <div ng-show="selectedMapping.reference" class="col-md-4">
                Second Reference (Optional):
            </div>
            <div ng-show="selectedMapping.reference" class="col-md-8">
                <select class="form-control" name="secondReference" ng-change="recordChange()" ng-model="selectedMapping.secondReference" ng-options="field.position as segment.name + '-' + field.position + ' : ' + field.name for field in segment.fields" />
            </div>
            <div ng-show="selectedMapping.reference" class="col-md-12">
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr class="tbl-header">
                            <th class="col-md-3">If {{::segment.name}}-{{::selectedMapping.reference}} is</th>
                            <th ng-show="selectedMapping.secondReference" class="col-md-3">And if {{::segment.name}}-{{::selectedMapping.secondReference}} is</th>
                            <th class="col-md-5">Then datatype of {{::segment.name}}-{{::selectedNode.position}} should be</th>
                            <th class="col-md-1">
                                <button title="Add" type="button" class="btn btn-raised btn-xs btn-info" ng-click="addCase()">
                                    <i class="fa fa-plus fa-fw"></i>
                                </button>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="case in selectedMapping.cases">
                            <td class="col-md-3">
                                <input type="text" class="form-control" ng-model="case.value" ng-change="recordChange()" />
                            </td>
                            <td class="col-md-3">
                                <input type="text" class="form-control" ng-model="case.secondValue" ng-change="recordChange()" />
                            </td>
                            <td class="col-md-5">
                                <select ng-model="case.datatype" class="form-control" ng-change="recordChange()" ng-options="link.id as getDatatypeLabel(datatypesMap[link.id]) for link in igdocument.profile.datatypeLibrary.children | filter: {name: case.value}" />
                            </td>
                            <td class="col-md-1">
                                <button title="Delete" type="button" class="btn btn-raised btn-xs btn-danger" ng-click="deleteCase(case)">
                                    <i class="fa fa-trash-o fa-fw"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button ng-show="changed" type="button" ng-click="updateMapping()" class="btn btn-raised btn-primary btn-sm"><i class="fa fa-check fa-fw">&nbsp; </i>Update
        </button>
        <button ng-show="changed" type="button" ng-click="ok()" class="btn btn-raised btn-warning btn-sm"><i class="fa fa-times fa-fw">&nbsp; </i>Cancel
        </button>
        <button ng-show="!changed" class="btn btn-raised btn-warning btn-sm" ng-click="ok()"><span><i class="fa fa-times fa-fw">
            &nbsp; </i>Cancel</span></button>
    </div>
</script>
<script type="text/ng-template" id="ConfirmSegmentDeleteCtrl.html">
    <md-dialog aria-label="confirmation">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Delete Confirmation</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
        <p>Are you sure you want to delete Segment <display-label of="segToDelete"></display-label></p>
              </div>
    </md-dialog-content>
    <md-dialog-actions layout="row">
        <md-button  class="md-primary md-raised" md-autofocus ng-click="delete()">delete
        </md-button>
    </md-dialog-actions>
    </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="SegmentReferencesCtrl.html">
    <md-dialog aria-label="confirmation">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Segment cross Reference Found</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="ok()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>
            <md-dialog-content>
                <div class="md-dialog-content">
        <div ng-if="crossRefsForDelete.messageFounds.length">
            <h4> Conformance Profile</h4>
            <table class="table table-striped table-bordered table-condensed">
                <thead>
                <tr class="tbl-header">
                    <td st-ratio="5">#</td>
                    <th st-ratio="95">Path</th>
                </tr>

                </thead>

                <tbody>
                <tr ng-repeat="ref in crossRefsForDelete.messageFounds track by $index">
                    <td st-ratio="5">{{$index + 1}}
                    </td>

                    <td st-ratio="95">
                        <span>{{ref.name}}-{{ref.identifier}}.{{ref.path}}</span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
            <div ng-show="crossRefsForDelete.profileComponentFound.length">
                <h4>Profile Components Cross References</h4>


                <table  class="table table-striped table-bordered table-condensed">
                    <thead>
                    <tr class="tbl-header">
                        <td st-ratio="5">#</td>
                        <th st-ratio="25">Name</th>
                        <th st-ratio="40">Description</th>
                        <th st-ratio="10">Target Position</th>
                        <th st-ratio="20">Where</th>
                    </tr>

                    </thead>

                    <tbody>
                    <tr ng-repeat="ref in crossRefsForDelete.profileComponentFound track by $index">
                        <td st-ratio="5">{{$index + 1}}
                        </td>
                        <td st-ratio="25">
                            <span ng-bind="ref.name"></span>
                        </td>
                        <td st-ratio="40">
                            <span ng-bind="ref.description"></span>
                        </td>
                        <td st-ratio="10">
                            {{::ref.targetPosition}}
                        </td>
                        <td st-ratio="20">
                            {{::ref.where}}
                        </td>


                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
                </div></md-dialog-content>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="AddFieldModal.html">
    <md-dialog aria-label="create group">
        <form ng-cloak name="addFieldForm" class="form-horizontal" novalidate id="addFieldForm">
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2>Create Field </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content large-dialog">
                    <div style="margin-top: 20px" ng-cloak class="md-inline-form" layout="column">
                        <md-content layout-padding>
                            <label class=" input-left igamt-label">Name *</label>

                <md-input-container  ng-class="{'igl-has-error has-feedback': !addFieldForm.inputName.$valid}" class="md-block igamt-input-block" flex-gt-sm>

                        <input name="inputName" id="inputName" ng-model="newField.name" autofocus required/>
                    <div ng-messages="addFieldForm.inputName.$error">
                        <div ng-message="required">Name is required.</div>
                    </div>
                </md-input-container>
                            <label class="input-left igamt-label">Position *</label>

                            <md-input-container ng-class="{'igl-has-error has-feedback': !addFieldForm.inputPosition.$valid}" class="md-block igamt-input-block" flex-gt-sm>

                        <md-select ng-model="position" name="inputPosition" id="inputPosition" ng-change="selectPos()" required>
                            <md-option ng-repeat="field in segment.fields track by field.id" ng-value="{{::field.position}}"> {{::field.position}}</md-option>
                            <md-option ng-value="{{::segment.fields.length+1}}">{{::segment.fields.length+1}}</md-option>
                        </md-select>

                </md-input-container>
                            <label class="input-left igamt-label">Usage*</label>

                            <md-input-container ng-class="{'igl-has-error has-feedback': !addFieldForm.inputUsage.$valid}" class="md-block igamt-input-block" flex-gt-sm>
                        <md-select name="inputUsage" id="inputUsage"  name="inputUsage" ng-change="selectUsage(newField.usage)" ng-model="newField.usage"  required class="select-inside-table">
                            <md-option ng-repeat="usage in config.usages" ng-value="usage">{{usage}}</md-option>
                        </md-select>

                </md-input-container>
                            <label class="input-left igamt-label">Cardinality*</label>

                            <div layout="row" layout-align="start start">
                             <md-input-container flex  ng-class="{'igl-has-error has-feedback': !addFieldForm.cardMin.$valid ||!addFieldForm.cardMax.$valid }" class="md-block igamt-input-block" flex-gt-sm>
                            <input name="cardMin"  id="cardMin"  ng-pattern="/^\d+$/" ng-model="newField.min" ng-disabled="disableMin" required>

                            </md-input-container>
                            <md-input-container  ng-class="{'igl-has-error has-feedback': !addFieldForm.cardMin.$valid ||!addFieldForm.cardMax.$valid }" class="md-block igamt-input-block" flex-gt-sm>
                                     <input  type="text"  name="cardMax" id="cardMax"  ng-pattern="/^\d+$|^\*?$/" ng-model="newField.max" ng-disabled="disableMax" required>
                            </md-input-container>
                            </div>

                            <label class="input-left igamt-label"> Data Type </label>
                            <md-content layout-padding>
                                <md-autocomplete
                            md-selected-item="DT"

                            md-search-text="searchText"
                            md-items="item in querySearch(searchText)"
                            md-item-text="item.label"
                            md-min-length="0"
                            placeholder="Search Data Type"
                            md-autofocus>
                            <md-item-template>
                            <display-label of="item" desc="true"></display-label>
                        </md-item-template>
                        <md-not-found>
                            No Data type.
                        </md-not-found>
                        </md-autocomplete>

                            </md-content>


                <!--<md-input-container class="md-block" flex-gt-sm>-->
                    <!--<span class="input-left" style="margin:auto; font-weight: bold">Value Sets</span>-->
                    <!--<div class="md-padding autocomplete">-->
                        <!--<md-contact-chips style="width: 100%"-->
                                          <!--ng-model="tableList"-->
                                          <!--md-contacts="loadVS($query)"-->
                                          <!--md-contact-name="bindingIdentifier"-->
                                          <!--md-require-match="true"-->
                                          <!--md-highlight-flags="i"-->
                                          <!--placeholder="Search By Binding Identifier">-->
                        <!--</md-contact-chips>-->
                    <!--</div>-->


                <!--</md-input-container>-->
                <!--<md-input-container class="md-block" flex-gt-sm>-->
                    <!--<label class="input-left">Comment</label>-->
                    <!--<input ng-model="newField.comment">-->
                        <!--</input>-->
                <!--</md-input-container>-->

                        <!--</md-content>-->
                    </div>
                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row" layout-align="end end">

                <md-button class="md-primary md-raised" ng-click="addField()" ng-disabled="addFieldForm.$invalid"><span><i
                        class="fa fa-plus fa-fw">
                &nbsp; </i>Add</span>
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="DeleteField.html">
    <md-dialog aria-label="Delete Field">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Delete Confirmation</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                    <p>Are you sure you want to delete Field: {{::fieldToDelete.name}} ? </p>
                </div>
            </md-dialog-content>

            <md-dialog-actions layout="row">

                <md-button class="md-primary md-raised btn-danger" ng-click="delete()"><span><i
                        class="fa fa-check">
                &nbsp; </i>Delete </span>
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="otherDTModal.html">

    <md-dialog aria-label="change Dt">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Change Data type for {{::field.type}} : {{::field.name}} </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content medium-dialog">
                    <md-autocomplete
                            md-selected-item="newDt"

                            md-search-text="searchText"
                            md-items="item in querySearch(searchText)"
                            md-item-text="item.label"
                            md-min-length="0"
                            placeholder="Search Data Type"
                            md-autofocus>
                        <md-item-template>
                            <display-label of="item" desc="true"></display-label>
                        </md-item-template>
                        <md-not-found>
                            Data type not found.
                        </md-not-found>
                    </md-autocomplete>

                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">

                <md-button class="md-primary md-raised" ng-click="addDT()" ng-disabled="!datatypesMap[newDt.id]"><span><i
                        class="fa fa-check">
                &nbsp; </i>Select</span>
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="DeleteSegmentPredicate.html">
    <div class="modal-header">
        <h3 class="modal-title">Delete Confirmation</h3>
    </div>
    <div class="modal-body">
        <p>Are you sure you want to delete the predicate? </p>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-danger btn-sm" ng-click="delete()"><span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Delete</span>
        </button>
    </div>
</script>
<script type="text/ng-template" id="AddBindingForSegment.html">
    <div class="modal-header">
        <h3 class="modal-title">Add Binding for Segment : {{::getSegmentLabel(segment)}}</h3>
    </div>
    <div class="modal-body">
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr class="tbl-header">
                    <th class="col-md-4">Message</th>
                    <th class="col-md-8">SegmentRef</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <select ng-model='selectedMessageForBinding' class="form-control" ng-change="selectMessage();" ng-options="msg as msg.name + '-' + msg.identifier for msg in messages.children" />
                    </td>
                    <td class="col-md-8">
                        <select ng-show='selectedMessageForBinding != null' ng-model='selectedSegRefForBinding' class="form-control">
                        <option ng-repeat="ref in segRefsList" value="{{ref}}" ng-disabled="checkDuplicated(ref.positionPath);">
                            {{::ref.path}}({{::ref.positionPath}})
                        </option>
                    </select>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-info btn-sm" ng-disabled="selectedSegRefForBinding == null" ng-click="save()"><span><i class="fa fa-plus fa-fw">&nbsp; </i>ADD</span>
        </button>
    </div>
</script>
<script type="text/ng-template" id="TableMappingSegmentCtrl.html">
    <md-dialog aria-label="table Mapping">
        <form ng-cloak role="form">
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Bind Value Set to {{::segment.name}}-{{::currentNode.path}} </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="ok()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>
            <md-dialog-content>
                <div class="md-dialog-content">
                        <md-content>
                            <div ng-show="selectedValueSetBindings.length > 0">
                                <div ng-show="selectedValueSetBindings[0].type == 'singlecode'">
                                    <h4>Single Code selected</h4>
                                </div>
                                <div ng-show="selectedValueSetBindings[0].type == 'valueset'">
                                    <h4>{{selectedValueSetBindings.length}} Value Set(s) selected</h4>
                                </div>
                            </div>
                            <div ng-show="selectedValueSetBindings.length == 0">
                                <h4>No Value Set or Single Code selected</h4>
                            </div>
                            <div ng-if="selectedValueSetBindings.length > 0 &&  selectedValueSetBindings[0].type == 'valueset'">
                                <table st-table="displayedSelectedValueSetBindings" st-safe-src="selectedValueSetBindings" class="table table-striped table-bordered normal-table" ng-show="selectedValueSetBindings.length > 0">
                                    <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-1">Scope/Version</th>
                                        <th class="col-md-2">Mapping Identifier</th>
                                        <th class="col-md-4">Name</th>
                                        <th class="col-md-2">Binding Strength</th>
                                        <th class="col-md-2">Binding Location</th>
                                        <th class="col-md-1"></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="b in displayedSelectedValueSetBindings">
                                        <td class="col-md-1">
                                            <span class="badge" ng-class="{'label-HL7' : getScopeLabel(tablesMap[b.tableId])==='HL7', 'label-USE': getScopeLabel(tablesMap[b.tableId])==='USR','label-MASTER':getScopeLabel(tablesMap[b.tableId])==='MAS','label-PRL':getScopeLabel(tablesMap[b.tableId])==='PRL','label-PVS':getScopeLabel(tablesMap[b.tableId])==='PVS'}">{{getScopeLabel(tablesMap[b.tableId])}} {{hasSameVersion(tablesMap[b.tableId])}}</span>
                                        </td>
                                        <td class="col-md-2">
                                            {{tablesMap[b.tableId].bindingIdentifier}}
                                        </td>
                                        <td class="col-md-4">
                                            {{tablesMap[b.tableId].name}}
                                        </td>
                                        <td class="col-md-2">
                                            <md-select ng-model='b.bindingStrength' ng-change="setChanged()">
                                                <md-option value="R">Required</md-option>
                                                <md-option value="S">Suggested</md-option>
                                                <md-option value="U">Unspecified</md-option>
                                            </md-select>
                                        </td>
                                        <td class="col-md-2">
                                            <md-select ng-show="listOfBindingLocations" ng-model='b.bindingLocation'  ng-change="setChanged()">
                                                <md-option ng-repeat="bl in listOfBindingLocations" ng-value="bl">
                                                    {{bl}}
                                                </md-option>
                                            </md-select>
                                        </td>
                                        <td class="col-md-1" align="center">
                                            <a ng-click="deleteBinding(b)" class="point">
                                                <span title="Delete ValueSet Binding"><i class="icon-size-15 fa-times fa"></i></span>
                                            </a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div ng-if="selectedValueSetBindings.length > 0 && selectedValueSetBindings[0].type == 'singlecode'">
                                <table st-table="displayedSelectedValueSetBindings" st-safe-src="selectedValueSetBindings" class="table table-striped table-bordered normal-table">
                                    <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-11">Conformance Statement for Single Code</th>
                                        <th class="col-md-1">Action</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="b in displayedSelectedValueSetBindings">
                                        <td class="col-md-11">
                                            {{::segment.name}}-{{::currentNode.path}} ({{::currentNode.name}})
                                            SHALL contain the constant value '
                                            <md-input-container>
                                                <label>Code</label>
                                                <input ng-model="b.code.value"/>
                                            </md-input-container>
                                            ' drawn from the code system '
                                            <md-input-container>
                                                <label>Code System</label>
                                                <input ng-model="b.code.codeSystem"/>
                                            </md-input-container>
                                            '.
                                        </td>
                                        <td class="col-md-1" align="center">
                                            <a ng-click="deleteBinding(b)" class="point">
                                                <span title="Delete ValueSet Binding"><i class="icon-size-15 fa-times fa"></i></span>
                                            </a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>

                            <br/>

                            <span ng-show="isSingleValueSetAllowed">
                                <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>
                                Allowed to select a Value Set or a Single Code.
                            </span>

                            <span ng-show="!isSingleValueSetAllowed">
                                <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>
                                Allowed to select one or more Value Set(s).
                            </span>

                            <md-tabs md-dynamic-height md-border-bottom>
                                <md-tab label="Value Set">
                                    <md-content class="md-padding">
                                        <table st-safe-src="tables" st-table="displayCollection" class="table table-striped table-bordered normal-table">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th st-sort="scope" class="col-md-1">Scope/Version</th>
                                                <th st-sort="bindingIdentifier" class="col-md-3">Binding Identifier</th>
                                                <th class="col-md-7">Name</th>
                                                <th class="col-md-1">Action</th>
                                            </tr>
                                            <tr>
                                                <th colspan="5">
                                                    <input st-search="bindingIdentifier" placeholder="search for BindingIdentifier" class="input-sm form-control" type="search"/>
                                                </th>
                                            </tr>
                                            </thead>

                                            <tbody>
                                            <tr ng-repeat="v in displayCollection">
                                                <td class="col-md-1">
                                                    <span class="badge" ng-class="{'label-HL7' : getScopeLabel(v)==='HL7', 'label-USE': getScopeLabel(v)==='USR','label-MASTER':getScopeLabel(v)==='MAS','label-PRL':getScopeLabel(v)==='PRL','label-PVS':getScopeLabel(v)==='PVS'}">{{getScopeLabel(v)}} {{hasSameVersion(v)}}</span>
                                                </td>
                                                <td class="col-md-3">
                                                    {{v.bindingIdentifier}}
                                                </td>
                                                <td class="col-md-7">
                                                    {{v.name}}
                                                </td>
                                                <td class="col-md-1" align="center">
                                                    <span> <md-checkbox ng-checked="isSelected(v)" ng-click="toggle(v)"></md-checkbox></span>
                                                </td>
                                            </tr>
                                            </tbody>
                                            <tr style="float:center !important;" ng-if="tables.length > 10">
                                                <td colspan="5" class="text-center" style="float:center !important;">
                                                    <div st-pagination="" st-items-by-page="10" st-displayed-pages="10" style="float:center !important;"></div>
                                                </td>
                                            </tr>
                                        </table>
                                    </md-content>
                                </md-tab>
                                <md-tab label="Single Code" ng-disabled="!isSingleValueSetAllowed" md-on-select="singleCodeInit();">
                                    <md-content class="md-padding">
                                        <div ng-if="selectedValueSetBindings.length == 0 || selectedValueSetBindings[0].type == 'valueset'">
                                            <md-button ng-click="addManualCode()" class="md-primary">
                                                <i class="fa fa-plus fa-fw"></i> Create Single Code directly
                                            </md-button>
                                        </div>
                                        <div ng-show="!valueSetSelectedForSingleCode">
                                            <table st-safe-src="tables" st-table="displayTables" class="table table-striped table-bordered normal-table">
                                                <thead>
                                                <tr class="tbl-header">
                                                    <th st-sort="scope" class="col-md-1">Scope/Version</th>
                                                    <th st-sort="bindingIdentifier" class="col-md-3">Binding Identifier</th>
                                                    <th class="col-md-7">Name</th>
                                                    <th class="col-md-1">Action</th>
                                                </tr>
                                                <tr>
                                                    <th colspan="5">
                                                        <input st-search="bindingIdentifier" placeholder="search for BindingIdentifier" class="input-sm form-control" type="search"/>
                                                    </th>
                                                </tr>
                                                </thead>

                                                <tbody>
                                                <tr ng-repeat="v in displayTables">
                                                    <td class="col-md-1">
                                                        <span class="badge" ng-class="{'label-HL7' : getScopeLabel(v)==='HL7', 'label-USE': getScopeLabel(v)==='USR','label-MASTER':getScopeLabel(v)==='MAS','label-PRL':getScopeLabel(v)==='PRL','label-PVS':getScopeLabel(v)==='PVS'}">{{getScopeLabel(v)}} {{hasSameVersion(v)}}</span>
                                                    </td>
                                                    <td class="col-md-3">
                                                        {{v.bindingIdentifier}}
                                                    </td>
                                                    <td class="col-md-7">
                                                        {{v.name}}
                                                    </td>
                                                    <td class="col-md-1">
                                                        <span> <md-checkbox ng-click="selectValueSetForSingleCode(v)" ng-checked="valueSetSelectedForSingleCode"></md-checkbox></span>
                                                    </td>
                                                </tr>
                                                </tbody>
                                                <tr style="float:center !important;" ng-if="tables.length > 10">
                                                    <td colspan="5" class="text-center" style="float:center !important;">
                                                        <div st-pagination="" st-items-by-page="10" st-displayed-pages="10" style="float:center !important;"></div>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                        <div ng-show="valueSetSelectedForSingleCode">
                                            <table class="table table-striped table-bordered normal-table">
                                                <thead>
                                                <tr class="tbl-header">
                                                    <th class="col-md-1">Scope/Version</th>
                                                    <th class="col-md-3">Binding Identifier</th>
                                                    <th class="col-md-7">Name</th>
                                                    <th class="col-md-1">Action</th>
                                                </tr>
                                                </thead>
                                                <tr>
                                                    <td class="col-md-1">
                                                        <span class="badge" ng-class="{'label-HL7' : getScopeLabel(valueSetSelectedForSingleCode)==='HL7', 'label-USE': getScopeLabel(valueSetSelectedForSingleCode)==='USR','label-MASTER':getScopeLabel(valueSetSelectedForSingleCode)==='MAS','label-PRL':getScopeLabel(valueSetSelectedForSingleCode)==='PRL','label-PVS':getScopeLabel(valueSetSelectedForSingleCode)==='PVS'}">{{getScopeLabel(valueSetSelectedForSingleCode)}} {{hasSameVersion(valueSetSelectedForSingleCode)}}</span>
                                                    </td>
                                                    <td class="col-md-3">
                                                        {{valueSetSelectedForSingleCode.bindingIdentifier}}
                                                    </td>
                                                    <td class="col-md-7">
                                                        {{valueSetSelectedForSingleCode.name}}
                                                    </td>
                                                    <td class="col-md-1">

                                                        <span> <md-checkbox ng-click="valueSetSelectedForSingleCode = null;" md-checked="valueSetSelectedForSingleCode"></md-checkbox></span>
                                                    </td>
                                                </tr>
                                            </table>
                                            <table st-safe-src="valueSetSelectedForSingleCode.codes" st-table="displayCodes" class="table table-striped table-bordered normal-table">
                                                <thead>
                                                <tr class="tbl-header">
                                                    <th st-sort="value" class="col-md-3">Code</th>
                                                    <th st-sort="label" class="col-md-5">Description</th>
                                                    <th class="col-md-3">CodeSystem</th>
                                                    <th class="col-md-1" style="text-align:left">Status</th>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <label></label>
                                                                <input st-search="'value'" placeholder="Search for Code" type="search" />
                                                            </md-input-container>
                                                        </div>
                                                    </th>
                                                    <th>
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <label></label>
                                                                <input st-search="'label'" placeholder="Search for description" type="search" />
                                                            </md-input-container>
                                                        </div>
                                                    </th>
                                                    <th>
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <label></label>
                                                                <input st-search="'codeSystem'" placeholder="Search for CodeSystem" type="search" />
                                                            </md-input-container>
                                                        </div>
                                                    </th>
                                                    <th/>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr ng-repeat="c in displayCodes">
                                                    <td class="col-md-3">
                                                        <span>{{c.value}}</span>
                                                    </td>
                                                    <td class="col-md-5">
                                                        <span>{{c.label}}</span>
                                                    </td>
                                                    <td class="col-md-3">
                                                        <span>{{c.codeSystem}}</span>
                                                    </td>
                                                    <td class="col-md-1">
                                                        <span>
                                                            <md-checkbox ng-checked="isCodeSelected(c)" ng-click="toggleCode(c)"></md-checkbox>
                                                        </span>
                                                    </td>
                                                </tr>
                                                </tbody>
                                                <tr style="float:center !important;" ng-if="valueSetSelectedForSingleCode.codes.length > 10">
                                                    <td colspan="6" class="text-center" style="float:center !important;">
                                                        <div st-pagination="" st-items-by-page="10" st-displayed-pages="7" style="float:center !important;"></div>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </md-content>
                                </md-tab>
                            </md-tabs>
                        </md-content>
                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">
                <md-button ng-disabled="!changed" type="button" ng-click="saveMapping()" class="md-primary md-raised"><i class="fa fa-plus fa-fw">&nbsp; </i>Save</md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
