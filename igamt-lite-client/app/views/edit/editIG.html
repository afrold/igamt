<style id="antiClickjack">
    body {
        display: none !important;
    }
</style>
<script type="text/javascript">
    if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
    } else {
        top.location = self.location;
    }
</script>
<div ng-show="!loadingIGDocument">
    <div class="row" ng-show="!isEditing">
        <div class="col-md-12">
            <p>No Implementation Guide Selected.</p>
        </div>
    </div>
    <div ng-show="isEditing" ng-controller="EditAreaCtrl" ng-init="init">
        <div class="row">
            <div class="col-md-12" ng-show="igDocumentMsg !== null">
                <div ng-class="'alert alert-'+igDocumentMsg.type" ng-show="igDocumentMsg.show" id="ehralert">
                    <button type="button" class="close" ng-click="igDocumentMsg.show = false">×</button>
                    <div msg key-expr="igDocumentMsg.text"></div>
                </div>
            </div>
            <div class="col-md-12">
                <div class="page-header">
                    <span class="header5">{{igdocument.metaData.title}}</span>
                </div>
                <div class="static_info">
                    <i class="fa fa-calendar" aria-hidden="true"></i>
                    Updated {{igdocument.dateUpdated | date:dateFormat}}
                    <span ng-if="igdocument.owner" style="font-style: italic;">
                         <i class="fa fa-user" aria-hidden="true"></i>
                         ,{{igdocument.owner}}
                    </span>
                    <span>,HL7 Version: {{igdocument.profile.metaData.hl7Version}}</span>
                </div>
             </div>
            <div class="col-md-12">
                <div class="">
                    <!--<button style="margin-top:0px" title="Verify IG" type="button" ng-class="{'btn btn-raised btn-sm btn-danger':(validationResult && validationResult.errorCount>0),'btn btn-raised btn-sm btn-success':((validationResult && validationResult.errorCount===0)|| !validationResult)}"
                        ng-click="validateIg()">
                                                <span>
                                                    <i ng-show="validationResult && validationResult.errorCount>0" class="fa fa-exclamation-triangle"></i>
                                                    <i  ng-show="(validationResult && validationResult.errorCount===0)|| !validationResult" class="fa fa-check-circle"></i>
                                                    Verify
                                                </span>
                                            </button>-->


                            <md-menu-bar>
                        <md-menu>

                                <button ng-click="$mdMenu.open()" type="button">
                                    <i
                                        class="fa fa-download fa-fw"></i> Export
                                </button>


                            <md-menu-content>

                                <md-menu-item>
                                <md-menu>
                                    <md-button ng-click="$mdMenu.open()">As HTML</md-button>
                                    <md-menu-content>
                                        <md-menu-item>
                                            <md-button ng-click="ctrl.sampleAction('New Document', $event)">IG Style</md-button></md-menu-item>
                                        <md-menu-item><md-button ng-click="ctrl.sampleAction('New Spreadsheet', $event)">Profile Style</md-button></md-menu-item>
                                        <md-menu-item><md-button ng-click="ctrl.sampleAction('New Presentation', $event)">Table Style</md-button></md-menu-item>

                                    </md-menu-content>
                                </md-menu>
                            </md-menu-item>


                                <md-menu-item>
                                    <md-menu>
                                        <md-button ng-click="$mdMenu.open()">As Word</md-button>
                                        <md-menu-content>
                                            <md-menu-item>

                                                <md-button ng-click="ctrl.sampleAction('New Document', $event)">IG Style</md-button></md-menu-item>
                                            <md-menu-item><md-button ng-click="ctrl.sampleAction('New Spreadsheet', $event)">Profile Style</md-button></md-menu-item>
                                            <md-menu-item><md-button ng-click="ctrl.sampleAction('New Presentation', $event)">Table Style</md-button></md-menu-item>

                                        </md-menu-content>
                                    </md-menu>
                                </md-menu-item>

                            </md-menu-content>
                        </md-menu>

                        <md-menu>
                            <button ng-click="$mdMenu.open()">
                                <i class="fa fa-share-alt" aria-hidden="true"></i> Share
                            </button>

                        </md-menu>
                        <md-menu>
                            <button style="margin-top:0px" title="Verify IG" type="button"
                                    ng-click="validateIg()">
                                <i class="fa fa-check" aria-hidden="true"></i> Verify
                            </button>

                        </md-menu>
                        <md-menu>
                            <button ng-click="$mdMenu.open()">
                                Filter
                            </button>
                            <md-menu-content>

                                <md-menu-item>
                                   <md-button>All USAGES</md-button>
                                </md-menu-item>

                                <md-button>ONLY R,RE,RC</md-button>

                                <md-menu-item>

                                </md-menu-item>

                            </md-menu-content>
                        </md-menu>

                    <md-menu class="pull-right">
                        <button ng-click="$mdMenu.open()">
                            <i class="fa fa-close fa-fw"></i> Close Document
                        </button>
                    </md-menu>

                    </md-menu-bar>




                    <!--<button style="margin-top:0px" title="Verify IG" type="button"-->
                            <!--ng-class="'btn btn-raised btn-sm btn-success'"-->
                            <!--ng-click="validateIg()">-->
                        <!--Verify-->
                    <!--</button>-->
                    <!--<div class="btn-group">-->
                        <!--<label class="btn btn-raised btn-primary btn-sm" ng-class="{active:$root.usageF===false}"-->
                               <!--ng-click="$root.usageF=false"> All Usages </label>-->
                        <!--<label class=" btn btn-raised btn-primary btn-sm" ng-class="{active:$root.usageF===true}"-->
                               <!--ng-click="usageFilter()"> Only R,RE,C </label>-->
                    <!--</div>-->
                    <!--<div class="btn-group" ng-if="igdocument.accountId == getAccountID()">-->
                        <!--<button style="margin-top:0px" class="btn btn-raised btn-primary btn-sm" ng-class=""-->
                                <!--ng-click="shareModal(igdocument)">-->
                            <!--<i class="fa fa-share-alt" aria-hidden="true"></i> Share-->
                            <!--<span class="badge" ng-bind="igdocument.shareParticipants.length"-->
                                  <!--style="margin-right:5px;"></span>-->
                        <!--</button>-->

                        <!--<button type="button" class="btn btn-raised btn-info btn-sm dropdown-toggle"-->
                                <!--data-toggle="dropdown" aria-expanded="false"><span class="caret"></span> <span-->
                                <!--class="sr-only">Toggle Dropdown</span></button>-->
                        <!--<ul class="dropdown-menu igl-menu" role="menu">-->
                            <!--<li ng-repeat="participant in igdocument.shareParticipants"><a><i class="fa fa-user"-->
                                                                                              <!--aria-hidden="true"></i>-->
                                <!--{{participant.username}} <span-->
                                        <!--ng-if="participant.pendingApproval">(Pending...)</span></a></li>-->
                        <!--</ul>-->
                    <!--</div>-->
                    <!--<div class="btn-group"-->
                         <!--ng-if="igdocument.accountId != getAccountID() && igdocument.shareParticipantIds.indexOf(getAccountID()) != -1">-->

                        <!--<button style="margin-top:0px" class="btn btn-raised btn-primary btn-sm" ng-class="" disabled>-->
                            <!--<i class="fa fa-share-alt" aria-hidden="true"></i> Shared With-->
                            <!--<span class="badge" ng-bind="igdocument.shareParticipants.length"-->
                                  <!--style="margin-right:5px;"></span>-->
                        <!--</button>-->

                        <!--<button type="button" class="btn btn-raised btn-info btn-sm dropdown-toggle"-->
                                <!--data-toggle="dropdown" aria-expanded="false"><span class="caret"></span> <span-->
                                <!--class="sr-only">Toggle Dropdown</span></button>-->
                        <!--<ul class="dropdown-menu igl-menu" role="menu">-->
                            <!--<li ng-repeat="participant in igdocument.shareParticipants"><a><i class="fa fa-user"-->
                                                                                              <!--aria-hidden="true"></i>-->
                                <!--{{participant.username}} <span ng-if="participant.pendingApproval">(Pending...)</span>-->
                                <!--<span ng-if="participant.id === getAccountID()"><i class="fa fa-share-alt"-->
                                                                                   <!--ng-click="unshareModal(igdocument)"></i></span></a>-->
                            <!--</li>-->
                        <!--</ul>-->
                    <!--</div>-->


                    <!--<button style="margin-top:0px"-->
                            <!--ng-show="viewSettings.tableReadonly && igDocumentConfig.selectedType === 'USER'"-->
                            <!--title="Edit" type="button" class="btn btn-raised btn-sm btn-primary"-->
                            <!--ng-click="edit(igdocument)"><span><i class="fa fa-pencil fa-fw"></i>Edit</span></button>-->
                    <!--<div class="btn-group">-->
                        <!--<button type="button" class="btn btn-raised btn-info btn-sm"><i-->
                                <!--class="fa fa-download fa-fw"></i> Export-->
                        <!--</button>-->
                        <!--<button type="button" class="btn btn-raised btn-info btn-sm dropdown-toggle"-->
                                <!--data-toggle="dropdown" aria-expanded="false"><span class="caret"></span> <span-->
                                <!--class="sr-only">Toggle Dropdown</span></button>-->
                        <!--<ul class="dropdown-menu igl-menu" role="menu">-->
                            <!--<li class="drop-accordian"><a class="point" ng-click="selectMessagesForExport(igdocument)">As-->
                                <!--XML</a>-->
                            <!--</li>-->
                            <!--<li class="drop-accordian"><a class="point"-->
                                                          <!--ng-click="$event.stopPropagation();wordDrop = !wordDrop">As-->
                                <!--WORD <span class="caret">&lt;!&ndash; &ndash;&gt;</span></a>-->
                                <!--<ul class="drop-accordian-menu" ng-show="wordDrop">-->
                                    <!--<li title="  The implementation guide is exported as individual message profiles. A profile will contain it’s Message Structure Definition, Profile Components, and Segments. Data Types and Value Sets Organized as individual profiles. Contains Message Definition and all pertaining Profile Components and Segments. Data Type and Value Sets are rendered in a single separate section regardless of the profile in which they are used. Both the narrative and messaging aspects are exported.">-->
                                        <!--<a class="point" ng-click="exportAsWithLayout('docx','IgDocument')">IG Style</a>-->
                                    <!--</li>-->
                                    <!--<li title="Export In Profile Style. The segments definitions are inside each conformance profile, No HL7 base data type, value set or segment is included">-->
                                        <!--<a class="point" ng-click="exportAsWithLayout('docx','Profile')">Profile-->
                                            <!--Style<span-->
                                                    <!--style="color:red;font-weight: bold; font-size:10px">BETA</span></a>-->
                                    <!--</li>-->
                                    <!--<li title="Only the messaging aspects are exported. The export view is on the individual tables. Filters can be applied to export a subset desired tables.">-->
                                        <!--<a class="point" ng-click="exportAsWithLayout('docx','Table')">Table Style<span-->
                                                <!--style="color:red;font-weight: bold; font-size:10px">BETA</span></a></li>-->
                                <!--</ul>-->
                            <!--</li>-->
                            <!--<li class="drop-accordian"><a class="point"-->
                                                          <!--ng-click="$event.stopPropagation();htmlDrop = !htmlDrop">As-->
                                <!--HTML <span class="caret">&lt;!&ndash; &ndash;&gt;</span></a>-->
                                <!--<ul class="drop-accordian-menu" ng-show="htmlDrop">-->
                                    <!--<li title="  The implementation guide is exported as individual message profiles. A profile will contain it’s Message Structure Definition, Profile Components, and Segments. Data Types and Value Sets Organized as individual profiles. Contains Message Definition and all pertaining Profile Components and Segments. Data Type and Value Sets are rendered in a single separate section regardless of the profile in which they are used. Both the narrative and messaging aspects are exported.">-->
                                        <!--<a class="point" ng-click="exportAsWithLayout('html','IGDocument')">IG Style</a>-->
                                    <!--</li>-->
                                    <!--<li title="Export In Profile Style. The segments definitions are inside each conformance profile, No HL7 base data type, value set or segment is included">-->
                                        <!--<a class="point" ng-click="exportAsWithLayout('html','Profile')">Profile-->
                                            <!--Style<span-->
                                                    <!--style="color:red;font-weight: bold; font-size:10px">BETA</span></a>-->
                                    <!--</li>-->
                                    <!--<li title="Only the messaging aspects are exported. The export view is on the individual tables. Filters can be applied to export a subset desired tables.">-->
                                        <!--<a class="point" ng-click="exportAsWithLayout('html','Table')">Table Style<span-->
                                                <!--style="color:red;font-weight: bold; font-size:10px">BETA</span></a></li>-->
                                <!--</ul>-->
                            <!--</li>-->
                            <!--&lt;!&ndash;li><a class="point" ng-click="customExportModal()">Advanced Export</a></li&ndash;&gt;-->
                        <!--</ul>-->
                    <!--</div>-->
                    <!--<button title="Close the IG Document" style="margin-top:0px" type="button"-->
                            <!--class="btn btn-raised btn-sm btn-warning" ng-click="close()"><span><i-->
                            <!--class="fa fa-close fa-fw"></i>Close</span></button>-->
                    <!--&lt;!&ndash;<button style="margin-top:0px" title="Delete permanently" type="button" class="btn btn-raised btn-sm btn-danger" ng-show="igDocumentConfig.selectedType === 'USER'" ng-hide="viewSettings.tableReadonly" ng-click="confirmDelete(igdocument)"> <span><i class="fa fa-trash-o fa-fw"></i>Delete</span> </button>&ndash;&gt;-->
                <!--</div>-->
                <!--<div class="col-md-12">-->
                <!--<span>version: {{igdocument.metaData.version}}-->
                <!--</span>-->
                <!--</div>-->
            </div>
        </div>
        <div class="row" ng-show="showErrorCount(igdocument.id)  && showIgErrorNotification"
             style="margin-right: 15px;margin-left: 5px;">
            <div class="alert has-error" ng-show="errorCount(igdocument.id)>0">
                <!--<button type="button" class="close" aria-label="Close" ><span aria-hidden="true">&times;</span></button> {{errorCount(igdocument.id)}} Errors-->
                <button type="button" ng-click="setIgErrorNotification();" class="close" aria-label="Close">
                    <span>&times;</span></button>
                {{errorCount(igdocument.id)}} Errors

            </div>
            <div class="alert alert-success" ng-show="errorCount(igdocument.id)===0">
                <!--<button type="button" class="close" aria-label="Close" ><span aria-hidden="true">&times;</span></button> {{errorCount(igdocument.id)}} Errors-->
                <button type="button" ng-click="setIgErrorNotification();" class="close" aria-label="Close">
                    <span>&times;</span></button>
                {{errorCount(igdocument.id)}} Errors

            </div>
        </div>
        <div class="row">
            <!--<div class="col-md-1 col-1-percent" ng-show="hideToc" style="margin-right:6px">-->
            <!--<button title="Show Table of Contents" class="btn btn-raised btn-xs btn-primary" ng-click="hideToc = !hideToc">-->
            <!--<i class="fa fa-caret-right"></i>-->
            <!--</button>-->
            <!--</div>-->
            <div ng-show="!hideToc" class="col-md-3">
                <div class="panel panel-primary">
                    <!-- Default panel contents -->
                    <div class="panel-heading panel-heading-collapsable" layout="row">


                        <span flex="50"> <i flex="10" class="glyphicon glyphicon-list"></i>Table of Contents </span>
                        <span flex="40" style="max-height: 20px;">
                        <md-switch ng-model="filtering" aria-label="Switch 6" ng-change="displayTree(!filtering)" style="margin:0px !important;">
                            Filter <span ng-if="!filtering">OFF</span><span ng-if="filtering">ON</span>
                        </md-switch>
                        </span>
                        <button flex="10" title="Hide  Table of Contents" class="btn btn-raised btn-xs btn-default"
                                style="margin:0px" ng-click="hideToc = !hideToc"><i class="fa fa-caret-left"></i>
                        </button>
                    </div>
                    <div class="panel-body toc-container">
                        <div ng-include="tocView"></div>
                    </div>
                </div>
            </div>
            <div ng-class="{'col-md-9': !hideToc,'col-md-12': hideToc}">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <button title="Show Table of Contents" class="btn btn-raised btn-xs btn-primary"
                                ng-show="hideToc" style="margin-right:6px" ng-click="hideToc = !hideToc"><i
                                class="fa fa-caret-right"></i></button>
                        <i class="fa fa-pencil" aria-hidden="true"></i> Edit Area
                    </div>
                    <div class="panel-body" style="padding-bottom:100px">
                        <form name="editForm" id="editForm" class="form-horizontal" novalidate unsaved-warning-form>
                            <div id="edit" ng-show="subview" style="width:100%;">
                                <div ng-include="subview"></div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div ng-show="loadingIGDocument" style="text-align:center;padding-top:20px; padding-bottom:20px ">
    <div layout="row" layout-sm="column" layout-align="space-around">
        <md-progress-circular class="md-hue-2" md-diameter="40px"></md-progress-circular>
    </div>
    <!--<i class="fa fa-spinner fa-3" aria-hidden="true"></i>-->
</div>


<script type="text/ng-template" id="sharePopover.html">
    <div class="triangle"></div>
    <div style="z-index: 99999" class="cp-tooltip">
        <div class="col-md-12" class="cp-tooltip">
            <i class="fa fa-user" aria-hidden="true"></i> {{participant.fullname}}<br>
            <span ng-if="participant.pendingApproval">Confirmation pending...</span>
        </div>
    </div>
</script>
