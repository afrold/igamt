<style id="antiClickjack">
    body {
        display: none !important;
    }
</style>
<script type="text/javascript">
    if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
    } else {
        top.location = self.location;
    }
</script>
<div ng-show="!loadingIGDocument">
    <div class="row" ng-show="!isEditing">
        <div class="col-md-12">
            <p>No Implementation Guide Selected.</p>
        </div>
    </div>
    <div ng-show="isEditing">
        <div class="row">
            <div class="col-md-12" ng-show="igDocumentMsg !== null">
                <div ng-class="'alert alert-'+igDocumentMsg.type" ng-show="igDocumentMsg.show" id="ehralert">
                    <button type="button" class="close" ng-click="igDocumentMsg.show = false">Ã—</button>
                    <div msg key-expr="igDocumentMsg.text"></div>
                </div>
            </div>
            <div class="col-md-12">
                <div class="page-header">
                    <span class="header4">{{igdocument.metaData.title}}</span>
                </div>
                <div class="static_info">
                    <i class="fa fa-calendar" aria-hidden="true"></i>
                    Updated {{igdocument.dateUpdated | date:dateFormat}}
                    <span ng-if="igdocument.owner" style="font-style: italic;">
                         <i class="fa fa-user" aria-hidden="true"></i>
                         ,{{igdocument.owner}}
                    </span>
                    <span>,HL7 Version: {{igdocument.profile.metaData.hl7Version}}</span>
                </div>
             </div>

            <div class="col-md-12 ig-menu-bar">
                <span>
                <md-switch ng-model="filtering" aria-label="Switch 6" ng-change="displayTree(!filtering)" style="margin-bottom: 0px;margin-top: 3px !important;" class="md-primary col-md-4">
                 <span  class="white-color" ng-if="!filtering">OFF</span><span ng-if="filtering">ON</span>
                </md-switch>
                </span>
                <div class="col-md-8">



                    <md-menu-bar class="pull-right">
                        <md-menu>

                            <!--<md-button ng-click="$mdMenu.open()" type="button" md-colors="{background:'indigo'}">-->
                            <button ng-click="$mdMenu.open()" type="button" class="white-color">

                                <i class="fa fa-download fa-fw"></i> Export
                            </button>


                            <md-menu-content>

                                <md-menu-item>
                                    <md-menu>
                                        <md-button ng-click="$mdMenu.open()">As HTML</md-button>
                                        <md-menu-content>
                                            <md-menu-item>
                                                <md-button  ng-click="exportAsWithLayout('html','IGDocument')">IG
                                                    Style
                                                </md-button>
                                            </md-menu-item>
                                            <md-menu-item>
                                                <md-button ng-click="exportAsWithLayout('html','Profile')" >
                                                    Profile Style
                                                </md-button>
                                            </md-menu-item>
                                            <md-menu-item>
                                                <md-button ng-click="exportAsWithLayout('html','Table')">
                                                    Table Style
                                                </md-button>
                                            </md-menu-item>

                                        </md-menu-content>
                                    </md-menu>
                                </md-menu-item>


                                <md-menu-item>
                                    <md-menu>
                                        <md-button ng-click="$mdMenu.open()">As Word</md-button>
                                        <md-menu-content>
                                            <md-menu-item>

                                                <md-button ng-click="exportAsWithLayout('docx','IgDocument')">IG
                                                    Style
                                                </md-button>
                                            </md-menu-item>
                                            <md-menu-item>
                                                <md-button ng-click="exportAsWithLayout('docx','Profile')">
                                                    Profile Style
                                                </md-button>
                                            </md-menu-item>
                                            <md-menu-item>
                                                <md-button ng-click="exportAsWithLayout('docx','Table')">
                                                    Table Style
                                                </md-button>
                                            </md-menu-item>

                                        </md-menu-content>
                                    </md-menu>
                                </md-menu-item>
                                <md-menu-item>
                                        <md-button ng-click="selectMessagesForExport(igdocument)"> XML</md-button>
                                </md-menu-item>

                            </md-menu-content>
                        </md-menu>

                        <md-menu>
                            <button ng-click="$mdMenu.open()" class="white-color">
                                Filter
                            </button>
                            <md-menu-content>

                                <md-menu-item>
                                    <md-button  ng-click="$root.usageF=false">All USAGES</md-button>
                                </md-menu-item>

                                <md-menu-item>

                                    <md-button  ng-click="usageFilter()">ONLY R,RE,RC</md-button>

                                </md-menu-item>

                            </md-menu-content>
                        </md-menu>
                        <md-menu  ng-if="igdocument.accountId == getAccountID()">
                            <!--<md-menu class="pull-right" ng-if="igdocument.accountId == getAccountID()">-->

                            <button ng-click="shareModal(igdocument)" class="white-color" >
                                <i class="fa fa-share-alt" aria-hidden="true"></i> Share
                            </button>
                            <md-menu-content>
                            </md-menu-content>

                        </md-menu>
                        <md-menu>
                            <!--<md-button aria-label="Verify IG" type="button"-->
                            <!--ng-click="validateIg()" md-colors="{background:'green'}">-->
                            <button aria-label="Verify IG" type="button" class="white-color"
                                    ng-click="validateIg()">
                                <i class="fa fa-check" aria-hidden="true"></i> Verify
                            </button>

                            <md-menu-content>
                            </md-menu-content>

                        </md-menu>
                        <md-menu>
                            <!--<md-button ng-click="close()" md-colors="{background:'orange'}">-->
                                <button ng-click="close()" class="white-color">

                                <i class="fa fa-close fa-fw"></i> Close
                            </button>
                            <md-menu-content>
                            </md-menu-content>
                        </md-menu>






                    </md-menu-bar>
                </div>

            </div>
             </div>
    </div>
        <div class="row" ng-show="showErrorCount(igdocument.id)  && showIgErrorNotification"
             style="margin-right: 15px;margin-left: 5px;">
            <div class="alert has-error" ng-show="errorCount(igdocument.id)>0">
                <!--<button type="button" class="close" aria-label="Close" ><span aria-hidden="true">&times;</span></button> {{errorCount(igdocument.id)}} Errors-->
                <button type="button" ng-click="setIgErrorNotification();" class="close" aria-label="Close">
                    <span>&times;</span></button>
                {{errorCount(igdocument.id)}} Errors

            </div>
            <div class="alert alert-success" ng-show="errorCount(igdocument.id)===0">
                <!--<button type="button" class="close" aria-label="Close" ><span aria-hidden="true">&times;</span></button> {{errorCount(igdocument.id)}} Errors-->
                <button type="button" ng-click="setIgErrorNotification();" class="close" aria-label="Close">
                    <span>&times;</span></button>
                {{errorCount(igdocument.id)}} Errors

            </div>
        </div>
        <div>
            <!--<div class="col-md-1 col-1-percent" ng-show="hideToc" style="margin-right:6px">-->
            <!--<button aria-label="Show Table of Contents" class="btn btn-raised btn-xs btn-primary" ng-click="hideToc = !hideToc">-->
            <!--<i class="fa fa-caret-right"></i>-->
            <!--</button>-->
            <!--</div>-->
            <div layout="row" ng-controller="EditAreaCtrl" ng-init="init">
                    <!-- Default panel contents -->



                        <!--<span flex="50"> <i flex="10" class="glyphicon glyphicon-list"></i>Table of Contents </span>-->
                        <!--<span flex="40" style="max-height: 20px;">-->
                        <!--<md-switch ng-model="filtering" aria-label="Switch 6" ng-change="displayTree(!filtering)" style="margin:0px !important;">-->
                            <!--Filter <span ng-if="!filtering">OFF</span><span ng-if="filtering">ON</span>-->
                        <!--</md-switch>-->
                        <!--</span>-->
                        <!--<button flex="10" aria-label="Hide  Table of Contents" class="btn btn-raised btn-xs btn-default"-->
                                <!--style="margin:0px" ng-click="hideToc = !hideToc"><i class="fa fa-caret-left"></i>-->
                        <!--</button>-->
                    <!--</div>-->
                <div flex="30">
                    <div style="width:100%; max-height: 800px; overflow: scroll;background-color: rgba(238, 238, 238, 0.46); padding-top: 20px;" md-whiteframe="4">
                    <div ng-include="tocView"></div>
                    </div>
                </div>

                <div flex="70">
                        <form name="editForm" id="editForm" class="form-horizontal" novalidate unsaved-warning-form>
                            <div id="edit" ng-show="subview" style="width:100%; max-height: 800px; background-color: white;overflow: scroll;">
                                <div ng-include="subview"></div>
                            </div>
                        </form>

                </div>
        </div>
        </div>
    </div>
</div>

<div ng-show="loadingIGDocument" style="text-align:center;padding-top:20px; padding-bottom:20px ">
    <div layout="row" layout-sm="column" layout-align="space-around">
        <md-progress-circular class="md-hue-2" md-diameter="40px"></md-progress-circular>
    </div>
    <!--<i class="fa fa-spinner fa-3" aria-hidden="true"></i>-->
</div>


<script type="text/ng-template" id="sharePopover.html">
    <div class="triangle"></div>
    <div style="z-index: 99999" class="cp-tooltip">
        <div class="col-md-12" class="cp-tooltip">
            <i class="fa fa-user" aria-hidden="true"></i> {{participant.fullname}}<br>
            <span ng-if="participant.pendingApproval">Confirmation pending...</span>
        </div>
    </div>
</script>
