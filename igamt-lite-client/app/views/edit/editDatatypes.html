<div ng-controller="DatatypeListCtrl" ng-init="init()">


    <div ng-show="loading" style="text-align:center">
        <img class="ajax-loading" ng-src="images/ajax.gif" alt="loading..."/>
    </div>

    <div ng-show="!loading">
        <div class="row">
            <div class="page-header">
                <h3>Datatypes List</h3>
            </div>
            <div>
                <table st-table="tmpDatatypes" st-safe-src="datatypes"
                       class="table table-striped table-bordered">
                    <thead>
                    <tr class="tbl-header">
                        <th></th>
                        <th>Label</th>
                        <th>Name</th>
                        <th>Description</th>
                        <!--<th></th>-->
                    </tr>
                    <tr>
                        <th colspan="4">
                            <input st-search placeholder="Search Datatype" class="input-sm form-control" type="search"/>
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr st-select-row="row" st-select-mode="single" ng-repeat="row in tmpDatatypes">
                        <td cs-select="row"><input  ng-click="select(row)" ng-checked="datatype != null && row.id == datatype.id"
                                                   type="radio"></td>
                        <td ng-bind="row.label"></td>
                        <td ng-bind-html="row.name"></td>
                        <td ng-bind-html="row.description"></td>
                        <!--<td>-->
                            <!--<button title="Clone" ng-disabled="datatype != null" type="button" class="btn btn-xs btn-default"-->
                                    <!--ng-click="clone(row)">-->
                                <!--<span><i class="fa fa-files-o fa-fw"></i>&nbsp; Clone</span>-->
                            <!--</button>-->
                            <!--<button ng-disabled="datatype != null" ng-show="isFlavor(row.label)" title="Edit" type="button"-->
                                    <!--class="btn btn-xs btn-primary"-->
                                    <!--ng-click="edit(row)">-->
                                <!--<span><i class="fa fa-pencil fa-fw"></i>&nbsp; Edit</span>-->
                            <!--</button>-->
                            <!--<button ng-disabled="datatype != null" title="Delete" type="button" class="btn btn-xs btn-danger"-->
                                    <!--ng-click="delete(row)">-->
                                <!--<span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Delete</span>-->
                            <!--</button>-->
                        <!--</td>-->
                    </tr>
                    </tbody>
                    <tfoot>
                    <tr>
                        <td colspan="4" class="text-center">
                            <div st-pagination="" st-items-by-page="itemsByPage" st-displayed-pages="7"></div>
                        </td>
                    </tr>
                    </tfoot>
                </table>
            </div>
        </div>

        <div ng-show="loadingSelection" style="text-align:center">
            <i class="fa fa-spinner fa-spin"></i>
        </div>
        <div ng-show="!loadingSelection">
            <div ng-show="datatype !== null">
                <div class="row">
                    <div class="">
                        <div>
                            <h3>Selected Datatype : {{datatype.label}}</h3>
                        <!--</div>-->
                        <!--<div class="pull-right">-->

                            <!--<button ng-show="isFlavor(row.label)" title="Edit" type="button"-->
                                    <!--class="btn btn-xs btn-primary"-->
                                    <!--ng-click="edit()">-->
                                <!--<span><i class="fa fa-pencil fa-fw"></i>&nbsp; Edit</span>-->
                            <!--</button>-->

                            <button title="Clone" type="button" class="btn btn-xs btn-default"
                                    ng-click="clone()">
                                <span><i class="fa fa-files-o fa-fw"></i>&nbsp; Clone</span>
                            </button>

                            <button title="Delete" ng-show="datatype.id != null" type="button" class="btn btn-xs btn-danger"
                                    ng-click="delete()">
                                <span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Delete</span>
                            </button>

                            <button title="Reset" type="button" class="btn btn-xs btn-warning"
                                    ng-click="reset()">
                                <span><i class="fa fa-times fa-fw">&nbsp; </i>Reset</span>
                            </button>

                            <!--<button title="Save" type="button" class="btn btn-xs btn-success"-->
                                    <!--ng-click="save()">-->
                                <!--<span><i class="fa fa-check-circle fa-fw">&nbsp; </i>Save</span>-->
                            <!--</button>-->
                        </div>
                    </div>

                    <form style="margin-top: 20px" class="form-horizontal" name="editDatatypeForm">
                        <!--<div>-->
                            <!--<label for="datatypeLabel">Name:</label>-->
                            <!--<input type="text" ng-model="datatype.label" ng-disabled="isFlavor(datatype.label)"-->
                                   <!--ng-focus="isFlavor(datatype.label)" class="form-control" id="datatypeLabel">-->
                        <!--</div>-->
                        <div style="margin-top: 20px">
                            <div class="table-responsive">
                                <table tt-table tt-params="params" class="table table-striped table-bordered">
                                    <thead>
                                    <tr class="tbl-header">
                                        <th>Name</th>
                                        <th>Usage</th>
                                        <th>Cardinality</th>
                                        <th>Datatype</th>
                                        <th>Length</th>
                                        <th>ValueSet</th>
                                        <th>Predicate</th>
                                        <th>Conformance Statement</th>
                                    </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                                <script type="text/ng-template" id="DatatypeEditTree.html">
                                    <tr tt-node is-branch="hasChildren(node)">
                                        <td style="width:40%">
                                            <img ng-show="node.type != null"
                                                 style="width:15px; height:15px"
                                                 ng-src="images/{{node.type}}.png">
                                            <span ng-show="node.type !== 'datatype'">{{node.position}}:{{node.name}}</span>
                                            <span ng-show="node.type === 'datatype'">{{node.label}}:{{node.description}}</span>
                                        </td>
                                        <td style="width:75px">
                                            <span ng-show="!node.predicates || node.predicates == null || node.predicates.length == 0"
                                                  ng-bind="node.usage"></span>
                                            <span ng-show="node.predicates != null && node.predicates.length > 0">C({{node.predicates[0].trueUsage}}, {{node.predicates[0].falseUsage}})</span>
                                        </td>
                                        <td>
                                            <span ng-show="node.min != undefined && node.max != undefined">[{{node.min}}, {{node.max}}]</span>
                                        </td>
                                        <td>
                                            <span ng-bind="node.datatype.label"></span>
                                        </td>
                                        <td>
                                            <span ng-show="node.minLength != undefined && node.maxLength != undefined">[{{node.minLength}}, {{node.maxLength}}]</span>
                                        </td>
                                        <td>
                                            <span ng-show="node.table != undefined"><a class="point"
                                                                                       ng-click="goToTable(node.table)"
                                                                                       ng-bind="node.table.mappingId"></a></span>
                                        </td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                </script>
                            </div>
                        </div>

                    </form>


                </div>
            </div>
        </div>
    </div>
</div>