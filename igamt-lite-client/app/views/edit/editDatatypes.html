<style id="antiClickjack">body {
    display: none !important;
}</style>
<script type="text/javascript">
    if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
    } else {
        top.location = self.location;
    }
</script>
<script type="text/ng-template" id="EditDatatypes.html">
    <div ng-controller="DatatypeListCtrl" ng-init="init()" class="container">
        <div ng-show="loadingSelection"
             style="text-align: center;">
            <i class="fa fa-spinner fa-pulse fa-align-center fa-2x"></i>
        </div>
        <div ng-show="!loadingSelection">
            <div ng-show="datatype !== null" id="executionPanel">
                <!--<accordion close-others="false">-->
                <!--<accordion-group is-open="true" panel-class="panel-info">-->

                <!--<accordion-heading>-->
                <!--<i class="fa"-->
                <!--ng-class="{'fa-caret-down': accordi.metaData, 'fa-caret-right': !accordi.metaData}"></i>-->
                <!--MetaData-->
                <!--</accordion-heading>-->

                <form name="datatypeForm" novalidate class="form-horizontal">
                    <div class="row">
                    <div class="col-md-12 igl-page-header">
                        <span class="header4 pull-left">Data Type: {{datatype.label}}</span>
                         <span class="pull-right">
        <button title="Create Copy" type="button" class="btn btn-xs btn-info" ng-disabled='!datatypeForm.$valid'
                ng-click="copy(datatype)" ng-hide="viewSettings.tableReadonly"
                >
            <span><i class="fa fa-plus fa-fw"></i>&nbsp; Copy</span>
        </button>
        <button title="Delete" type="button" ng-hide="viewSettings.tableReadonly"
                class="btn btn-xs btn-danger"
                ng-click="delete(datatype)">
            <span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Delete</span>
        </button>
    </span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="page-header">
                                <span class="header5">MetaData</span>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="col-md-2 col-margin">
                                <div class="form-group control-group"
                                     ng-class="{'igl-has-error has-feedback' : datatypeForm.name.$invalid}">
                                    <label class="control-label">Name</label>
                                    <input type="text" disabled
                                           name="name" class="form-control" ng-model="datatype.name"
                                           required>
                                </div>
                            </div>

                            <div class="col-md-2 col-margin">
                                <div class="form-group control-group"
                                     ng-class="{'igl-has-error has-feedback' : datatypeForm.description.$invalid}">
                                    <label class="control-label">Description</label>
                                    <input type="text" disabled
                                           ng-change="recordChanged()"
                                           name="description" class="form-control" ng-model="datatype.description"
                                           required>
                                </div>
                            </div>

                            <div class="col-md-2 col-margin">
                                <div class="form-group control-group"
                                     ng-class="{'igl-has-error has-feedback' : datatypeForm.label.$invalid}">
                                    <label class="control-label">Label</label>
                                    <input type="text" ng-disabled="viewSettings.tableReadonly"
                                           ng-change="recordChanged()"
                                           name="label" id="label" class="form-control" ng-model="datatype.label"
                                           required aria-describedby="helpBlock2">
                                    <span id="helpBlock2" class="help-block" style="color:red"
                                          ng-show="isDuplicated(datatype,'label', datatypes)">Label already used</span>
                                </div>
                            </div>
                            <div class="col-md-2 col-margin">
                                <div class="form-group control-group"
                                     ng-class="{'igl-has-error has-feedback' : datatypeForm.comment.$invalid}">
                                    <label class="control-label">Comment</label>
                                    <input type="text" ng-disabled="viewSettings.tableReadonly"
                                           ng-change="recordDatatypeChange('datatype','edit',datatype.id,'comment', datatype.comment)"
                                           name="comment" class="form-control"
                                           ng-model="datatype.comment">
                                </div>
                            </div>

                        </div>
                        <div class="col-md-12">
                            <div class="col-md-12 col-margin">
                                <div class="form-group control-group"
                                     ng-class="{'igl-has-error has-feedback' : datatypeForm.text.$invalid}">
                                    <label class="control-label">Definition Text</label>

                                    <div ng-if="!viewSettings.tableReadonly">
                                        <textarea froala="froalaEditorOptions" ng-model="datatype.usageNote" name="text"
                                                  id="text"
                                                  ng-change="recordChanged()"></textarea>
                                    </div>

                                    <div ng-if="viewSettings.tableReadonly">
                                        <div froala-view="datatype.usageNote"></div>
                                    </div>

                                </div>
                            </div>
                        </div>


                    </div>
                    <div class="row" style="margin-top:20px">
                        <div class="col-md-12 igl-page-header">
<span class="pull-left" >
    <span class="header5">Definition</span>
                                    <!--<div  style="margin-left:15px" class="btn-group btn-group-xs" data-toggle="buttons">-->
                                        <!--<label class="btn btn-primary" ng-click="viewSettings.setTableRelevance(true)"-->
                                               <!--ng-class="{'active': viewSettings.tableRelevance}">-->
                                            <!--<input type="radio" ng-model="viewSettings.tableRelevance" ng-click="viewSettings.setTableRelevance(viewSettings.tableRelevance)" autocomplete="off" checked>R,RE,C(only)-->
                                        <!--</label>-->
                                        <!--<label class="btn  btn-primary" ng-click="viewSettings.setTableRelevance(false)"-->
                                               <!--ng-class="{'active': !viewSettings.tableRelevance}">-->
                                            <!--<input type="radio" ng-model="viewSettings.tableRelevance"  autocomplete="off">R,RE,C,O,X (All)-->
                                        <!--</label>-->
                                    <!--</div>-->

                             </span>
                            <span class="pull-right">
                                     <div style="margin-right: 20px" ng-dropdown-multiselect="" options="viewSettings.columnOptions"
                                          selected-model="viewSettings.visibleColumns"
                                          events="viewSettings.events" extra-settings="viewSettings.extra"
                                          translation-texts="viewSettings.translations"></div>
                                     </span>

                     </div>

                         <div class="col-md-12">
                            <!--</form>-->
                            <!--&lt;!&ndash;</accordion-group>&ndash;&gt;-->
                            <!--&lt;!&ndash;<accordion-group is-open="true" panel-class="panel-info">&ndash;&gt;-->

                            <!--&lt;!&ndash;<accordion-heading>&ndash;&gt;-->
                            <!--&lt;!&ndash;<i class="fa"&ndash;&gt;-->
                            <!--&lt;!&ndash;ng-class="{'fa-caret-down': accordi.definition, 'fa-caret-right': !accordi.definition}"></i>&ndash;&gt;
                            -->
                            <!--&lt;!&ndash;Definition&ndash;&gt;-->

                            <!--&lt;!&ndash;</accordion-heading>&ndash;&gt;-->

                            <!--<form class="form-horizontal" name="datatypeForm">-->


                            <div class="table-responsive">
                                <table tt-table tt-params="datatypesParams"
                                       class="table table-bordered table-fix-header table-condensed profile-table">
                                    <thead>
                                    <tr class="tbl-header"
                                        style="margin-right: {{scrollbarWidth}}px;">
                                        <th class="col-xs-2 col-fixed-250">Name</th>
                                        <th class="col-xs-1 col-fixed-80"
                                            ng-show="viewSettings.isVisibleColumn('usage')">Usage
                                        </th>
                                        <th class="col-xs-1 col-fixed-100"
                                            ng-show="viewSettings.isVisibleColumn('length')">Length
                                        </th>
                                        <th class="col-xs-1 col-fixed-80"
                                            ng-show="viewSettings.isVisibleColumn('confLength')">Conformance Length
                                        </th>
                                        <th class="col-xs-1 col-fixed-100"
                                            ng-show="viewSettings.isVisibleColumn('datatype')">Data Type
                                        </th>
                                        <th class="col-xs-1 col-fixed-130"
                                            ng-show="viewSettings.isVisibleColumn('valueSet')">Value Set
                                        </th>
                                        <th class="col-xs-1" ng-style="predWidth"
                                            ng-show="viewSettings.isVisibleColumn('predicate')">Predicate
                                        </th>
                                        <th class="col-xs-2" ng-style="csWidth"
                                            ng-show="viewSettings.isVisibleColumn('confStatement')">Conformance Statement
                                        </th>
                                        <th class="col-xs-1 col-fixed-80"
                                            ng-show="viewSettings.isVisibleColumn('defText')">Definition Text
                                        </th>
                                        <th class="col-xs-1" ng-style="commentWidth"
                                            ng-show="viewSettings.isVisibleColumn('comment')">Comment
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</script>

<script type="text/ng-template" id="ConfirmDatatypeDeleteCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Delete Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>Are you sure you want to delete Datatype {{dtToDelete.name}} - {{dtToDelete.label}} ? </p>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-danger" ng-click="delete()"><span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Delete</span>
        </button>
    </div>
</script>

<script type="text/ng-template" id="DatatypeEditTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td class="col-xs-2 col-fixed-250">
                                              <span style="width:60%" type="text"
                                                    name="name"
                                                    ng-bind="node.name"></span>
            <span ng-bind="node.description"></span>

        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('usage')">
            <div>-</div>
        </td>
        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('length')">
            <div>-</div>
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('confLength')">
            <div>-</div>
        </td>

        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('datatype')">
            <div>-</div>
        </td>

        <td class="col-xs-1 col-fixed-130" ng-show="viewSettings.isVisibleColumn('valueSet')">
            <div>-</div>
        </td>

        <td class="col-xs-1" ng-style="predWidth" ng-show="viewSettings.isVisibleColumn('predicate')">
            <div>-</div>
        </td>

        <td class="col-xs-2" ng-style="csWidth" ng-show="viewSettings.isVisibleColumn('confStatement')">
            <div>-</div>
        </td>

        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('defText')">
            <div>-</div>
        </td>
        <td class="col-xs-1" ng-style="commentWidth" ng-show="viewSettings.isVisibleColumn('comment')">
            <div>-</div>
        </td>
    </tr>
</script>

<script type="text/ng-template" id="DatatypeReadTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td class="col-xs-2 col-fixed-250">
                                              <span style="width:60%" type="text"
                                                    name="name"
                                                    ng-bind="::node.name"></span>
            <span ng-bind="::node.description"></span>

        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('usage')">
            <div>-</div>
        </td>
        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('length')">
            <div>-</div>
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('confLength')">
            <div>-</div>
        </td>

        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('datatype')">
            <div>-</div>
        </td>

        <td class="col-xs-1 col-fixed-130" ng-show="viewSettings.isVisibleColumn('valueSet')">
            <div>-</div>
        </td>

        <td class="col-xs-1" ng-style="predWidth" ng-show="viewSettings.isVisibleColumn('predicate')">
            <div>-</div>
        </td>

        <td class="col-xs-2" ng-style="csWidth" ng-show="viewSettings.isVisibleColumn('confStatement')">
            <div>-</div>
        </td>

        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('defText')">
            <div>-</div>
        </td>
        <td class="col-xs-1" ng-style="commentWidth" ng-show="viewSettings.isVisibleColumn('comment')">
            <div>-</div>
        </td>
    </tr>
</script>

<script type="text/ng-template" id="DatatypeComponentEditTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td class="col-xs-2 col-fixed-250">
            <span class="label label-component label-icon">C</span>
             <span
                     tooltip-html="getComponentNodeName(node)" tooltip-append-to-body="true"
                     tooltip-class="constraints-tooltip" ng-bind-html="getComponentNodeName(node)" tooltip-trigger
                     tooltip-animation="false" tooltip-placement="left"
                     ></span>

        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('usage')">
            <div>
                <span ng-show="node.usage !== 'C'  || (node.usage === 'C' && countPredicate(node.position) === 0)">
                	<select class="form-control input-sm" name="usage"
                            ng-change="setUsage(node)"
                            required ng-model="node.usage" ng-options="usage for usage in config.usages"/>
                </span>

                <div ng-show="node.usage === 'C' && countPredicate(node.position) !== 0">
                    <p ng-repeat="p in datatype.predicates | filter:{constraintTarget:node.position + '[1]'}:true">
                        C({{p.trueUsage}}/{{p.falseUsage}})
                    </p>
                </div>
            </div>
        </td>
        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('length')">
            <div ng-controller="DatatypeRowCtrl">
                                            <span ng-form name="{{formName}}">
                                                <input style="width:45%" class="form-control"
                                                       name="minLength"
                                                       ng-change="recordDatatypeChange('component','edit',node.id,'minLength', node.minLength)"
                                                       ng-pattern="/^\d+$/"
                                                       ng-class="{ 'igl-has-error has-feedback' : {{formName}}.minLength.$invalid}"
                                                       ng-model="node.minLength" required ng-minlength="1">
                                                <input style="width:45%" class="form-control" type="text"
                                                       name="maxLength"
                                                       ng-change="recordDatatypeChange('component','edit',node.id,'maxLength', node.maxLength)"
                                                       ng-class="{ 'igl-has-error has-feedback' : {{formName}}.maxLength.$invalid}"
                                                       ng-pattern="/^\d+$|^\*?$/"
                                                       ng-model="node.maxLength" required>
                                            </span>
            </div>
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('confLength')">
            <div ng-controller="DatatypeRowCtrl">
                                            <span ng-form name="{{formName}}">
                                            <input style="width:50%" class="form-control" type="text"
                                                   name="confLength"
                                                   ng-change="recordDatatypeChange('component','edit',node.id,'confLength', node.confLength)"

                                                   ng-class="{ 'igl-has-error has-feedback' : {{formName}}.confLength.$invalid}"
                                                   ng-pattern="/^\d+$/"
                                                   ng-model="node.confLength">
                                            </span>
            </div>
        </td>

        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('datatype')">
            <div>
                <select class="form-control input-sm"
                        name="datatype"
                        ng-model="node.datatype"
                        ng-change="onDatatypeChange(node)"
                        required
                        ng-selected="dt.id === node.datatype"
                        ng-options="dt.id as dt.label for dt in datatypes | flavors:datatypesMap[node.datatype].name">
                </select>
            </div>
        </td>

        <td class="col-xs-1 col-fixed-130" ng-show="viewSettings.isVisibleColumn('valueSet')">
            <div ng-show="node.table != undefined && node.table !== null">
                <a ng-click="goToTable(tablesMap[node.table])" class="point">
                    <span>{{tablesMap[node.table].bindingIdentifier}}</span>
                </a>
                <a ng-click="mapTable(node)" class="point">
                    <span><i class="fa fa-pencil fa-fw"></i></span>
                </a>
                <a ng-click="deleteTable(node)" class="point">
                    <span><i class="fa fa-times fa-fw"></i></span>
                </a>
            </div>
            <div ng-show="(node.table == undefined || node.table === null) && isAvailableDTForTable(datatypesMap[node.datatype])">
                <a ng-click="mapTable(node)" class="point">
                    <span><i class="fa fa-plus fa-fw"></i></span>
                </a>
            </div>
        </td>

        <td class="col-xs-1" ng-style="predWidth" ng-show="viewSettings.isVisibleColumn('predicate')">
            <div>
                <div ng-show="countPredicate(node.position) === 0 && node.usage === 'C'">
                    <a ng-click="managePredicate(node)" class="point">
                        <i class="fa fa-plus fa-fw"></i>

                        <p class="warning">Need predicate</p>
                    </a>
                </div>
                <div ng-show="countPredicate(node.position) !== 0 && node.usage === 'C'">
                    <p ng-repeat="p in datatype.predicates | filter:{constraintTarget:node.position + '[1]'}:true">
                        <a ng-click="managePredicate(node)" tooltip-html="getPredicateAsString(p)"
                           tooltip-append-to-body="true"
                           tooltip-class="constraints-tooltip" ng-bind-html="getPredicateAsString(p)" tooltip-trigger
                           tooltip-animation="false" tooltip-placement="left"></a>
                    </p>
                </div>
            </div>
        </td>

        <td class="col-xs-2" ng-style="csWidth" ng-show="viewSettings.isVisibleColumn('confStatement')">
            <div>
                <div ng-show="countConformanceStatements(node.position) == 0">
                    <a ng-click="manageConformanceStatement(node)" class="point">
                        <i class="fa fa-plus fa-fw"></i>
                    </a>
                </div>
                <p ng-repeat="c in datatype.conformanceStatements | filter:{constraintTarget:node.position + '[1]'}:true">
                    <a ng-click="manageConformanceStatement(node)" tooltip-html="getConformanceStatementAsString(c)"
                       tooltip-append-to-body="true"
                       tooltip-class="constraints-tooltip" ng-bind-html="getConformanceStatementAsString(c)"
                       tooltip-trigger
                       tooltip-animation="false" tooltip-placement="left"></a>
                </p>
            </div>
        </td>

        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('defText')">
            <div>
                <a ng-click="openRichTextDlg(node, 'text','Definition Text', false)"
                   class="point">
                     <i class="fa fa-pencil fa-fw"></i>
                </a>
                <a ng-click="node.text = ''" ng-show="node.text !== '' && node.text !== null">
                    <i class="fa fa-times fa-fw"></i>
                </a>
            </div>
        </td>
        <td class="col-xs-1" ng-style="commentWidth" ng-show="viewSettings.isVisibleColumn('comment')">
                <textarea class="form-control" style="width:100%;height:100%" ng-model="node.comment">
                </textarea>
        </td>
    </tr>
</script>

<script type="text/ng-template" id="DatatypeComponentReadTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td class="col-xs-2 col-fixed-250">
            <span class="label label-component label-icon">C</span>
             <span
                     tooltip-html="getComponentNodeName(node)" tooltip-append-to-body="true"
                     tooltip-class="constraints-tooltip" ng-bind-html="getComponentNodeName(node)" tooltip-trigger
                     tooltip-animation="false" tooltip-placement="left"
                     ></span>
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('usage')">
            <div>
				<span ng-show="node.usage !== 'C'  || (node.usage === 'C' && countPredicate(node.position) === 0)">
                	<span>{{node.usage}}</span>
                </span>

                <div ng-show="node.usage === 'C' && countPredicate(node.position) !== 0">
                    <p ng-repeat="p in datatype.predicates | filter:{constraintTarget:node.position + '[1]'}:true">
                        C({{p.trueUsage}}/{{p.falseUsage}})
                    </p>
                </div>
            </div>
        </td>
        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('length')">
            [{{::node.minLength}},{{::node.maxLength}}]
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('confLength')">
            <span ng-bind="::node.confLength"></span>
        </td>

        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('datatype')">
            <div>
                {{::datatypesMap[node.datatype].label}}
            </div>
        </td>

        <td class="col-xs-1 col-fixed-130" ng-show="viewSettings.isVisibleColumn('valueSet')">
            <div>
                <div ng-show="node.table != undefined  && node.table !== null">
                    <a ng-click="goToTable(tablesMap[node.table])"
                       class="point">
                        {{::tablesMap[node.table].bindingIdentifier}}
                    </a>
                </div>
            </div>
        </td>

        <td class="col-xs-1" ng-style="predWidth" ng-show="viewSettings.isVisibleColumn('predicate')">
            <p ng-repeat="p in datatype.predicates | filter:{constraintTarget:node.position + '[1]'}:true">
                <span tooltip-html="getPredicateAsString(p)"
                      tooltip-append-to-body="true"
                      tooltip-class="constraints-tooltip" ng-bind-html="getPredicateAsString(p)" tooltip-trigger
                      tooltip-animation="false" tooltip-placement="left"></span>
            </p>
        </td>

        <td class="col-xs-2" ng-style="csWidth" ng-show="viewSettings.isVisibleColumn('confStatement')">
            <p ng-repeat="c in datatype.conformanceStatements | filter:{constraintTarget:node.position + '[1]'}:true">
                <span tooltip-html="getConformanceStatementAsString(c)"
                      tooltip-append-to-body="true"
                      tooltip-class="constraints-tooltip" ng-bind-html="getConformanceStatementAsString(c)"
                      tooltip-trigger
                      tooltip-animation="false" tooltip-placement="left"></span>
            </p>
        </td>

        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('defText')">
            <a ng-show="node.text !== '' && node.text !== null"
               ng-click="openRichTextDlg(node, 'text','Definition Text', true)"
               class="point">
                <i class="fa fa-eye fa-fw"></i>
            </a>
        </td>
        <td class="col-xs-1" ng-style="commentWidth" ng-show="viewSettings.isVisibleColumn('comment')">

            <textarea class="form-control" style="width:100%;height:100%" ng-model="node.comment" ng-show="node.comment !== '' && node.comment !== null"  disabled>
            </textarea>
        </td>
    </tr>
</script>

<script type="text/ng-template" id="DatatypeSubComponentEditTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td class="col-xs-2 col-fixed-250">
                                        <span>
                                            <span class="label label-sub-component label-icon">S</span>
                                             <span
                                                     tooltip-html="getComponentNodeName(node)"
                                                     tooltip-append-to-body="true"
                                                     tooltip-class="constraints-tooltip"
                                                     ng-bind-html="getComponentNodeName(node)" tooltip-trigger
                                                     tooltip-animation="false" tooltip-placement="left"
                                                     ></span>
                                        </span>
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('usage')">
			<span ng-show="node.usage !== 'C'  || (node.usage === 'C' && countPredicateOnSubComponent(node.position, node.id) === 0)">
            	{{node.usage}}
            </span>

            <div ng-show="node.usage === 'C' && countPredicateOnSubComponent(node.position, node.id) !== 0">
                <p ng-repeat="p in parentsMap[node.id].predicates  | filter:{constraintTarget:node.position + '[1]'}:true">
                    C({{p.trueUsage}}/{{p.falseUsage}})
                </p>
            </div>
        </td>
        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('length')">
            <div>
                -
            </div>
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('confLength')">
            <div>
                -
            </div>
        </td>

        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('datatype')">
            <div>
                <a ng-click="goToDatatype(datatypesMap[node.datatype])"
                   class="point">{{datatypesMap[node.datatype].label}}
                </a>
            </div>
        </td>

        <td class="col-xs-1 col-fixed-130" ng-show="viewSettings.isVisibleColumn('valueSet')">
            <a ng-click="goToTable(tablesMap[node.table])"
               class="point" ng-show="node.table !== null && node.table !== undefined">
                {{tablesMap[node.table].bindingIdentifier}}
            </a>
        </td>

        <td class="col-xs-1" ng-style="predWidth" ng-show="viewSettings.isVisibleColumn('predicate')">
            <p ng-repeat="p in parentsMap[node.id].predicates  | filter:{constraintTarget:node.position + '[1]'}:true"
               tooltip-html="getPredicateAsString(p)" tooltip-append-to-body="true"
               tooltip-class="constraints-tooltip" ng-bind-html="getPredicateAsString(p)" tooltip-trigger
               tooltip-animation="false" tooltip-placement="left">
            </p>
        </td>

        <td class="col-xs-2" ng-style="csWidth" ng-show="viewSettings.isVisibleColumn('confStatement')">
            <p ng-repeat="c in parentsMap[node.id].conformanceStatements  | filter:{constraintTarget:node.position + '[1]'}:true"
               tooltip-html="getConformanceStatementAsString(c)" tooltip-append-to-body="true"
               tooltip-class="constraints-tooltip" ng-bind-html="getConformanceStatementAsString(c)" tooltip-trigger
               tooltip-animation="false" tooltip-placement="left">
            </p>
        </td>

        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('usage')">
            <div>
                <a ng-click="openRichTextDlg(node, 'text', 'Definition Text', true)"
                   class="point">
                    <i class="fa fa-eye fa-fw"></i>
                </a>
            </div>
        </td>
        <td class="col-xs-1" ng-style="commentWidth" ng-show="viewSettings.isVisibleColumn('comment')">
            <textarea class="form-control" style="width:100%;height:100%" ng-model="node.comment">
            </textarea>
        </td>
    </tr>
</script>

<script type="text/ng-template" id="DatatypeSubComponentReadTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td class="col-xs-2 col-fixed-250">
                                        <span>
                                            <span class="label label-sub-component label-icon">S</span>
                                              <span
                                                      tooltip-html="getComponentNodeName(node)"
                                                      tooltip-append-to-body="true"
                                                      tooltip-class="constraints-tooltip"
                                                      ng-bind-html="getComponentNodeName(node)" tooltip-trigger
                                                      tooltip-animation="false" tooltip-placement="left"
                                                      ></span>
                                        </span>
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('usage')">
			<span ng-show="node.usage !== 'C'  || (node.usage === 'C' && countPredicateOnSubComponent(node.position, node.id) === 0)">
            	{{node.usage}}
            </span>

            <div ng-show="node.usage === 'C' && countPredicateOnSubComponent(node.position, node.id) !== 0">
                <p ng-repeat="p in parentsMap[node.id].predicates  | filter:{constraintTarget:node.position + '[1]'}:true">
                    C({{p.trueUsage}}/{{p.falseUsage}})
                </p>
            </div>
        </td>
        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('length')">
            <div>
                -
            </div>
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('confLength')">
            <div>
                -
            </div>
        </td>

        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('datatype')">
            <a ng-click="goToDatatype(datatypesMap[node.datatype])"
               class="point">{{::datatypesMap[node.datatype].label}}
            </a>
        </td>

        <td class="col-xs-1 col-fixed-130" ng-show="viewSettings.isVisibleColumn('valueSet')">
            <a ng-click="goToTable(tablesMap[node.table])"
               class="point" ng-show="node.table !== null && node.table !== undefined">
                {{::tablesMap[node.table].bindingIdentifier}}
            </a>
        </td>

        <td class="col-xs-1" ng-style="predWidth" ng-show="viewSettings.isVisibleColumn('predicate')">
            <p ng-repeat="p in parentsMap[node.id].predicates  | filter:{constraintTarget:node.position + '[1]'}:true"
               tooltip-html="getPredicateAsString(p)" tooltip-append-to-body="true"
               tooltip-class="constraints-tooltip" ng-bind-html="getPredicateAsString(p)" tooltip-trigger
               tooltip-animation="false" tooltip-placement="left">
            </p>
        </td>

        <td class="col-xs-2" ng-style="csWidth" ng-show="viewSettings.isVisibleColumn('confStatement')">
            <p ng-repeat="c in parentsMap[node.id].conformanceStatements  | filter:{constraintTarget:node.position + '[1]'}:true"
               tooltip-html="getConformanceStatementAsString(c)" tooltip-append-to-body="true"
               tooltip-class="constraints-tooltip" ng-bind-html="getConformanceStatementAsString(c)" tooltip-trigger
               tooltip-animation="false" tooltip-placement="left">
            </p>
        </td>

        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('defText')">
            <a ng-click="openRichTextDlg(node, 'text', 'Definition Text', true)"
               class="point">
                <i class="fa fa-eye fa-fw"></i>
            </a>
        </td>
        <td class="col-xs-1" ng-style="commentWidth" ng-show="viewSettings.isVisibleColumn('comment')">
            <textarea class="form-control" style="width:100%;height:100%" ng-model="node.comment" ng-show="node.comment !== '' && node.comment !== null"  disabled>
            </textarea>
        </td>
    </tr>
</script>

<script type="text/ng-template" id="DatatypeReferencesCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Datatype References Found
            <button class="btn btn-primary pull-right" ng-click="ok()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Close</span>
            </button>
        </h3>
    </div>
    <div class="modal-body">
        <p>We cannot delete this datatype because it is being referenced by elements below:</p>
        <div class="igl-table">
            <table class="table table-striped table-bordered">
                <thead>
                <tr class="tbl-header">
                    <th>Name</th>
                    <th>Path</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="ref in references">
                    <td>
                                        <span>

                                            <span ng-show="ref.type === 'field'"
                                                     class="label label-field label-icon">G</span>
                                            <span ng-show="ref.type === 'component'"
                                                  class="label label-component label-icon">C</span>
                                            <span ng-show="ref.type === 'subcomponent'"
                                                  class="label label-sub-component label-icon">S</span>

                                             <span style="width:60%"
                                                   name="name"
                                                   ng-bind="ref.name"></span>
                                             <span ng-bind="ref.description"></span>
                                         </span>

                    </td>
                    <td>
                        <div>{{ref.path}}</div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ok()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Close</span>
        </button>
    </div>
</script>

<script type="text/ng-template" id="PredicateDatatypeCtrl.html">
<div class="modal-header">
    <h3 class="modal-title">Predicate for {{datatype.name}}-{{selectedNode.position}}</h3>
</div>
<div class="modal-body">
<form role="form">
<h5>Predicate of {{datatype.name}}.{{selectedNode.position}}</h5>

<div class="table-responsive">
    <table class="table table-striped table-bordered">
        <thead>
        <tr class="tbl-header">
            <th class="col-md-9">Desciption</th>
            <th class="col-md-1">True Usage</th>
            <th class="col-md-1">False Usage</th>
            <th class="col-md-1"></th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="p in datatype.predicates | filter:{constraintTarget:selectedNode.position + '[1]'}:true">
            <td class="col-md-9">{{p.description}}</td>
            <td class="col-md-1">{{p.trueUsage}}</td>
            <td class="col-md-1">{{p.falseUsage}}</td>
            <td class="col-md-1">
                <a ng-click="deletePredicate(p)" class="point">
                    <span><i class="fa fa-times fa-fw"></i></span>
                </a>
            </td>
        </tr>
        </tbody>
    </table>
</div>
<h5>Define New predicate</h5>
<label class="control-label" for="constraintTypeSelect">Constraint Type: </label>
<select name="constraintTypeSelect" ng-model="constraintType">
    <option value="Complex">Complex</option>
    <option value="Plain">Plain</option>
</select>

<h5>Define plain constraint</h5>

<div class="table-responsive">
<table class="table table-striped table-bordered">
<thead>
<tr class="tbl-header">
    <th class="col-md-9" colspan="4">Desciption</th>
    <th class="col-md-1" colspan="1" rowspan="2">True Usage</th>
    <th class="col-md-1" colspan="1" rowspan="2">False Usage</th>
    <th class="col-md-1" colspan="1" rowspan="2"></th>
</tr>
<tr class="tbl-header">
    <th class="col-md-2" colspan="1">Node</th>
    <th class="col-md-2" colspan="1">Verb</th>
    <th class="col-md-3" colspan="1">Constraint</th>
    <th class="col-md-2" colspan="1">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="col-md-2" colspan="1">
    <span>{{newConstraint.datatype}}.</span>
    <select name="component"
            ng-change="updateComponent_1()"
            ng-model="newConstraint.component_1"
            ng-options="component as component.position for component in datatype.components">
    </select>
        		<span ng-show="datatypesMap[newConstraint.component_1.datatype].components.length > 0">.
        			<select name="subComponent"
                            ng-model="newConstraint.subComponent_1"
                            ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_1.datatype].components">
                    </select>
    			</span>
</td>
<td class="col-md-2" colspan="1">
    <select name="verb" class="form-control"
            ng-change=""
            ng-model="newConstraint.verb"
            ng-options="constraintVerb for constraintVerb in config.constraintVerbs | orderBy:'toString()'">
    </select>
</td>
<td class="col-md-3" colspan="1">
    <select name="contraintType" class="form-control"
            ng-change=""
            ng-model="newConstraint.contraintType"
            ng-options="contraintType for contraintType in config.constraintTypes | orderBy:'toString()'">
    </select>
</td>
<td class="col-md-2" colspan="1">
                		<span ng-show="newConstraint.contraintType == 'a literal value'">
                			<input style="width:100%" class="form-control" ng-model="newConstraint.value"
                                   placeholder="Literal Value" type="text"/>
                		</span>
                		<span ng-show="newConstraint.contraintType == 'one of list values'">
                			<input style="width:100%" class="form-control" ng-model="newConstraint.value"
                                   placeholder="Comma-Separated Values(CSV)" type="text"/>
                		</span>
                		<span ng-show="newConstraint.contraintType == 'formatted value'">
                			<select name="format" class="form-control"
                                    ng-model="newConstraint.value"
                                    ng-options="predefinedFormat for predefinedFormat in config.predefinedFormats">
                            </select>
                		</span>
						<span ng-show="newConstraint.contraintType == 'identical to another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'not-equal to another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'greater than another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to or greater than another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'less than another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to or less than another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to'">
                			<input style="width:100%" class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'not-equal to'">
                			<input style="width:100%" class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'greater than'">
                			<input style="width:100%" class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to or greater than'">
                			<input style="width:100%" class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'less than'">
                			<input style="width:100%" class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to or less than'">
                			<input style="width:100%" class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                			<span>ValueSet ID: </span>
							<select name="valueSetId" ng-model="newConstraint.valueSetId">
                                <option ng-repeat="table in tables|orderBy:'+bindingIdentifier'"
                                        value="{{table.bindingIdentifier}}">
                                    {{table.bindingIdentifier}}
                                </option>
                            </select>
							<br/>
							<span>BindingStrength: </span>
							<select name="bindingStrength" ng-model="newConstraint.bindingStrength">
                                <option value="R">R</option>
                                <option value="S">S</option>
                                <option value="U">U</option>
                            </select>
							<br/>
							<span>BindingLocation: </span>
							<input ng-model="newConstraint.bindingLocation" type="text"/>
                		</span>
</td>
<td class="col-md-1" colspan="1">
    <select name="trueUsage" class="form-control"
            ng-model="newConstraint.trueUsage"
            ng-options="usage for usage in config.usages">
    </select>
</td>

<td class="col-md-1" colspan="1">
    <select name="falseUsage" class="form-control"
            ng-model="newConstraint.falseUsage"
            ng-options="usage for usage in config.usages">
    </select>
</td>

<td class="col-md-1" colspan="1">
    <a ng-click="initPredicate()" class="point">
        <span><i class="fa fa-times fa-fw"></i></span>
    </a>

    <a ng-click="updatePredicate()" class="point">
        <span><i class="fa fa-plus fa-fw"></i></span>
    </a>
</td>
</tr>
</tbody>
</table>
</div>

<div class="table-responsive">
    <table ng-show="constraintType == 'Complex'" class="table table-striped table-bordered">
        <thead>
        <tr class="tbl-header">
            <th class="col-md-1">ID</th>
            <th class="col-md-8">Desciption</th>
            <th class="col-md-1">True Usage</th>
            <th class="col-md-1">False Usage</th>
            <th class="col-md-1"></th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="p in newComplexConstraint">
            <td class="col-md-1">{{p.constraintId}}</td>
            <td class="col-md-8">{{p.description}}</td>
            <td class="col-md-1">{{p.trueUsage}}</td>
            <td class="col-md-1">{{p.falseUsage}}</td>
            <td class="col-md-1">
                <a ng-click="deletePredicateForComplex(p)" class="point">
                    <span><i class="fa fa-minus fa-fw"></i></span>
                </a>
            </td>
        </tr>
        </tbody>
    </table>
</div>
<div class="table-responsive">
    <table ng-show="constraintType == 'Complex'" class="table table-striped table-bordered">
        <tbody>
        <tr>
            <td class="col-md-2">Merge Two Constraints:</td>
            <td class="col-md-9">
                <span>First Constraint: </span>
                <select ng-show="constraintType == 'Complex'"
                        name="firstConstraintSelect"
                        ng-model="firstConstraint"
                        ng-options="constraint as constraint.constraintId for constraint in newComplexConstraint">
                </select>

                <span>Second Constraint: </span>
                <select name="secondConstraintSelect"
                        ng-model="secondConstraint"
                        ng-options="constraint as constraint.constraintId for constraint in newComplexConstraint">
                </select>

                <span>Composite Type: </span>
                <select name="compositeTypeSelect"
                        ng-model="compositeType">
                    <option value="AND">AND</option>
                    <option value="OR">OR</option>
                </select>
            </td>
            <td class="col-md-1">
                <a ng-click="compositeConformanceStatements()" class="point">
                    <span><i class="fa fa-link fa-fw"></i></span>
                </a>
            </td>
        </tr>
        <tr>
            <td class="col-md-2">Add Complex Constraint:</td>
            <td class="col-md-9">
                <span>Complex Constraint: </span>
                <select name="complexConstraintSelect"
                        ng-model="complexConstraint"
                        ng-options="constraint as constraint.constraintId for constraint in newComplexConstraint">
                </select>
            </td>
            <td class="col-md-1">
                <a ng-click="addComplexConformanceStatement()" class="point">
                    <span><i class="fa fa-plus fa-fw"></i></span>
                </a>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</form>
</div>
<div class="modal-footer">
    <button class="btn btn-primary" ng-click="ok()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Close</span>
    </button>
</div>
</script>

<script type="text/ng-template" id="ConformanceStatementDatatypeCtrl.html">
<div class="modal-header">
    <h3 class="modal-title">Conformance statement for {{datatype.name}}-{{selectedNode.position}}</h3>
</div>
<div class="modal-body">
<form role="form">
<h5>Conformance statements of {{datatype.name}}.{{selectedNode.position}}</h5>

<div class="table-responsive">
    <table class="table table-striped table-bordered">
        <thead>
        <tr class="tbl-header">
            <th class="col-md-2">ID</th>
            <th class="col-md-9">Desciption</th>
            <th class="col-md-1"></th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="c in datatype.conformanceStatements | filter:{constraintTarget:selectedNode.position + '[1]'}:true">
            <td class="col-md-2">{{c.constraintId}}</td>
            <td class="col-md-9">{{c.description}}</td>
            <td class="col-md-1">
                <a ng-click="deleteConformanceStatement(c)" class="point">
                    <span><i class="fa fa-times fa-fw"></i></span>
                </a>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<h5>Define plain constraint</h5>
<h5>Define new conformance statement</h5>

<label class="control-label" for="constraintTypeSelect">Constraint Type: </label>
<select name="constraintTypeSelect" ng-model="constraintType">
    <option value="Complex">Complex</option>
    <option value="Plain">Plain</option>
</select>

<div class="table-responsive">
<table class="table table-striped table-bordered">
<thead>
<tr class="tbl-header">
    <th class="col-md-2" colspan="1" rowspan="2">ID</th>
    <th class="col-md-9" colspan="4">Desciption</th>
    <th class="col-md-1" colspan="1" rowspan="2"></th>
</tr>
<tr class="tbl-header">
    <th class="col-md-2" colspan="1">Node</th>
    <th class="col-md-2" colspan="1">Verb</th>
    <th class="col-md-3" colspan="1">Constraint</th>
    <th class="col-md-2" colspan="1">Value</th>
</tr>
</thead>
<tbody>
<tr>
    <td class="col-md-2" colspan="1">
        <input style="width:100%" class="form-control" ng-model="newConstraint.constraintId"
               placeholder="Type ID" type="text"/>
    </td>
    <td class="col-md-2" colspan="1">
        <span>{{newConstraint.datatype}}.</span>
        <select name="component" ng-change="updateComponent_1()" ng-model="newConstraint.component_1"
                ng-options="component as component.position for component in datatype.components"/>
       	<span ng-show="datatypesMap[newConstraint.component_1.datatype].components.length > 0">.
        	<select name="subComponent" ng-model="newConstraint.subComponent_1"
                    ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_1.datatype].components"/>
    	</span>
    </td>
    <td class="col-md-2" colspan="1">
        <select name="verb" class="form-control"
                ng-change=""
                ng-model="newConstraint.verb"
                ng-options="constraintVerb for constraintVerb in config.constraintVerbs | orderBy:'toString()'">
        </select>
    </td>
    <td class="col-md-3" colspan="1">
        <select name="contraintType" class="form-control"
                ng-change=""
                ng-model="newConstraint.contraintType"
                ng-options="contraintType for contraintType in config.constraintTypes | orderBy:'toString()'">
        </select>
    </td>
    <td class="col-md-2" colspan="1">
                		<span ng-show="newConstraint.contraintType == 'a literal value'">
                			<input style="width:100%" ng-model="newConstraint.value"
                                   placeholder="Literal Value" type="text"/>
                		</span>
                		<span ng-show="newConstraint.contraintType == 'one of list values'">
                			<input style="width:100%" ng-model="newConstraint.value"
                                   placeholder="Comma-Separated Values(CSV)" type="text"/>
                		</span>
                		<span ng-show="newConstraint.contraintType == 'formatted value'">
                			<select name="format"
                                    ng-model="newConstraint.value"
                                    ng-options="predefinedFormat for predefinedFormat in config.predefinedFormats">
                            </select>
                		</span>
                		<span ng-show="newConstraint.contraintType == 'identical to another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'not-equal to another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'greater than another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to or greater than another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'less than another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to or less than another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to'">
                			<input style="width:100%" class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'not-equal to'">
                			<input style="width:100%" class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'greater than'">
                			<input style="width:100%" class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to or greater than'">
                			<input style="width:100%" class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'less than'">
                			<input style="width:100%" class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to or less than'">
                			<input style="width:100%" class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                			<span>ValueSet ID: </span>
							<select name="valueSetId" ng-model="newConstraint.valueSetId">
                                <option ng-repeat="table in tables|orderBy:'+bindingIdentifier'"
                                        value="{{table.bindingIdentifier}}">
                                    {{table.bindingIdentifier}}
                                </option>
                            </select>
							<br/>
							<span>BindingStrength: </span>
							<select name="bindingStrength" ng-model="newConstraint.bindingStrength">
                                <option value="R">R</option>
                                <option value="S">S</option>
                                <option value="U">U</option>
                            </select>
							<br/>
							<span>BindingLocation: </span>
							<input ng-model="newConstraint.bindingLocation" type="text"/>
                		</span>

    </td>
    <td class="col-md-1" colspan="1">
        <a ng-click="initConformanceStatement()" class="point">
            <span><i class="fa fa-times fa-fw"></i></span>
        </a>

        <a ng-click="addConformanceStatement()" class="point">
            <span><i class="fa fa-plus fa-fw"></i></span>
        </a>
    </td>
</tr>
</tbody>
</table>
</div>

<div class="table-responsive">
    <table ng-show="constraintType == 'Complex'" class="table table-striped table-bordered">
        <thead>
        <tr class="tbl-header">
            <th class="col-md-2">Plain Constraint ID</th>
            <th class="col-md-9">Desciption</th>
            <th class="col-md-1"></th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="c in newComplexConstraint">
            <td class="col-md-2">{{c.constraintId}}</td>
            <td class="col-md-9">{{c.description}}</td>
            <td class="col-md-1">
                <a ng-click="deleteConformanceStatementForComplex(c)" class="point">
                    <span><i class="fa fa-minus fa-fw"></i></span>
                </a>
            </td>
        </tr>
        </tbody>
    </table>
</div>
<div class="table-responsive">
    <table ng-show="constraintType == 'Complex'" class="table table-striped table-bordered">
        <tbody>
        <tr>
            <td class="col-md-2">Merge Two Constraints:</td>
            <td class="col-md-9">
                <span>First Constraint: </span>
                <select ng-show="constraintType == 'Complex'"
                        name="firstConstraintSelect"
                        ng-model="firstConstraint"
                        ng-options="constraint as constraint.constraintId for constraint in newComplexConstraint">
                </select>

                <span>Second Constraint: </span>
                <select name="secondConstraintSelect"
                        ng-model="secondConstraint"
                        ng-options="constraint as constraint.constraintId for constraint in newComplexConstraint">
                </select>

                <span>Composite Type: </span>
                <select name="compositeTypeSelect" ng-model="compositeType">
                    <option value="AND">AND</option>
                    <option value="OR">OR</option>
                    <option value="IFTHEN">IFTHEN</option>
                </select>
            </td>
            <td class="col-md-1">
                <a ng-click="compositeConformanceStatements()" class="point">
                    <span><i class="fa fa-link fa-fw"></i></span>
                </a>
            </td>
        </tr>
        <tr>
            <td class="col-md-2">Add Complex Constraint:</td>
            <td class="col-md-9">
                <span>Complex Constraint ID: </span>
                <input ng-model="newComplexConstraintId" type="text"/>
                <span>Complex Constraint: </span>
                <select name="complexConstraintSelect"
                        ng-model="complexConstraint"
                        ng-options="constraint as constraint.constraintId for constraint in newComplexConstraint">
                </select>
            </td>
            <td class="col-md-1">
                <a ng-click="addComplexConformanceStatement()" class="point">
                    <span><i class="fa fa-plus fa-fw"></i></span>
                </a>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</form>
</div>
<div class="modal-footer">
    <button class="btn btn-primary" ng-click="ok()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Close</span>
    </button>
</div>
</script>

<script type="text/ng-template" id="TableMappingDatatypeCtrl.html">
    <div class="modal-header modal-wide">
        <h3 class="modal-title">Edit mapping Table for {{datatype.name}}.{{selectedNode.position}}</h3>
    </div>
    <div class="modal-body">
        <div class="row">
            <form role="form">
                <div class="col-sm-6">
                    <h5>List of Tables</h5>
					
					<div class="igl-table">
                    	<table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
							<thead>
                            	<tr class="tbl-header">
									<th data-ng-click="predicate = 'bindingIdentifier'; reverse=!reverse">ID 
    									<i ng-show="reverse && predicate==='bindingIdentifier'" class="fa fa-sort-desc"></i>
										<i ng-show="!reverse && predicate==='bindingIdentifier'" class="fa fa-sort-asc"></i>
										<i ng-show="predicate!=='bindingIdentifier'" class="fa fa-sort"></i>
									</th>
									<th data-ng-click="predicate = 'name'; reverse=!reverse">Name 
    									<i ng-show="reverse && predicate==='name'" class="fa fa-sort-desc"></i>
										<i ng-show="!reverse && predicate==='name'" class="fa fa-sort-asc"></i>
										<i ng-show="predicate!=='name'" class="fa fa-sort"></i>
									</th>
                            	</tr>
                            	<tr>
                                	<th>
										<input type="text" class="form-control" placeholder="Search by id" ng-model="searchTableValue.bindingIdentifier"/>
                                	</th>
									<th>
										<input type="text" class="form-control" placeholder="Search by name" ng-model="searchTableValue.name"/>
                                	</th>
                            	</tr>
                            </thead>
							<tbody>
								<tr ng-repeat="table in tables|filter:searchTableValue|orderBy:predicate:reverse">
                                	<td>
                                    	<a ng-click="selectTable(table)">{{table.bindingIdentifier}}</a>
                                	</td>
                                	<td ng-bind-html="table.name"></td>
                            	</tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-sm-6">
				<h5>Selected Table for {{datatype.name}}.{{selectedNode.position}}</h5>
	 			<span ng-show="selectedTable != undefined">
	 				<div class="row">
                        <div class="col-sm-2">
                            <p>ID:</p>
                            <p>Extensibility:</p>
                        </div>
                        <div class="col-sm-4">
                            <p>{{selectedTable.bindingIdentifier}}</p>
                            <p>{{selectedTable.extensibility}}</p>
                        </div>
						<div class="col-sm-2">
                            <p>Name:</p>
                            <p>Stability:</p>
                        </div>
                        <div class="col-sm-4">
                            <p>{{selectedTable.name}}</p>
                            <p>{{selectedTable.stability}}</p>
                        </div>
                    </div>

					<h5>List of Codes</h5>
					
					<div class="igl-table">
                    	<table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
							<thead>
                            	<tr class="tbl-header">
									<th data-ng-click="predicate = 'value'; reverse=!reverse">Value 
    									<i ng-show="reverse && predicate==='value'" class="fa fa-sort-desc"></i>
										<i ng-show="!reverse && predicate==='value'" class="fa fa-sort-asc"></i>
										<i ng-show="predicate!=='value'" class="fa fa-sort"></i>
									</th>
									<th data-ng-click="predicate = 'label'; reverse=!reverse">Description 
    									<i ng-show="reverse && predicate==='label'" class="fa fa-sort-desc"></i>
										<i ng-show="!reverse && predicate==='label'" class="fa fa-sort-asc"></i>
										<i ng-show="predicate!=='label'" class="fa fa-sort"></i>
									</th>
									<th>Codesys</th>
                                	<th>Usage</th>
                            	</tr>
                            	<tr>
                                	<th>
										<input type="text" class="form-control" placeholder="Search by value" ng-model="searchCodeValue.value"/>
                                	</th>
									<th>
										<input type="text" class="form-control" placeholder="Search by description" ng-model="searchCodeValue.label"/>
                                	</th>
                            	</tr>
                            </thead>
							<tbody>
								<tr ng-repeat="c in selectedTable.codes|filter:searchCodeValue|orderBy:predicate:reverse">
                                	<td ng-bind-html="c.value"></td>
                                	<td ng-bind-html="c.label"></td>
                               		<td ng-bind-html="c.codeSystem"></td>
                                	<td ng-bind-html="c.codeUsage"></td>
                            	</tr>
                            </tbody>
                        </table>
                    </div>
	 			</span>
                </div>
            </form>
        </div>
    </div>
    <div class="modal-footer">
		<button ng-show="changed" type="button" ng-click="mappingTable()" class="btn btn-info">Select the table and close the window</button>
		<button ng-show="changed" type="button" ng-click="ok()" class="btn btn-warning">Close without saving change</button>
		<button ng-show="!changed" class="btn btn-primary" ng-click="ok()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span></button>
    </div>
</script>

