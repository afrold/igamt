<style id="antiClickjack">body {
    display: none !important;
}</style>
<script type="text/javascript">
    if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
    } else {
        top.location = self.location;
    }
</script>
<script type="text/ng-template" id="EditDatatypes.html">
<div ng-controller="DatatypeListCtrl" ng-init="init()" class="container">
<div ng-show="loadingSelection"
     style="text-align: center;">
    <i class="fa fa-spinner fa-pulse fa-align-center fa-2x"></i>
</div>
<div ng-show="!loadingSelection">
<div ng-show="datatype !== null" id="executionPanel">
<!--<accordion close-others="false">-->
<!--<accordion-group is-open="true" panel-class="panel-info">-->

<!--<accordion-heading>-->
<!--<i class="fa"-->
<!--ng-class="{'fa-caret-down': accordi.metaData, 'fa-caret-right': !accordi.metaData}"></i>-->
<!--MetaData-->
<!--</accordion-heading>-->

<form name="datatypeForm" novalidate class="form-horizontal">
<div class="row">
    <div class="col-md-12 igl-page-header">
        <span class="header4 pull-left">Data Type: {{getLabel(datatype)}}</span>
                     <span class="pull-right">
         <button title="Save Changes" type="button" class="btn btn-xs btn-success"
                 ng-disabled="datatypeForm.$invalid"
                 ng-hide="viewSettings.tableReadonly || datatype.scope !== 'USER'"
                 ng-click="save()">
             <span><i class="fa fa-check fa-fw"></i> Apply</span>
         </button>

                         <button title="Cancel Changes" type="button" class="btn btn-xs btn-warning"
                                 ng-hide="viewSettings.tableReadonly || datatype.scope !== 'USER'"
                                 ng-click="cancel()">
                             <span><i class="fa fa-times fa-fw"></i> Cancel</span>
                         </button>
    </span>

    </div>


</div>
<div class="row">
    <div class="col-md-12">
        <div class="page-header">
            <span class="header5">MetaData</span>
        </div>
    </div>
    <div class="col-md-12">
        <div class="col-md-2 col-margin">
            <div class="form-group control-group"
                 ng-class="{'igl-has-error has-feedback' : datatypeForm.name.$invalid}">
                <label class="control-label">Name</label>
                <input type="text" disabled
                       name="name" class="form-control" ng-model="datatype.name"
                       required>
            </div>
        </div>

        <div class="col-md-2 col-margin">
            <div class="form-group control-group"
                 ng-class="{'igl-has-error has-feedback' : datatypeForm.description.$invalid}">
                <label class="control-label">Description</label>
                <input type="text" disabled
                       ng-change="recordChanged()"
                       ng-disabled="viewSettings.tableReadonly || datatype.scope !== 'USER'"
                       name="description" class="form-control" ng-model="datatype.description"
                       required>
            </div>
        </div>

        <div class="col-md-2 col-margin">
            <div class="form-group control-group"
                 ng-class="{'igl-has-error has-feedback' : datatypeForm.label.$invalid}">
                <label class="control-label">Extension</label>
                <input type="text"
                       ng-change="recordChanged()"
                       ng-disabled="viewSettings.tableReadonly || datatype.scope !== 'USER'"
                       name="label" id="ext" class="form-control" ng-model="datatype.ext"
                       required aria-describedby="helpBlock2">
                                    <span id="helpBlock2" class="help-block" style="color:red"
                                          ng-show="isDuplicated(datatype,'label', datatypes)">Extension already used</span>
            </div>
        </div>
        <div class="col-md-2 col-margin">
            <div class="form-group control-group"
                 ng-class="{'igl-has-error has-feedback' : datatypeForm.comment.$invalid}">
                <label class="control-label">Comment</label>
                <input type="text"
                       ng-disabled="viewSettings.tableReadonly || datatype.scope !== 'USER'"
                       ng-change="recordDatatypeChange('datatype','edit',datatype.id,'comment', datatype.comment)"
                       name="comment" class="form-control"
                       ng-model="datatype.comment">
            </div>
        </div>

    </div>

    <div class="col-md-12">
        <div class="col-md-12 col-margin">
            <div class="form-group control-group"
                 ng-class="{'igl-has-error has-feedback' : datatypeForm.purposeAndUse.$invalid}">
                <label class="control-label">Purpose And Use</label>
                <textarea style="width:100%;height:100%"
                          ng-disabled="viewSettings.tableReadonly || datatype.scope !== 'USER'"
                          ng-change="recordDatatypeChange('datatype','edit',datatype.id,'purposeAndUse', datatype.purposeAndUse)"
                          name="comment" class="form-control"
                          class="form-control"
                          ng-model="node.purposeAndUse">
                </textarea>
            </div>
        </div>
    </div>

    <div class="col-md-12">
        <div class="col-md-12 col-margin">
            <div class="form-group control-group"
                 ng-class="{'igl-has-error has-feedback' : datatypeForm.text.$invalid}">
                <label class="control-label">Definition Text</label>

                <div ng-if="!viewSettings.tableReadonly && datatype.scope === 'USER'">
                    <textarea froala="froalaEditorOptions" ng-model="datatype.usageNote" name="text"
                              id="text"
                              ng-change="recordChanged()"></textarea>
                </div>

                <div ng-if="viewSettings.tableReadonly || datatype.scope !== 'USER'">
                    <div class="fr-view">
                        <div froala-view="datatype.usageNote"></div>
                    </div>
                </div>

            </div>
        </div>
    </div>


</div>
<div class="row" style="margin-top:20px">
    <div class="col-md-12 igl-page-header">
<span class="pull-left">
    <span class="header5">Definition</span>
                                    <!--<div  style="margin-left:15px" class="btn-group btn-group-xs" data-toggle="buttons">-->
                                        <!--<label class="btn btn-primary" ng-click="viewSettings.setTableRelevance(true)"-->
                                               <!--ng-class="{'active': viewSettings.tableRelevance}">-->
                                            <!--<input type="radio" ng-model="viewSettings.tableRelevance" ng-click="viewSettings.setTableRelevance(viewSettings.tableRelevance)" autocomplete="off" checked>R,RE,C(only)-->
                                        <!--</label>-->
                                        <!--<label class="btn  btn-primary" ng-click="viewSettings.setTableRelevance(false)"-->
                                               <!--ng-class="{'active': !viewSettings.tableRelevance}">-->
                                            <!--<input type="radio" ng-model="viewSettings.tableRelevance"  autocomplete="off">R,RE,C,O,X (All)-->
                                        <!--</label>-->
                                    <!--</div>-->
                             </span>
                            <span class="pull-right">
                                <span style="margin-right: 20px" ng-dropdown-multiselect=""
                                      options="viewSettings.columnOptions"

                                      selected-model="viewSettings.visibleColumns"
                                      events="viewSettings.events" extra-settings="viewSettings.extra"
                                      translation-texts="viewSettings.translations"></span>
                            </span>

    </div>

    <div class="col-md-12">
        <!--</form>-->
        <!--&lt;!&ndash;</accordion-group>&ndash;&gt;-->
        <!--&lt;!&ndash;<accordion-group is-open="true" panel-class="panel-info">&ndash;&gt;-->

        <!--&lt;!&ndash;<accordion-heading>&ndash;&gt;-->
        <!--&lt;!&ndash;<i class="fa"&ndash;&gt;-->
        <!--&lt;!&ndash;ng-class="{'fa-caret-down': accordi.definition, 'fa-caret-right': !accordi.definition}"></i>&ndash;&gt;
        -->
        <!--&lt;!&ndash;Definition&ndash;&gt;-->

        <!--&lt;!&ndash;</accordion-heading>&ndash;&gt;-->

        <!--<form class="form-horizontal" name="datatypeForm">-->


        <div class="table-responsive">
            <table tt-table tt-params="datatypesParams"
                   class="table table-bordered table-fix-header table-condensed profile-table">
                <thead>
                <tr class="tbl-header"
                    style="margin-right: {{scrollbarWidth}}px;">
                    <th class="col-xs-2 col-fixed-250">
                        Name
                    </th>
                    <th class="col-xs-1 col-fixed-80"
                        ng-show="viewSettings.isVisibleColumn('usage')">Usage
                    </th>
                    <th class="col-xs-1 col-fixed-100"
                        ng-show="viewSettings.isVisibleColumn('length')">Length
                    </th>
                    <th class="col-xs-1 col-fixed-80"
                        ng-show="viewSettings.isVisibleColumn('confLength')">Conformance Length
                    </th>
                    <th class="col-xs-1 col-fixed-100"
                        ng-show="viewSettings.isVisibleColumn('datatype')">Data Type
                    </th>
                    <th class="col-xs-1 col-fixed-130"
                        ng-show="viewSettings.isVisibleColumn('valueSet')">Value Set
                    </th>
                    <th class="col-xs-1" ng-style="predWidth"
                        ng-show="viewSettings.isVisibleColumn('predicate')">Predicate
                    </th>
                    <th class="col-xs-2" ng-style="csWidth"
                        ng-show="viewSettings.isVisibleColumn('confStatement')">Conformance Statement
                    </th>
                    <th class="col-xs-1 col-fixed-80"
                        ng-show="viewSettings.isVisibleColumn('defText')">Definition Text
                    </th>
                    <th class="col-xs-1" ng-style="commentWidth"
                        ng-show="viewSettings.isVisibleColumn('comment')">Comment
                    </th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
</div>
</form>
</div>
</div>
</div>
</script>

<script type="text/ng-template" id="ConfirmDatatypeDeleteCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Delete Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>Are you sure you want to delete Datatype {{dtToDelete.name}} - {{dtToDelete.label}} ? </p>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-danger" ng-click="delete()"><span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Delete</span>
        </button>
    </div>
</script>

<script type="text/ng-template" id="DatatypeEditTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td class="col-xs-2 col-fixed-250">
                                              <span style="width:60%" type="text"
                                                    name="name"
                                                    ng-bind="node.name"></span>
            <span ng-bind="node.description"></span>

        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('usage')">
            <div>-</div>
        </td>
        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('length')">
            <div>-</div>
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('confLength')">
            <div>-</div>
        </td>

        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('datatype')">
            <div>-</div>
        </td>

        <td class="col-xs-1 col-fixed-130" ng-show="viewSettings.isVisibleColumn('valueSet')">
            <div>-</div>
        </td>

        <td class="col-xs-1" ng-style="predWidth" ng-show="viewSettings.isVisibleColumn('predicate')">
            <div>-</div>
        </td>

        <td class="col-xs-2" ng-style="csWidth" ng-show="viewSettings.isVisibleColumn('confStatement')">
            <div>-</div>
        </td>

        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('defText')">
            <div>-</div>
        </td>
        <td class="col-xs-1" ng-style="commentWidth" ng-show="viewSettings.isVisibleColumn('comment')">
            <div>-</div>
        </td>
    </tr>
</script>

<script type="text/ng-template" id="DatatypeReadTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td class="col-xs-2 col-fixed-250">
                                              <span style="width:60%" type="text"
                                                    name="name"
                                                    ng-bind="::node.name"></span>
            <span ng-bind="::node.description"></span>

        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('usage')">
            <div>-</div>
        </td>
        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('length')">
            <div>-</div>
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('confLength')">
            <div>-</div>
        </td>

        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('datatype')">
            <div>-</div>
        </td>

        <td class="col-xs-1 col-fixed-130" ng-show="viewSettings.isVisibleColumn('valueSet')">
            <div>-</div>
        </td>

        <td class="col-xs-1" ng-style="predWidth" ng-show="viewSettings.isVisibleColumn('predicate')">
            <div>-</div>
        </td>

        <td class="col-xs-2" ng-style="csWidth" ng-show="viewSettings.isVisibleColumn('confStatement')">
            <div>-</div>
        </td>

        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('defText')">
            <div>-</div>
        </td>
        <td class="col-xs-1" ng-style="commentWidth" ng-show="viewSettings.isVisibleColumn('comment')">
            <div>-</div>
        </td>
    </tr>
</script>

<script type="text/ng-template" id="DatatypeComponentEditTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)"
        ng-class="{ 'new': isChildNew(node),'selected': isChildSelected(node)}">
        <td class="col-xs-2 col-fixed-250" ng-controller="DatatypeRowCtrl">
            <ng-form name="{{formName}}" class="form-inline">
                <!--<input type="checkbox" ng-checked="isChildSelected(node)" ng-click="selectChild($event,node)">-->
                <span class="label label-component label-icon">C</span>
            <span ng-hide="isChildNew(node)"
                  tooltip-html="getComponentNodeName(node)" tooltip-append-to-body="true"
                  tooltip-class="constraints-tooltip" ng-bind-html="getComponentNodeName(node)" tooltip-trigger
                  tooltip-animation="false" tooltip-placement="left"
                    ></span>
             <span ng-show="isChildNew(node)">
                  {{node.position}}.
                <input
                        class="form-control focus"
                        autofocus
                        style="width:65%"
                        name="name"
                        ng-change="recordDatatypeChange('component','edit',node.id,'name', node.name)"
                        ng-class="{ 'igl-has-error has-feedback' : {{formName}}.name.$invalid}"
                        ng-model="node.name" required>

            </span>
            </ng-form>
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('usage')">

                <span ng-show="node.usage !== 'C'  || (node.usage === 'C' && countPredicate(node.position) === 0)"
                      ng-controller="DatatypeRowCtrl">
                	<ng-form name="{{formName}}" class="form-inline">
                        <select class="form-control input-sm" name="usage" id="usage"
                                ng-change="setUsage(node)"
                                ng-class="{ 'igl-has-error has-feedback' : {{formName}}.usage.$invalid}"
                                required ng-model="node.usage" ng-options="usage for usage in config.usages"/>
                    </ng-form>
                </span>

            <div ng-show="node.usage === 'C' && countPredicate(node.position) !== 0">
                <p ng-repeat="p in datatype.predicates | filter:{constraintTarget:node.position + '[1]'}:true">
                    C({{p.trueUsage}}/{{p.falseUsage}})
                </p>
            </div>
        </td>
        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('length')">
            <ng-form name="{{formName}}" class="form-inline" ng-controller="DatatypeRowCtrl">
                <input style="width:45%" class="form-control"
                       name="minLength"
                       ng-change="recordDatatypeChange('component','edit',node.id,'minLength', node.minLength)"
                       ng-pattern="/^\d+$/"
                       ng-class="{ 'igl-has-error has-feedback' : {{formName}}.minLength.$invalid}"
                       ng-model="node.minLength" required ng-minlength="1">
                <input style="width:45%" class="form-control" type="text"
                       name="maxLength"
                       ng-change="recordDatatypeChange('component','edit',node.id,'maxLength', node.maxLength)"
                       ng-class="{ 'igl-has-error has-feedback' : {{formName}}.maxLength.$invalid}"
                       ng-pattern="/^\d+$|^\*?$/"
                       ng-model="node.maxLength" required>
                </span>
            </ng-form>
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('confLength')">
            <ng-form name="{{formName}}" class="form-inline" ng-controller="DatatypeRowCtrl">
                <input style="width:50%" class="form-control" type="text"
                       name="confLength"
                       required
                       ng-change="recordDatatypeChange('component','edit',node.id,'confLength', node.confLength)"
                       ng-class="{ 'igl-has-error has-feedback' : {{formName}}.confLength.$invalid}"
                       ng-pattern="/^\d+$/"
                       ng-model="node.confLength">
            </ng-form>
        </td>

        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('datatype')">
            <ng-form name="innerForm" class="form-inline" ng-controller="DatatypeRowCtrl">
                <div ng-show="node.datatype != null && datatypesMap[node.datatype] != null && datatypesMap[node.datatype] != undefined">
                    <!--<select class="form-control input-sm"-->
                    <!--name="datatype"-->
                    <!--ng-model="node.datatype"-->
                    <!--ng-change="onDatatypeChange(node)"-->
                    <!--required-->
                    <!--ng-selected="dt.id === node.datatype"-->
                    <!--ng-class="{ 'igl-has-error has-feedback' : innerForm.datatype.$invalid}"-->
                    <!--ng-options="dt.id as dt.label for dt in datatypes | flavors:datatypesMap[node.datatype].name">-->
                    <!--</select>-->
                    <a ng-click="showSelectFlavorDlg(node)">
                        {{getLabel(datatypesMap[node.datatype])}}
                    </a>
                </div>
                <!--<div ng-show="node.datatype === null || datatypesMap[node.datatype] === null || !datatypesMap[node.datatype]">-->
                <!--<a ng-click="showSelectDatatypeDlg(node)">-->
                <!--<i class="fa fa-plus fa-fw"></i>-->
                <!--</a>-->
                <!--</div>-->

            </ng-form>
        </td>

        <td class="col-xs-1 col-fixed-130" ng-show="viewSettings.isVisibleColumn('valueSet')">
            <div ng-show="node.table != undefined && node.table !== null">
                <a ng-click="goToTable(tablesMap[node.table])" class="point">
                    <span>{{tablesMap[node.table].bindingIdentifier}}</span>
                </a>
                <a ng-click="mapTable(node)" class="point">
                    <span><i class="fa fa-pencil fa-fw"></i></span>
                </a>
                <a ng-click="deleteTable(node)" class="point">
                    <span><i class="fa fa-times fa-fw"></i></span>
                </a>
            </div>
            <div ng-show="(node.table == undefined || node.table === null) && isAvailableDTForTable(datatypesMap[node.datatype])">
                <a ng-click="mapTable(node)" class="point">
                    <span><i class="fa fa-plus fa-fw"></i></span>
                </a>
            </div>
        </td>

        <td class="col-xs-1" ng-style="predWidth" ng-show="viewSettings.isVisibleColumn('predicate')">
            <div>
                <div ng-show="countPredicate(node.position) === 0 && node.usage === 'C'">
                    <a ng-click="managePredicate(node)" class="point">
                        <i class="fa fa-plus fa-fw"></i>

                        <p class="warning">Need predicate</p>
                    </a>
                </div>
                <div ng-show="countPredicate(node.position) !== 0 && node.usage === 'C'">
                    <p ng-repeat="p in datatype.predicates | filter:{constraintTarget:node.position + '[1]'}:true">
                        <a ng-click="managePredicate(node)" tooltip-html="getPredicateAsString(p)"
                           tooltip-append-to-body="true"
                           tooltip-class="constraints-tooltip" ng-bind-html="getPredicateAsString(p)" tooltip-trigger
                           tooltip-animation="false" tooltip-placement="left"></a>
                    </p>
                </div>
            </div>
        </td>

        <td class="col-xs-2" ng-style="csWidth" ng-show="viewSettings.isVisibleColumn('confStatement')">
            <div>
                <div ng-show="countConformanceStatements(node.position) == 0">
                    <a ng-click="manageConformanceStatement(node)" class="point">
                        <i class="fa fa-plus fa-fw"></i>
                    </a>
                </div>
                <p ng-repeat="c in datatype.conformanceStatements | filter:{constraintTarget:node.position + '[1]'}:true">
                    <a ng-click="manageConformanceStatement(node)" tooltip-html="getConformanceStatementAsString(c)"
                       tooltip-append-to-body="true"
                       tooltip-class="constraints-tooltip" ng-bind-html="getConformanceStatementAsString(c)"
                       tooltip-trigger
                       tooltip-animation="false" tooltip-placement="left"></a>
                </p>
            </div>
        </td>

        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('defText')" style="text-align:center">
            <div>
                <a ng-click="openRichTextDlg(node, 'text','Definition Text', false)"
                   class="point">
                    <i class="fa fa-pencil fa-fw" ng-show="node.text !== '' && node.text !== null"></i>
                    <i class="fa fa-plus fa-fw" ng-show="node.text === '' || node.text === null"></i>
                </a>
                <a ng-click="node.text = ''" ng-show="node.text !== '' && node.text !== null">
                    <i class="fa fa-times fa-fw"></i>
                </a>
            </div>
        </td>
        <td class="col-xs-1" ng-style="commentWidth" ng-show="viewSettings.isVisibleColumn('comment')"
            style="text-align:center">
            <a
                    ng-show="node.comment === null || node.comment == undefined || node.comment == ''"
                    ng-click="node.comment = ' '" class="point">
                <i class="fa fa-plus fa-fw"></i>
            </a>
            <textarea style="width:100%;height:100%"
                      class="form-control"
                      ng-model="node.comment"
                      ng-show="node.comment !== null && node.comment != undefined && node.comment != ''">
            </textarea>
            <a
                    ng-show="node.comment !== null && node.comment !== undefined && node.comment != ''"
                    ng-click="node.comment = null"
                    class="point">
                <i class="fa fa-times fa-fw"></i>
            </a>

        </td>
    </tr>
</script>

<script type="text/ng-template" id="DatatypeComponentReadTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td class="col-xs-2 col-fixed-250">
            <span class="label label-component label-icon">C</span>
             <span
                     tooltip-html="getComponentNodeName(node)" tooltip-append-to-body="true"
                     tooltip-class="constraints-tooltip" ng-bind-html="getComponentNodeName(node)" tooltip-trigger
                     tooltip-animation="false" tooltip-placement="left"
                     ></span>
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('usage')">
            <div>
				<span ng-show="node.usage !== 'C'  || (node.usage === 'C' && countPredicate(node.position) === 0)">
                	<span>{{node.usage}}</span>
                </span>

                <div ng-show="node.usage === 'C' && countPredicate(node.position) !== 0">
                    <p ng-repeat="p in datatype.predicates | filter:{constraintTarget:node.position + '[1]'}:true">
                        C({{p.trueUsage}}/{{p.falseUsage}})
                    </p>
                </div>
            </div>
        </td>
        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('length')">
            [{{::node.minLength}},{{::node.maxLength}}]
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('confLength')">
            <span ng-bind="::node.confLength"></span>
        </td>

        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('datatype')">
            <div>
                {{::getLabel(datatypesMap[node.datatype])}}
            </div>
        </td>

        <td class="col-xs-1 col-fixed-130" ng-show="viewSettings.isVisibleColumn('valueSet')">
            <div>
                <div ng-show="node.table != undefined  && node.table !== null">
                    <a ng-click="goToTable(tablesMap[node.table])"
                       class="point">
                        {{::tablesMap[node.table].bindingIdentifier}}
                    </a>
                </div>
            </div>
        </td>

        <td class="col-xs-1" ng-style="predWidth" ng-show="viewSettings.isVisibleColumn('predicate')">
            <p ng-repeat="p in datatype.predicates | filter:{constraintTarget:node.position + '[1]'}:true">
                <span tooltip-html="getPredicateAsString(p)"
                      tooltip-append-to-body="true"
                      tooltip-class="constraints-tooltip" ng-bind-html="getPredicateAsString(p)" tooltip-trigger
                      tooltip-animation="false" tooltip-placement="left"></span>
            </p>
        </td>

        <td class="col-xs-2" ng-style="csWidth" ng-show="viewSettings.isVisibleColumn('confStatement')">
            <p ng-repeat="c in datatype.conformanceStatements | filter:{constraintTarget:node.position + '[1]'}:true">
                <span tooltip-html="getConformanceStatementAsString(c)"
                      tooltip-append-to-body="true"
                      tooltip-class="constraints-tooltip" ng-bind-html="getConformanceStatementAsString(c)"
                      tooltip-trigger
                      tooltip-animation="false" tooltip-placement="left"></span>
            </p>
        </td>

        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('defText')">
            <a ng-show="node.text !== '' && node.text !== null"
               ng-click="openRichTextDlg(node, 'text','Definition Text', true)"
               class="point">
                <i class="fa fa-eye fa-fw"></i>
            </a>
        </td>
        <td class="col-xs-1" ng-style="commentWidth" ng-show="viewSettings.isVisibleColumn('comment')">

            <textarea class="form-control" style="width:100%;height:100%" ng-model="node.comment"
                      ng-show="node.comment !== '' && node.comment !== null" disabled>
            </textarea>
        </td>
    </tr>
</script>

<script type="text/ng-template" id="DatatypeSubComponentEditTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td class="col-xs-2 col-fixed-250">
                                        <span>
                                            <span class="label label-sub-component label-icon">S</span>
                                             <span
                                                     tooltip-html="getComponentNodeName(node)"
                                                     tooltip-append-to-body="true"
                                                     tooltip-class="constraints-tooltip"
                                                     ng-bind-html="getComponentNodeName(node)" tooltip-trigger
                                                     tooltip-animation="false" tooltip-placement="left"
                                                     ></span>
                                        </span>
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('usage')">
			<span ng-show="node.usage !== 'C'  || (node.usage === 'C' && countPredicateOnSubComponent(node.position, node.id) === 0)">
            	{{node.usage}}
            </span>

            <div ng-show="node.usage === 'C' && countPredicateOnSubComponent(node.position, node.id) !== 0">
                <p ng-repeat="p in parentsMap[node.id].predicates  | filter:{constraintTarget:node.position + '[1]'}:true">
                    C({{p.trueUsage}}/{{p.falseUsage}})
                </p>
            </div>
        </td>
        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('length')">
            <div>
                -
            </div>
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('confLength')">
            <div>
                -
            </div>
        </td>

        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('datatype')">
            <div>
                <a ng-click="goToDatatype(datatypesMap[node.datatype])"
                   class="point">{{getLabel(datatypesMap[node.datatype])}}
                </a>
            </div>
        </td>

        <td class="col-xs-1 col-fixed-130" ng-show="viewSettings.isVisibleColumn('valueSet')">
            <a ng-click="goToTable(tablesMap[node.table])"
               class="point" ng-show="node.table !== null && node.table !== undefined">
                {{tablesMap[node.table].bindingIdentifier}}
            </a>
        </td>

        <td class="col-xs-1" ng-style="predWidth" ng-show="viewSettings.isVisibleColumn('predicate')">
            <p ng-repeat="p in parentsMap[node.id].predicates  | filter:{constraintTarget:node.position + '[1]'}:true"
               tooltip-html="getPredicateAsString(p)" tooltip-append-to-body="true"
               tooltip-class="constraints-tooltip" ng-bind-html="getPredicateAsString(p)" tooltip-trigger
               tooltip-animation="false" tooltip-placement="left">
            </p>
        </td>

        <td class="col-xs-2" ng-style="csWidth" ng-show="viewSettings.isVisibleColumn('confStatement')">
            <p ng-repeat="c in parentsMap[node.id].conformanceStatements  | filter:{constraintTarget:node.position + '[1]'}:true"
               tooltip-html="getConformanceStatementAsString(c)" tooltip-append-to-body="true"
               tooltip-class="constraints-tooltip" ng-bind-html="getConformanceStatementAsString(c)" tooltip-trigger
               tooltip-animation="false" tooltip-placement="left">
            </p>
        </td>

        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('usage')">
            <div>
                <a ng-click="openRichTextDlg(node, 'text', 'Definition Text', true)"
                   class="point">
                    <i class="fa fa-eye fa-fw"></i>
                </a>
            </div>
        </td>
        <td class="col-xs-1" ng-style="commentWidth" ng-show="viewSettings.isVisibleColumn('comment')">
            <textarea class="form-control" style="width:100%;height:100%" ng-model="node.comment" disabled>
            </textarea>
        </td>
    </tr>
</script>

<script type="text/ng-template" id="DatatypeSubComponentReadTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td class="col-xs-2 col-fixed-250">
                                        <span>
                                            <span class="label label-sub-component label-icon">S</span>
                                              <span
                                                      tooltip-html="getComponentNodeName(node)"
                                                      tooltip-append-to-body="true"
                                                      tooltip-class="constraints-tooltip"
                                                      ng-bind-html="getComponentNodeName(node)" tooltip-trigger
                                                      tooltip-animation="false" tooltip-placement="left"
                                                      ></span>
                                        </span>
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('usage')">
			<span ng-show="node.usage !== 'C'  || (node.usage === 'C' && countPredicateOnSubComponent(node.position, node.id) === 0)">
            	{{node.usage}}
            </span>

            <div ng-show="node.usage === 'C' && countPredicateOnSubComponent(node.position, node.id) !== 0">
                <p ng-repeat="p in parentsMap[node.id].predicates  | filter:{constraintTarget:node.position + '[1]'}:true">
                    C({{p.trueUsage}}/{{p.falseUsage}})
                </p>
            </div>
        </td>
        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('length')">
            <div>
                -
            </div>
        </td>
        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('confLength')">
            <div>
                -
            </div>
        </td>

        <td class="col-xs-1 col-fixed-100" ng-show="viewSettings.isVisibleColumn('datatype')">
            <a ng-click="goToDatatype(datatypesMap[node.datatype])"
               class="point">{{::getLabel(datatypesMap[node.datatype])}}
            </a>
        </td>

        <td class="col-xs-1 col-fixed-130" ng-show="viewSettings.isVisibleColumn('valueSet')">
            <a ng-click="goToTable(tablesMap[node.table])"
               class="point" ng-show="node.table !== null && node.table !== undefined">
                {{::tablesMap[node.table].bindingIdentifier}}
            </a>
        </td>

        <td class="col-xs-1" ng-style="predWidth" ng-show="viewSettings.isVisibleColumn('predicate')">
            <p ng-repeat="p in parentsMap[node.id].predicates  | filter:{constraintTarget:node.position + '[1]'}:true"
               tooltip-html="getPredicateAsString(p)" tooltip-append-to-body="true"
               tooltip-class="constraints-tooltip" ng-bind-html="getPredicateAsString(p)" tooltip-trigger
               tooltip-animation="false" tooltip-placement="left">
            </p>
        </td>

        <td class="col-xs-2" ng-style="csWidth" ng-show="viewSettings.isVisibleColumn('confStatement')">
            <p ng-repeat="c in parentsMap[node.id].conformanceStatements  | filter:{constraintTarget:node.position + '[1]'}:true"
               tooltip-html="getConformanceStatementAsString(c)" tooltip-append-to-body="true"
               tooltip-class="constraints-tooltip" ng-bind-html="getConformanceStatementAsString(c)" tooltip-trigger
               tooltip-animation="false" tooltip-placement="left">
            </p>
        </td>

        <td class="col-xs-1 col-fixed-80" ng-show="viewSettings.isVisibleColumn('defText')">
            <a ng-click="openRichTextDlg(node, 'text', 'Definition Text', true)"
               class="point">
                <i class="fa fa-eye fa-fw"></i>
            </a>
        </td>
        <td class="col-xs-1" ng-style="commentWidth" ng-show="viewSettings.isVisibleColumn('comment')">
            <textarea class="form-control" style="width:100%;height:100%" ng-model="node.comment"
                      ng-show="node.comment !== '' && node.comment !== null" disabled>
            </textarea>
        </td>
    </tr>
</script>

<script type="text/ng-template" id="DatatypeReferencesCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Datatype References Found
            <button class="btn btn-primary pull-right" ng-click="ok()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Close</span>
            </button>
        </h3>
    </div>
    <div class="modal-body">
        <p>We cannot delete this datatype because it is being referenced by elements below:</p>

        <div class="igl-table">
            <table class="table table-striped table-bordered">
                <thead>
                <tr class="tbl-header">
                    <th>Name</th>
                    <th>Path</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="ref in references">
                    <td>
                                        <span>

                                            <span ng-show="ref.type === 'field'"
                                                  class="label label-field label-icon">G</span>
                                            <span ng-show="ref.type === 'component'"
                                                  class="label label-component label-icon">C</span>
                                            <span ng-show="ref.type === 'subcomponent'"
                                                  class="label label-sub-component label-icon">S</span>

                                             <span style="width:60%"
                                                   name="name"
                                                   ng-bind="ref.name"></span>
                                             <span ng-bind="ref.description"></span>
                                         </span>

                    </td>
                    <td>
                        <div>{{ref.path}}</div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ok()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Close</span>
        </button>
    </div>
</script>

<script type="text/ng-template" id="PredicateDatatypeCtrl.html">
<div class="modal-header">
    <h3 class="header4">Predicate for {{datatype.name}}-{{selectedNode.position}}</h3>
</div>
<div class="modal-body">
<form role="form">

<div class="table-responsive">

<div class="page-header">
    <span class="header5">List of Predicates</span>
</div>

<table class="table table-striped table-bordered">
    <thead>
    <tr class="tbl-header">
        <th class="col-md-1" style="width: 4.1667%">Draggable</th>
        <th class="col-md-8">Desciption</th>
        <th class="col-md-1">True Usage</th>
        <th class="col-md-1">False Usage</th>
        <th class="col-md-1"></th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="p in tempPredicates | filter:{constraintTarget:selectedNode.position + '[1]'}:true">
        <td class="col-md-1" align="center" style="width: 4.1667%">
            <i class="fa fa-bullseye fa-lg" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}"
               ng-model="p" jqyoui-draggable="{placeholder:'keep',animate:true}"></i>
        </td>
        <td class="col-md-8">
            <input class="form-control" ng-model="p.description" ng-change="setChanged()" type="text"/>
        </td>
        <td class="col-md-1">
            <select class="form-control" ng-model="p.trueUsage" ng-change="setChanged()"
                    ng-options="usage for usage in config.conditionalUsage"/>
        </td>
        <td class="col-md-1">
            <select class="form-control" ng-model="p.falseUsage" ng-change="setChanged()"
                    ng-options="usage for usage in config.conditionalUsage"/>
        </td>
        <td class="col-md-1" align="center">
            <button class="btn btn-warning btn-xxs" ng-click="deletePredicate(p)"><span><i class="fa fa-trash fa-fw">
                &nbsp; </i>Del</span></button>
        </td>
    </tr>
    </tbody>
</table>

<div class="page-header">
    <span class="header5">Add new predicate</span>
</div>

<div class="btn-group btn-group-sm pull-left" data-toggle="buttons">
    <label class="btn btn-primary btn-xs" ng-click="constraintType = 'Plain'"
           ng-class="{'active':constraintType === 'Plain'}">
        <input type="radio" ng-value="constraintType">Plain
    </label>
    <label class="btn btn-primary btn-xs" ng-click="constraintType = 'Complex'"
           ng-class="{'active':constraintType === 'Complex'}">
        <input type="radio" ng-value="constraintType">Complex
    </label>
</div>

<table class="table table-striped table-bordered" ng-show="constraintType === 'Plain'">
<thead>
<tr class="tbl-header">
    <th class="col-md-1" style="width: 4.1667%"></th>
    <th class="col-md-2">Node</th>
    <th class="col-md-2">Verb</th>
    <th class="col-md-2">Constraint</th>
    <th class="col-md-2">Value</th>
    <th class="col-md-1">True Usage</th>
    <th class="col-md-1">False Usage<</th>
    <th class="col-md-1"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="col-md-1" align="center" style="width: 4.1667%">
    <button class="btn btn-info btn-xxs" ng-click="initPredicate()"><span><i class="fa fa-refresh fa-fw"></i></span>
    </button>
</td>
<td class="col-md-2">
    <span>{{newConstraint.datatype}}.</span>
    <select class="form-control form-control-short"
            name="component"
            ng-change="updateComponent_1()"
            ng-model="newConstraint.component_1"
            ng-options="component as component.position for component in datatype.components">
    </select>
        			<span ng-show="datatypesMap[newConstraint.component_1.datatype].components.length > 0">.
        				<select class="form-control form-control-short"
                                name="subComponent"
                                ng-model="newConstraint.subComponent_1"
                                ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_1.datatype].components">
                        </select>
    				</span>
</td>
<td class="col-md-2">
    <select name="verb" class="form-control" ng-change="" ng-model="newConstraint.verb"
            ng-options="constraintVerb for constraintVerb in config.constraintVerbs | orderBy:'toString()'"/>
</td>
<td class="col-md-2">
    <select name="contraintType" class="form-control" ng-change="" ng-model="newConstraint.contraintType"
            ng-options="contraintType for contraintType in config.constraintTypes | orderBy:'toString()'"/>
</td>
<td class="col-md-2">
                		<span ng-show="newConstraint.contraintType == 'a literal value'">
                			<input style="width:100%" class="form-control" ng-model="newConstraint.value"
                                   placeholder="Literal Value" type="text"/>
                		</span>
                		<span ng-show="newConstraint.contraintType == 'one of list values'">
                			<input style="width:100%" class="form-control" ng-model="newConstraint.value"
                                   placeholder="Comma-Separated Values(CSV)" type="text"/>
                		</span>
                		<span ng-show="newConstraint.contraintType == 'formatted value'">
							<select class="form-control" name="format"
                                    ng-model="newConstraint.value"
                                    ng-options="predefinedFormat for predefinedFormat in config.predefinedFormats | orderBy:'toString()'">
                            </select>
							<input class="form-control" ng-show="newConstraint.value === 'Regular expression'"
                                   ng-model="newConstraint.value2" placeholder="Regular expression" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'identical to another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select class="form-control form-control-short"
                                    name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select class="form-control form-control-short"
                                        name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select class="form-control form-control-short"
                                    name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select class="form-control form-control-short"
                                        name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'not-equal to another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select class="form-control form-control-short"
                                    name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select class="form-control form-control-short"
                                        name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'greater than another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select class="form-control form-control-short"
                                    name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select class="form-control form-control-short"
                                        name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to or greater than another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select class="form-control form-control-short"
                                    name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select class="form-control form-control-short"
                                        name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'less than another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select class="form-control form-control-short"
                                    name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select class="form-control form-control-short"
                                        name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to or less than another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select class="form-control form-control-short"
                                    name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select class="form-control form-control-short"
                                        name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to'">
                			<input class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'not-equal to'">
                			<input class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'greater than'">
                			<input class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to or greater than'">
                			<input class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'less than'">
                			<input class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to or less than'">
                			<input class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                			<span>ValueSet ID: </span>
							<select class="form-control form-control-short" name="valueSetId"
                                    ng-model="newConstraint.valueSetId">
                                <option ng-repeat="table in tables|orderBy:'+bindingIdentifier'"
                                        value="{{table.bindingIdentifier}}">
                                    {{table.bindingIdentifier}}
                                </option>
                            </select>
							<br/>
							<span>BindingStrength: </span>
							<select class="form-control form-control-short" name="bindingStrength"
                                    ng-model="newConstraint.bindingStrength">
                                <option value="R">R</option>
                                <option value="S">S</option>
                                <option value="U">U</option>
                            </select>
							<br/>
							<span>BindingLocation: </span>
							<input class="form-control form-control-short" ng-model="newConstraint.bindingLocation"
                                   type="text"/>
                		</span>
</td>
<td class="col-md-1">
    <select name="trueUsage" class="form-control" ng-model="newConstraint.trueUsage"
            ng-options="usage for usage in config.conditionalUsage"/>
</td>

<td class="col-md-1">
    <select name="falseUsage" class="form-control" ng-model="newConstraint.falseUsage"
            ng-options="usage for usage in config.conditionalUsage"/>
</td>

<td class="col-md-1" align="center">
    <button class="btn btn-primary btn-xxs" ng-click="updatePredicate()"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span>
    </button>
</td>
</tr>
</tbody>
</table>

<table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
    <thead>
    <tr class="tbl-header">
        <th class="col-md-1" style="width: 4.1667%"></th>
        <th class="col-md-2">Complex Type</th>
        <th class="col-md-1"></th>
        <th class="col-md-2">First Constraint</th>
        <th class="col-md-1"></th>
        <th class="col-md-2">Second Constraint</th>
        <th class="col-md-1">True Usage</th>
        <th class="col-md-1">False Usage<</th>
        <th class="col-md-1"></th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="col-md-1" style="width: 4.1667%" align="center">
            <button class="btn btn-info btn-xxs" ng-click="initComplexPredicate()"><span><i
                    class="fa fa-refresh fa-fw"></i></span></button>
        </td>
        <td class="col-md-2">
            <select class="form-control" name="compositeTypeSelect" ng-model="compositeType">
                <option value="AND">AND</option>
                <option value="OR">OR</option>
                <option value="IFTHEN">IFTHEN</option>
            </select>
        </td>
        <td class="col-md-1" align="center">
            <span ng-show="compositeType == 'IFTHEN'">IF</span>
        </td>
        <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
            <span ng-hide="firstConstraint">Drop the first constraint here!</span>
            <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable
                  ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
        </td>
        <td class="col-md-1" align="center">
            <span ng-show="compositeType == 'AND'">AND</span>
            <span ng-show="compositeType == 'OR'">OR</span>
            <span ng-show="compositeType == 'IFTHEN'">THEN</span>
        </td>
        <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
            <span ng-hide="secondConstraint">Drop the second constraint here!</span>
            <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable
                  ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
        </td>
        <td class="col-md-1">
            <select class="form-control" ng-model="complexConstraintTrueUsage"
                    ng-options="usage for usage in config.conditionalUsage"/>
        </td>
        <td class="col-md-1">
            <select class="form-control" ng-model="complexConstraintFalseUsage"
                    ng-options="usage for usage in config.conditionalUsage"/>
        </td>
        <td class="col-md-1" align="center">
            <button class="btn btn-primary btn-xxs" ng-click="addComplexPredicate()"><span><i class="fa fa-plus fa-fw">
                &nbsp; </i>ADD</span></button>
        </td>
    </tr>
    </tbody>
</table>
</div>
</form>
</div>
<div class="modal-footer">
    <button class="btn btn-primary btn-sm" ng-show="changed" ng-click="saveclose()"><span><i class="fa fa-plus fa-fw">
        &nbsp; </i>Save</span></button>
    <button class="btn btn-warning btn-sm" ng-show="changed" ng-click="ok()"><span><i class="fa fa-times fa-fw">
        &nbsp; </i>Close</span></button>
    <button class="btn btn-warning btn-sm" ng-hide="changed" ng-click="ok()"><span><i class="fa fa-times fa-fw">
        &nbsp; </i>Close</span></button>
</div>
</script>

<script type="text/ng-template" id="ConformanceStatementDatatypeCtrl.html">
<div class="modal-header">
    <h3 class="header4">Conformance statement for {{datatype.name}}-{{selectedNode.position}}</h3>
</div>
<div class="modal-body">
<form role="form">
<div class="table-responsive">
<div class="page-header">
    <span class="header5">List of conformance statments</span>
</div>
<table class="table table-striped table-bordered">
    <thead>
    <tr class="tbl-header">
        <th class="col-md-1" style="width: 4.1667%">Draggable</th>
        <th class="col-md-2">ID</th>
        <th class="col-md-8">Desciption</th>
        <th class="col-md-1"></th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="c in tempComformanceStatements | filter:{constraintTarget:selectedNode.position + '[1]'}:true">
        <td class="col-md-1" align="center" style="width: 4.1667%">
            <i class="fa fa-bullseye fa-lg" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}"
               ng-model="c" jqyoui-draggable="{placeholder:'keep',animate:true}"></i>
        </td>
        <td class="col-md-2">
            <input class="form-control form-control-short80" ng-model="c.constraintId"
                   ng-change="setChanged(); targetId = c.constraintId;" type="text"
                   ng-readonly="targetId !== c.constraintId"/>
            <i class="fa fa-pencil" ng-hide="targetId == c.constraintId"
               ng-click="targetId = c.constraintId; conformanceStatementIdList.splice(conformanceStatementIdList.indexOf(c.constraintId), 1);"></i>
            <i class="fa fa-paper-plane"
               ng-hide="targetId != c.constraintId || conformanceStatementIdList.indexOf(c.constraintId) != -1"
               ng-click="conformanceStatementIdList.push(c.constraintId); targetId = ''"></i>
            <span style="color:red"
                  ng-show="conformanceStatementIdList.indexOf(c.constraintId) != -1 && targetId == c.constraintId">Duplicated ID</span>
        </td>
        <td class="col-md-8">
            <input class="form-control" ng-model="c.description" ng-change="setChanged()" type="text"/>
        </td>
        <td class="col-md-1" align="center">
            <button class="btn btn-warning btn-xxs" ng-click="deleteConformanceStatement(c)"><span><i
                    class="fa fa-trash fa-fw">&nbsp; </i>Del</span></button>
        </td>
    </tr>
    </tbody>
</table>

<div class="page-header">
    <span class="header5">Add new conformance statement</span>
</div>

<div class="btn-group btn-group-sm pull-left" data-toggle="buttons">
    <label class="btn btn-primary btn-xs" ng-click="constraintType = 'Plain'"
           ng-class="{'active':constraintType === 'Plain'}">
        <input type="radio" ng-value="constraintType">Plain
    </label>
    <label class="btn btn-primary btn-xs" ng-click="constraintType = 'Complex'; newComplexConstraintId = calNextCSID();"
           ng-class="{'active':constraintType === 'Complex'}">
        <input type="radio" ng-value="constraintType">Complex
    </label>
</div>

<table class="table table-striped table-bordered" ng-show="constraintType === 'Plain'">
<thead>
<tr class="tbl-header">
    <th class="col-md-1" style="width: 4.1667%"></th>
    <th class="col-md-2">ID</th>
    <th class="col-md-2">Node</th>
    <th class="col-md-2">Verb</th>
    <th class="col-md-2">Constraint</th>
    <th class="col-md-2">Value</th>
    <th class="col-md-1"></th>
</tr>
</thead>
<tbody>
<tr>
    <td class="col-md-1" style="width: 4.1667%" align="center">
        <button class="btn btn-info btn-xxs" ng-click="initConformanceStatement()"><span><i
                class="fa fa-refresh fa-fw"></i></span></button>
    </td>
    <td class="col-md-2">
        <input class="form-control form-control-short80" ng-model="newConstraint.constraintId"
               ng-change="setChanged(); targetId = newConstraint.constraintId;" type="text"
               ng-readonly="targetId !== newConstraint.constraintId"/>
        <i class="fa fa-pencil" ng-hide="targetId == newConstraint.constraintId"
           ng-click="targetId = newConstraint.constraintId; conformanceStatementIdList.splice(conformanceStatementIdList.indexOf(newConstraint.constraintId), 1);"></i>
        <i class="fa fa-paper-plane"
           ng-hide="targetId != newConstraint.constraintId || conformanceStatementIdList.indexOf(newConstraint.constraintId) != -1"
           ng-click="conformanceStatementIdList.push(newConstraint.constraintId); targetId = ''"></i>
            <span style="color:red"
                  ng-show="conformanceStatementIdList.indexOf(newConstraint.constraintId) != -1 && targetId == newConstraint.constraintId">Duplicated ID</span>
    </td>
    <td class="col-md-2">
        <span>{{newConstraint.datatype}}.</span>
        <select class="form-control form-control-short" name="component" ng-change="updateComponent_1()"
                ng-model="newConstraint.component_1"
                ng-options="component as component.position for component in datatype.components"/>
       				<span ng-show="datatypesMap[newConstraint.component_1.datatype].components.length > 0">.
        				<select class="form-control form-control-short" name="subComponent"
                                ng-model="newConstraint.subComponent_1"
                                ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_1.datatype].components"/>
    				</span>
    </td>
    <td class="col-md-2">
        <select name="verb" class="form-control" ng-change="" ng-model="newConstraint.verb"
                ng-options="constraintVerb for constraintVerb in config.constraintVerbs | orderBy:'toString()'"></select>
    </td>
    <td class="col-md-2">
        <select name="contraintType" class="form-control" ng-change="" ng-model="newConstraint.contraintType"
                ng-options="contraintType for contraintType in config.constraintTypes | orderBy:'toString()'"></select>
    </td>
    <td class="col-md-2">
                		<span ng-show="newConstraint.contraintType == 'a literal value'">
                			<input class="form-control" ng-model="newConstraint.value" placeholder="Literal Value"
                                   type="text"/>
                		</span>
                		<span ng-show="newConstraint.contraintType == 'one of list values'">
                			<input class="form-control" ng-model="newConstraint.value"
                                   placeholder="Comma-Separated Values(CSV)" type="text"/>
                		</span>
                		<span ng-show="newConstraint.contraintType == 'formatted value'">
                			<select class="form-control" name="format"
                                    ng-model="newConstraint.value"
                                    ng-options="predefinedFormat for predefinedFormat in config.predefinedFormats | orderBy:'toString()'">
                            </select>
							<input class="form-control" ng-show="newConstraint.value === 'Regular expression'"
                                   ng-model="newConstraint.value2" placeholder="Regular expression" type="text"/>
                		</span>
                		<span ng-show="newConstraint.contraintType == 'identical to another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select class="form-control form-control-short" name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select class="form-control form-control-short" name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select class="form-control form-control-short" name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select class="form-control form-control-short" name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'not-equal to another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select class="form-control form-control-short" name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select class="form-control form-control-short" name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'greater than another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select class="form-control form-control-short" name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select class="form-control form-control-short" name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to or greater than another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select class="form-control form-control-short" name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select class="form-control form-control-short" name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'less than another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select class="form-control form-control-short" name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select class="form-control form-control-short" name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to or less than another node'">
                			<span>{{newConstraint.datatype}}.</span>
                			<select class="form-control form-control-short" name="component"
                                    ng-change="updateComponent_2()"
                                    ng-model="newConstraint.component_2"
                                    ng-options="component as component.position for component in datatype.components">
                            </select>
        					<span ng-show="datatypesMap[newConstraint.component_2.datatype].components.length > 0">.
        						<select class="form-control form-control-short" name="subComponent"
                                        ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype].components">
                                </select>
    						</span>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to'">
                			<input class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'not-equal to'">
                			<input class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'greater than'">
                			<input class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to or greater than'">
                			<input class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'less than'">
                			<input class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'equal to or less than'">
                			<input class="form-control" ng-model="newConstraint.value" type="text"/>
                		</span>
						<span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                			<span>ValueSet ID: </span>
							<select class="form-control form-control-short" name="valueSetId"
                                    ng-model="newConstraint.valueSetId">
                                <option ng-repeat="table in tables|orderBy:'+bindingIdentifier'"
                                        value="{{table.bindingIdentifier}}">
                                    {{table.bindingIdentifier}}
                                </option>
                            </select>
							<br/>
							<span>BindingStrength: </span>
							<select class="form-control form-control-short" name="bindingStrength"
                                    ng-model="newConstraint.bindingStrength">
                                <option value="R">R</option>
                                <option value="S">S</option>
                                <option value="U">U</option>
                            </select>
							<br/>
							<span>BindingLocation: </span>
							<input ng-model="newConstraint.bindingLocation" type="text"/>
                		</span>

    </td>
    <td class="col-md-1" align="center">
        <button class="btn btn-primary btn-xxs" ng-click="addConformanceStatement()"><span><i
                class="fa fa-plus fa-fw">&nbsp; </i>ADD</span></button>
    </td>
</tr>
</tbody>
</table>
<table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
    <thead>
    <tr class="tbl-header">
        <th class="col-md-1" style="width: 4.1667%"></th>
        <th class="col-md-2">ID</th>
        <th class="col-md-2">Complex Type</th>
        <th class="col-md-1"></th>
        <th class="col-md-2">First Constraint</th>
        <th class="col-md-1"></th>
        <th class="col-md-2">Second Constraint</th>
        <th class="col-md-1"></th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="col-md-1" style="width: 4.1667%" align="center">
            <button class="btn btn-info btn-xxs" ng-click="initComplexStatement()"><span><i
                    class="fa fa-refresh fa-fw"></i></span></button>
        </td>
        <td class="col-md-2">
            <input class="form-control form-control-short80" ng-model="newComplexConstraintId"
                   ng-change="setChanged(); targetId = newComplexConstraintId;" type="text"
                   ng-readonly="targetId !== newComplexConstraintId"/>
            <i class="fa fa-pencil" ng-hide="targetId == newComplexConstraintId"
               ng-click="targetId = newComplexConstraintId; conformanceStatementIdList.splice(conformanceStatementIdList.indexOf(newComplexConstraintId), 1);"></i>
            <i class="fa fa-paper-plane"
               ng-hide="targetId != newComplexConstraintId || conformanceStatementIdList.indexOf(newComplexConstraintId) != -1"
               ng-click="conformanceStatementIdList.push(newComplexConstraintId); targetId = ''"></i>
            <span style="color:red"
                  ng-show="conformanceStatementIdList.indexOf(newComplexConstraintId) != -1 && targetId == newComplexConstraintId">Duplicated ID</span>
        </td>
        <td class="col-md-2">
            <select class="form-control" name="compositeTypeSelect" ng-model="compositeType">
                <option value="AND">AND</option>
                <option value="OR">OR</option>
                <option value="IFTHEN">IFTHEN</option>
            </select>
        </td>
        <td class="col-md-1" align="center">
            <span ng-show="compositeType == 'IFTHEN'">IF</span>
        </td>
        <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
            <span ng-hide="firstConstraint">Drop the first constraint here!</span>
            <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable
                  ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
        </td>
        <td class="col-md-1" align="center">
            <span ng-show="compositeType == 'AND'">AND</span>
            <span ng-show="compositeType == 'OR'">OR</span>
            <span ng-show="compositeType == 'IFTHEN'">THEN</span>
        </td>
        <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
            <span ng-hide="secondConstraint">Drop the second constraint here!</span>
            <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable
                  ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
        </td>
        <td class="col-md-1" align="center">
            <button class="btn btn-primary btn-xxs" ng-click="addComplexConformanceStatement()"><span><i
                    class="fa fa-plus fa-fw">&nbsp; </i>ADD</span></button>
        </td>
    </tr>
    </tbody>
</table>
</div>
</form>
</div>
<div class="modal-footer">
    <button class="btn btn-primary btn-sm" ng-show="changed" ng-click="saveclose()"><span><i class="fa fa-plus fa-fw">
        &nbsp; </i>Save</span></button>
    <button class="btn btn-warning btn-sm" ng-show="changed" ng-click="ok()"><span><i class="fa fa-times fa-fw">
        &nbsp; </i>Close</span></button>
    <button class="btn btn-warning btn-sm" ng-hide="changed" ng-click="ok()"><span><i class="fa fa-times fa-fw">
        &nbsp; </i>Close</span></button>
</div>
</script>

<script type="text/ng-template" id="TableMappingDatatypeCtrl.html">
    <div class="modal-header modal-wide">
        <h3 class="modal-title">Edit mapping Table for {{datatype.name}}.{{selectedNode.position}}</h3>
    </div>
    <div class="modal-body">
        <div class="row">
            <form role="form">
                <div class="col-sm-6">
                    <h5>List of Tables</h5>

                    <div class="igl-table">
                        <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                            <thead>
                            <tr class="tbl-header">
                                <th data-ng-click="predicate = 'bindingIdentifier'; reverse=!reverse">ID
                                    <i ng-show="reverse && predicate==='bindingIdentifier'" class="fa fa-sort-desc"></i>
                                    <i ng-show="!reverse && predicate==='bindingIdentifier'" class="fa fa-sort-asc"></i>
                                    <i ng-show="predicate!=='bindingIdentifier'" class="fa fa-sort"></i>
                                </th>
                                <th data-ng-click="predicate = 'name'; reverse=!reverse">Name
                                    <i ng-show="reverse && predicate==='name'" class="fa fa-sort-desc"></i>
                                    <i ng-show="!reverse && predicate==='name'" class="fa fa-sort-asc"></i>
                                    <i ng-show="predicate!=='name'" class="fa fa-sort"></i>
                                </th>
                            </tr>
                            <tr>
                                <th>
                                    <input type="text" class="form-control" placeholder="Search by id"
                                           ng-model="searchTableValue.bindingIdentifier"/>
                                </th>
                                <th>
                                    <input type="text" class="form-control" placeholder="Search by name"
                                           ng-model="searchTableValue.name"/>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="table in tables|filter:searchTableValue|orderBy:predicate:reverse">
                                <td>
                                    <a ng-click="selectTable(table)">{{table.bindingIdentifier}}</a>
                                </td>
                                <td ng-bind-html="table.name"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-sm-6">
                    <h5>Selected Table for {{datatype.name}}.{{selectedNode.position}}</h5>
	 			<span ng-show="selectedTable != undefined">
	 				<div class="row">
                        <div class="col-sm-2">
                            <p>ID:</p>

                            <p>Extensibility:</p>
                        </div>
                        <div class="col-sm-4">
                            <p>{{selectedTable.bindingIdentifier}}</p>

                            <p>{{selectedTable.extensibility}}</p>
                        </div>
                        <div class="col-sm-2">
                            <p>Name:</p>

                            <p>Stability:</p>
                        </div>
                        <div class="col-sm-4">
                            <p>{{selectedTable.name}}</p>

                            <p>{{selectedTable.stability}}</p>
                        </div>
                    </div>

					<h5>List of Codes</h5>

					<div class="igl-table">
                        <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                            <thead>
                            <tr class="tbl-header">
                                <th data-ng-click="predicate = 'value'; reverse=!reverse">Value
                                    <i ng-show="reverse && predicate==='value'" class="fa fa-sort-desc"></i>
                                    <i ng-show="!reverse && predicate==='value'" class="fa fa-sort-asc"></i>
                                    <i ng-show="predicate!=='value'" class="fa fa-sort"></i>
                                </th>
                                <th data-ng-click="predicate = 'label'; reverse=!reverse">Description
                                    <i ng-show="reverse && predicate==='label'" class="fa fa-sort-desc"></i>
                                    <i ng-show="!reverse && predicate==='label'" class="fa fa-sort-asc"></i>
                                    <i ng-show="predicate!=='label'" class="fa fa-sort"></i>
                                </th>
                                <th>Codesys</th>
                                <th>Usage</th>
                            </tr>
                            <tr>
                                <th>
                                    <input type="text" class="form-control" placeholder="Search by value"
                                           ng-model="searchCodeValue.value"/>
                                </th>
                                <th>
                                    <input type="text" class="form-control" placeholder="Search by description"
                                           ng-model="searchCodeValue.label"/>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="c in selectedTable.codes|filter:searchCodeValue|orderBy:predicate:reverse">
                                <td ng-bind-html="c.value"></td>
                                <td ng-bind-html="c.label"></td>
                                <td ng-bind-html="c.codeSystem"></td>
                                <td ng-bind-html="c.codeUsage"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
	 			</span>
                </div>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <button ng-show="changed" type="button" ng-click="mappingTable()" class="btn btn-primary btn-sm"><i
                class="fa fa-plus fa-fw">&nbsp; </i>Save
        </button>
        <button ng-show="changed" type="button" ng-click="ok()" class="btn btn-warning btn-sm"><i
                class="fa fa-times fa-fw">&nbsp; </i>Close
        </button>
        <button ng-show="!changed" class="btn btn-warning btn-sm" ng-click="ok()"><span><i class="fa fa-times fa-fw">
            &nbsp; </i>Cancel</span></button>
    </div>
</script>


<script type="text/ng-template" id="SelectDatatypeFlavor.html">
<div class="modal-header modal-wide">
    <h3 class="modal-title">Datatype Selection</h3>
</div>

<div class="modal-body">
    <div class="row">
        <div class="col-md-12">
            <h4>Current Datatype: {{getLabel(currentDatatype)}}</h4>

            <div class="form-inline">
                 <span class="btn-group btn-group-sm pull-left" data-toggle="buttons">
                    <label class="btn  btn-primary btn-sm" ng-click="findFlavors()"
                           ng-class="{'active':scope === 'USER'}">
                        <input ng-disabled="resultsLoading" type="radio" value="USER"
                               ng-model="$parent.scope"><i class="fa fa-th-list"></i>MY DATA TYPES
                    </label>
                    <label class="btn  btn-primary btn-sm" ng-click="findFlavors()"
                           ng-class="{'active':scope === 'HL7STANDARD'}">
                        <input ng-disabled="resultsLoading" type="radio" value="HL7STANDARD"
                               ng-model="$parent.scope"><i class="fa fa-th-list"></i>HL7 DATA TYPES
                    </label>
                    <label class="btn  btn-primary btn-sm" ng-click="findFlavors()"
                           ng-class="{'active':scope === 'MASTER'}">
                        <input ng-disabled="resultsLoading" type="radio" value="MASTER"
                               ng-model="$parent.scope"><i class="fa fa-th-list"></i>MASTER DATA TYPES
                    </label>
                </span>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="col-md-1 col-1-percent" ng-show="collapsed">
                <button title="Display Test Cases" class="btn btn-xs btn-primary"
                        ng-click="collapsed = !collapsed">
                    <i class="fa fa-caret-right"></i>
                </button>
            </div>
            <div ng-show="!collapsed" class="col-md-3">
                <div class="panel panel-primary">
                    <!-- Default panel contents -->
                    <div class="panel-heading panel-heading-collapsable">
                        <i class="glyphicon glyphicon-list"></i>Datatype Flavors
                        <button title="Hide Flavors" class="btn btn-xs btn-primary pull-right"
                                ng-click="collapsed = !collapsed">
                            <i class="fa fa-caret-left"></i>
                        </button>
                    </div>
                    <div class="panel-body">
                        <div ng-show="!resultsLoading">
                            <div ng-show="resultsError === null">
                                <div class="container-testcase">
                                    <div ng-show="results != null && results.length > 0">
                                        <table st-table="tmpResults" st-safe-src="results"
                                               class="table table-striped table-bordered table-condensed igl-list-table">
                                            <thead>
                                            <!--<tr>-->
                                            <!--<th st-ratio="100">-->
                                            <!--<input st-search placeholder="Search" class="input-sm form-control" type="search"/>-->
                                            <!--</th>-->
                                            <!--</tr>-->
                                            <tr class="tbl-header">
                                                <th>
                                                </th>
                                                <th st-sort="row.ext">Label</th>
                                                <th st-sort="row.description">Description</th>
                                                <th st-sort="row.version">Version</th>
                                                <th st-sort="row.date">Last update Date</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="row in tmpResults | orderBy:'row.ext'"
                                                ng-class="{'selected': selectedDatatype != null && row.id === selectedDatatype.id}">
                                                <td>{{$index + 1}}
                                                    <input type="radio" ng-checked="isSelected(row)"
                                                           ng-click="showDatatype(row)">
                                                </td>
                                                <td>{{getLabel(row)}}</td>
                                                <td ng-bind="row.description"></td>
                                                <td ng-bind="row.version"></td>
                                                <td ng-bind="row.date"></td>
                                            </tr>
                                            </tbody>
                                            <tfoot ng-show="results.length >= 20">
                                            <tr>
                                                <td colspan="7">
                                                    <div st-pagination="" st-items-by-page="20"
                                                         st-displayed-pages="7"></div>
                                                </td>
                                            </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                    <div ng-show="results == null || results.length == 0">
                                        No Flavor found
                                    </div>

                                </div>
                            </div>
                            <div ng-show="resultsError != null">
                                <div class="alert alert-danger" role="alert" ng-bind="resultsError"></div>
                            </div>
                        </div>
                        <div ng-show="resultsLoading" style="text-align:center">
                            <i class="fa fa-circle-o-notch fa-spin fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div ng-class="{'col-md-9': !collapsed, 'col-md-11 col-98-5-percent':collapsed}">
                <!--<div ng-show="!loadingSelection">-->
                <!--<div class="" ng-show="selectedDatatype != null">-->
                <div class="panel panel-primary">
                    <div class="panel-heading">
                            <span>
                               Datatype Definition <span ng-show="selectedDatatype != null">: {{getLabel(selectedDatatype)}}</span>
                            </span>

                    </div>
                    <div class="panel-body">
                        <!--<div ng-show="datatypeError != null">-->
                        <!--<div class="alert alert-danger" role="alert" ng-bind="datatypeError"></div>-->
                        <!--</div>-->
                        <!--<div ng-show="datatypeError === null" ng-controller="SelectedDatatypeFlavorDefCtrl">-->

                        <div class="pull-right">
                                 <span style="margin-right: 20px" ng-dropdown-multiselect=""
                                       options="viewSettings.columnOptions"

                                       selected-model="viewSettings.visibleColumns"
                                       events="viewSettings.events" extra-settings="viewSettings.extra"
                                       translation-texts="viewSettings.translations"></span>
                        </div>

                        <div class="table-responsive">
                            <table tt-table tt-params="datatypeFlavorParams"
                                   class="table table-bordered table-fix-header table-condensed profile-table">
                                <thead>
                                <tr class="tbl-header"
                                    style="margin-right: {{scrollbarWidth}}px;">
                                    <th class="col-xs-2 col-fixed-250">
                                        Name
                                    </th>
                                    <th class="col-xs-1 col-fixed-80"
                                        ng-show="viewSettings.isVisibleColumn('usage')">Usage
                                    </th>
                                    <th class="col-xs-1 col-fixed-100"
                                        ng-show="viewSettings.isVisibleColumn('length')">Length
                                    </th>
                                    <th class="col-xs-1 col-fixed-80"
                                        ng-show="viewSettings.isVisibleColumn('confLength')">Conformance
                                        Length
                                    </th>
                                    <th class="col-xs-1 col-fixed-100"
                                        ng-show="viewSettings.isVisibleColumn('datatype')">Data Type
                                    </th>
                                    <th class="col-xs-1 col-fixed-130"
                                        ng-show="viewSettings.isVisibleColumn('valueSet')">Value Set
                                    </th>
                                    <th class="col-xs-1" ng-style="predWidth"
                                        ng-show="viewSettings.isVisibleColumn('predicate')">Predicate
                                    </th>
                                    <th class="col-xs-2" ng-style="csWidth"
                                        ng-show="viewSettings.isVisibleColumn('confStatement')">Conformance
                                        Statement
                                    </th>
                                    <th class="col-xs-1 col-fixed-80"
                                        ng-show="viewSettings.isVisibleColumn('defText')">Definition Text
                                    </th>
                                    <th class="col-xs-1" ng-style="commentWidth"
                                        ng-show="viewSettings.isVisibleColumn('comment')">Comment
                                    </th>
                                </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>


                        <!--</div>-->
                        <!--</div>-->
                        <!--</div>-->
                    </div>
                </div>
                <!--<div ng-show="loadingSelection" style="text-align:center">-->
                    <!--<i class="fa fa-circle-o-notch fa-spin fa-2x"></i>-->
                <!--</div>-->
            </div>
        </div>
    </div>
</div>
<div class="modal-footer">
    <button class="btn btn-primary btn-sm" ng-click="submit()" ng-disabled="selectedDatatype === null"><span><i
            class="fa fa-play fa-fw">
        &nbsp; </i>Select</span>
    </button>
    <button class="btn btn-warning btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">
        &nbsp; </i>Cancel</span>
    </button>
</div>
</script>

