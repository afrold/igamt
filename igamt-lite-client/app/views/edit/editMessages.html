<div ng-controller="MessageListCtrl" ng-init="init()">


    <div ng-show="loading" style="text-align:center">
        <i class="fa fa-spinner fa-spin"></i>
    </div>

    <div ng-show="!loading">
        <div class="row">
            <div class="page-header">
                <h3>Messages List</h3>
            </div>
            <div class="table-responsive">
                <table st-table="messages"
                       class="table table-striped table-bordered">
                    <thead>
                    <tr class="tbl-header">
                        <th></th>
                        <th>Type</th>
                        <th>Event</th>
                        <th>Struct ID</th>
                        <th>Description</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr st-select-row="row" st-select-mode="single" ng-repeat="row in profile.messages.children">
                        <td cs-select="row"><input ng-click="select(row.id)" ng-checked="row.id == message.id" type="radio"></td>
                        <td ng-bind="row.type"></td>
                        <td ng-bind-html="row.event"></td>
                        <td ng-bind-html="row.structID"></td>
                        <td ng-bind-html="row.description"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div ng-show="loadingSelection" style="text-align:center">
            <img class="ajax-loading" ng-src="images/ajax.gif" alt="loading..."/>
        </div>
        <div ng-show="!loadingSelection">
            <div ng-show="message !== null">
                <div class="row">
                    <div class="page-header">
                        <h3>Selected Message: {{message.type}}^{{message.event}}^{{message.structID}}</h3>
                    </div>
                    <div>
                        <div  style="margin-top: 20px">
                            <div class="table-responsive">
                            <table tt-table tt-params="params" class="table table-striped table-bordered">
                                <thead>
                                <tr class="tbl-header">
                                    <th>Name</th>
                                    <th>Usage</th>
                                    <th>Cardinality</th>
                                    <th>Ref</th>
                                    <th>Predicate</th>
                                    <th>Conformance Statement</th>
                                </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                            <script type="text/ng-template" id="MessageEditTree.html">
                                <tr tt-node is-branch="node.children != null && node.children.length > 0">
                                    <td style="width:40%">
                                        <img ng-show="node.type != null"
                                             style="width:15px; height:15px"
                                             ng-src="images/{{node.type}}.png">
                                        <span ng-if="node.type === 'segment'">{{node.ref.name}}:{{node.ref.description}}</span>
                                        <span ng-if="node.type === 'group'">{{node.name}}</span>
                                    </td>
                                    <td style="width:75px">
                                        <span ng-show="!node.predicates || node.predicates == null || node.predicates.length == 0" ng-bind="node.usage"></span>
                                        <span ng-show="node.predicates != null && node.predicates.length > 0">C({{node.predicates[0].trueUsage}}, {{node.predicates[0].falseUsage}})</span>
                                    </td>
                                    <td>
                                        <span ng-show="node.min != undefined && node.max != undefined">[{{node.min}}, {{node.max}}]</span>
                                    </td>
                                    <td>
                                        <span ng-show="node.type === 'segment'">
                                            <a class="point"
                                                ng-click="goToSegment(node.ref.id)"
                                                ng-bind="node.ref.label"></a>
                                        </span>
                                    </td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </script>
                        </div>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>