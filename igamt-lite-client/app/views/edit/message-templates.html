<script type="text/ng-template" id="MessageEditTree.html">
    <tr tt-node is-branch="hasChildren(node)">
        <td class="col-xs-4 col-fixed-450">
            <span>{{node.event}}^{{node.structID}}:{{node.description}}</span>
        </td>
        <td class="col-xs-1 col-fixed-80">
            <div>-</div>
        </td>
        <td class="col-xs-1 col-fixed-100">
            <div>-</div>
        </td>
        <td class="col-xs-2" ng-style="predWidth">
            <div>-</div>
        </td>
        <td class="col-xs-3" ng-style="csWidth">
            <div>-</div>
        </td>
        <td class="col-xs-1" ng-style="commentWidth">
            <div>-</div>
        </td>
    </tr>
</script>

<script type="text/ng-template" id="MessageSegmentRefEditTree.html">
    <tr tt-node is-branch="hasChildren(node)">
        <td class="col-xs-4 col-fixed-450">
            <img style="width:15px; height:15px"
                 ng-src="images/segment.png">
            <a class="point"
               ng-click="goToSegment(node.ref)">{{node.position}}.{{segmentsMap[node.ref].name}}:{{segmentsMap[node.ref].description}}</a>
        </td>
        <td class="col-xs-1 col-fixed-80">
            <div>
                <!--<span ng-show="!node.predicates || node.predicates == null || node.predicates.length == 0">-->
											<span>
                                                <select class="form-control input-sm"
                                                        name="usage"
                                                        ng-change="recordChangeForEdit2(node.type,'edit',node.id,'usage', node.usage)"
                                                        required
                                                        ng-model="node.usage"
                                                        ng-options="usage for usage in config.usages">
                                                </select>
                                            </span>
                <!--<span ng-show="node.predicates != null && node.predicates.length > 0">C({{node.predicates[0].trueUsage}}, {{node.predicates[0].falseUsage}})</span>-->

            </div>
        </td>
        <td class="col-xs-1 col-fixed-100">
            <div
                    ng-controller="MessageRowCtrl">
                                            <span ng-form name="{{formName}}">
                                                <input style="width:45%" class="igl-input"
                                                       name="min"
                                                       ng-change="recordChangeForEdit2(node.type, 'edit',node.id,'min', node.min)"
                                                       ng-pattern="/^\d+$/"
                                                       ng-class="{ 'has-error' : {{formName}}.min.$invalid}"
                                                       ng-model="node.min" required ng-minlength="1">
                                                <input style="width:45%" class="igl-input" type="text"
                                                       name="max"
                                                       ng-change="recordChangeForEdit2(node.type,'edit',node.id,'max', node.max)"
                                                       ng-class="{ 'has-error' : {{formName}}.max.$invalid}"
                                                       ng-pattern="/^\d+$|^\*?$/"
                                                       ng-model="node.max" required>
                                            </span>
            </div>
        </td>
        <!--<td class="col-xs-1">-->
        <!--<span ng-show="node.type === 'segmentRef'">-->
        <!--<a class="point"-->
        <!--ng-click="goToSegment(node.ref)"-->
        <!--ng-bind="node.ref.label"></a>-->
        <!--</span>-->

        <!--<div ng-show="node.type !== 'segmentRef'">-</div>-->
        <!--</td>-->
        <td class="col-xs-2" ng-style="predWidth">
            <div>-</div>
        </td>

        <td class="col-xs-3" ng-style="csWidth">
            <div>-</div>
        </td>


        <td class="col-xs-1" ng-style="commentWidth">
            <div>
                <button ng-show="node.comment === '' || node.comment === null" type="button"
                        ng-click="openInputTextDlg(node, 'comment', 'Comment', false)" class="btn btn-info btn-xs">
                    <i class="fa fa-plus fa-fw"></i>
                </button>
                <a class="point" ng-click="openInputTextDlg(node, 'comment','Comment', false)"
                   tooltip-html="node.comment" tooltip-append-to-body="true"
                   tooltip-class="constraints-tooltip"
                   tooltip-trigger tooltip-animation="false" tooltip-placement="left"
                   ng-show="node.comment !== '' && node.comment !== null" ng-bind="node.comment"></a>
            </div>
        </td>
    </tr>
</script>

<script type="text/ng-template" id="MessageGroupEditTree.html">
    <tr tt-node is-branch="hasChildren(node)">
        <td class="col-xs-4 col-fixed-450">
                                        <span>

                                            <img style="width:15px; height:15px"
                                                 ng-src="images/group.png">
                                            <span>{{node.position}}.{{node.name}}</span>
                                        </span>
        </td>
        <td class="col-xs-1 col-fixed-80">
            <div>
 											<span>
                                                <select class="form-control input-sm"
                                                        name="usage"
                                                        ng-change="recordChangeForEdit2(node.type,'edit',node.id,'usage', node.usage)"
                                                        required
                                                        ng-model="node.usage"
                                                        ng-options="usage for usage in config.usages">
                                                </select>
                                            </span>

            </div>
        </td>
        <td class="col-xs-1 col-fixed-100">
            <div
                    ng-controller="MessageRowCtrl">
                                            <span ng-form name="{{formName}}">
                                                <input style="width:45%" class="igl-input"
                                                       name="min"
                                                       ng-change="recordChangeForEdit2(node.type, 'edit',node.id,'min', node.min)"
                                                       ng-pattern="/^\d+$/"
                                                       ng-class="{ 'has-error' : {{formName}}.min.$invalid}"
                                                       ng-model="node.min" required ng-minlength="1">
                                                <input style="width:45%" class="igl-input" type="text"
                                                       name="max"
                                                       ng-change="recordChangeForEdit2(node.type,'edit',node.id,'max', node.max)"
                                                       ng-class="{ 'has-error' : {{formName}}.max.$invalid}"
                                                       ng-pattern="/^\d+$|^\*?$/"
                                                       ng-model="node.max" required>
                                            </span>
            </div>
        </td>
        <!--<td class="col-xs-1">-->
        <!--<span ng-show="node.type === 'segmentRef'">-->
        <!--<a class="point"-->
        <!--ng-click="goToSegment(node.ref)"-->
        <!--ng-bind="node.ref.label"></a>-->
        <!--</span>-->

        <!--<div ng-show="node.type !== 'segmentRef'">-</div>-->
        <!--</td>-->
        <td class="col-xs-2" ng-style="predWidth">
            <div>
                <div ng-show="countPredicates(node) == 0">
                    <button type="button" ng-click="managePredicate(node)" class="btn btn-info btn-xs">
                        <span><i class="fa fa-plus fa-fw"></i></span>
                    </button>
                </div>
                <p ng-repeat="p in node.predicates">
                    <a ng-click="managePredicate(node)"
                       tooltip-html="getConstraintAsString(p)" tooltip-append-to-body="true"
                       tooltip-class="constraints-tooltip" ng-bind-html="getConstraintAsString(p)" tooltip-trigger
                       tooltip-animation="false" tooltip-placement="left"

                            ></a>
                </p>
            </div>
        </td>

        <td class="col-xs-3" ng-style="csWidth">
            <div>
                <div ng-show="countConformanceStatements(node) == 0">
                    <button type="button" ng-click="manageConformanceStatement(node)" class="btn btn-info btn-xs">
                        <span><i class="fa fa-plus fa-fw"></i></span>
                    </button>
                </div>
                <p ng-repeat="c in node.conformanceStatements">
                    <a ng-click="manageConformanceStatement(node)"
                       tooltip-html="getConstraintAsString(p)" tooltip-append-to-body="true"
                       tooltip-class="constraints-tooltip" ng-bind-html="getConstraintAsString(p)" tooltip-trigger
                       tooltip-animation="false" tooltip-placement="left"
                            ></a>
                </p>
            </div>
        </td>


        <td class="col-xs-1" ng-style="commentWidth">
            <div>
                <button ng-show="node.comment === '' || node.comment === null" type="button"
                        ng-click="openInputTextDlg(node, 'comment', 'Comment', false)" class="btn btn-info btn-xs">
                    <i class="fa fa-plus fa-fw"></i>
                </button>
                <a class="point" ng-click="openInputTextDlg(node, 'comment','Comment', false)"
                   tooltip-html="node.comment" tooltip-append-to-body="true"
                   tooltip-class="constraints-tooltip"
                   tooltip-trigger tooltip-animation="false" tooltip-placement="left"
                   ng-show="node.comment !== '' && node.comment !== null" ng-bind="node.comment"></a>
            </div>
        </td>
    </tr>
</script>


<script type="text/ng-template" id="PredicateMessageCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Predicates for {{selectedNode.name}}</h3>
    </div>

    <div class="modal-body">
        <form role="form">
            <h5>Predicates of {{selectedNode.name}}</h5>

            <div class="table-responsive">
                <table class="table table-striped table-bordered">
                    <thead>
                    <tr class="tbl-header">
                        <th class="col-xs-7">Condition</th>
                        <th class="col-xs-2">Target Location</th>
                        <th class="col-xs-1">True Usage</th>
                        <th class="col-xs-1">False Usage</th>
                        <th class="col-xs-1"></th>
                    </tr>
                    </thead>

                    <tbody>
                    <tr ng-repeat="p in selectedNode.predicates">
                        <td class="col-xs-7">{{p.description}}</td>
                        <td class="col-xs-2">{{p.constraintId}}</td>
                        <td class="col-xs-1">{{p.trueUsage}}</td>
                        <td class="col-xs-1">{{p.falseUsage}}</td>
                        <td class="col-xs-1">
                            <button type="button" ng-click="deletePredicate(p)" class="btn btn-xs btn-danger">
                                <span><i class="fa fa-minus-circle fa-fw"></i></span>
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <h5>Define New Predicate of {{selectedNode.name}}</h5>

            <div class="table-responsive">
                <table class="table table-striped table-bordered">
                    <thead>
                    <tr class="tbl-header">
                        <th class="col-xs-2" colspan="1" rowspan="2">Target Node</th>
                        <th class="col-xs-1" colspan="1" rowspan="2">True Usage</th>
                        <th class="col-xs-1" colspan="1" rowspan="2">False Usage</th>
                        <th class="col-xs-8" colspan="4">Condition</th>
                        <th class="col-xs-1" colspan="1" rowspan="2"></th>
                    </tr>
                    <tr class="tbl-header">
                        <th class="col-xs-2" colspan="1">Node</th>
                        <th class="col-xs-2" colspan="1">Verb</th>
                        <th class="col-xs-2" colspan="1">Constraint</th>
                        <th class="col-xs-2" colspan="1">Value</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td class="col-xs-2" colspan="1">
                            <span>{{newConstraint.location_T}}</span>
												<span ng-show="newConstraint.childNodes_T != null && newConstraint.childNodes_T.length > 0">
													<select name="child" class="igl-input" ng-change="updateLocationT()"
                                                            ng-model="newConstraint.currentNode_T"
                                                            ng-options="child as child.name for child in newConstraint.childNodes_T"/>
												</span>
                        </td>

                        <td class="col-xs-1" colspan="1">
                            <select name="trueUsage" class="igl-input" ng-model="newConstraint.trueUsage"
                                    ng-options="usage for usage in config.usages"/>
                        </td>

                        <td class="col-xs-1" colspan="1">
                            <select name="falseUsage" class="igl-input" ng-model="newConstraint.falseUsage"
                                    ng-options="usage for usage in config.usages"/>
                        </td>

                        <td class="col-xs-2" colspan="1">
                            <span>{{newConstraint.location_1}}</span>
												<span ng-show="newConstraint.childNodes_1 != null && newConstraint.childNodes_1.length > 0">
													<select name="child" class="igl-input" ng-change="updateLocation1()"
                                                            ng-model="newConstraint.currentNode_1"
                                                            ng-options="child as child.name for child in newConstraint.childNodes_1"/>
												</span>
                        </td>

                        <td class="col-xs-2" colspan="1">
                            <select name="verb" class="igl-input"
                                    ng-change=""
                                    ng-model="newConstraint.verb"
                                    ng-options="constraintVerb for constraintVerb in config.constraintVerbs">
                            </select>
                        </td>

                        <td class="col-xs-2" colspan="1">
                            <select name="contraintType" class="igl-input"
                                    ng-change=""
                                    ng-model="newConstraint.contraintType"
                                    ng-options="contraintType for contraintType in config.constraintTypes">
                            </select>
                        </td>

                        <td class="col-xs-2" colspan="1">
                								<span ng-show="newConstraint.contraintType == 'a literal value'">
                									<input style="width:100%" class="igl-input"
                                                           ng-model="newConstraint.value" placeholder="Literal Value"
                                                           type="text"/>
                								</span>

												<span ng-show="newConstraint.contraintType == 'one of list values'">
                									<input style="width:100%" class="igl-input"
                                                           ng-model="newConstraint.value" placeholder="CSV Value"
                                                           type="text"/>
                								</span>

												<span ng-show="newConstraint.contraintType == 'formatted value'">
                									<select name="format" class="igl-input"
                                                            ng-model="newConstraint.value"
                                                            ng-options="predefinedFormat for predefinedFormat in config.predefinedFormats"/>
                								</span>

												<span ng-show="newConstraint.contraintType == 'identical to the another node'">
													<span>{{newConstraint.location_2}}</span>
													<span ng-show="newConstraint.childNodes_2 != null && newConstraint.childNodes_2.length > 0">
														<select name="child" class="igl-input"
                                                                ng-change="updateLocation2()"
                                                                ng-model="newConstraint.currentNode_2"
                                                                ng-options="child as child.name for child in newConstraint.childNodes_2"/>
													</span>
                								</span>
                        </td>

                        <td class="col-xs-1" colspan="1">
                            <button title="Add Predicate" type="button" class="btn btn-xs btn-success"
                                    ng-click="addPredicate()">
                                <span><i class="fa fa-plus-circle fa-fw"></i></span>
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </form>
    </div>

    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ok()">
            <span><i class="fa fa-times fa-fw">&nbsp; </i>Close</span>
        </button>
    </div>
</script>
<script type="text/ng-template" id="ConformanceStatementMessageCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">ConformanceStatement for {{selectedNode.name}}</h3>
    </div>

    <div class="modal-body">
        <form role="form">
            <h5>ConformanceStatements of {{selectedNode.name}}</h5>

            <div class="table-responsive">
                <table class="table table-striped table-bordered">
                    <thead>
                    <tr class="tbl-header">
                        <th class="col-xs-2">ID</th>
                        <th class="col-xs-9">Desciption</th>
                        <th class="col-xs-1"></th>
                    </tr>
                    </thead>

                    <tbody>
                    <tr ng-repeat="c in selectedNode.conformanceStatements">
                        <td class="col-xs-2">{{c.constraintId}}</td>
                        <td class="col-xs-9">{{c.description}}</td>
                        <td class="col-xs-1">
                            <button type="button" ng-click="deleteConformanceStatement(c)"
                                    class="btn btn-xs btn-danger">
                                <span><i class="fa fa-minus-circle fa-fw"></i></span>
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <h5>Define New Conformance Statement of {{selectedNode.name}}</h5>

            <div class="table-responsive">
                <table class="table table-striped table-bordered">
                    <thead>
                    <tr class="tbl-header">
                        <th class="col-xs-2" colspan="1" rowspan="2">ID</th>
                        <th class="col-xs-10" colspan="4">Desciption</th>
                        <th class="col-xs-1" colspan="1" rowspan="2"></th>
                    </tr>
                    <tr class="tbl-header">
                        <th class="col-xs-3" colspan="1">Node</th>
                        <th class="col-xs-2" colspan="1">Verb</th>
                        <th class="col-xs-2" colspan="1">Constraint</th>
                        <th class="col-xs-3" colspan="1">Value</th>
                    </tr>
                    </thead>

                    <tbody>
                    <tr>
                        <td class="col-xs-2" colspan="1">
                            <input style="width:100%" class="igl-input" ng-model="newConstraint.constraintId"
                                   placeholder="Type ID" type="text"/>
                        </td>

                        <td class="col-xs-3" colspan="1">
                            <span>{{newConstraint.location_1}}</span>
												<span ng-show="newConstraint.childNodes_1 != null && newConstraint.childNodes_1.length > 0">
													<select name="child" class="igl-input" ng-change="updateLocation1()"
                                                            ng-model="newConstraint.currentNode_1"
                                                            ng-options="child as child.name for child in newConstraint.childNodes_1"/>
												</span>
                        </td>

                        <td class="col-xs-2" colspan="1">
                            <select name="verb" class="igl-input"
                                    ng-change=""
                                    ng-model="newConstraint.verb"
                                    ng-options="constraintVerb for constraintVerb in config.constraintVerbs">
                            </select>
                        </td>

                        <td class="col-xs-2" colspan="1">
                            <select name="contraintType" class="igl-input"
                                    ng-change=""
                                    ng-model="newConstraint.contraintType"
                                    ng-options="contraintType for contraintType in config.constraintTypes">
                            </select>
                        </td>

                        <td class="col-xs-3" colspan="1">
                								<span ng-show="newConstraint.contraintType == 'a literal value'">
                									<input style="width:100%" class="igl-input"
                                                           ng-model="newConstraint.value" placeholder="Literal Value"
                                                           type="text"/>
                								</span>

												<span ng-show="newConstraint.contraintType == 'one of list values'">
                									<input style="width:100%" class="igl-input"
                                                           ng-model="newConstraint.value" placeholder="CSV Value"
                                                           type="text"/>
                								</span>

												<span ng-show="newConstraint.contraintType == 'formatted value'">
                									<select name="format" class="igl-input"
                                                            ng-model="newConstraint.value"
                                                            ng-options="predefinedFormat for predefinedFormat in config.predefinedFormats"/>
                								</span>

												<span ng-show="newConstraint.contraintType == 'identical to the another node'">
													<span>{{newConstraint.location_2}}</span>
													<span ng-show="newConstraint.childNodes_2 != null && newConstraint.childNodes_2.length > 0">
														<select name="child" class="igl-input"
                                                                ng-change="updateLocation2()"
                                                                ng-model="newConstraint.currentNode_2"
                                                                ng-options="child as child.name for child in newConstraint.childNodes_2"/>
													</span>
                								</span>
                        </td>

                        <td class="col-xs-1" colspan="1">
                            <button title="Add Conformance Statement" type="button" class="btn btn-xs btn-success"
                                    ng-click="addConformanceStatement()">
                                <span><i class="fa fa-plus-circle fa-fw"></i></span>
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </form>
    </div>

    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ok()">
            <span><i class="fa fa-times fa-fw">&nbsp; </i>Close</span>
        </button>
    </div>
</script>