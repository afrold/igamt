<style id="antiClickjack">
    body {
        display: none !important;
    }
</style>
<script type="text/javascript">
    if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
    } else {
        top.location = self.location;
    }
</script>
<script type="text/ng-template" id="EditDatatypesInLib.html">
    <div ng-controller="DatatypesInLib" ng-init="initDatatypes()" class="container">
        <div ng-show="loadingSelection" style="text-align: center;">
            <i class="fa fa-spinner fa-pulse fa-align-center fa-4x"></i>
        </div>
        <div ng-show="!loadingSelection">
            <div ng-show="datatype !== null" id="executionPanel">
                <div class="row" style="margin-left:0px; margin-right: 10px">
                    <div class="page-header" style="margin-bottom: 20px">
                        <span class="header4">Data Type: {{getDatatypeLabel(datatype)}}</span>
                        <span class="pull-right">
<label for="publish" style="margin : 0 10px 0 0">
         <input type="checkbox" ng-click="publishDatatype(datatype)" ng-model="datatype.status" ng-true-value="'PUBLISHED'"  ng-disabled="datatype.status === 'PUBLISHED'"|| readOnly" style="margin-right : 8px"/>Published</label>
         <button title="Save Changes" type="button" class="btn btn-raised btn-sm btn-success"
                 ng-disabled="!editForm.$dirty||readOnly||datatype.status === 'PUBLISHED'"
                 ng-click="saveDatatype(datatype)">
             <span><i class="fa fa-check fa-fw"></i> Save</span>
                        </button>
                        <button title="Reset Changes" type="button" class="btn btn-raised btn-sm btn-warning" ng-disabled="!editForm.$dirty||readOnly||datatype.status === 'PUBLISHED'" ng-click="reset()">
                            <span><i class="fa fa-times fa-fw"></i> Reset</span>
                        </button>
                        </span>
                    </div>
                    <div class="col-md-12" ng-controller="cmpDatatypeCtrl as cmp">
                        <tabset active="tabStatus.active">
                            <tab ng-click="setDeltaToF()">
                                <tab-heading>
                                    <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i> Data Type MetaData
                                </tab-heading>
                                <div style="margin-top: 20px">
                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.name.$invalid}">
                                        <label class="col-md-2 control-label">Name*</label>

                                        <div class="controls col-md-10">
                                            <input type="text" disabled name="name" class="form-control" ng-model="datatype.name" required>
                                        </div>
                                    </div>
                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.ext.$invalid}" ng-hide="datatype.scope === 'HL7STANDARD'">
                                        <label class="col-md-2 control-label">Extension</label>

                                        <div class="controls col-md-10">
                                            <input type="text" ng-change="recordChanged()" ng-disabled="readOnly ||  datatype.status === 'PUBLISHED'" name="ext" id="ext" class="form-control" ng-model="datatype.ext" required aria-describedby="helpBlock2">
                                            <span id="helpBlock2" class="help-block" style="color:red" ng-show="isDuplicatedTwoContexts(datatype, 'name', 'ext', datatypeLibrary.children)">Extension already used</span>
                                        </div>
                                    </div>
                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.hl7Version.$invalid}">
                                        <label class="col-md-2 control-label">Hl7 Versions </label>

                                        <div class="controls col-md-10">
                                            <input type="text" disabled name="hl7version" id="hl7Versions" class="form-control" ng-model="datatype.hl7versions" required aria-describedby="helpBlock2">
                                        </div>
                                    </div>

                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.description.$invalid}">
                                        <label class="col-md-2 control-label">Description</label>

                                        <div class="controls col-md-10">
                                            <input type="text" disabled ng-change="setDirty()" name="description" class="form-control" ng-model="datatype.description" required>
                                        </div>
                                    </div>
                                    <!--<div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.hl7Version.$invalid}">-->
                                    <!--<label class="col-md-2 control-label">HL7 Version*</label>-->

                                    <!--<div class="controls col-md-10">-->
                                    <!--<input type="text" disabled ng-change="setDirty()" name="hl7Versions" class="form-control" ng-model="datatype.hl7versions" required>-->
                                    <!--</div>-->
                                    <!--</div>-->
                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.purposeUse.$invalid}">
                                        <label class="col-md-2 control-label">Purpose and Use</label>

                                        <div class="controls col-md-10">
                                            <textarea rows="3" cols="20" ng-disabled="readOnly || (datatype.scope === 'HL7STANDARD' || datatype.status === 'PUBLISHED')" ng-change="setDirty()" name="purposeUse" id="purposeUse" class="form-control" ng-model="datatype.purposeUse" />
                                        </div>
                                    </div>
                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.comment.$invalid}">
                                        <label class="col-md-2 control-label">Comment</label>

                                        <div class="controls col-md-10">
                                            <textarea rows="3" cols="20" ng-disabled="readOnly || (datatype.scope === 'HL7STANDARD' || datatype.status === 'PUBLISHED')" ng-change="recordDatatypeChange('datatype','edit',datatype.id,'comment', datatype.comment)" name="comment" id="comment"
                                                class="form-control" ng-model="datatype.comment" />
                                        </div>
                                    </div>
                                    <div class="form-group control-group" ng-class="{'igl-has-error has-feedback' : editForm.text.$invalid}">
                                        <label class="col-md-2 control-label">Usage Note </label>

                                        <div class="controls col-md-10">
                                            <div ng-if="!readOnly && datatype.status !== 'PUBLISHED'">
                                                <textarea froala="froalaEditorOptions" ng-model="datatype.usageNote" name="usageNote" id="usageNote" ng-change="setDirty()"></textarea>
                                            </div>
                                            <div ng-if="readOnly || (datatype.scope === 'HL7STANDARD' || datatype.status === 'PUBLISHED')">
                                                <div class="fr-view">
                                                    <div froala-view="datatype.usageNote"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </tab>
                            <tab ng-click="setDeltaToF(); refreshSlider();">
                                <tab-heading>
                                    <i class="fa fa-table" aria-hidden="true"></i> Data Type Definition
                                </tab-heading>

                                <div class="el-def" style="margin-top: 5px">
                                    <accordion>


                                        <div accordion-group class="panel-primary" is-open="accordStatus.isFifthOpen">
                                            <accordion-heading>
                                                <span style="color:white;">Definition Pre-Text</span> <i class="pull-left fa" style="color:white;" ng-class="{'fa-chevron-down': accordStatus.isFifthOpen, 'fa-chevron-right': !accordStatus.isFifthOpen}"></i>                                                </accordion-heading>
                                            <div class="panel-body">
                                                <div ng-if="!readOnly && datatype.status !== 'PUBLISHED'">
                                                    <textarea froala="froalaEditorOptions" ng-model="datatype.defPreText" name="text" id="text" ng-change="setDirty()"></textarea>
                                                </div>
                                                <div ng-if="readOnly || (datatype.scope === 'HL7STANDARD' || datatype.status === 'PUBLISHED')">
                                                    <div class="fr-view">
                                                        <div froala-view="datatype.defPreText"></div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                        <div accordion-group class="panel-primary" is-open="accordStatus.isFirstOpen" ng-click="refreshSlider();">

                                            <accordion-heading>
                                                <span style="color:white;">Data Type Definition </span><i class="pull-left fa" style="color:white;" ng-class="{'fa-chevron-down': accordStatus.isFirstOpen, 'fa-chevron-right': !accordStatus.isFirstOpen}"></i>
                                            </accordion-heading>
                                            <div class="" style="margin:5px 5px 5px 5px">
                                                 <div ng-if="datatype.components && datatype.components.length > 0" class="pull-left">
                                                    <div ng-dropdown-multiselect=""
                                                        options="viewSettings.columnOptions"
                                                        selected-model="viewSettings.visibleColumns"
                                                        events="viewSettings.events" extra-settings="viewSettings.extra"
                                                        translation-texts="viewSettings.translations"></div>
                                         </div>

                                                 <div ng-show="datatype.components && datatype.components.length > 0" class=igl-def-table-container">
                                                    <table id="treeTable" tt-table tt-params="datatypesParams" class="table table-bordered table-fix-header table-condensed profile-table">
                                                        <thead>
                                                            <tr class="tbl-header" style="">
                                                                <th class="col-md-2 col-fixed-250">Name</th>
                                                                <th class="col-md-1 col-fixed-80">Usage
                                                                    <button type="button" class="btn btn-raised btn-info btn-xs" ng-if="(datatype.scope === 'USER')&& !readOnly && (datatype.components.length>0)" ng-click="OtoX(datatype)">O to X
                                                                        </button>
                                                                </th>
                                                                <th class="col-md-1 col-fixed-100">Length
                                                                </th>
                                                                <th class="col-md-1 col-fixed-80">
                                                                    Conformance Length
                                                                </th>
                                                                <th class="col-md-1 col-fixed-100" ng-if="viewSettings.isVisibleColumn('datatype')">Data Type
                                                                </th>
                                                                <th class="col-md-1 col-fixed-130" ng-if="viewSettings.isVisibleColumn('valueSet')">Value Set
                                                                </th>
                                                                <th class="col-md-1" ng-style="predWidthx" ng-if="viewSettings.isVisibleColumn('predicate')">
                                                                    Predicate
                                                                </th>
                                                                <th class="col-md-2" ng-style="csWidthx" ng-if="viewSettings.isVisibleColumn('confStatement')">
                                                                    Conformance Statement
                                                                </th>
                                                                <th class="col-md-1 col-fixed-80" ng-if="viewSettings.isVisibleColumn('defText')">Definition Text
                                                                </th>
                                                                <th class="col-md-1" ng-style="commentWidth" ng-if="viewSettings.isVisibleColumn('comment')">
                                                                    Comment
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                 </div>


                                                <div ng-hide="(datatype.components && datatype.components.length > 0) || datatype.name === 'DTM'">
                                                    Primitive Data Type
                                                </div>

                                                <div ng-if="datatype.name === 'DTM'" class="table table-bordered table-fix-header table-condensed profile-table">
                                                    <label>Date, Time, and TimeZone Format</label>
                                                    <table class="table table-striped table-bordered">
                                                        <thead>
                                                            <tr class="tbl-header">
                                                                <th class="col-md-1">YYYY</th>
                                                                <th class="col-md-1">MM</th>
                                                                <th class="col-md-1">DD</th>
                                                                <th class="col-md-1">HH</th>
                                                                <th class="col-md-1">MM</th>
                                                                <th class="col-md-1">SS</th>
                                                                <th class="col-md-1">.ssss</th>
                                                                <th class="col-md-1">+/-ZZZZ</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td class="col-md-1" align="center" ng-class="{'activeTD': (datatype.precisionOfDTM > 0)}">
                                                                    <Span ng-if="datatype.precisionOfDTM > 0">Required</Span>
                                                                    <Span ng-hide="datatype.precisionOfDTM > 0">Optional</Span>
                                                                </td>
                                                                <td class="col-md-1" align="center" ng-class="{'activeTD': (datatype.precisionOfDTM > 1)}">
                                                                    <Span ng-if="datatype.precisionOfDTM > 1">Required</Span>
                                                                    <Span ng-hide="datatype.precisionOfDTM > 1">Optional</Span>
                                                                </td>
                                                                <td class="col-md-1" align="center" ng-class="{'activeTD': (datatype.precisionOfDTM > 2)}">
                                                                    <Span ng-if="datatype.precisionOfDTM > 2">Required</Span>
                                                                    <Span ng-hide="datatype.precisionOfDTM > 2">Optional</Span>
                                                                </td>
                                                                <td class="col-md-1" align="center" ng-class="{'activeTD': (datatype.precisionOfDTM > 3)}">
                                                                    <Span ng-if="datatype.precisionOfDTM > 3">Required</Span>
                                                                    <Span ng-hide="datatype.precisionOfDTM > 3">Optional</Span>
                                                                </td>
                                                                <td class="col-md-1" align="center" ng-class="{'activeTD': (datatype.precisionOfDTM > 4)}">
                                                                    <Span ng-if="datatype.precisionOfDTM > 4">Required</Span>
                                                                    <Span ng-hide="datatype.precisionOfDTM > 4">Optional</Span>
                                                                </td>
                                                                <td class="col-md-1" align="center" ng-class="{'activeTD': (datatype.precisionOfDTM > 5)}">
                                                                    <Span ng-if="datatype.precisionOfDTM > 5">Required</Span>
                                                                    <Span ng-hide="datatype.precisionOfDTM > 5">Optional</Span>
                                                                </td>
                                                                <td class="col-md-1" align="center" ng-class="{'activeTD': (datatype.precisionOfDTM > 6)}">
                                                                    <Span ng-if="datatype.precisionOfDTM > 6">Required</Span>
                                                                    <Span ng-hide="datatype.precisionOfDTM > 6">Optional</Span>
                                                                </td>
                                                                <td class="col-md-1" align="center" ng-class="{'activeTD': (datatype.timeZoneOfDTM)}">
                                                                    <Span ng-if="datatype.timeZoneOfDTM">Required</Span>
                                                                    <Span ng-hide="datatype.timeZoneOfDTM">Optional</Span>
                                                                </td>
                                                            </tr>

                                                            <tr ng-if="datatype.status!=='PUBLISHED'">
                                                                <td class="col-md-7" colspan="7">
                                                                    <rzslider rz-slider-options="dtmSliderOptions" rz-slider-model="datatype.precisionOfDTM"></rzslider>
                                                                </td>
                                                                <td class="col-md-1" align="center" valign="center">
                                                                    <input type="checkbox" ng-model="datatype.timeZoneOfDTM"/>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>

                                        <div accordion-group class="panel-primary" is-open="accordStatus.isSixOpen">
                                            <accordion-heading>
                                                <span style="color:white;">Definition Post-Text</span> <i class="pull-left fa" style="color:white;" ng-class="{ 'fa-chevron-down': accordStatus.isSixOpen, 'fa-chevron-right': !accordStatus.isSixOpen}"></i>                                                </accordion-heading>
                                            <div class="panel-body">
                                                <div ng-if="!readOnly && datatype.status !=='PUBLISHED'">
                                                    <textarea froala="froalaEditorOptions" ng-model="datatype.defPostText" name="text" id="text" ng-change="setDirty()"></textarea>
                                                </div>
                                                <div ng-if="readOnly || (datatype.scope==='HL7STANDARD' || datatype.status==='PUBLISHED' )">
                                                    <div class="fr-view">
                                                        <div froala-view="datatype.defPostText"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div accordion-group class="panel-primary" is-open="accordStatus.isSecondOpen">
                                            <accordion-heading>
                                                <span style="color:white;">Conformance Statements</span> <i class="pull-left fa" style="color:white;" ng-class="{ 'fa-chevron-down': accordStatus.isSecondOpen, 'fa-chevron-right': !accordStatus.isSecondOpen}"></i>                                                </accordion-heading>
                                            <div class="panel-body">
                                                <div class="col-md-12 igl-page-header" style="">

                                                    <span class="pull-right">
                                                        <button class="btn btn-raised btn-primary btn-xs" ng-click="manageConformanceStatement(null);"
                                                                ng-hide="readOnly || (datatype.scope==='HL7STANDARD' || datatype.status==='PUBLISHED' ) || !datatype.components || datatype.components.length==0"><span><i
                                                                class="fa fa-plus fa-fw">
                                                            &nbsp; </i>Add Conf.Statement</span></button>
                                                    </span>
                                                </div>
                                                <div class="col-md-12">
                                                    <span ng-hide="datatype.conformanceStatements.length> 0">No conformance statement</span>
                                                        <table st-table="displayed" st-safe-src="datatype.conformanceStatements" class="table table-striped table-bordered" ng-if="datatype.conformanceStatements.length > 0">
                                                            <thead>
                                                                <tr class="tbl-header">
                                                                    <th st-sort="constraintId" class="col-md-1">ID</th>
                                                                    <th st-sort="constraintTarget" class="col-md-3">Location</th>
                                                                    <th class="col-md-7">Description</th>
                                                                    <th class="col-md-1"></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr ng-repeat="c in displayed ">
                                                                    <td class="col-md-1">
                                                                        {{c.constraintId}}
                                                                    </td>
                                                                    <td class="col-md-3">
                                                                        <span ng-bind="displayLocationForDatatype(datatype, c.constraintTarget)" />
                                                                    </td>
                                                                    <td class="col-md-7">
                                                                        {{c.description}}
                                                                    </td>
                                                                    <td class="col-md-1" align="center">
                                                                        <button class="btn btn-raised btn-danger btn-xxs" ng-click="datatype.conformanceStatements.splice(datatype.conformanceStatements.indexOf(c), 1);" ng-disabled="readOnly"><span><i class="fa fa-trash fa-fw">
                                                                        &nbsp; </i>Del</span></button>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>

                                                    </div>

                                                </div>
                                            </div>
                                            <div accordion-group class="panel-primary" is-open="accordStatus.isThirdOpen">
                                                <accordion-heading>
                                                    <span style="color:white;">Conditional Predicates</span> <i class="pull-left fa" style="color:white;" ng-class="{'fa-chevron-down': accordStatus.isThirdOpen, 'fa-chevron-right': !accordStatus.isThirdOpen}"></i>                                                    </accordion-heading>
                                                <div class="panel-body">
                                                    <div class="col-md-12 igl-page-header">

                                                        <span class="pull-right">
                                                                <button class="btn btn-raised btn-primary btn-xs" ng-click="managePredicate(null);"
                                                                        ng-hide="readOnly || (datatype.scope === 'HL7STANDARD' || datatype.status === 'PUBLISHED') || !datatype.components || datatype.components.length == 0"><span><i
                                                                        class="fa fa-plus fa-fw">
                                                                    &nbsp; </i>Add Predicate</span></button>
                                                        </span>
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span ng-hide="datatype.predicates.length > 0">No conditional predicate</span>
                                                        <table st-table="displayed" st-safe-src="datatype.predicates" class="table table-striped table-bordered" ng-if="datatype.predicates.length > 0">
                                                            <thead>
                                                                <tr class="tbl-header">
                                                                    <th st-sort="constraintTarget" class="col-md-3">Location</th>
                                                                    <th class="col-md-6">Description</th>
                                                                    <th class="col-md-1">True usage</th>
                                                                    <th class="col-md-1">False usage</th>
                                                                    <th class="col-md-1"></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr ng-repeat="p in displayed">
                                                                    <td class="col-md-3">
                                                                        <span ng-bind="displayLocationForDatatype(datatype, p.constraintTarget)" />
                                                                    </td>
                                                                    <td class="col-md-6">
                                                                        {{p.description}}
                                                                    </td>
                                                                    <td class="col-md-1">
                                                                        {{p.trueUsage}}
                                                                    </td>
                                                                    <td class="col-md-1">
                                                                        {{p.falseUsage}}
                                                                    </td>
                                                                    <td class="col-md-1" align="center">
                                                                        <button class="btn btn-raised btn-danger btn-xxs" ng-click="datatype.predicates.splice(datatype.predicates.indexOf(p), 1);" ng-disabled="readOnly"><span><i
                                                                                    class="fa fa-trash fa-fw">
                                                                                &nbsp; </i>Del</span>
                                                                            </button>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>


                                    </accordion>
                                    </div>
                            </tab>
                        </tabset>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</script>
<script type="text/ng-template" id="ConfirmDatatypeDeleteCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Delete Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>Are you sure you want to delete Datatype {{dtToDelete.name}} - {{dtToDelete.label}} ? </p>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-danger btn-sm" ng-click="delete()"><span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Delete</span>
        </button>
    </div>
</script>
<script type="text/ng-template" id="DatatypeEditTreeINLIB2.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td class="col-md-2 col-fixed-250">{{$index}}
        </td>
        <td class="col-md-1 col-fixed-80 emptyCol">
         </td>
        <td class="col-md-1 col-fixed-100 emptyCol" ng-if="viewSettings.isVisibleColumn('datatype')">
         </td>
        <td class="col-md-1 emptyCol" ng-style="predWidthx" ng-if="viewSettings.isVisibleColumn('codeSys')">
         </td>
        <td class="col-md-1 emptyCol" ng-style="predWidthx" ng-if="viewSettings.isVisibleColumn('predicate')">
         </td>
        <td class="col-md-2 emptyCol" ng-style="csWidthx" ng-if="viewSettings.isVisibleColumn('confStatement')">
         </td>
        <td class="col-md-1 col-fixed-80 emptyCol" ng-if="viewSettings.isVisibleColumn('defText')">
         </td>
        <td class="col-md-1 emptyCol" ng-style="commentWidth" ng-if="viewSettings.isVisibleColumn('comment')">
         </td>
    </tr>
</script>
<script type="text/ng-template" id="DatatypeReadTree.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td class="col-md-2 col-fixed-250">
            <span style="width:60%" type="text" name="name" ng-bind="::node.name"></span>
            <span ng-bind="::node.description"></span>
        </td>
        <td class="col-md-1 col-fixed-80">
         </td>
        <td class="col-md-1 col-fixed-100 emptyCol">
         </td>
        <td class="col-md-1 col-fixed-80 emptyCol">
         </td>
        <td class="col-md-1 col-fixed-100 emptyCol" ng-if="viewSettings.isVisibleColumn('datatype')">
         </td>
        <td class="col-md-1 col-fixed-130 emptyCol" ng-if="viewSettings.isVisibleColumn('valueSet')">
         </td>
        <td class="col-md-1 emptyCol" ng-style="predWidthx" ng-if="viewSettings.isVisibleColumn('predicate')">
         </td>
        <td class="col-md-2 emptyCol" ng-style="csWidthx" ng-if="viewSettings.isVisibleColumn('confStatement')">
         </td>
        <td class="col-md-1 col-fixed-80 emptyCol" ng-if="viewSettings.isVisibleColumn('defText')">
         </td>
        <td class="col-md-1 emptyCol" ng-style="commentWidth" ng-if="viewSettings.isVisibleColumn('comment')">
         </td>
    </tr>
</script>
<script type="text/ng-template" id="DatatypeComponentEditTreeINLIB2.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="(isVisible(node) &&( node.usage==='R' ||node.usage==='RE' ||node.usage==='C' )&& $root.usageF) || (isVisible(node) && !$root.usageF)" ng-class="{ 'new': isChildNew(node),'selected': isChildSelected(node)}">
        <td class="col-md-2 col-fixed-250" ng-controller="DatatypeRowCtrl">
            <!--<a ng-show="editableSeg!==node.id" ng-click="editComponent(node,datatype)" class="point">-->
            <!--<span><i class="fa fa-pencil fa-fw"></i></span>-->
            <!--</a>-->
            <!--<a ng-show="editableSeg!==node.id" ng-click="deleteComponent(node,datatype)" class="point">-->
            <!--<span><i class="glyphicon glyphicon-trash"></i></span>-->
            <!--</a>-->
            <ng-form name="{{formName}}" class="form-inline">
                <!--<input type="checkbox" ng-checked="isChildSelected(node)" ng-click="selectChild($event,node)">-->
                <span class="label label-component label-icon">C</span>
                <span ng-show="editableComp!==node.id">
                <span ng-hide="isChildNew(node)" tooltip-html="getComponentNodeName(node)" tooltip-append-to-body="true"
                      tooltip-class="constraints-tooltip" ng-bind-html="getComponentNodeName(node)" tooltip-trigger
                      tooltip-animation="false" tooltip-placement="left"></span>
                <span ng-show="isChildNew(node)">
                  {{node.position}}.
                <input
                        class="form-control focus"
                        autofocus
                        style="width:65%"
                        name="name"
                        ng-change="setDirty()"
                        ng-class="{ 'igl-has-error has-feedback' : {{formName}}.name.$invalid}"
                        ng-model="node.name" required>

            </span>
                </span>
                <span ng-show="editableComp===node.id">
              <select ng-model="position" ng-change="selectPos()" style="width:15%" class="form-control input-sm">
                  <option ng-repeat="child in datatype.components track by child.id" ng-selected="node.position===child.position">
                      {{child.position}}
              </select>
            <input style="width:55%" class="form-control" ng-model="compName" type="text"/>
            </span>

                <div align="center">
                    <a ng-show="editableComp===node.id && compName" ng-click="applyComp(datatype,node,compName,position)" class="point">
                        <span><i class="glyphicon glyphicon-ok"></i></span>
                    </a>
                    <a ng-show="editableComp===node.id" ng-click="backComp()" class="point">
                        <span><i class="glyphicon glyphicon-remove"></i></span>
                    </a>
                </div>
            </ng-form>
        </td>
        <td class="col-md-1 col-fixed-80">
            <span ng-show="node.usage !== 'C'  || (node.usage === 'C' && countPredicate(node.position) === 0)" ng-controller="DatatypeRowCtrl">
                <ng-form name="{{formName}}" class="form-inline">
                    <select class="form-control input-sm" name="usage" id="usage"
                                ng-change="setUsage(node); openPredicateDialog(node);"
                                ng-class="{ 'igl-has-error has-feedback' : {{formName}}.usage.$invalid}"
                                required ng-model="node.usage" ng-options="usage for usage in config.usages"/>
                </ng-form>
            </span>

            <div ng-show="node.usage === 'C' && countPredicate(node.position) !== 0">
                <p ng-repeat="p in datatype.predicates  | filter:{constraintTarget:node.position + '[1]'}:true">
                    C({{p.trueUsage}}/{{p.falseUsage}})
                </p>
                <a ng-click="deletePredicate(node.position, datatype)" class="point">
                    <span title="Delete Predicate and Change Usage"><i class="fa fa-times fa-fw"></i></span>
                </a>
            </div>
        </td>
        <td class="col-md-1 col-fixed-100" ng-class="{'emptyCol':datatypesMap[node.datatype.id].components.length >0}">
            <div ng-if="datatypesMap[node.datatype.id].components.length == 0">
            <ng-form name="{{formName}}" class="form-inline" ng-controller="DatatypeRowCtrl">
                <input style="width:45%" class="form-control" name="minLength" ng-change="setDirty()" ng-pattern="/^\d+$/" ng-class="{ 'igl-has-error has-feedback' : {{formName}}.minLength.$invalid}" ng-model="node.minLength" required ng-minlength="1">
                <input style="width:45%" class="form-control" type="text" name="maxLength" ng-change="setDirty()" ng-class="{ 'igl-has-error has-feedback' : {{formName}}.maxLength.$invalid}" ng-pattern="/^\d+$|^\*?$/" ng-model="node.maxLength" required>
                </span>
            </ng-form>
                </div>
        </td>
        <td class="col-md-1 col-fixed-80" ng-class="{'emptyCol':datatypesMap[node.datatype.id].components.length >0}">
            <div ng-if="datatypesMap[node.datatype.id].components.length == 0">
            <ng-form name="{{formName}}" class="form-inline" ng-controller="DatatypeRowCtrl">
                <input style="width:50%" class="form-control" type="text" name="confLength" required ng-change="setDirty()" ng-class="{ 'igl-has-error has-feedback' : {{formName}}.confLength.$invalid}" ng-pattern="/^\d+$/" ng-model="node.confLength">
            </ng-form>
                </div>
        </td>
        <td class="col-md-1 col-fixed-100" ng-if="viewSettings.isVisibleColumn('datatype')">
            <ng-form name="innerForm" class="form-inline" ng-controller="DatatypeRowCtrl">
                <div ng-show="node.datatype != null && datatypesMap[node.datatype.id] != null && datatypesMap[node.datatype.id] != undefined">
                    <a class="point" ng-show="editableDT!==node.id" ng-click="redirectDT(node.datatype)">
                        {{getDatatypeLabel(datatypesMap[node.datatype.id])}} 
                    </a>

                    <div ng-show="editableDT===node.id">
                        <select ng-model="datatype" ng-change="selectDT(node,datatype)" class="form-control input-sm">
                            <option ng-repeat="datatype in results" value="{{datatype}}"
                                    ng-selected="node.datatype.ext===datatype.ext"> {{getDatatypeLabel(datatype)}} {{datatype.hl7Version}}
                            </option>
                        </select>
                    </div>
                    <a ng-show="editableDT!==node.id" ng-click="editDT(node)" class="point">
                        <span><i class="fa fa-pencil fa-fw"></i></span>
                    </a>

                    <div align="center">

                        <a ng-show="editableDT===node.id" ng-click="backDT()" class="point">
                            <span><i class="glyphicon glyphicon-remove"></i></span>
                        </a>
                    </div>
                </div>
            </ng-form>
        </td>
        <td class="col-md-1 col-fixed-130" ng-if="viewSettings.isVisibleColumn('valueSet')">
            <div ng-show="node.tables.length!==0">
                <a class="point" ng-repeat="table in node.tables track by table.id">
                    <span ng-click="redirectVS(table)"> tablesMap[table.id]</span>
                </a>
                <a ng-click="editVSModal(node)" class="point">
                    <span><i class="fa fa-pencil fa-fw"></i></span>
                </a>
            </div>
            <div ng-show="(node.tables.length===0) && isAvailableDTForTable(datatypesMap[node.datatype.id])">
                <a ng-click="editVSModal(node)" class="point">
                    <span><i class="fa fa-plus fa-fw"></i></span>
                </a>
            </div>
        </td>
        <td class="col-md-1" ng-style="predWidthx" ng-class="{'has-error': node.usage === 'C' && countPredicate(node.position) != 1}" ng-if="viewSettings.isVisibleColumn('predicate')">
            <div>
                <div ng-show="countPredicate(node.position) === 0 && node.usage === 'C'">
                    <a ng-click="managePredicate(node)" class="point">
                        <i class="fa fa-plus fa-fw"></i>

                        <p class="warning">Need predicate</p>
                    </a>
                </div>
                <div ng-show="countPredicate(node.position) !== 0 && node.usage === 'C'">
                    <p ng-repeat="p in datatype.predicates  | filter:{constraintTarget:node.position + '[1]'}:true">
                        <a ng-click="managePredicate(node)" tooltip-html="getPredicateAsString(p)" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" ng-bind-html="getPredicateAsString(p)" tooltip-trigger tooltip-animation="false" tooltip-placement="left"></a>
                    </p>
                    <div ng-show="countPredicate(node.position) > 1">
                        <p class="warning">Multiple predicates</p>
                    </div>
                </div>
            </div>
        </td>
        <td class="col-md-2" ng-style="csWidthx" ng-if="viewSettings.isVisibleColumn('confStatement')">
            <div>
                <div ng-show="countConformanceStatements(node.position) == 0">
                    <a ng-click="manageConformanceStatement(node)" class="point">
                        <i class="fa fa-plus fa-fw"></i>
                    </a>
                </div>
                <p ng-repeat="c in datatype.conformanceStatements  | filter:{constraintTarget:node.position + '[1]'}:true">
                    <a ng-click="manageConformanceStatement(node)" tooltip-html="getConformanceStatementAsString(c)" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" ng-bind-html="getConstraintAsId(c)" tooltip-trigger tooltip-animation="false" tooltip-placement="left"></a>
                </p>
            </div>
        </td>
        <td class="col-md-1 col-fixed-80" ng-if="viewSettings.isVisibleColumn('defText')" style="text-align:center">
            <div>
                <a ng-click="openRichTextDlg(node, 'text','Definition Text', false)" class="point">
                    <i class="fa fa-pencil fa-fw" ng-show="node.text !== '' && node.text !== null"></i>
                    <i class="fa fa-plus fa-fw" ng-show="node.text === '' || node.text === null"></i>
                </a>
                <a ng-click="node.text = ''" ng-show="node.text !== '' && node.text !== null">
                    <i class="fa fa-times fa-fw"></i>
                </a>
            </div>
        </td>
        <td class="col-md-1" ng-style="commentWidth" ng-if="viewSettings.isVisibleColumn('comment')" style="text-align:center">
            <a ng-click="openInputTextDlg(node, 'comment','Comment', false)" class="point" tooltip-html="node.comment" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" tooltip-trigger tooltip-animation="false" tooltip-placement="left">
                <i class="fa fa-pencil fa-fw" ng-show="node.comment !== '' && node.comment !== null"></i>
                <i class="fa fa-plus fa-fw" ng-show="node.comment === '' || node.comment === null"></i>
            </a>
            <a ng-click="clearComments(node,'comment')" ng-show="node.comment !== '' && node.comment !== null">
                <i class="fa fa-times fa-fw"></i>
            </a>
        </td>
    </tr>
</script>
<script type="text/ng-template" id="DatatypeComponentReadTreeINLIB2.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="(isVisible(node) &&( node.usage==='R' ||node.usage==='RE' ||node.usage==='C' )&& $root.usageF) || (isVisible(node) && !$root.usageF)">
        <td class="col-md-2 col-fixed-250">
            <span class="label label-component label-icon">C</span>
            <span tooltip-html="getComponentNodeName(node)" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" ng-bind-html="getComponentNodeName(node)" tooltip-trigger tooltip-animation="false" tooltip-placement="left"></span>
        </td>
        <td class="col-md-1 col-fixed-80">
            <div>
                <span ng-if="node.usage !== 'C'  || (node.usage === 'C' && countPredicate(node.position) === 0)">
                    <span>{{::node.usage}}</span>
                </span>

                <div ng-if="node.usage === 'C' && countPredicate(node.position) !== 0">
                    <p ng-repeat="p in datatype.predicates  | filter:{constraintTarget:node.position + '[1]'}:true">
                        C({{::p.trueUsage}}/{{p.falseUsage}})
                    </p>
                </div>
            </div>
        </td>
        <td class="col-md-1 col-fixed-100" ng-class="{'emptyCol':datatypesMap[node.datatype.id].components.length >0}">
            <div ng-if="datatypesMap[node.datatype.id].components.length == 0"> [{{::node.minLength}},{{::node.maxLength}}] </div>
        </td>
        <td class="col-md-1 col-fixed-80" ng-class="{'emptyCol':datatypesMap[node.datatype.id].components.length >0}">
            <div ng-if="datatypesMap[node.datatype.id].components.length == 0"> <span ng-bind="::node.confLength"></span> </div>
        </td>
        <td class="col-md-1 col-fixed-100" ng-if="viewSettings.isVisibleColumn('datatype')">
            <a ng-click="redirectDT(node.datatype)">
                {{::getDatatypeLabel(datatypesMap[node.datatype.id])}}
            </a>
        </td>
        <td class="col-md-1 col-fixed-130" ng-if="viewSettings.isVisibleColumn('valueSet')">
            <div>
                <div ng-if="node.tables != undefined  && node.tables !== null">
                    <span ng-repeat="table in node.tables track by table.id" ng-click="redirectVS(table)">
                        {{::getTableLabel(tablesMap[table.id])}}
                    </span>
                </div>
            </div>
        </td>
        <td class="col-md-1" ng-style="predWidthx" ng-if="viewSettings.isVisibleColumn('predicate')">
            <p ng-repeat="p in datatype.predicates  | filter:{constraintTarget:node.position + '[1]'}:true">
                <span tooltip-html="getPredicateAsString(p)" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" ng-bind-html="getPredicateAsString(p)" tooltip-trigger tooltip-animation="false" tooltip-placement="left"></span>
            </p>
        </td>
        <td class="col-md-2" ng-style="csWidthx" ng-if="viewSettings.isVisibleColumn('confStatement')">
            <p ng-repeat="c in datatype.conformanceStatements    | filter:{constraintTarget:node.position + '[1]'}:true">
                <span tooltip-html="getConformanceStatementAsString(c)" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" ng-bind-html="getConstraintAsId(c)" tooltip-trigger tooltip-animation="false" tooltip-placement="left"></span>
            </p>
        </td>
        <td class="col-md-1 col-fixed-80" ng-if="viewSettings.isVisibleColumn('defText')">
            <a ng-if="node.text && node.text !== '' && node.text !== null" ng-click="openRichTextDlg(node, 'text','Definition Text', true)" class="point">
                <i class="fa fa-eye fa-fw"></i>
            </a>
        </td>
        <td class="col-md-1" ng-style="commentWidth" ng-if="viewSettings.isVisibleColumn('comment')">
            <!--<span class="form-control" style="width:100%;height:100%" ng-model="node.comment" ng-show="node.comment !== '' && node.comment !== null" disabled>-->
            <!--</span>-->
            <a ng-click="openInputTextDlg(node, 'comment','Comment', true)" class="point" ng-if="node.comment !== '' && node.comment !== null" tooltip-html="node.comment" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" tooltip-trigger tooltip-animation="false"
                tooltip-placement="left">
                <i class="fa fa-eye fa-fw" ng-if="node.comment !== '' && node.comment !== null"></i>
            </a>

        </td>
    </tr>
</script>
<script type="text/ng-template" id="DatatypeSubComponentEditTreeINLIB2.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td class="col-md-2 col-fixed-250">
            <span>
                                            <span class="label label-sub-component label-icon">S</span>
            <span tooltip-html="getComponentNodeName(node)" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" ng-bind-html="getComponentNodeName(node)" tooltip-trigger tooltip-animation="false" tooltip-placement="left"></span>
            </span>
        </td>
        <td class="col-md-1 col-fixed-80"
            <span ng-show="node.usage !== 'C'  || (node.usage === 'C' && countPredicateOnSubComponent(node.position, node.id) === 0)">
                {{::node.usage}}
            </span>

            <div ng-show="node.usage === 'C' && countPredicateOnSubComponent(node.position, node.id) !== 0">
                <p ng-repeat="p in parentsMap[node.id].predicates   | filter:{constraintTarget:node.position + '[1]'}:true">
                    C({{::p.trueUsage}}/{{::p.falseUsage}})
                </p>
            </div>
        </td>
        <td class="col-md-1 col-fixed-100" ng-class="{'emptyCol':datatypesMap[node.datatype.id].components.length >0}">
            <div ng-if="datatypesMap[node.datatype.id].components.length == 0"> [{{::node.minLength}},{{::node.maxLength}}] </div>
        </td>
        <td class="col-md-1 col-fixed-80" ng-class="{'emptyCol':datatypesMap[node.datatype.id].components.length >0}">
            <div ng-if="datatypesMap[node.datatype.id].components.length == 0"> <span ng-bind="::node.confLength"></span> </div>
        </td>
        <td class="col-md-1 col-fixed-100" ng-if="viewSettings.isVisibleColumn('datatype')">
            <div>
                <a ng-click="redirectDT(node.datatype)" class="point">{{::getDatatypeLabel(datatypesMap[node.datatype.id])}}
                </a>
            </div>
        </td>
        <td class="col-md-1 col-fixed-130" ng-if="viewSettings.isVisibleColumn('valueSet')">
            <a ng-repeat="table in node.tables track by table.id" ng-click="redirectVS(table)" class="point" ng-show="node.tables !== null && node.tables !== undefined">
                {{::getTableLabel(tablesMap[table.id])}}
            </a>
        </td>
        <td class="col-md-1" ng-style="predWidthx" ng-if="viewSettings.isVisibleColumn('predicate')">
            <p ng-repeat="p in parentsMap[node.id].predicates    | filter:{constraintTarget:node.position + '[1]'}:true" tooltip-html="getPredicateAsString(p)" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" ng-bind-html="getPredicateAsString(p)"
                tooltip-trigger tooltip-animation="false" tooltip-placement="left">
            </p>
        </td>
        <td class="col-md-2" ng-style="csWidthx" ng-if="viewSettings.isVisibleColumn('confStatement')">
            <p ng-repeat="c in parentsMap[node.id].conformanceStatements     | filter:{constraintTarget:node.position + '[1]'}:true" tooltip-html="getConformanceStatementAsString(c)" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" ng-bind-html="getConstraintAsId(c)"
                tooltip-trigger tooltip-animation="false" tooltip-placement="left">
            </p>
        </td>
        <td class="col-md-1 col-fixed-80">
            <div ng-show="node.text && node.text !== '' && node.text !== null">
                <a ng-click="openRichTextDlg(node, 'text', 'Definition Text', true)" class="point">
                    <i class="fa fa-eye fa-fw"></i>
                </a>
            </div>
        </td>
        <td class="col-md-1" ng-style="commentWidth" ng-if="viewSettings.isVisibleColumn('comment')">
            <!--<textarea class="form-control" style="width:100%;height:100%" ng-model="node.comment" disabled>-->
            <!--</textarea>-->
            <a ng-click="openInputTextDlg(node, 'comment','Comment', true)" class="point" ng-show="node.comment !== '' && node.comment !== null" tooltip-html="node.comment" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" tooltip-trigger tooltip-animation="false"
                tooltip-placement="left">
                <i class="fa fa-eye fa-fw" ng-show="node.comment !== '' && node.comment !== null"></i>
            </a>
        </td>
    </tr>
</script>
<script type="text/ng-template" id="DatatypeSubComponentReadTreeINLIB2.html">
    <tr tt-node is-branch="hasChildren(node)" ng-show="isVisible(node)">
        <td class="col-md-2 col-fixed-250">
            <span>
                                            <span class="label label-sub-component label-icon">S</span>
            <span tooltip-html="getComponentNodeName(node)" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" ng-bind-html="getComponentNodeName(node)" tooltip-trigger tooltip-animation="false" tooltip-placement="left"></span>
            </span>
        </td>
        <td class="col-md-1 col-fixed-80">
            <span ng-if="node.usage !== 'C'  || (node.usage === 'C' && countPredicateOnSubComponent(node.position, node.id) === 0)">
                {{::node.usage}}
            </span>

            <div ng-if="node.usage === 'C' && countPredicateOnSubComponent(node.position, node.id) !== 0">
                <p ng-repeat="p in parentsMap[node.id].predicates     | filter:{constraintTarget:node.position + '[1]'}:true">
                    C({{::p.trueUsage}}/{{::p.falseUsage}})
                </p>
            </div>
        </td>
        <td class="col-md-1 col-fixed-100">
            <div ng-if="datatypesMap[node.datatype.id].components.length == 0"> [{{::node.minLength}},{{::node.maxLength}}] </div>
        </td>
        <td class="col-md-1 col-fixed-80" ng-class="{'emptyCol':datatypesMap[node.datatype.id].components.length >0}">
            <div ng-if="datatypesMap[node.datatype.id].components.length == 0"> <span ng-bind="::node.confLength"></span> </div>
        </td>
        <td class="col-md-1 col-fixed-100" ng-if="viewSettings.isVisibleColumn('datatype')" ng-class="{'emptyCol':datatypesMap[node.datatype.id].components.length >0}">
            <a ng-click="redirectDT(node.datatype)">{{::getDatatypeLabel(datatypesMap[node.datatype.id])}}
            </a>
        </td>
        <td class="col-md-1 col-fixed-130" ng-if="viewSettings.isVisibleColumn('valueSet')">
            <a ng-repeat="table in node.tables track by table.id" ng-click="redirectVS(table)" ng-if="node.tables !== null && node.tables !== undefined">
                {{::getTableLabel(tablesMap[table.id])}}
            </a>
        </td>
        <td class="col-md-1" ng-style="predWidthx" ng-if="viewSettings.isVisibleColumn('predicate')">
            <p ng-repeat="p in parentsMap[node.id].predicates   | filter:{constraintTarget:node.position + '[1]'}:true" tooltip-html="getPredicateAsString(p)" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" ng-bind-html="getPredicateAsString(p)"
                tooltip-trigger tooltip-animation="false" tooltip-placement="left">
            </p>
        </td>
        <td class="col-md-2" ng-style="csWidthx" ng-if="viewSettings.isVisibleColumn('confStatement')">
            <p ng-repeat="c in parentsMap[node.id].conformanceStatements   | filter:{constraintTarget:node.position + '[1]'}:true" tooltip-html="getConformanceStatementAsString(c)" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" ng-bind-html="getConstraintAsId(c)"
                tooltip-trigger tooltip-animation="false" tooltip-placement="left">
            </p>
        </td>
        <td class="col-md-1 col-fixed-80" ng-if="viewSettings.isVisibleColumn('defText')">
            <a ng-if="node.text && node.text !== '' && node.text !== null" ng-click="openRichTextDlg(node, 'text', 'Definition Text', true)" class="point">
                <i class="fa fa-eye fa-fw"></i>
            </a>
        </td>
        <td class="col-md-1" ng-style="commentWidth" ng-if="viewSettings.isVisibleColumn('comment')">
            <!--<span class="form-control" style="width:100%;height:100%" ng-model="node.comment" ng-show="node.comment !== '' && node.comment !== null" disabled>-->
            <!--</span>-->
            <a ng-click="openInputTextDlg(node, 'comment','Comment', true)" class="point" ng-if="node.comment !== '' && node.comment !== null" tooltip-html="node.comment" tooltip-append-to-body="true" tooltip-class="constraints-tooltip" tooltip-trigger tooltip-animation="false"
                tooltip-placement="left">
                <i class="fa fa-eye fa-fw" ng-if="node.comment !== '' && node.comment !== null"></i>
            </a>
        </td>
    </tr>
</script>
<script type="text/ng-template" id="DatatypeReferencesCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Data Type References Found
            <button class="btn btn-raised  btn-xs btn-primary pull-right" ng-click="ok()"><span><i class="fa fa-times fa-fw">
                &nbsp; </i>Close</span>
            </button>
        </h3>
    </div>
    <div class="modal-body">
        <p>We cannot delete this data type because it is being referenced by elements below:</p>

        <div class="igl-table">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr class="tbl-header">
                        <th>Name</th>
                        <th>Path</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="ref in references  track by ref.id ">
                        <td>
                            <span>
                            <span ng-show="ref.type === 'field'" class="label label-field label-icon">F</span>
                            <span ng-show="ref.type === 'component'" class="label label-component label-icon">C</span>
                            <span ng-show="ref.type === 'subcomponent'" class="label label-sub-component label-icon">S</span>
                            <span style="width:60%" name="name" ng-bind="ref.name"></span>
                            <span ng-bind="ref.description"></span>
                            </span>
                        </td>
                        <td>
                            <div>{{::ref.path}}</div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</script>
<script type="text/ng-template" id="PredicateDatatypeCtrl.html">
    <div class="modal-header">
        <h3 ng-show="selectedNode === null" class="header4">Predicate for {{::datatype.name}}</h3>

        <h3 ng-show="selectedNode !== null" class="header4">Predicate for {{::datatype.name}}-{{::selectedNode.position}}</h3>
    </div>
    <div class="modal-body">
        <form role="form">
            <div class="table-responsive">
                <div class="page-header">
                    <span class="header5">List of Predicates</span>
                    <span class="pull-right">
                        <select class="form-control input-sm" ng-model="selectedNode" ng-class="{'form-control-invalid': !selectedNode}" ng-options="component as (datatype.name + '.' + component.position + ': ' + component.name) for component in datatype.components | filter:{usage : 'C'}">
                            <option value="">Select target location</option>
                        </select>
                    </span>
                </div>
                <table st-table="displayed" st-safe-src="tempPredicates" class="table table-striped table-bordered">
                    <thead>
                        <tr class="tbl-header">
                            <th ng-show="constraintType === 'Complex'" class="col-md-1" style="width: 4.1667%">Draggable</th>
                            <th class="col-md-8">Desciption (
                                <input type="checkbox" ng-model="viewAssertion"> view assertion )
                            </th>
                            <th class="col-md-1">True Usage</th>
                            <th class="col-md-1">False Usage</th>
                            <th class="col-md-1"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="p in displayed | filter:{constraintTarget:selectedNode == null ? '.' : selectedNode.position + '[1]'}:true">
                            <td ng-show="constraintType === 'Complex'" class="col-md-1" align="center" style="width: 4.1667%">
                                <i ng-show="p.assertion" class="glyphicon glyphicon-move cursorMove" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="p" jqyoui-draggable="{placeholder:'keep',animate:true}"></i>
                            </td>
                            <td class="col-md-8">
                                <input class="form-control" ng-model="p.description" ng-change="setChanged()" type="text" />
                                <span ng-if="viewAssertion">{{p.assertion}}</span>
                            </td>
                            <td class="col-md-1">
                                <select class="form-control" ng-model="p.trueUsage" ng-change="setChanged()" ng-options="usage for usage in config.conditionalUsage" />
                            </td>
                            <td class="col-md-1">
                                <select class="form-control" ng-model="p.falseUsage" ng-change="setChanged()" ng-options="usage for usage in config.conditionalUsage" />
                            </td>
                            <td class="col-md-1" align="center">
                                <button class="btn btn-raised btn-danger btn-xxs" ng-click="deletePredicate(p)"><span><i class="fa fa-trash fa-fw">&nbsp; </i>Del</span></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <span class="pull-left">
                    <span class="header5" ng-show="constraintType === 'Free'">Add new Free-Text predicate</span>
                <span class="header5" ng-show="constraintType === 'Plain'">Add new plain predicate</span>
                <span class="header5" ng-show="constraintType === 'Complex'">Add new complex predicate</span>
                </span>
                <span class="pull-right">
        <div class="btn-group btn-group-sm" data-toggle="buttons">
            <label class="btn btn-raised btn-info btn-xs" ng-click="constraintType = 'Free'" ng-class="{'active':constraintType === 'Free'}">
                <input type="radio" ng-value="constraintType">Add Free-Text predicate
            </label>
            <label class="btn btn-raised btn-info btn-xs" ng-click="constraintType = 'Plain'" ng-class="{'active':constraintType === 'Plain'}">
                <input type="radio" ng-value="constraintType">Add plain predicate
            </label>
            <label class="btn btn-raised btn-info btn-xs" ng-click="constraintType = 'Complex'" ng-class="{'active':constraintType === 'Complex'}">
                <input type="radio" ng-value="constraintType">Add complex predicate
            </label>
        </div>
    </span>
                <table class="table table-striped table-bordered" ng-show="constraintType === 'Free'">
                    <thead>
                        <tr class="tbl-header">
                            <th class="col-md-1" style="width: 4.1667%"></th>
                            <th class="col-md-8">Free-Text (Not supported by validation tool)</th>
                            <th class="col-md-1">True Usage</th>
                            <th class="col-md-1">False Usage</th>
                            <th class="col-md-1"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="col-md-1" align="center" style="width: 4.1667%">
                                <button class="btn btn-raised btn-info btn-xxs" ng-click="initPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                            </td>
                            <td class="col-md-8">
                                <input class="form-control" ng-model="newConstraint.freeText" type="text" />
                            </td>
                            <td class="col-md-1">
                                <select class="form-control" ng-class="{'form-control-invalid': !newConstraint.trueUsage}" ng-model="newConstraint.trueUsage" ng-options="usage for usage in config.conditionalUsage" />
                                <span style="color:red;" ng-show="!newConstraint.trueUsage">Empty true usage</span>
                            </td>
                            <td class="col-md-1">
                                <select class="form-control" ng-class="{'form-control-invalid': !newConstraint.falseUsage}" ng-model="newConstraint.falseUsage" ng-options="usage for usage in config.conditionalUsage" />
                                <span style="color:red;" ng-show="!newConstraint.falseUsage">Empty false usage</span>
                            </td>
                            <td class="col-md-1" align="center">
                                <button class="btn btn-raised btn-primary btn-xxs" ng-click="addFreeTextPredicate();"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <table class="table table-striped table-bordered" ng-show="constraintType === 'Plain'">
                    <thead>
                        <tr class="tbl-header">
                            <th class="col-md-1" style="width: 4.1667%"></th>
                            <th class="col-md-2">Node</th>
                            <th class="col-md-2">Verb</th>
                            <th class="col-md-2">Constraint Pattern</th>
                            <th class="col-md-2">Value</th>
                            <th class="col-md-1">True Usage</th>
                            <th class="col-md-1">False Usage</th>
                            <th class="col-md-1"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="col-md-1" align="center" style="width: 4.1667%">
                                <button class="btn btn-raised btn-info btn-xxs" ng-click="initPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                            </td>
                            <td class="col-md-2">
                                <span>{{::newConstraint.datatype}}.</span>
                                <select class="form-control form-control-short" ng-class="{'form-control-invalid': isEmptyConstraintNode(newConstraint, 'datatype')}" ng-model="newConstraint.component_1" ng-options="component as component.position for component in datatype.components"
                                />
                                <span ng-show="datatypesMap[newConstraint.component_1.datatype.id].components.length > 0">.
                                    <select class="form-control form-control-short" ng-model="newConstraint.subComponent_1" ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_1.datatype.id].components"/>
                                </span>
                                <span style="color:red;" ng-show="isEmptyConstraintNode(newConstraint, 'datatype')">Empty node</span>
                            </td>
                            <td class="col-md-2">
                                <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintVerb(newConstraint)}" ng-model="newConstraint.verb" ng-options="constraintVerb for constraintVerb in config.constraintVerbs | orderBy:'toString()'" />
                                <span style="color:red;" ng-show="isEmptyConstraintVerb(newConstraint)">Empty verb</span>
                            </td>
                            <td class="col-md-2">
                                <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintPattern(newConstraint)}" ng-model="newConstraint.contraintType" ng-options="contraintType for contraintType in config.constraintTypes | orderBy:'toString()'" />
                                <span style="color:red;" ng-show="isEmptyConstraintPattern(newConstraint)">Empty constraint pattern</span>
                            </td>
                            <td class="col-md-2">
                                <span ng-show="newConstraint.contraintType == 'a literal value' ||
                                   newConstraint.contraintType == 'equal to' ||
                                   newConstraint.contraintType == 'not-equal to' ||
                                   newConstraint.contraintType == 'greater than' ||
                                   newConstraint.contraintType == 'equal to or greater than' ||
                                   newConstraint.contraintType == 'less than' ||
                                   newConstraint.contraintType == 'equal to or less than'">
                                    <input class="form-control"
                                        ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}"
                                        ng-model="newConstraint.value" type="text"/>
                                    <span ng-show="newConstraint.contraintType == 'a literal value'">Case Insensitive: </span>
                                <input ng-show="newConstraint.contraintType == 'a literal value'" type="checkbox" ng-model="newConstraint.ignoreCase" />
                                <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty value</span>
                                </span>
                                <span ng-show="newConstraint.contraintType == 'one of list values'">
                        <input class="form-control"
                               ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}"
                               ng-model="newConstraint.value" placeholder="Comma-Separated Values(CSV)" type="text"/>
                        <span style="color:red;"
                              ng-show="isEmptyConstraintValue(newConstraint)">Empty list of values</span>
                                </span>
                                <span ng-show="newConstraint.contraintType == 'formatted value'">
                        <select class="form-control"
                                ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}"
                                ng-model="newConstraint.value"
                                ng-options="predefinedFormat for predefinedFormat in config.predefinedFormats | orderBy:'toString()'"/>
                        <div ng-show="newConstraint.value === 'Regular expression'">
                            <input class="form-control"
                                   ng-class="{'form-control-invalid': isEmptyConstraintValue2(newConstraint)}"
                                   ng-model="newConstraint.value2" placeholder="Regular expression" type="text"/>
                        </div>
                        <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty format</span>
                                <span style="color:red;" ng-show="newConstraint.value === 'Regular expression' &&  isEmptyConstraintValue2(newConstraint)">Empty regular expression</span>
                                </span>
                                <span ng-show="newConstraint.contraintType == 'identical to another node' ||
                                   newConstraint.contraintType == 'equal to another node' ||
                                   newConstraint.contraintType == 'not-equal to another node' ||
                                   newConstraint.contraintType == 'greater than another node' ||
                                   newConstraint.contraintType == 'equal to or greater than another node' ||
                                   newConstraint.contraintType == 'less than another node' ||
                                   newConstraint.contraintType == 'equal to or less than another node'">
                        <span>{{::newConstraint.datatype}}.</span>
                                <select class="form-control form-control-short" ng-class="{'form-control-invalid': isEmptyConstraintAnotherNode(newConstraint, 'datatype')}" ng-change="updateComponent_2()" ng-model="newConstraint.component_2" ng-options="component as component.position for component in datatype.components"
                                />
                                <span ng-show="datatypesMap[newConstraint.component_2.datatype.id].components.length > 0">.
                            <select class="form-control form-control-short" ng-model="newConstraint.subComponent_2"
                                    ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype.id].components"/>
                        </span>
                                <span style="color:red;" ng-show="isEmptyConstraintAnotherNode(newConstraint, 'datatype')">Empty another node</span>
                                </span>
                                <span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                        <span>ValueSet ID: </span>
                                <select class="form-control form-control-short" ng-class="{'form-control-invalid': isEmptyConstraintValueSet(newConstraint)}" ng-model="newConstraint.valueSetId">
                                    <option ng-repeat="table in tables  track by table.id |orderBy:'+bindingIdentifier'"
                                            value="{{table.bindingIdentifier}}">
                                        {{::table.bindingIdentifier}}
                                    </option>
                                </select>
                                <span style="color:red;" ng-show="isEmptyConstraintValueSet(newConstraint)">Empty value set</span>
                                <br/>
                                <span>BindingStrength: </span>
                                <select name="bindingStrength" class="form-control form-control-short" ng-model="newConstraint.bindingStrength">
                                    <option value="R">R</option>
                                    <option value="S">S</option>
                                    <option value="U">U</option>
                                </select>
                                <br/>
                                <span>BindingLocation: </span>
                                <input class="form-control form-control-short" ng-model="newConstraint.bindingLocation" type="text" />
                                </span>
                            </td>
                            <td class="col-md-1">
                                <select class="form-control" ng-class="{'form-control-invalid': !newConstraint.trueUsage}" ng-model="newConstraint.trueUsage" ng-options="usage for usage in config.conditionalUsage" />
                                <span style="color:red;" ng-show="!newConstraint.trueUsage">Empty true usage</span>
                            </td>
                            <td class="col-md-1">
                                <select class="form-control" ng-class="{'form-control-invalid': !newConstraint.falseUsage}" ng-model="newConstraint.falseUsage" ng-options="usage for usage in config.conditionalUsage" />
                                <span style="color:red;" ng-show="!newConstraint.falseUsage">Empty false usage</span>
                            </td>
                            <td class="col-md-1" align="center">
                                <button class="btn btn-raised btn-primary btn-xxs" ng-click="addPredicate();" ng-disabled="erorrForPredicate(newConstraint, 'datatype', selectedNode)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
                    <thead>
                        <tr class="tbl-header">
                            <th class="col-md-1" style="width: 4.1667%"></th>
                            <th class="col-md-2">Complex Type</th>
                            <th class="col-md-1" style="width: 4.1667%"></th>


                            <th ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5">Constraints</th>

                            <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">First Constraint</th>
                            <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" style="width: 4.1667%"></th>
                            <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">Second Constraint</th>
                            <th class="col-md-1">True Usage</th>
                            <th class="col-md-1">False Usage</th>
                            <th class="col-md-1"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="col-md-1" style="width: 4.1667%" align="center">
                                <button class="btn btn-raised btn-info btn-xxs" ng-click="initComplexPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                            </td>
                            <td class="col-md-2">
                                <select class="form-control" ng-class="{'form-control-invalid': isEmptyCompositeType(compositeType)}" ng-model="compositeType">
                                    <option value="AND">AND</option>
                                    <option value="OR">OR</option>
                                    <option value="XOR">XOR</option>
                                    <option value="IFTHEN">IFTHEN(IMPLY)</option>
                                    <option value="FORALL">FORALL(True, if all assertions are true)</option>
                                    <option value="EXIST">EXIST(True, if one of assertions is true)</option>
                                </select>
                                <span style="color:red;" ng-show="isEmptyCompositeType(compositeType)">Empty composite type</span>
                            </td>
                            <td class="col-md-1" align="center" style="width: 4.1667%">
                                <span ng-show="compositeType == 'IFTHEN'">IF</span>
                                <span ng-show="compositeType == 'FORALL'">FORALL</span>
                                <span ng-show="compositeType == 'EXIST'">EXIST</span>
                            </td>
                            <td ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5" data-drop="true" ng-model='constraints' jqyoui-droppable="{multiple:true}" data-jqyoui-options>
                                <span style="color:red;" ng-show="constraints.length < 2">Drop two more constraints here!</span>
                                <li ng-repeat="c in constraints" ng-show="constraints.length > 0" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="constraints" jqyoui-draggable="{animate:true}">{{c.description}}</li>
                            </td>
                            <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
                                <span style="color:red;" ng-hide="firstConstraint">Drop the first constraint here!</span>
                                <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
                            </td>
                            <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" align="center" style="width: 4.1667%">
                                <span ng-show="compositeType == 'AND'">AND</span>
                                <span ng-show="compositeType == 'OR'">OR</span>
                                <span ng-show="compositeType == 'XOR'">XOR</span>
                                <span ng-show="compositeType == 'IFTHEN'">THEN</span>
                            </td>
                            <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
                                <span style="color:red;" ng-hide="secondConstraint">Drop the second constraint here!</span>
                                <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
                            </td>
                            <td class="col-md-1">
                                <select class="form-control" ng-class="{'form-control-invalid': !complexConstraintTrueUsage}" ng-model="complexConstraintTrueUsage" ng-options="usage for usage in config.conditionalUsage" />
                                <span style="color:red;" ng-show="!complexConstraintTrueUsage">Empty true usage</span>
                            </td>
                            <td class="col-md-1">
                                <select class="form-control" ng-class="{'form-control-invalid': !complexConstraintFalseUsage}" ng-model="complexConstraintFalseUsage" ng-options="usage for usage in config.conditionalUsage" />
                                <span style="color:red;" ng-show="!complexConstraintFalseUsage">Empty true usage</span>
                            </td>
                            <td class="col-md-1" align="center">
                                <button class="btn btn-raised btn-primary btn-xxs" ng-click="addComplexPredicate()" ng-disabled="erorrForComplexPredicate(compositeType, firstConstraint, secondConstraint, complexConstraintTrueUsage, complexConstraintFalseUsage, constraints)">
                                    <span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <p ng-show="countPredicateForTemp() != 1" class="warning">Single Predicate allowed!</p>
        <button class="btn btn-raised btn-primary btn-sm" ng-disabled="countPredicateForTemp() != 1" ng-show="changed" ng-click="saveclose()"><span><i class="fa fa-check fa-fw">
        &nbsp; </i>Save</span></button>
        <button class="btn btn-raised btn-warning btn-sm" ng-show="changed" ng-click="ok()"><span><i class="fa fa-times fa-fw">
        &nbsp; </i>Close</span></button>
        <button class="btn btn-raised btn-warning btn-sm" ng-hide="changed" ng-click="ok()"><span><i class="fa fa-times fa-fw">
        &nbsp; </i>Close</span></button>
    </div>
</script>
<script type="text/ng-template" id="ConformanceStatementDatatypeCtrl.html">
    <div class="modal-header">
        <h3 ng-show="selectedNode === null" class="header4">Conformance statement for {{::datatype.name}}</h3>

        <h3 ng-show="selectedNode !== null" class="header4">Conformance statement for
        {{::datatype.name}}-{{::selectedNode.position}}</h3>
    </div>
    <div class="modal-body">
        <form role="form">
            <div class="table-responsive">
                <div class="page-header">
                    <span class="header5">List of conformance statments</span>
                    <span class="pull-right">
                        <select class="form-control input-sm" ng-class="{'form-control-invalid': !selectedNode}" ng-model="selectedNode" ng-options="component as (datatype.name + '.' + component.position + ': ' + component.name) for component in datatype.components">
                            <option value="">Select target location</option>
                        </select>
                    </span>
                </div>
                <table st-table="displayed" st-safe-src="tempComformanceStatements" class="table table-striped table-bordered">
                    <thead>
                        <tr class="tbl-header">
                            <th ng-show="constraintType === 'Complex'" class="col-md-1" style="width: 4.1667%">Draggable</th>
                            <th st-sort="constraintId" class="col-md-2">ID</th>
                            <th class="col-md-8">Desciption (
                                <input type="checkbox" ng-model="viewAssertion"> view assertion )
                            </th>
                            <th class="col-md-1"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="c in displayed | filter:{constraintTarget:selectedNode == null ? '.' : selectedNode.position + '[1]'}:true">
                            <td ng-show="constraintType === 'Complex'" class="col-md-1" align="center" style="width: 4.1667%">
                                <i ng-show="c.assertion" class="glyphicon glyphicon-move cursorMove" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="c" jqyoui-draggable="{placeholder:'keep',animate:true}"></i>
                            </td>
                            <td class="col-md-2">
                                <input class="form-control form-control-short80" ng-model="c.constraintId" ng-change="setChanged(); targetId = c.constraintId;" type="text" ng-readonly="targetId !== c.constraintId" />
                                <i class="fa fa-pencil" ng-hide="targetId == c.constraintId" ng-click="targetId = c.constraintId; conformanceStatementIdList.splice(conformanceStatementIdList.indexOf(c.constraintId), 1);"></i>
                                <i class="fa fa-paper-plane" ng-hide="targetId != c.constraintId || conformanceStatementIdList.indexOf(c.constraintId) != -1" ng-click="conformanceStatementIdList.push(c.constraintId); targetId = ''"></i>
                                <span style="color:red" ng-show="conformanceStatementIdList.indexOf(c.constraintId) != -1 && targetId == c.constraintId">Duplicated ID</span>
                            </td>
                            <td class="col-md-8">
                                <input class="form-control" ng-model="c.description" ng-change="setChanged()" type="text" />
                                <span ng-show="viewAssertion">{{c.assertion}}</span>
                            </td>
                            <td class="col-md-1" align="center">
                                <button class="btn btn-raised btn-danger btn-xxs" ng-click="deleteConformanceStatement(c)"><span><i class="fa fa-trash fa-fw">&nbsp; </i>Del</span></button>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <span class="pull-left">
                    <span class="header5" ng-show="constraintType === 'Free'">Add new Free-Text conformance statement</span>
                <span class="header5" ng-show="constraintType === 'Plain'">Add new plain conformance statement</span>
                <span class="header5" ng-show="constraintType === 'Complex'">Add new complex conformance statement</span>
                </span>

                <span class="pull-right">
                    <div class="btn-group btn-group-sm" data-toggle="buttons">
                        <label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Free'; newConstraint.constraintId = calNextCSID(igdocument.metaData.ext, datatype.name + '_' + datatype.ext);" ng-class="{'active':constraintType === 'Free'}">
                            <input type="radio" ng-value="constraintType">Add new Free-Text Conf.Statement
                        </label>
                        <label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Plain'; newConstraint.constraintId = calNextCSID(igdocument.metaData.ext, datatype.name + '_' + datatype.ext);" ng-class="{'active':constraintType === 'Plain'}">
                            <input type="radio" ng-value="constraintType">Add new plain Conf.Statement
                        </label>
                        <label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Complex'; newComplexConstraintId = calNextCSID(igdocument.metaData.ext, datatype.name + '_' + datatype.ext);" ng-class="{'active':constraintType === 'Complex'}">
                            <input type="radio" ng-value="constraintType">Add new complex Conf.Statement
                        </label>
                    </div>
                </span>

                <table class="table table-striped table-bordered" ng-show="constraintType === 'Free'">
                    <thead>
                        <tr class="tbl-header">
                            <th class="col-md-1" style="width: 4.1667%"></th>
                            <th class="col-md-2">ID</th>
                            <th class="col-md-8">Free-Text (Not supported by validation tool)</th>
                            <th class="col-md-1"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="col-md-1" style="width: 4.1667%" align="center">
                                <button class="btn btn-raised btn-info btn-xxs" ng-click="initConformanceStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                            </td>
                            <td class="col-md-2">
                                <input class="form-control form-control-short80" ng-class="{'form-control-invalid': isEmptyConstraintID(newConstraint) || isDuplicatedConstraintID(newConstraint, targetPlainId)}" ng-model="newConstraint.constraintId" ng-change="targetPlainId = newConstraint.constraintId;"
                                    type="text" ng-readonly="targetPlainId !== newConstraint.constraintId" />
                                <i class="fa fa-pencil" ng-hide="targetPlainId == newConstraint.constraintId" ng-click="targetPlainId = newConstraint.constraintId;"></i>
                                <i class="fa fa-paper-plane" ng-hide="targetPlainId != newConstraint.constraintId || conformanceStatementIdList.indexOf(newConstraint.constraintId) != -1" ng-click="conformanceStatementIdList.push(newConstraint.constraintId); targetPlainId = ''"></i>
                                <span style="color:red;" ng-show="isEmptyConstraintID(newConstraint)">ID Empty</span>
                                <span style="color:red;" ng-show="isDuplicatedConstraintID(newConstraint, targetPlainId)">ID Duplicated</span>
                            </td>
                            <td class="col-md-8">
                                <input class="form-control" ng-model="newConstraint.freeText" type="text" />
                            </td>
                            <td class="col-md-1" align="center">
                                <button class="btn btn-raised btn-primary btn-xxs" ng-click="addFreeTextConformanceStatement();"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <table class="table table-striped table-bordered" ng-show="constraintType === 'Plain'">
                    <thead>
                        <tr class="tbl-header">
                            <th class="col-md-1" style="width: 4.1667%"></th>
                            <th class="col-md-2">ID</th>
                            <th class="col-md-2">Node</th>
                            <th class="col-md-2">Verb</th>
                            <th class="col-md-2">Constraint Pattern</th>
                            <th class="col-md-2">Value</th>
                            <th class="col-md-1"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="col-md-1" style="width: 4.1667%" align="center">
                                <button class="btn btn-raised btn-info btn-xxs" ng-click="initConformanceStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                            </td>
                            <td class="col-md-2">
                                <input class="form-control form-control-short80" ng-class="{'form-control-invalid': isEmptyConstraintID(newConstraint) || isDuplicatedConstraintID(newConstraint, targetPlainId)}" ng-model="newConstraint.constraintId" ng-change="targetPlainId = newConstraint.constraintId;"
                                    type="text" ng-readonly="targetPlainId !== newConstraint.constraintId" />
                                <i class="fa fa-pencil" ng-hide="targetPlainId == newConstraint.constraintId" ng-click="targetPlainId = newConstraint.constraintId;"></i>
                                <i class="fa fa-paper-plane" ng-hide="targetPlainId != newConstraint.constraintId || conformanceStatementIdList.indexOf(newConstraint.constraintId) != -1" ng-click="conformanceStatementIdList.push(newConstraint.constraintId); targetPlainId = ''"></i>
                                <span style="color:red;" ng-show="isEmptyConstraintID(newConstraint)">ID Empty</span>
                                <span style="color:red;" ng-show="isDuplicatedConstraintID(newConstraint, targetPlainId)">ID Duplicated</span>
                            </td>
                            <td class="col-md-2">
                                <span>{{::newConstraint.datatype}}.</span>
                                <select class="form-control form-control-short" ng-class="{'form-control-invalid': isEmptyConstraintNode(newConstraint, 'datatype')}" ng-model="newConstraint.component_1" ng-options="component as component.position for component in datatype.components"
                                />
                                <span ng-show="datatypesMap[newConstraint.component_1.datatype.id].components.length > 0">.
                                    <select class="form-control form-control-short" ng-model="newConstraint.subComponent_1"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_1.datatype.id].components"/>
                                </span>
                                <span style="color:red;" ng-show="isEmptyConstraintNode(newConstraint, 'datatype')">Empty node</span>
                            </td>

                            <td class="col-md-2">
                                <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintVerb(newConstraint)}" ng-model="newConstraint.verb" ng-options="constraintVerb for constraintVerb in config.constraintVerbs | orderBy:'toString()'" />
                                <span style="color:red;" ng-show="isEmptyConstraintVerb(newConstraint)">Empty verb</span>
                            </td>

                            <td class="col-md-2">
                                <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintPattern(newConstraint)}" ng-model="newConstraint.contraintType" ng-options="contraintType for contraintType in config.constraintTypes | orderBy:'toString()'" />
                                <span style="color:red;" ng-show="isEmptyConstraintPattern(newConstraint)">Empty contraint pattern</span>
                            </td>

                            <td class="col-md-2">
                                <span ng-show="newConstraint.contraintType == 'a literal value' || 
                                       newConstraint.contraintType == 'equal to' ||
                                       newConstraint.contraintType == 'not-equal to' ||
                                       newConstraint.contraintType == 'greater than' ||
                                       newConstraint.contraintType == 'equal to or greater than' ||
                                       newConstraint.contraintType == 'less than' ||
                                       newConstraint.contraintType == 'equal to or less than'">
                                    <input class="form-control"
                                        ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}"
                                        ng-model="newConstraint.value" type="text"/>
                                    <span ng-show="newConstraint.contraintType == 'a literal value'">Case Insensitive: </span>
                                <input ng-show="newConstraint.contraintType == 'a literal value'" type="checkbox" ng-model="newConstraint.ignoreCase" />
                                <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty value</span>
                                </span>
                                <span ng-show="newConstraint.contraintType == 'one of list values'">
                                    <input class="form-control"
                                        ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}"
                                        ng-model="newConstraint.value" placeholder="Comma-Separated Values(CSV)"
                                        type="text"/>
                                    <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty list value</span>
                                </span>
                                <span ng-show="newConstraint.contraintType == 'formatted value'">
                            <select class="form-control"
                                    ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}"
                                    ng-model="newConstraint.value"
                                    ng-options="predefinedFormat for predefinedFormat in config.predefinedFormats | orderBy:'toString()'"/>
                            <div ng-show="newConstraint.value === 'Regular expression'">
                                <input class="form-control"
                                       ng-class="{'form-control-invalid': isEmptyConstraintValue2(newConstraint)}"
                                       ng-model="newConstraint.value2" placeholder="Regular expression" type="text"/>
                            </div>
                            <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty format</span>
                                <span style="color:red;" ng-show="newConstraint.value === 'Regular expression' && isEmptyConstraintValue2(newConstraint)">Empty regular expression</span>
                                </span>
                                <span ng-show="newConstraint.contraintType == 'identical to another node' ||
                                       newConstraint.contraintType == 'equal to another node' ||
                                       newConstraint.contraintType == 'not-equal to another node' ||
                                       newConstraint.contraintType == 'greater than another node' ||
                                       newConstraint.contraintType == 'equal to or greater than another node' ||
                                       newConstraint.contraintType == 'less than another node' ||
                                       newConstraint.contraintType == 'equal to or less than another node'">
                            <span>{{::newConstraint.datatype}}.</span>
                                <select class="form-control form-control-short" ng-class="{'form-control-invalid': isEmptyConstraintAnotherNode(newConstraint, 'datatype')}" ng-change="updateComponent_2()" ng-model="newConstraint.component_2" ng-options="component as component.position for component in datatype.components"
                                />
                                <span ng-show="datatypesMap[newConstraint.component_2.datatype.id].components.length > 0">.
                                <select class="form-control form-control-short" ng-model="newConstraint.subComponent_2"
                                        ng-options="subComponent as subComponent.position for subComponent in datatypesMap[newConstraint.component_2.datatype.id].components"/>
                            </span>
                                <span style="color:red;" ng-show="isEmptyConstraintAnotherNode(newConstraint, 'datatype')">Empty another node</span>
                                </span>
                                <span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                            <span>ValueSet ID: </span>
                                <select class="form-control form-control-short" ng-class="{'form-control-invalid': isEmptyConstraintValueSet(newConstraint)}" ng-model="newConstraint.valueSetId">
                                    <option ng-repeat="table in tables  track by table.id |orderBy:'+bindingIdentifier'"
                                            value="{{table.bindingIdentifier}}">
                                        {{::table.bindingIdentifier}}
                                    </option>
                                </select>
                                <span style="color:red;" ng-show="isEmptyConstraintValueSet(newConstraint)">Empty valueset</span>
                                <br/>
                                <span>BindingStrength: </span>
                                <select name="bindingStrength" class="form-control form-control-short" ng-model="newConstraint.bindingStrength">
                                    <option value="R">R</option>
                                    <option value="S">S</option>
                                    <option value="U">U</option>
                                </select>
                                <br/>
                                <span>BindingLocation: </span>
                                <input class="form-control form-control-short" ng-model="newConstraint.bindingLocation" type="text" />
                                </span>
                            </td>
                            <td class="col-md-1" align="center">
                                <button class="btn btn-raised btn-primary btn-xxs" ng-click="addConformanceStatement();" ng-disabled="erorrForConfStatement(newConstraint, targetPlainId, 'datatype', selectedNode)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
                    <thead>
                        <tr class="tbl-header">
                            <th class="col-md-1" style="width: 4.1667%"></th>
                            <th class="col-md-2">ID</th>
                            <th class="col-md-2">Complex Type</th>
                            <th class="col-md-1" style="width: 4.1667%"></th>
                            <th class="col-md-5" ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'">Constraints</th>
                            <th class="col-md-2" ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'">First Constraint</th>
                            <th class="col-md-1" ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" style="width: 4.1667%"></th>
                            <th class="col-md-2" ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'">Second Constraint</th>
                            <th class="col-md-1"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="col-md-1" style="width: 4.1667%" align="center">
                                <button class="btn btn-raised btn-info btn-xxs" ng-click="initComplexStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                            </td>
                            <td class="col-md-2">
                                <input class="form-control form-control-short80" ng-class="{'form-control-invalid': isEmptyComplexConstraintID(newComplexConstraintId) || isDuplicatedComplexConstraintID(newComplexConstraintId, targetComplexId)}" ng-model="newComplexConstraintId" ng-change="targetComplexId = newComplexConstraintId;"
                                    type="text" ng-readonly="targetComplexId !== newComplexConstraintId" />
                                <i class="fa fa-pencil" ng-hide="targetComplexId == newComplexConstraintId" ng-click="targetComplexId = newComplexConstraintId;"></i>
                                <i class="fa fa-paper-plane" ng-hide="targetComplexId != newComplexConstraintId || conformanceStatementIdList.indexOf(newComplexConstraintId) != -1" ng-click="conformanceStatementIdList.push(newComplexConstraintId); targetComplexId = ''"></i>
                                <span style="color:red;" ng-show="isEmptyConstraintID(newConstraint)">ID Empty</span>
                                <span style="color:red;" ng-show="isDuplicatedConstraintID(newConstraint, targetPlainId)">ID Duplicated</span>
                            </td>
                            <td class="col-md-2">
                                <select class="form-control" ng-class="{'form-control-invalid': isEmptyCompositeType(compositeType)}" ng-model="compositeType">
                                    <option value="AND">AND</option>
                                    <option value="OR">OR</option>
                                    <option value="XOR">XOR</option>
                                    <option value="IFTHEN">IFTHEN(IMPLY)</option>
                                    <option value="FORALL">FORALL(True, if all assertions are true)</option>
                                    <option value="EXIST">EXIST(True, if one of assertions is true)</option>
                                </select>
                                <span style="color:red;" ng-show="isEmptyCompositeType(compositeType)">Empty composite type</span>
                            </td>
                            <td class="col-md-1" align="center" style="width: 4.1667%">
                                <span ng-show="compositeType == 'IFTHEN'">IF</span>
                                <span ng-show="compositeType == 'FORALL'">FORALL</span>
                                <span ng-show="compositeType == 'EXIST'">EXIST</span>
                            </td>

                            <td ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5" data-drop="true" ng-model='constraints' jqyoui-droppable="{multiple:true}" data-jqyoui-options>
                                <span style="color:red;" ng-hide="constraints.length > 1">Drop two more constraints here!</span>
                                <li ng-repeat="c in constraints" ng-show="constraints.length > 0" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="constraints" jqyoui-draggable="{animate:true}">{{c.description}}</li>
                            </td>

                            <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
                                <span style="color:red;" ng-hide="firstConstraint">Drop the first constraint here!</span>
                                <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
                            </td>
                            <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" align="center" style="width: 4.1667%">
                                <span ng-show="compositeType == 'AND'">AND</span>
                                <span ng-show="compositeType == 'OR'">OR</span>
                                <span ng-show="compositeType == 'XOR'">XOR</span>
                                <span ng-show="compositeType == 'IFTHEN'">THEN</span>
                            </td>
                            <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
                                <span style="color:red;" ng-hide="secondConstraint">Drop the second constraint here!</span>
                                <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
                            </td>
                            <td class="col-md-1" align="center">
                                <button class="btn btn-raised btn-primary btn-xxs" ng-click="addComplexConformanceStatement()" ng-disabled="erorrForComplexConfStatement(newComplexConstraintId, targetComplexId, compositeType, firstConstraint, secondConstraint, constraints)">
                                    <span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <span class="pull-right">
        <button class="btn btn-raised btn-primary btn-sm" ng-show="changed" ng-click="saveclose()"><span><i
                class="fa fa-check fa-fw">&nbsp; </i>Bind</span></button>
        <button class="btn btn-raised btn-warning btn-sm" ng-show="changed" ng-click="ok()"><span><i class="fa fa-times fa-fw">
            &nbsp; </i>Cancel</span></button>
        <button class="btn btn-raised btn-warning btn-sm" ng-hide="changed" ng-click="ok()"><span><i class="fa fa-times fa-fw">
            &nbsp; </i>Cancel</span></button>
        </span>
    </div>
</script>
<script type="text/ng-template" id="TableMappingDatatypeCtrl.html">
    <div class="modal-header modal-wide">
        <h3 class="modal-title">Bind Value Set to {{::datatype.name}}.{{::selectedNode.position}}</h3>
    </div>
    <div class="modal-body">
        <div class="row">
            <form role="form">
                <div class="col-sm-6">
                    <h5>List of Tables</h5>

                    <div class="igl-table">
                        <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                            <thead>
                                <tr class="tbl-header">
                                    <th data-ng-click="predicate = 'bindingIdentifier'; reverse=!reverse">ID
                                        <i ng-show="reverse && predicate==='bindingIdentifier'" class="fa fa-sort-desc"></i>
                                        <i ng-show="!reverse && predicate==='bindingIdentifier'" class="fa fa-sort-asc"></i>
                                        <i ng-show="predicate!=='bindingIdentifier'" class="fa fa-sort"></i>
                                    </th>
                                    <th data-ng-click="predicate = 'name'; reverse=!reverse">Name
                                        <i ng-show="reverse && predicate==='name'" class="fa fa-sort-desc"></i>
                                        <i ng-show="!reverse && predicate==='name'" class="fa fa-sort-asc"></i>
                                        <i ng-show="predicate!=='name'" class="fa fa-sort"></i>
                                    </th>
                                </tr>
                                <tr>
                                    <th>
                                        <input type="text" class="form-control" placeholder="Search by id" ng-model="searchTableValue.bindingIdentifier" />
                                    </th>
                                    <th>
                                        <input type="text" class="form-control" placeholder="Search by name" ng-model="searchTableValue.name" />
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="table in tables track by table.id |filter:searchTableValue|orderBy:predicate:reverse">
                                    <td>
                                        <a ng-click="selectTable(table)">{{::table.bindingIdentifier}}</a>
                                    </td>
                                    <td ng-bind-html="table.name"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-sm-6">
                    <h5>Selected Table for {{::datatype.name}}.{{::selectedNode.position}}</h5>
                    <span ng-show="selectedTable != undefined">
                    <div class="row">
                        <div class="col-sm-2">
                            <p>ID:</p>

                            <p>Extensibility:</p>
                        </div>
                        <div class="col-sm-4">
                            <p>{{::selectedTable.bindingIdentifier}}</p>

                            <p>{{::selectedTable.extensibility}}</p>
                        </div>
                        <div class="col-sm-2">
                            <p>Name:</p>

                            <p>Stability:</p>
                        </div>
                        <div class="col-sm-4">
                            <p>{{::selectedTable.name}}</p>

                            <p>{{::selectedTable.stability}}</p>
                        </div>
                    </div>

                    <h5>List of Codes</h5>

                    <div class="igl-table">
                        <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                            <thead>
                            <tr class="tbl-header">
                                <th data-ng-click="predicate = 'value'; reverse=!reverse">Value
                                    <i ng-show="reverse && predicate==='value'" class="fa fa-sort-desc"></i>
                                    <i ng-show="!reverse && predicate==='value'" class="fa fa-sort-asc"></i>
                                    <i ng-show="predicate!=='value'" class="fa fa-sort"></i>
                                </th>
                                <th data-ng-click="predicate = 'label'; reverse=!reverse">Description
                                    <i ng-show="reverse && predicate==='label'" class="fa fa-sort-desc"></i>
                                    <i ng-show="!reverse && predicate==='label'" class="fa fa-sort-asc"></i>
                                    <i ng-show="predicate!=='label'" class="fa fa-sort"></i>
                                </th>
                                <th>Codesys</th>
                                <th>Usage</th>
                            </tr>
                            <tr>
                                <th>
                                    <input type="text" class="form-control" placeholder="Search by value"
                                           ng-model="searchCodeValue.value"/>
                                </th>
                                <th>
                                    <input type="text" class="form-control" placeholder="Search by description"
                                           ng-model="searchCodeValue.label"/>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="c in selectedTable.codes   |filter:searchCodeValue|orderBy:predicate:reverse">
                                <td ng-bind-html="c.value"></td>
                                <td ng-bind-html="c.label"></td>
                                <td ng-bind-html="c.codeSystem"></td>
                                <td ng-bind-html="c.codeUsage"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </span>
                </div>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <button ng-show="changed" type="button" ng-click="mappingTable()" class="btn btn-raised btn-primary btn-sm"><i
                class="fa fa-plus fa-fw">&nbsp; </i>Save
        </button>
        <button ng-show="changed" type="button" ng-click="ok()" class="btn btn-raised btn-warning btn-sm"><i
                class="fa fa-times fa-fw">&nbsp; </i>Close
        </button>
        <button ng-show="!changed" class="btn btn-raised btn-warning btn-sm" ng-click="ok()"><span><i class="fa fa-times fa-fw">
            &nbsp; </i>Cancel</span></button>
    </div>
</script>
<script type="text/ng-template" id="SelectDatatypeFlavor.html">
    <div class="modal-header modal-wide">
        <div class="form-inline">
            <span class="header4 pull-left">Datatype Selection: {{::getDatatypeLabel(currentDatatype)}}</span>
        </div>
    </div>
    <div class="modal-body">
        <div class="row">
            <!--<div class="col-md-12">-->
            <!--<span class="btn-group btn-group-sm pull-left" data-toggle="buttons">-->
            <!--<label class="btn btn-raised  btn-primary btn-xs"-->
            <!--ng-click="loadLibrariesByFlavorName('USER')"-->
            <!--ng-class="{'active':selection.scope === 'USER'}">-->
            <!--<input type="radio" value="USER"-->
            <!--ng-model="$parent.selection.scope"><i class="fa fa-th-list"></i>MY IG DATA TYPES-->
            <!--</label>-->
            <!--<label class="btn btn-raised  btn-primary btn-xs"-->
            <!--ng-click="loadLibrariesByFlavorName('HL7STANDARD')"-->
            <!--ng-class="{'active':selection.scope === 'HL7STANDARD'}">-->
            <!--<input type="radio" value="HL7STANDARD"-->
            <!--ng-model="$parent.selection.scope"><i class="fa fa-th-list"></i>HL7 DATA TYPES-->
            <!--</label>-->
            <!--<label class="btn btn-raised  btn-primary btn-xs"-->
            <!--ng-click="loadLibrariesByFlavorName('MASTER')"-->
            <!--ng-class="{'active':selection.scope === 'MASTER'}">-->
            <!--<input type="radio" value="MASTER"-->
            <!--ng-model="$parent.selection.scope"><i class="fa fa-th-list"></i>MASTER DATA TYPES-->
            <!--</label>-->
            <!--</span>-->
            <!--</div>-->
            <div class="col-md-12">
                <!--<div class="panel panel-primary">-->
                <!--&lt;!&ndash; Default panel contents &ndash;&gt;-->
                <!--<div class="panel-heading panel-heading-collapsable">-->
                <!--<i class="glyphicon glyphicon-list"></i>Data Type Flavors-->
                <!--&lt;!&ndash;<button title="Hide Flavors" class="btn btn-raised btn-xs btn-primary pull-right"&ndash;&gt;-->
                <!--&lt;!&ndash;ng-click="collapsed = !collapsed">&ndash;&gt;-->
                <!--&lt;!&ndash;<i class="fa fa-caret-left"></i>&ndash;&gt;-->
                <!--&lt;!&ndash;</button>&ndash;&gt;-->
                <!--</div>-->
                <!--<div class="panel-body">-->
                <!--<div ng-show="!resultsLoading">-->
                <div class="container-testcase">
                    <div ng-show="results != null && results.length > 0">
                        <table st-table="tmpResults" st-safe-src="results" class="table table-striped table-bordered table-condensed igl-list-table">
                            <thead>
                                <tr>
                                    <th colspan="1" st-ratio="100">
                                        <input st-search placeholder="Search" class="input-sm form-control" type="search" />
                                    </th>
                                </tr>
                                <tr class="tbl-header">
                                    <th st-ratio="100" st-sort="ext">Label</th>
                                    <!--<th st-ratio="20" st-sort="hl7Version">Hl7 Version</th>-->
                                    <!--<th st-ratio="40" st-sort="libraryName">From Library</th>-->
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="row in tmpResults  track by row.id  | orderBy:'row.ext'" ng-class="{'active':selection.selected != null && selection.selected === row.id}">
                                    <td st-ratio="100">{{$index + 1}}
                                        <input type="radio" ng-model="selection.selected" ng-value="row.id" ng-click="showSelectedDetails(row)"> {{getDatatypeLabel(row)}}
                                    </td>
                                    <!--<td st-ratio="20">{{row.hl7Version}}</td>-->
                                    <!--<td st-ratio="40">{{row.libraryName}}</td>-->
                                </tr>
                            </tbody>
                            <tfoot ng-show="results.length >= 10">
                                <tr>
                                    <td colspan="1">
                                        <div st-pagination="" st-items-by-page="10" st-displayed-pages="7"></div>
                                    </td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <div ng-show="results == null || results.length == 0">
                        No Data Type Flavor Available
                    </div>
                </div>
                <!--</div>-->
                <!--<div ng-show="resultsLoading" style="text-align:center">-->
                <!--<i class="fa fa-circle-o-notch fa-spin fa-2x"></i>-->
                <!--</div>-->
                <!--</div>-->
                <!--</div>-->
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <div class="row">
            <div class="col-md-12">
                <div class="pull-right">
                    <button class="btn btn-raised tbn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">
                        &nbsp; </i>Cancel</span>
                    </button>
                    <button class="btn btn-raised btn-primary btn-sm" ng-click="submit()" ng-disabled="selection.selected === null || selection.selected.id === currentDatatype.id"><span><i
                            class="fa fa-play fa-fw">
                        &nbsp; </i>Bind</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="AddComponentModal.html">
    <div class="modal-header modal-wide">
        <div class="form-inline">
            <span class="header4">Add Component</span>
        </div>
    </div>
    <hr/>
    <div class="modal-body">
        <form name="addCompForm">
            <div class="row" style="margin-bottom: 20px">
                <div class="form-group control-group">
                    <label class="col-md-3 control-label col-md-offset-3">Name*</label>
                    <input style="width:30%" class="form-control col-md-4" ng-model="newComponent.name" required/>
                </div>
            </div>
            <div class="row" style="margin-bottom: 20px">
                <div class="form-group control-group">
                    <label class="col-md-3 control-label col-md-offset-3">Position*</label>

                    <div class="controls">
                        <select ng-model="position" ng-change="selectPos()" style="width:30%" class="form-control input-sm" required>
                            <option ng-repeat="component in datatype.components track by component.id"> {{component.position}}
                            <option value="{{datatype.components.length+1}}">{{datatype.components.length+1}}
                        </select>
                    </div>
                </div>
            </div>
            <div class="row" style="margin-bottom: 20px">
                <div class="form-group control-group">
                    <label class="col-md-3 control-label col-md-offset-3">Usage*</label>

                    <div class="controls">
                        <select style="width:30%" class="form-control input-sm" name="usage" ng-change="selectUsage(newComponent.usage)" ng-model="newComponent.usage" ng-options="usage for usage in config.usages" required/>
                    </div>
                </div>
            </div>
            <div class="row" style="margin-bottom: 20px">
                <div class="form-group control-group">
                    <label class="col-md-3 control-label col-md-offset-3">Length*</label>

                    <div class="controls" ng-controller="SegmentRowCtrl">
                        <span ng-form name="{{formName}}" class="form-inline">
                                                <input style="width:15%" class="form-control col-md-2"
                                                       placeholder="Min Length"
                                                       name="min"

                                                       ng-pattern="/^\d+$/"
                                                       ng-model="newComponent.minLength" ng-disabled="disableMin"
                                                       required>
                                                <input style="width:15%" class="form-control col-md-2" type="text"
                                                       placeholder="Max Length"
                                                       name="max"


                                                       ng-pattern="/^\d+$|^\*?$/"
                                                       ng-model="newComponent.maxLength" ng-disabled="disableMax"
                                                       required>
                                            </span>
                    </div>
                </div>
            </div>
            <div class="row" style="margin-bottom: 20px">
                <div class="form-group control-group">
                    <label class="col-md-3 control-label col-md-offset-3">Conf Length</label>
                    <input style="width:30%" class="form-control col-md-4" name="confLength" ng-pattern="/^\d+$/" ng-model="newComponent.confLength">
                </div>
            </div>
            <div class="row" style="margin-bottom: 20px">
                <div class="form-group control-group">
                    <label class="col-md-3 control-label col-md-offset-3">Datatype</label>

                    <div class="controls">
                        <input style="width:30%" class="form-control col-md-4" type="text" ng-model="searchDT.name" ng-hide="selectedDT()" />
                        <li style="width:30%" class="form-control col-md-4 col-md-offset-6" ng-show="selectedDT()">
                            {{::DT.name}} <span ng-show="DT.ext">_{{::DT.ext}}</span>
                            <button type="button" class="close" aria-label="Close" ng-click="unselectDT()">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </li>
                    </div>
                    <div ng-if="searchDT.name  && !selectedDT()">
                        <li style="width:30%" class="form-control col-md-4 col-md-offset-6" ng-class="{'active':isDTActive(datatype.id)}" ng-click="selectDT(datatype)" ng-repeat="datatype in datatypes | filter:searchDT">
                            {{::datatype.name}} <span ng-show="datatype.ext">_{{::datatype.ext}}</span>
                        </li>
                    </div>
                </div>
            </div>
            <div class="row" style="margin-bottom: 20px">
                <div class="form-group control-group">
                    <label class="col-md-3 control-label col-md-offset-3">ValueSet</label>

                    <div class="controls">
                        <input style="width:30%" class="form-control col-md-4" type="text" ng-model="searchVS.name" ng-hide="selectedVS()" />
                        <li style="width:30%" class="form-control col-md-4 col-md-offset-6" ng-show="selectedVS()">
                            {{::VS.name}}
                            <button type="button" class="close" aria-label="Close" ng-click="unselectVS()">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </li>
                    </div>
                    <div ng-if="searchVS.name && !selectedVS()">
                        <li style="width:30%" class="form-control col-md-4 col-md-offset-6" ng-class="{'active':isDTActive(valueSet.id)}" ng-click="selectVS(valueSet)" ng-repeat="valueSet in valueSets | filter:searchVS">
                            {{::valueSet.name}}
                        </li>
                    </div>
                </div>
            </div>
            <div class="row" style="margin-bottom: 20px">
                <div class="form-group control-group">
                    <label class="col-md-3 control-label col-md-offset-3">Comment</label>
                    <textarea style="width:30%" class="form-control col-md-4" ng-model="newComponent.comment">
                    </textarea>
                </div>
            </div>
        </form>
        <hr/>
        <div class="modal-footer">
            <button class="btn btn-raised btn-primary btn-sm" ng-click="addComponent()" ng-disabled="addCompForm.$invalid"><span><i
                    class="fa fa-play fa-fw">
                &nbsp; </i>Add</span>
            </button>
            <button class="btn btn-raised btn-warning btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">
                &nbsp; </i>Cancel</span>
            </button>
        </div>
    </div>
</script>
<script type="text/ng-template" id="DeleteComponent.html">
    <div class="modal-header">
        <h3 class="modal-title">Delete Confirmation</h3>
    </div>
    <div class="modal-body">
        <p>Are you sure you want to delete Component: {{::componentToDelete.name}} ? </p>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-danger btn-sm" ng-click="delete()"><span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Delete</span>
        </button>
    </div>
</script>

<script type="text/ng-template" id="DeleteDatatypePredicate.html">
    <div class="modal-header">
        <h3 class="modal-title">Delete Confirmation</h3>
    </div>
    <div class="modal-body">
        <p>Are you sure you want to delete the predicate? </p>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-danger btn-sm" ng-click="delete()"><span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Delete</span>
        </button>
    </div>
</script>