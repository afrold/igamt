<style id="antiClickjack">
    body {
        display: none !important;
    }
</style>
<script type="text/javascript">
    if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
    } else {
        top.location = self.location;
    }
</script>
<div class="container" ng-controller="IGDocumentListCtrl" ng-init="initIGDocuments()">
    <div class="row" ng-show="isAuthenticated()">
        <!--<div class="row">-->
        <div ng-show="!isPending()">
            <md-tabs md-dynamic-height md-border-bottom ng-if="!fullScreen">
                <md-tab md-active="accordi.igList" md-on-select="selectIgTab(0)">
                    <md-tab-label>
                        <i class="fa fa-list fa-fw"></i> IG Documents List
                    </md-tab-label>
                    <md-tab-body class="root">
                        <div ng-include="'views/edit/listIG.html'"></div>
                    </md-tab-body>
                </md-tab>
                <md-tab md-active="accordi.igDetails" md-on-select="selectIgTab(1)"
                        ng-if="igdocument&&igdocument!==null" ng-disabled="!igdocument || igdocument===null">
                    <md-tab-label>
                        <span ng-if="!viewSettings.tableReadonly"> <i class="fa fa-pencil fa-fw"></i>Current IG Document</span>
                        <span ng-if="viewSettings.tableReadonly"> <i class="fa fa-search fa-fw"></i>Current IG Document</span>
                    </md-tab-label>
                    <md-tab-body class="root">
                        <div ng-include="'views/edit/editIG.html'"></div>
                    </md-tab-body>
                </md-tab>

            </md-tabs>

            <div ng-if="fullScreen" ng-include="'views/edit/editIG.html'"></div>

        </div>
        <div style="font-size: 18px;text-align: center" ng-show="isPending()">
            <div msg key='account.pendingSection'></div>
        </div>
    </div>

    <div class="login-required-page" ng-show="!isAuthenticated()" style="font-size: 18px;text-align: center;margin:auto; width:90%; height:90%">
        <p>Please <a href="" ng-click="loginReq()"><i class="fa fa-sign-in"></i>&nbsp;login</a> to access this page. You can also
            <a href="#/registration"><i class="fa fa-chevron-circle-right"></i>&nbsp;register</a></p>
    </div>

<script type="text/ng-template" id="hl7VersionsDlgMD.html">

        <md-dialog style="width:80% !important; min-width:80% !important;">
            <form ng-cloak id="hl7VersionsDlgForm" name="hl7VersionsDlgForm" class="form-horizontal">
                <md-toolbar>
                    <div class="md-toolbar-tools">
                        <h2 class="header4" style="color:white;" ng-show="clickSource==='btn'">Create IG Document</h2>
                        <h2 class="header4" style="color:white;" ng-show="clickSource !=='btn'">Add Conformance
                            Profile</h2>
                        <span flex></span>
                        <md-button class="md-icon-button" ng-click="cancel()">
                            <i class="material-icons">clear</i>
                        </md-button>

                    </div>
                </md-toolbar>

                <md-dialog-content>
                    <div class="md-dialog-content">


                        <div>
                            <!--<div class="col-md-12">
                    <div class="btn-group btn-group-sm pull-left" data-toggle="buttons">
                        <label class="btn btn-raised btn-info btn-xs"
                               ng-click="loadIGDocumentsByVersion(hl7Version)"
                               ng-class="{ 'active':vr===selectedHL7Version}" ng-repeat="vr in hl7Versions">
                            <input type="radio" ng-value="vr" ng-model="hl7Version">{{vr}}</input>
                        </label>
                    </div>
            </div>-->


                            <md-tabs md-dynamic-height md-border-bottom>
                                <md-tab md-active="tabs[0].active" md-on-select="make_active(0)"
                                        ng-if="clickSource==='btn'">
                                    <md-tab-label>
                                        <i class="fa fa-info-circle fa-fw"></i> IG Document Metadata

                                    </md-tab-label>
                                    <md-tab-body>


                                        <div style="margin-top: 20px" ng-cloak class="md-inline-form" layout="column">


                                            <md-content layout-padding>
                                                <label class="input-left igamt-label">Title*</label>

                                                <md-input-container class="md-block igamt-input-block" flex-gt-sm>
                                                    <input type="text" name="title" id="title"
                                                           ng-model="hl7VersionsDlgForm.metaData.title" required>
                                                    <div ng-messages="hl7VersionsDlgForm.title.$error">
                                                        <div ng-message="required">Title is required.</div>
                                                    </div>
                                                </md-input-container>

                                                <label class="input-left igamt-label">Sub-Title*</label>

                                                <md-input-container class="md-block igamt-input-block" flex-gt-sm>
                                                    <input type="text" name="subTitle" id="subtitle"
                                                           ng-model="hl7VersionsDlgForm.metaData.subTitle" required>
                                                    <div ng-messages="hl7VersionsDlgForm.subTitle.$error">
                                                        <div ng-message="required">Sub-Title is required.</div>
                                                    </div>
                                                </md-input-container>

                                                <label class="input-left igamt-label">Organization</label>
                                                <md-input-container class="md-block igamt-input-block" flex-gt-sm>
                                                    <input type="text" name="orgName" id="orgName"
                                                           ng-model="hl7VersionsDlgForm.metaData.orgName">

                                                </md-input-container>

                                                <label class="input-left igamt-label">Extension</label>
                                                <md-input-container class="md-block igamt-input-block" flex-gt-sm>
                                                    <input type="text" name="ext" id="ext"
                                                           ng-model="hl7VersionsDlgForm.metaData.ext">
                                                </md-input-container>

                                                <!--<md-input-container class="md-block" flex-gt-sm>-->
                                                    <!--<label class="input-left">Specification</label>-->
                                                    <!--<input type="text" name="specificationName"-->
                                                           <!--ng-model="hl7VersionsDlgForm.metaData.specificationName">-->

                                                <!--</md-input-container>-->

                                                <!--<md-input-container class="md-block" flex-gt-sm>-->
                                                    <!--<label class="input-left">Status</label>-->
                                                    <!--<input type="text" name="specificationName"-->
                                                           <!--ng-model="hl7VersionsDlgForm.metaData.status">-->

                                                <!--</md-input-container>-->

                                                <!--<md-input-container class="md-block" flex-gt-sm>-->
                                                    <!--<label class="input-left">Topics</label>-->
                                                    <!--<input type="text" name="specificationName"-->
                                                           <!--ng-model="hl7VersionsDlgForm.metaData.topics">-->

                                                <!--</md-input-container>-->


                                            </md-content>

                                        </div>

                                    </md-tab-body>
                                </md-tab>

                                <md-tab md-active="tabs[1].active" md-on-select="make_active(1)">
                                    <md-tab-label>
                                        <i class="fa fa-file-text-o fa-fw"></i> Message Events*
                                    </md-tab-label>
                                    <md-tab-body>

                                        <div style="margin-left:20px; margin-bottom:20px; margin-top:20px">
                                        <label class="igamt-label">Select HL7
                                            version*</label>
                                             <md-radio-group ng-model="hl7Version"
                                                            ng-change="loadIGDocumentsByVersion(hl7Version)"
                                                            style="display: inline-flex; margin-top:10px" required>

                                                <md-radio-button ng-repeat="vr in hl7Versions"
                                                                 ng-disabled="loading || igdocument"
                                                                 ng-value="vr" class="md-primary"
                                                                 style="margin-left:25px;">{{vr}}
                                                </md-radio-button>

                                            </md-radio-group>
                                         </div>

                                        <div class="row" style="margin-left:20px">
                                            <div ng-show="loading" style="text-align:center">
                                                <i class="fa fa-spinner fa-pulse fa-2x"></i>
                                            </div>
                                            <div ng-show="!loading">
                                                <div class="table-responsive" style="width:100% !important">
                                                    <table tt-table tt-params="messageEventsParams"
                                                           ng-if="messageEventsParams"
                                                           class="table table-striped table-bordered table-fix-header table-condensed hl7-versions-table"
                                                           style="width:100% !important">
                                                        <thead>
                                                        <tr class="tbl-header" layout="row">
                                                            <td flex="30">Message Structure</td>
                                                            <td flex="30">Message Event</td>
                                                            <td flex="40">Description</td>
                                                        </tr>
                                                        </thead>
                                                        <tbody style="display: block; max-height: 400px; overflow: scroll"></tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>


                                        <label style="color:lightslategray;"><i>Selected Message Events</i></label>

                                        <div class="row" style="overflow-x:scroll;margin-left:20px; margin-bottom:20px; margin-top:20px">
                                            <span ng-repeat="event in eventList" class="label label-default" style="margin-right:5px">{{event.name}}^{{event.parentStructId}} <i
                                                    class="fa fa-times" aria-hidden="true"
                                                    ng-click="trackSelections(false, event)"></i></span>
                                        </div>



                                    </md-tab-body>
                                </md-tab>
                        </div>

                        </md-tabs>
                    </div>

                </md-dialog-content>

                    <md-dialog-actions layout="row">

                        <md-button   class="btn btn-raised btn-primary btn-md"  ng-click="make_active(0)"
                                   ng-if="tabs[1].active&&clickSource==='btn'">
                        <i class="fa fa-arrow-left fa-fw"></i> Back
                        </md-button>
                        <md-button  class="btn btn-raised btn-primary btn-md" ng-click="make_active(1)" ng-if="tabs[0].active">
                            <i class="fa fa-arrow-right fa-fw"></i>  Next
                        </md-button>

                        <md-button ng-show="clickSource === 'ctx'" class="btn btn-raised btn-primary btn-md" type="button"
                                   ng-click="ok()" ng-disabled="okDisabled">
                            <i class="fa fa-check fa-fw"></i>Submit
                        </md-button>

                        <md-button ng-show="clickSource === 'btn'"  class="btn btn-raised btn-primary btn-md" type="button"
                                   ng-click="ok()" ng-disabled="(!hl7Version) || okDisabled || hl7VersionsDlgForm.$invalid">
                            <i class="fa fa-check fa-fw"></i>Submit
                        </md-button>

                    </md-dialog-actions>
             </form>
            </div>
        </md-dialog>
    </script>
    <script type="text/ng-template" id="MessageEventsNode.html">
        <tr layout="row" tt-node is-branch="node.type === 'message'">
            <td flex="30" class="" style="width:300px;color:black"><span ng-bind="::node.name"
                                                                         ng-show="node.type === 'message'"
                                                                         style="margin-left : 7px;"></span></td>
            <td flex="30" style="color:black">

                <md-checkbox ng-show="node.type === 'event'" ng-model="bool" ng-change="trackSelections(bool, node)">
                    <span ng-show="node.type === 'event'" ng-bind="::node.name" style="margin-left : 7px;"></span>
                </md-checkbox>
            </td>


            <td flex="40" style="width:585px;color:black" ng-bind="::node.description"></td>

        </tr>

    </script>

<script type="text/ng-template" id="DeleteProfileComponentCtrl.html">
    <md-dialog aria-label="confirmation">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2>Delete Confirmation</h2>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">


        <p>Are you sure you want to delete the Profile Component:"{{profileComponentToDelete.name}}" ? This operation is irreversible</p>
                </div>
            </md-dialog-content>

            <md-dialog-actions layout="row">
                <button class="btn btn-raised btn-danger btn-sm" ng-disabled="loading" ng-click="delete()"><span><i
                        class="fa fa-trash-o fa-fw">&nbsp; </i>Delete</span>
                </button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>

<script type="text/ng-template" id="DeleteCompositeMessageCtrl.html">
    <md-dialog aria-label="confirmation">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2>Delete Confirmation</h2>

                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">

        <p>Are you sure you want to delete the Composite Message:"{{compositeMessageToDelete.name}}" ? This operation is irreversible</p>
            </div>
            </md-dialog-content>

            <md-dialog-actions layout="row">
                <button class="btn btn-raised btn-danger btn-sm" ng-disabled="loading" ng-click="delete()"><span><i
                        class="fa fa-trash-o fa-fw">&nbsp; </i>Delete</span>
                </button>
                <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
                    <div layout="row" layout-sm="column" layout-align="space-around">
                        <md-progress-circular class="md-hue-2" md-diameter="40px"></md-progress-circular>
                    </div>
                </div>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="DeleteCompositeProfileCtrl.html">
    <md-dialog aria-label="confirmation">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2>Delete Confirmation</h2>

                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">

                    <p>Are you sure you want to delete the Composite Profile:"{{compositeMessageToDelete.name}}" ? This operation is irreversible            </md-dialog-content>

            <md-dialog-actions layout="row">
                <button class="btn btn-raised btn-danger btn-sm" ng-disabled="loading" ng-click="delete()"><span><i
                        class="fa fa-trash-o fa-fw">&nbsp; </i>Delete</span>
                </button>
                <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
                    <div layout="row" layout-sm="column" layout-align="space-around">
                        <md-progress-circular class="md-hue-2" md-diameter="40px"></md-progress-circular>
                    </div>
                </div>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="CantDeleteMsgCtrl.html">
    <md-dialog aria-label="confirmation">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Delete Confirmation</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
<div ng-if="crossRefsForDelete.compositeProfileFound.length">
            <p> Conformance Profile:"{{msg.name}}" cannot be deleted because it is used in the following Composite
                Profiles: </p>
            <table id="applyPcToTable" tt-table tt-params="cantDeleteMsgParams"
                   class="table table-bordered table-fix-header table-condensed profile-table">
                <thead>
                <tr class="tbl-header" style="">
                    <th class="col-md-3">Composite Profile Name</th>
                    <th class="col-md-3">Core Profile Name</th>
                    <th class="col-md-3">Applied Profile Components</th>

                </tr>

                </thead>
                <tbody></tbody>
            </table>
</div>

                    <div ng-show="crossRefsForDelete.profileComponentFound.length">
                        <h4>Profile Components Cross References</h4>


                        <table  class="table table-striped table-bordered table-condensed">
                            <thead>
                            <tr class="tbl-header">
                                <td st-ratio="5">#</td>
                                <th st-ratio="25">Name</th>
                                <th st-ratio="40">Description</th>
                                <th st-ratio="10">Target Position</th>
                                <th st-ratio="20">Where</th>
                            </tr>

                            </thead>

                            <tbody>
                            <tr ng-repeat="ref in crossRefsForDelete.profileComponentFound track by $index">
                                <td st-ratio="5">{{$index + 1}}
                                </td>
                                <td st-ratio="25">
                                    <span ng-bind="ref.name"></span>
                                </td>
                                <td st-ratio="40">
                                    <span ng-bind="ref.description"></span>
                                </td>
                                <td st-ratio="10">
                                    {{::ref.targetPosition}}
                                </td>
                                <td st-ratio="20">
                                    {{::ref.where}}
                                </td>


                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </md-dialog-content>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="CantDeletePcCtrl.html">
    <md-dialog aria-label="confirmation">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2>Can't Delete Profile Component </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>
            <md-dialog-content>
                <div class="md-dialog-content">
                    <p>Profile Component:"{{profileComponent.name}}" cannot be deleted because it is applied in the Composite Profiles: </p>
                    <table id="applyPcToTable" tt-table tt-params="cantDeletePcParams" class="table table-bordered table-fix-header table-condensed profile-table">
                        <thead>
                        <tr class="tbl-header" style="">
                            <th class="col-md-3">Composite Profile Name</th>
                            <th class="col-md-3">Core Profile Name</th>
                            <th class="col-md-3">Applied Profile Components</th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </md-dialog-content>
        </form>
    </md-dialog>
</script>
 <script type="text/ng-template" id="ConfirmIGDocumentDeleteCtrl.html">
        <md-dialog aria-label="confirmation">
            <form ng-cloak>
                <md-toolbar>
                    <div class="md-toolbar-tools">
                        <h2> Delete Confirmation</h2>
                        <span flex></span>
                        <md-button class="md-icon-button" ng-click="cancel()">
                            <i class="material-icons">clear</i>
                        </md-button>
                    </div>
                </md-toolbar>

                <md-dialog-content>
                    <div class="md-dialog-content">
                        <p>Are you sure you want to delete the IG Document:"{{igdocumentToDelete.metaData.title}}" ? This operation
                            is irreversible
                        </p>                    </div>
                </md-dialog-content>
                <md-dialog-actions layout="row">
                    <md-button  class="md-primary md-raised" md-autofocus ng-click="delete()">delete
                    </md-button>
                </md-dialog-actions>
            </form>
        </md-dialog>
 </script>
    <script type="text/ng-template" id="ConfirmIGDocumentCloseCtrl.html">
        <div class="modal-header">
            <h3 class="modal-title">Close Confirmation
            </h3>
        </div>
        <div class="modal-body">
            <p>You currently have unsaved changes. Are you sure you want to close the igdocument ? All unsaved changes
                will be lost</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                    class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
            </button>
            <button class="btn btn-raised btn-warning btn-sm" ng-disabled="loading"
                    ng-click="discardChangesAndClose()"><span><i
                    class="fa fa-times-circle fa-fw">&nbsp; </i>Discard Changes</span>
            </button>
            <button class="btn btn-raised btn-primary btn-sm" ng-disabled="loading" ng-click="saveChangesAndClose()"><span><i
                    class="fa fa-check-circle fa-fw">&nbsp; </i>Apply Changes</span>
            </button>
            <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
                <div layout="row" layout-sm="column" layout-align="space-around">
                    <md-progress-circular class="md-hue-2" md-diameter="40px"></md-progress-circular>
                </div>
            </div>
        </div>
    </script>
    <script type="text/ng-template" id="ConfirmIGDocumentOpenCtrl.html">
        <div class="modal-header">
            <h3 class="modal-title">Open Confirmation
            </h3>
        </div>
        <div class="modal-body">
            <p>You currently have an open IG document with unsaved changes. Are you sure you want to open the IG
                document ? All unsaved changes will be lost</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                    class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
            </button>
            <button class="btn btn-raised btn-warning btn-sm" ng-disabled="loading"
                    ng-click="discardChangesAndOpen()"><span><i
                    class="fa fa-times-circle fa-fw">&nbsp; </i>Discard Changes</span>
            </button>
            <button class="btn btn-raised btn-primary btn-sm" ng-disabled="loading"
                    ng-click="saveChangesAndOpen()"><span><i
                    class="fa fa-check-circle fa-fw">&nbsp; </i>Apply Changes</span>
            </button>
            <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
                <div layout="row" layout-sm="column" layout-align="space-around">
                    <md-progress-circular class="md-hue-2" md-diameter="40px"></md-progress-circular>
                </div>
            </div>
        </div>
    </script>
    <script type="text/ng-template" id="RichTextCtrl.html">
        <div class="modal-header modal-wide">
            <h3 class="modal-title">{{editorTarget.obj.position}} . {{editorTarget.obj.name}} : {{editorTarget.title}}
            </h3>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="col-md-12">
                    <div ng-if="!editorTarget.disabled">
                        <textarea rows="10" froala="froalaEditorOptions" style="width:100%;" autofocus
                                  ng-model="editorTarget.obj[editorTarget.key]" id="globalEditor" name="content"
                                  ng-change="recordChanged()"></textarea>
                    </div>
                    <div ng-if="editorTarget.disabled" style="width:100%;">
                        <div froala-view="editorTarget.obj[editorTarget.key]"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-raised btn-primary btn-md" ng-click="close()"><span><i class="fa fa-times fa-fw">
            &nbsp; </i>Close</span>
            </button>
        </div>
    </script>
    <script type="text/ng-template" id="SelectMessagesForExportCtrlMd.html">
        <md-dialog aria-label="exportXml" style="width: 50%">
            <form ng-cloak>
                <md-toolbar>
                    <div class="md-toolbar-tools">
                        <h2 ng-if="!toGVT"><i class="fa fa-download fa-fw"></i>Export XML </h2>
                        <h2 ng-if="toGVT"><i class="fa fa-paper-plane fa-fw"></i>Connect To GVT </h2>
                        <span flex></span>
                        <md-button class="md-icon-button" ng-click="cancel()">
                            <i class="material-icons">clear</i>
                        </md-button>
                    </div>
                </md-toolbar>

                <md-dialog-content>
                    <div class="md-dialog-content">
                        <div ng-show="exportStep === 0">
                            <form novalidate ng-cloak>
                                <div ng-show="!toGVT || toGVT === false">
                                    <h4 class="modal-title">Select Export Format</h4>
                                </div>
                                <div ng-show="!toGVT || toGVT === false" style="margin-bottom:10px">
                                    <div class="btn-group btn-group-sm pull-left" data-toggle="buttons">
                                        <label class="btn btn-raised btn-primary btn-xs"
                                               ng-click="xmlFormat='Validation'"
                                               ng-class="{ 'active':xmlFormat==='Validation' }">
                                            NIST Validation Format
                                        </label>
                                        <label class="btn btn-raised btn-primary btn-xs"
                                               ng-click="xmlFormat='Display'"
                                               ng-class="{ 'active':xmlFormat==='Display' }">
                                            NIST Display Format
                                        </label>
                                        <label class="btn btn-raised btn-primary btn-xs"
                                               ng-click="xmlFormat='Gazelle'"
                                               ng-class="{ 'active':xmlFormat==='Gazelle' }">
                                            Gazelle Format
                                        </label>
                                    </div>
                                </div>
                                <br/>
                                <div layout="row" class="alert alert-info" style="width:100%">
                                   Select Conformance Profile(s)
                                </div>
                                <div class="table-responsive" style="width:100%">
                                    <table class="table table-striped table-bordered break-content">
                                        <thead>
                                        <tr class="tbl-header" layout="row" layout-align="start start">
                                            <th flex="10">
                                                <md-checkbox type="checkbox" ng-model="bool" arial-label="message"
                                                             ng-change="selectionAll(bool)"></md-checkbox>
                                            </th>
                                            <th flex="20">ID</th>
                                            <th flex="30">Name</th>
                                            <th flex="40">Description</th>
                                        </tr>
                                        </thead>
                                        <tbody style="display:block; overflow-y: scroll;max-height: 400px;">
                                        <tr ng-repeat="message in igdocumentToSelect.profile.messages.children track by message.id"
                                            layout="row" layout-align="start start">
                                            <td flex="10">
                                                <md-checkbox type="checkbox" ng-model="message.selected"
                                                             arial-label="message.id"
                                                             ng-change="trackSelections()"></md-checkbox>
                                            </td>
                                            <td flex="20">{{message.identifier}}</td>
                                            <td flex="30">{{message.name}}</td>
                                            <td flex="40">{{message.description}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </form>
                        </div>
                        <div ng-show="exportStep === 1">
                            <div ng-class="'alert alert-info'" style="font-size:14px;font-weight: bold">
                                Login information on GVT at {{::appInfo.gvtUrl}}
                            </div>
                            <form name="gvtLoginForm" id="gvtLoginForm" novalidate ng-cloak
                                  style="padding:20px 0px 20px 0px">
                                <div ng-class="{'has-success has-feedback': gvtLoginForm.gvtUsername.$valid, 'igl-has-error has-feedback': !gvtLoginForm.gvtUsername.$valid}">
                                    <md-input-container layout="row">
                                        <label>Username</label>
                                        <input flex="100" type="text" autocomplete="off"  autofocus id="gvtUsername" name="gvtUsername"
                                               ng-model="user.username" ng-minlength="4" required>
                                    </md-input-container>
                                </div>
                                <div ng-class="{'has-success has-feedback': gvtLoginForm.gvtPassword.$valid, 'igl-has-error has-feedback': !gvtLoginForm.gvtPassword.$valid}">
                                    <md-input-container layout="row">
                                        <label>Password</label>
                                        <input flex="100" type="password" autocomplete="off" id="gvtPassword"
                                               name="gvtPassword" ng-model="user.password" ng-minlength="4" required>
                                    </md-input-container>
                                </div>
                                <p>
                                    <a ng-href="{{appInfo.gvtUrl}}#/forgotten" target="_blank"
                                       style="text-align:center">
                                        <span msg key="gvt.login.forgotPwd"></span>
                                    </a>
                                    <br/>
                                    <a ng-href="{{appInfo.gvtUrl}}#/registration" target="_blank"
                                       style="text-align:center">
                                        <span msg key="gvt.login.newAccount"></span>
                                    </a>
                                </p>
                            </form>
                        </div>

                        <div ng-show="exportStep === 2">
                            <div ng-show="info.type === 'info'">

                                <div ng-class="'alert alert-success'" style="font-size:14px;;font-weight: bold">
                                    <p><i class="fa fa-check" aria-hidden="true"></i> Transaction Successful !</p>

                                </div>
                                <p><a  style="font-size:14px;" ng-href="{{redirectUrl}}" target="_blank">You are now being redirected to GVT.
                                    Please click here if you are not redirected after 3s</a>
                                </p>

                            </div>

                            <div ng-show="info.type === 'danger'">

                                <div ng-if="info.details === null || !info.details">
                                    <div ng-class="'alert alert-danger'" style="font-size:14px;font-weight: bold">
                                        <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                                        <span msg key="info.text"></span>
                                    </div>
                                </div>

                                <div ng-if="info.details != null && info.details">

                                    <div ng-class="'alert alert-danger'" style="font-size:14px;font-weight: bold">
                                        <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                                        Export Failed
                                    </div>

                                <form name="gvtErrorForm" id="gvtErrorForm" novalidate class="form-horizontal">
                                    <md-tabs md-dynamic-height md-border-bottom>
                                        <md-tab label="Profile Errors">
                                            <md-content class="md-padding">
                                                <div ng-show="errorDetails.profileErrors.length === 0">
                                                    No error found.
                                                </div>
                                                <table ng-show="errorDetails.profileErrors.length > 0"
                                                       st-table="tmpProfileErrors"
                                                       st-safe-src="errorDetails.profileErrors"
                                                       class="table table-striped table-bordered table-condensed table-fix-header">
                                                    <thead>
                                                    <tr class="tbl-header" style="">
                                                        <th st-ratio="60" st-sort="message">Error</th>
                                                        <th st-sort="line" st-ratio="20">Line #
                                                        </th>
                                                        <th st-sort="line" st-ratio="20">Column #
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr ng-repeat="row in tmpProfileErrors">
                                                        <td ng-bind="row.message" st-ratio="60"></td>
                                                        <td ng-bind="row.line" st-ratio="20"></td>
                                                        <td ng-bind="row.column" st-ratio="20"></td>
                                                    </tr>
                                                    </tbody>
                                                    <tfoot ng-show="errorDetails.profileErrors.length >= 20">
                                                    <tr style="">
                                                        <td colspan="3">
                                                            <div st-pagination="" st-items-by-page="20"
                                                                 st-displayed-pages="7"></div>
                                                        </td>
                                                    </tr>
                                                    </tfoot>
                                                </table>
                                            </md-content>
                                        </md-tab>
                                        <md-tab label="Constraints Errors">
                                            <md-content class="md-padding">
                                                <div ng-show="errorDetails.constraintsErrors.length === 0">
                                                    No error found.
                                                </div>
                                                <table ng-show="errorDetails.constraintsErrors.length > 0"
                                                       st-table="tmpConstraintErrors"
                                                       st-safe-src="errorDetails.constraintsErrors"
                                                       class="table table-striped table-bordered table-condensed table-fix-header">
                                                    <thead>
                                                    <tr class="tbl-header" style="">
                                                        <th st-ratio="60" st-sort="message">Error</th>
                                                        <th st-sort="line" st-ratio="20">Line #
                                                        </th>
                                                        <th st-sort="line" st-ratio="20">Column #
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr ng-repeat="row in tmpConstraintErrors">
                                                        <td ng-bind="row.message" st-ratio="60"></td>
                                                        <td ng-bind="row.line" st-ratio="20"></td>
                                                        <td ng-bind="row.column" st-ratio="20"></td>
                                                    </tr>
                                                    </tbody>
                                                    <tfoot ng-show="errorDetails.constraintsErrors.length >= 20">
                                                    <tr style="">
                                                        <td colspan="3">
                                                            <div st-pagination="" st-items-by-page="20"
                                                                 st-displayed-pages="7"></div>
                                                        </td>
                                                    </tr>
                                                    </tfoot>
                                                </table>
                                            </md-content>
                                        </md-tab>
                                        <md-tab label="ValueSets Errors">
                                            <md-content class="md-padding">
                                                <div ng-show="errorDetails.vsErrors.length === 0">
                                                    No error found.
                                                </div>
                                                <table ng-show="errorDetails.vsErrors.length > 0"
                                                       st-table="tmpValueSetErrors" st-safe-src="errorDetails.vsErrors"
                                                       class="table table-striped table-bordered table-condensed table-fix-header">
                                                    <thead>
                                                    <tr class="tbl-header" style="">
                                                        <th st-ratio="60" st-sort="message">Error</th>
                                                        <th st-sort="line" st-ratio="20">Line #
                                                        </th>
                                                        <th st-sort="line" st-ratio="20">Column #
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr ng-repeat="row in tmpValueSetErrors">
                                                        <td ng-bind="row.message" st-ratio="60"></td>
                                                        <td ng-bind="row.line" st-ratio="20"></td>
                                                        <td ng-bind="row.column" st-ratio="20"></td>
                                                    </tr>
                                                    </tbody>
                                                    <tfoot ng-show="errorDetails.vsErrors.length >= 20">
                                                    <tr style="">
                                                        <td colspan="3">
                                                            <div st-pagination="" st-items-by-page="20"
                                                                 st-displayed-pages="7"></div>
                                                        </td>
                                                    </tr>
                                                    </tfoot>
                                                </table>
                                            </md-content>
                                        </md-tab>
                                    </md-tabs>
                                </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </md-dialog-content>
                <md-dialog-actions layout="row">
                    <md-button ng-show="toGVT && (exportStep === 1 || exportStep === 2)"
                               class="btn btn-raised btn-primary btn-sm"
                               ng-disabled="xmlFormat==='' || xmlFormat===null || !selected" ng-click="goBack()"><span><i
                            class="fa fa-arrow-left fa-fw"></i>Back</span></md-button>
                    <md-button ng-show="!toGVT || toGVT === false" class="btn btn-raised btn-primary btn-sm"
                               ng-disabled="xmlFormat==='' || xmlFormat===null || !selected"
                               ng-click="exportAsZIPforSelectedMessages()"><span><i class="fa fa-download fa-fw"></i>Export as Zip</span>
                    </md-button>
                    <md-button ng-show="toGVT && exportStep === 0" class="btn btn-raised btn-primary btn-sm"
                               ng-disabled="xmlFormat==='' || xmlFormat===null || !selected" ng-click="goNext()"><span><i
                            class="fa fa fa-arrow-right fa-fw"></i>Next</span></md-button>
                    <md-button ng-show="toGVT && exportStep === 1" class="btn btn-raised btn-success btn-sm"
                               ng-show="xmlFormat=== 'Validation'"
                               ng-disabled="xmlFormat==='' || xmlFormat===null || !selected"
                               ng-click="exportAsZIPToGVT()"><span><i
                            class="fa fa-paper-plane fa-fw"></i>Send</span></md-button>
                </md-dialog-actions>
            </form>
        </md-dialog>
    </script>
    <script type="text/ng-template" id="SelectCompositeProfilesForExportCtrlMd.html">
        <md-dialog aria-label="exportXml" style="min-width: 50%">
            <div ng-cloak>
                <md-toolbar>
                    <div class="md-toolbar-tools">
                        <h2 ng-if="!toGVT"><i class="fa fa-download fa-fw"></i>Export XML </h2>
                        <h2 ng-if="toGVT"><i class="fa fa-paper-plane fa-fw"></i> Connect To GVT </h2>
                        <span flex></span>
                        <md-button class="md-icon-button" ng-click="cancel()">
                            <i class="material-icons">clear</i>
                        </md-button>
                    </div>
                </md-toolbar>

                <md-dialog-content>
                    <div class="md-dialog-content">
                        <div ng-show="exportStep === 0">
                            <form novalidate ng-cloak>
                                <div ng-show="!toGVT || toGVT === false">
                                    <h4 class="modal-title">Select Export Format</h4>
                                </div>
                                <div ng-show="!toGVT || toGVT === false" style="margin-bottom:10px">
                                    <div class="btn-group btn-group-sm pull-left" data-toggle="buttons">
                                        <label class="btn btn-raised btn-primary btn-xs"
                                               ng-click="xmlFormat='Validation'"
                                               ng-class="{ 'active':xmlFormat==='Validation' }">
                                            NIST Validation Format
                                        </label>
                                        <label class="btn btn-raised btn-primary btn-xs"
                                               ng-click="xmlFormat='Display'"
                                               ng-class="{ 'active':xmlFormat==='Display' }">
                                            NIST Display Format
                                        </label>
                                        <label class="btn btn-raised btn-primary btn-xs"
                                               ng-click="xmlFormat='Gazelle'"
                                               ng-class="{ 'active':xmlFormat==='Gazelle' }">
                                            Gazelle Format
                                        </label>
                                    </div>
                                </div>
                                <br/>
                                <div class="alert alert-info" style="width:100%">
                                    Select Conformance Profile(s)
                                </div>
                                <div class="table-responsive" layout="row" style="width: 100%">
                                    <table class="table table-striped table-bordered break-content">
                                        <thead>
                                        <tr class="tbl-header" layout="row">
                                            <th flex="10">
                                                <md-checkbox type="checkbox" ng-model="bool" arial-label="message"
                                                             ng-change="selectionAll(bool)"></md-checkbox>
                                            </th>
                                            <th flex="30">Name</th>
                                            <th flex="20">Extension</th>
                                            <th flex="40">Description</th>
                                        </tr>
                                        </thead>
                                        <tbody style="display:block; overflow-y: scroll;max-height: 400px;">
                                        <tr ng-repeat="child in igdocumentToSelect.profile.compositeProfiles.children track by child.id"
                                            layout="row">
                                            <td flex="10">
                                                <md-checkbox type="checkbox" ng-model="child.selected"
                                                             arial-label="child.id"
                                                             ng-change="trackSelections()"></md-checkbox>
                                            </td>
                                            <td flex="30">{{child.name}}</td>
                                            <td flex="20">{{child.ext}}</td>
                                            <td flex="40">{{child.description}}</td>

                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </form>
                        </div>
                        <div ng-show=" exportStep === 1">

                            <div ng-class="'alert alert-info'" style="font-weight: bold; font-size:14px">
                                Login information of GVT at {{appInfo.gvtUrl}}
                            </div>
                            <form name="gvtLoginForm" id="gvtLoginForm" novalidate ng-cloak
                                  style="padding:20px 0px 20px 0px">
                                <div ng-class="{'has-success has-feedback': gvtLoginForm.gvtUsername.$valid, 'igl-has-error has-feedback': !gvtLoginForm.gvtUsername.$valid}">

                                    <md-input-container layout="row">
                                        <label>Username</label>
                                        <input flex="100" type="text" autofocus id="gvtUsername" name="gvtUsername"
                                               ng-model="user.username" ng-minlength="4" required>
                                    </md-input-container>


                                </div>
                                <div ng-class="{'has-success has-feedback': gvtLoginForm.password.$valid, 'igl-has-error has-feedback': !gvtLoginForm.gvtPassword.$valid}">
                                    <md-input-container layout="row">
                                        <label>Password</label>
                                        <input flex="100" type="password" autocomplete="off" id="gvtPassword"
                                               name="gvtPassword" ng-model="user.password" ng-minlength="4" required>
                                    </md-input-container>
                                </div>
                                <p>
                                    <a ng-href="{{appInfo.gvtUrl}}#/forgotten" target="_blank"
                                       style="text-align:center">
                                        <span msg key="gvt.login.forgotPwd"></span>
                                    </a>
                                    <br/>
                                    <a ng-href="{{appInfo.gvtUrl}}#/registration" target="_blank"
                                       style="text-align:center">
                                        <span msg key="gvt.login.newAccount"></span>
                                    </a>
                                </p>
                            </form>
                        </div>

                        <div ng-show="exportStep === 2" >

                            <div ng-show="info.type === 'info'">

                                <div ng-class="'alert alert-success'" style="font-size:14px;font-weight: bold;">
                                    <p><i class="fa fa-check" aria-hidden="true"></i> Transaction Successful !</p>

                                </div>
                                <p><a  style="font-size:14px;font-weight: bold;" ng-href="{{redirectUrl}}" target="_blank">You are now being redirected to GVT.
                                    Please click here if you are not redirected after 3s</a>
                                </p>

                            </div>

                            <div ng-show="info.type === 'danger'">
                                <div ng-if="info.details === null || !info.details">
                                    <div ng-class="'alert alert-danger'" style="font-size:14px;font-weight: bold">
                                        <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                                        <span msg key="info.text"></span>
                                    </div>
                                </div>

                                <div ng-if="info.details != null && info.details">

                                    <div ng-class="'alert alert-danger'" style="font-size:14px;font-weight: bold">
                                        <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                                        Export Failed
                                    </div>

                            <form name="gvtErrorForm" id="gvtErrorForm" novalidate class="form-horizontal">
                                <h3 class="page-header">
                                    <span>Export Errors</span>
                                </h3>
                                <md-tabs md-dynamic-height md-border-bottom>
                                    <md-tab label="Profile Errors">
                                        <md-content class="md-padding">
                                            <div ng-show="errorDetails.profileErrors.length === 0">
                                                No error found.
                                            </div>
                                            <table ng-show="errorDetails.profileErrors.length > 0"
                                                   st-table="tmpProfileErrors" st-safe-src="errorDetails.profileErrors"
                                                   class="table table-striped table-bordered table-condensed table-fix-header">
                                                <thead>
                                                <tr class="tbl-header" style="">
                                                    <th st-ratio="60" st-sort="message">Error</th>
                                                    <th st-sort="line" st-ratio="20">Line #
                                                    </th>
                                                    <th st-sort="line" st-ratio="20">Column #
                                                    </th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr ng-repeat="row in tmpProfileErrors">
                                                    <td ng-bind="row.message" st-ratio="60"></td>
                                                    <td ng-bind="row.line" st-ratio="20"></td>
                                                    <td ng-bind="row.column" st-ratio="20"></td>
                                                </tr>
                                                </tbody>
                                                <tfoot ng-show="errorDetails.profileErrors.length >= 20">
                                                <tr style="">
                                                    <td colspan="3">
                                                        <div st-pagination="" st-items-by-page="20"
                                                             st-displayed-pages="7"></div>
                                                    </td>
                                                </tr>
                                                </tfoot>
                                            </table>
                                        </md-content>
                                    </md-tab>
                                    <md-tab label="Constraints Errors">
                                        <md-content class="md-padding">


                                            <div ng-show="errorDetails.constraintsErrors.length === 0">
                                                No error found.
                                            </div>
                                            <table ng-show="errorDetails.constraintsErrors.length > 0"
                                                   st-table="tmpConstraintErrors"
                                                   st-safe-src="errorDetails.constraintsErrors"
                                                   class="table table-striped table-bordered table-condensed table-fix-header">
                                                <thead>
                                                <tr class="tbl-header" style="">
                                                    <th st-ratio="60" st-sort="message">Error</th>
                                                    <th st-sort="line" st-ratio="20">Line #
                                                    </th>
                                                    <th st-sort="line" st-ratio="20">Column #
                                                    </th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr ng-repeat="row in tmpConstraintErrors">
                                                    <td ng-bind="row.message" st-ratio="60"></td>
                                                    <td ng-bind="row.line" st-ratio="20"></td>
                                                    <td ng-bind="row.column" st-ratio="20"></td>
                                                </tr>
                                                </tbody>
                                                <tfoot ng-show="errorDetails.constraintsErrors.length >= 20">
                                                <tr style="">
                                                    <td colspan="3">
                                                        <div st-pagination="" st-items-by-page="20"
                                                             st-displayed-pages="7"></div>
                                                    </td>
                                                </tr>
                                                </tfoot>
                                            </table>
                                        </md-content>
                                    </md-tab>
                                    <md-tab label="ValueSets Errors">
                                        <md-content class="md-padding">
                                            <div ng-show="errorDetails.vsErrors.length === 0">
                                                No error found.
                                            </div>
                                            <table ng-show="errorDetails.vsErrors.length > 0"
                                                   st-table="tmpValueSetErrors" st-safe-src="errorDetails.vsErrors"
                                                   class="table table-striped table-bordered table-condensed table-fix-header">
                                                <thead>
                                                <tr class="tbl-header" style="">
                                                    <th st-ratio="60" st-sort="message">Error</th>
                                                    <th st-sort="line" st-ratio="20">Line #
                                                    </th>
                                                    <th st-sort="line" st-ratio="20">Column #
                                                    </th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr ng-repeat="row in tmpValueSetErrors">
                                                    <td ng-bind="row.message" st-ratio="60"></td>
                                                    <td ng-bind="row.line" st-ratio="20"></td>
                                                    <td ng-bind="row.column" st-ratio="20"></td>
                                                </tr>
                                                </tbody>
                                                <tfoot ng-show="errorDetails.vsErrors.length >= 20">
                                                <tr style="">
                                                    <td colspan="3">
                                                        <div st-pagination="" st-items-by-page="20"
                                                             st-displayed-pages="7"></div>
                                                    </td>
                                                </tr>
                                                </tfoot>
                                            </table>
                                        </md-content>
                                    </md-tab>
                                </md-tabs>
                            </form>
                                </div>
                            </div>
                        </div>
                    </div>

                </md-dialog-content>
                <md-dialog-actions layout="row">
                    <md-button ng-show="toGVT && (exportStep === 1 || exportStep === 2)"
                               class="btn btn-raised btn-primary btn-sm"
                               ng-disabled="xmlFormat==='' || xmlFormat===null || !selected" ng-click="goBack()">
                        <span><i class="fa fa-arrow-left fa-fw"></i>Back</span></md-button>
                    <md-button ng-show="!toGVT || toGVT === false" class="btn btn-raised btn-primary btn-sm"
                               ng-disabled="xmlFormat==='' || xmlFormat===null || !selected"
                               ng-click="exportAsZIPforSelectedCompositeProfiles()"><span><i
                            class="fa fa-download fa-fw"></i>Export as Zip</span></md-button>
                    <md-button ng-show="toGVT && exportStep === 0" class="btn btn-raised btn-primary btn-sm"
                               ng-disabled="xmlFormat==='' || xmlFormat===null || !selected" ng-click="goNext()"><span><i
                            class="fa fa fa-arrow-right fa-fw"></i>Next</span></md-button>
                    <md-button ng-show="toGVT && exportStep === 1" class="btn btn-raised btn-success btn-sm"
                               ng-show="xmlFormat=== 'Validation'"
                               ng-disabled="xmlFormat==='' || xmlFormat===null || !selected"
                               ng-click="exportAsZIPToGVT()"><span><i
                            class="fa fa-paper-plane fa-fw"></i>Send</span></md-button>
                </md-dialog-actions>
            </div>
         </md-dialog>
    </script>
    <!--<script type="text/ng-template" id="SelectCompositeProfilesForExportCtrl-backup.html">-->
        <!--<div class="page-header">-->
            <!--<h3 class="modal-title">Export XML</h3>-->
        <!--</div>-->
        <!--<div class="modal-body">-->
            <!--<form class="form-horizontal" novalidate>-->
                <!--<div class="row">-->
                    <!--<div class="col-md-12">-->
                        <!--<h4 class="modal-title">Select Export Format</h4>-->
                    <!--</div>-->
                    <!--<div class="col-md-12">-->
                        <!--<div class="btn-group btn-group-sm pull-left" data-toggle="buttons">-->
                            <!--<label class="btn btn-raised btn-primary btn-xs" ng-click="xmlFormat='Validation'"-->
                                   <!--ng-class="{ 'active':xmlFormat==='Validation' }">-->
                                <!--NIST Validation Format-->
                            <!--</label>-->
                            <!--<label class="btn btn-raised btn-primary btn-xs" ng-click="xmlFormat='Display'"-->
                                   <!--ng-class="{ 'active':xmlFormat==='Display' }">-->
                                <!--NIST Display Format-->
                            <!--</label>-->
                            <!--<label class="btn btn-raised btn-primary btn-xs" ng-click="xmlFormat='Gazelle'"-->
                                   <!--ng-class="{ 'active':xmlFormat==='Gazelle' }">-->
                                <!--Gazelle Format-->
                            <!--</label>-->
                        <!--</div>-->
                    <!--</div>-->
                    <!--<div class="col-md-12">-->
                        <!--<h4 class="modal-title">Select Composite Profile(s)</h4>-->
                        <!--<div class="table-responsive">-->
                            <!--<table class="table table-striped table-bordered table-fix-header table-condensed conformance-profiles-table">-->
                                <!--<thead>-->
                                <!--<tr class="tbl-header">-->
                                    <!--<th style="width:30px">&nbsp;</th>-->
                                    <!--<th style="width:225px">Name</th>-->
                                    <!--<th style="width:225px">Extension</th>-->
                                    <!--<th style="width:420px">Description</th>-->
                                <!--</tr>-->
                                <!--</thead>-->
                                <!--<tbody>-->
                                <!--<tr ng-repeat="child in igdocumentToSelect.profile.compositeProfiles.children track by child.id">-->
                                    <!--<td style="width:30px">-->
                                        <!--<input type="checkbox" ng-model="bool"-->
                                               <!--ng-change="trackSelections(bool, child.id)">-->
                                    <!--</td>-->
                                    <!--<td style="width:225px">{{child.name}}</td>-->
                                    <!--<td style="width:225px">{{child.ext}}</td>-->
                                    <!--<td style="width:420px">{{child.description}}</td>-->
                                <!--</tr>-->
                                <!--</tbody>-->
                            <!--</table>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</form>-->
        <!--</div>-->
        <!--<div class="modal-footer">-->
            <!--<div class="row">-->
                <!--<div class="col-md-12">-->
                    <!--<div ng-class="'alert alert-'+ info.type" ng-show="info.show" id="ehrloginalert"-->
                         <!--style="margin-top:5px; text-align:center">-->
                        <!--<div ng-show="info.type === 'info'">-->
                            <!--<button type="button" class="close" ng-click="info.show=false">×</button>-->
                            <!--<i class="fa fa-check" aria-hidden="true"></i>-->
                            <!--&lt;!&ndash;<a msg key-expr="info.text"></span>&ndash;&gt;-->
                            <!--<a ng-href="{{redirectUrl}}" target="_blank">Please click here if you are not redirected-->
                                <!--after 3s</a>-->
                        <!--</div>-->
                        <!--<div ng-show="info.type === 'danger'">-->
                            <!--<button type="button" class="close" ng-click="info.show=false">×</button>-->
                            <!--<i class="fa fa-exclamation-triangle" aria-hidden="true"></i>-->
                            <!--<a class="point" ng-click="viewErrors(info.details)">-->
                                <!--<span msg key-expr="info.text"></span> Please click here for errors details-->
                            <!--</a>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
                <!--<div class="col-md-12">-->
                    <!--<button class="btn btn-raised btn-primary btn-sm"-->
                            <!--ng-disabled="xmlFormat==='' || xmlFormat===null || selectedCompositeProfileIDs===null || selectedCompositeProfileIDs.length===0"-->
                            <!--ng-click="exportAsZIPforSelectedCompositeProfiles()"><span><i-->
                            <!--class="fa fa-download fa-fw"></i>Download as Zip</span></button>-->
                    <!--<button class="btn btn-raised btn-success btn-sm" ng-show="xmlFormat=== 'Validation'"-->
                            <!--ng-disabled="xmlFormat==='' || xmlFormat===null || selectedCompositeProfileIDs===null || selectedCompositeProfileIDs.length===0"-->
                            <!--ng-click="exportAsZIPToGVT()"><span><i-->
                            <!--class="fa fa-download fa-fw"></i>Export to GVT</span></button>-->
                    <!--<button class="btn btn-raised btn-warning btn-sm" ng-disabled="loading" ng-click="cancel()">-->
                        <!--<span><i class="fa fa-times fa-fw">&nbsp; </i>Close</span></button>-->
                    <!--<div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">-->
                        <!--<div layout="row" layout-sm="column" layout-align="space-around">-->
                            <!--<md-progress-circular class="md-hue-2" md-diameter="40px"></md-progress-circular>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
        <!--</div>-->
    <!--</script>-->

    <script type="text/ng-template" id="AddHL7TableOpenCtrl.html">
        <div class="modal-header modal-wide">
            <div class="form-inline">
                <span class="header4">Add HL7 Tables</span>
            </div>
        </div>
        <div class="modal-body">
            <form class="form-horizontal" novalidate>
                <div class="row">
                    <div class="col-md-12">
                        <div class="btn-group btn-group-sm pull-left" data-toggle="buttons">
                            <label class="btn btn-raised btn-info btn-xs"
                                   ng-click="selectedHL7Version=vr; loadTablesByVersion(vr)"
                                   ng-class="{ 'active':vr===selectedHL7Version}" ng-repeat="vr in hl7Versions">
                                <input type="radio" ng-value="vr"
                                       ng-model="$parent.selectedHL7Version">{{vr}}</input>
                            </label>
                        </div>
                    </div>
                    <div class="col-md-6" ng-show="selectedHL7Version !==''">
                        <div ng-show="loading" style="text-align:center">
                            <i class="fa fa-spinner fa-pulse fa-2x"></i>
                        </div>
                        <div ng-show="!loading" class="igl-table">
                            <h5>Tables for {{source}} {{selectedHL7Version}}</h5>
                            <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                                <thead>
                                <tr class="tbl-header">
                                    <th>Binding Identifier</th>
                                    <th>Name</th>
                                    <th/>
                                </tr>
                                <tr>
                                    <th>
                                        <input ng-model="search.bindingIdentifier" class="form-control"
                                               placeholder="by id">
                                    </th>
                                    <th>
                                        <input ng-model="search.name" class="form-control" placeholder="by name">
                                    </th>
                                    <th/>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="table in hl7Tables | orderBy: 'bindingIdentifier' | filter:search:strict">
                                    <td>{{table.bindingIdentifier}}</td>
                                    <td>{{table.name}}</td>
                                    <td><a class="pointer" ng-click="addTable(table)"><i
                                            class="fa fa-plus fa-fw"></i></a>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-md-6" ng-show="selectedTables.length> 0">
                        <div class="igl-table">
                            <h5>Selected tables</h5>
                            <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                                <thead>
                                <tr>
                                    <th>Binding Identifier</th>
                                    <th>Name</th>
                                    <th>HL7 Version</th>
                                    <th/>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="table in selectedTables">
                                    <td>{{table.bindingIdentifier}}</td>
                                    <td>{{table.name}}</td>
                                    <td>{{table.hl7Version}}</td>
                                    <td><a class="pointer" ng-click="deleteTable(table)"><i
                                            class="fa fa-times fa-fw"></i></a></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn btn-raised btn-primary btn-sm" ng-show="selectedTables.length > 0" ng-disabled="loading"
                    ng-click="save()"><span><i
                    class="fa fa-plus fa-fw">&nbsp; </i>Save</span></button>
            <button class="btn btn-raised btn-warning btn-sm" ng-show="selectedTables.length > 0" ng-disabled="loading"
                    ng-click="cancel()"><span><i
                    class="fa fa-times fa-fw">&nbsp; </i>Close</span></button>
            <button class="btn btn-raised btn-warning btn-sm" ng-show="selectedTables.length === 0"
                    ng-disabled="loading" ng-click="cancel()"><span><i
                    class="fa fa-times fa-fw">&nbsp; </i>Close</span></button>
        </div>
    </script>

    <script type="text/ng-template" id="AddPHINVADSTableOpenCtrl.html">
        <div class="modal-header modal-wide">
            <div class="form-inline">
                <span class="header4">Add PHINVADs Tables</span>
            </div>
        </div>
        <div class="modal-body">
            <div ng-show="loading" style="text-align:center">
                <i class="fa fa-spinner fa-pulse fa-2x"></i>
            </div>

            <div class="col-md-6">
                <div class="igl-table">
                    <h5>Preloaded PHINVADs Tables</h5>
                    <table st-safe-src="preloadedPhinvadsTables" st-table="displayCollection"
                           class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                        <thead>
                        <tr>
                            <th colspan="3">
                                <input st-search placeholder="Search" class="input-sm form-control" type="search"/>
                            </th>
                        </tr>
                        <tr>
                            <th st-sort="bindingIdentifier">Binding Identifier</th>
                            <th>Name</th>
                            <th/>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="table in displayCollection">
                            <td>{{::table.bindingIdentifier}}</td>
                            <td>{{::table.name}}</td>
                            <td>
                                <a ng-if="!isAlreadyIn(table) && !isAlreadySelected(table)" class="pointer"
                                   ng-click="addTable(table)"><i class="fa fa-plus fa-fw"></i></a>
                                <span ng-if="isAlreadyIn(table)">Added</span>
                                <span ng-if="isAlreadySelected(table)">Selected</span>
                            </td>
                        </tr>
                        </tbody>
                        <tr style="float:center !important;">
                            <td colspan="6" class="text-center" style="float:center !important;">
                                <div st-pagination="" st-items-by-page="10" st-displayed-pages="7"
                                     style="float:center !important;"></div>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="col-md-6">
                <div class="igl-table">
                    <h5>Selected tables</h5>
                    <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                        <thead>
                        <tr>
                            <th>Binding Identifier</th>
                            <th>Name</th>
                            <th/>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="table in selectedTables">
                            <td>{{::table.bindingIdentifier}}</td>
                            <td>{{::table.name}}</td>
                            <td><a class="pointer" ng-click="deleteTable(table)"><i class="fa fa-times fa-fw"></i></a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-raised btn-primary btn-sm" ng-show="selectedTables.length > 0" ng-disabled="loading"
                    ng-click="save()"><span><i
                    class="fa fa-plus fa-fw">&nbsp; </i>Save</span></button>
            <button class="btn btn-raised btn-warning btn-sm" ng-show="selectedTables.length > 0" ng-disabled="loading"
                    ng-click="cancel()"><span><i
                    class="fa fa-times fa-fw">&nbsp; </i>Close</span></button>
            <button class="btn btn-raised btn-warning btn-sm" ng-show="selectedTables.length === 0"
                    ng-disabled="loading" ng-click="cancel()"><span><i
                    class="fa fa-times fa-fw">&nbsp; </i>Close</span></button>
        </div>
    </script>
</div>
<script type="text/ng-template" id="AddDatatypeDlg.html">


    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Add Data Type</h3>
        </div>
        <form name="addDT">
            <div class="modal-body">
                <div class="container" style="margin-bottom: 20px;margin-top: 10px">
                    <div class="row" style="padding-top:10px">
                        <tabset>
                            <tab>
                                <tab-heading>HL7 Datatypes</tab-heading>


                                <div class="col-md-6">
                                    <div class="btn-group btn-group-sm" data-toggle="buttons">
                                        <label class="btn btn-raised btn-info btn-xs" ng-click="setVersion(vr)"
                                               ng-class="{ 'active':vr===version1}" ng-repeat="vr in versions">
                                            <input type="radio" ng-value="vr" ng-model="version1">{{vr}}</input>
                                        </label>
                                    </div>
                                    <div ng-show="loading" style="text-align:center">
                                        <i class="fa fa-spinner fa-pulse fa-2x"></i>
                                    </div>


                                    <div class="igl-table">

                                        <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                                            <input ng-model="search.name" class="form-control" placeholder="by name">
                                            <thead>
                                            <tr>

                                                <th>Name</th>
                                                <th>As is</th>
                                                <th>As Flavor</th>

                                            </tr>

                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="datatype in hl7Datatypes | orderBy: 'name' | filter:search:strict">

                                                <td>{{datatype.name}}</td>
                                                <td><a class="pointer" ng-show="!checkExist(datatype)"
                                                       ng-click="addDt(datatype)"><i class="fa fa-plus fa-fw"></i></a>

                                                    <p ng-show="checkExist(datatype)">Selected</p>
                                                </td>
                                                <td><a class="pointer" ng-click="addDtFlv(datatype)"><i
                                                        class="fa fa-plus fa-fw"></i></a>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </tab>
                            <tab>
                                <tab-heading>Master Datatypes</tab-heading>

                                <div class="col-md-6">
                                    <div ng-show="loading" style="text-align:center">
                                        <i class="fa fa-spinner fa-pulse fa-2x"></i>
                                    </div>
                                    <select ng-model="masLib" class="form-control" ng-change="selectMasterDtLib(masLib)"
                                            ng-options="masLib.metaData.name for masLib in masterLib track by masLib.id">
                                        <option value="" disabled selected>Choose a Master Library</option>
                                    </select>

                                    <div ng-show="masLib" class="igl-table">

                                        <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                                            <input ng-model="search.name" class="form-control" placeholder="by name">
                                            <thead>
                                            <tr class="tbl-header">

                                                <th>Name</th>
                                                <th>Version</th>
                                                <th>As is</th>
                                                <th>As Flavor</th>

                                            </tr>

                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="datatype in masterDatatypes | orderBy: 'name' | filter:search:strict">

                                                <td>{{datatype.label}}</td>
                                                <td>{{datatype.hl7Version}}</td>
                                                <td><a class="pointer" ng-show="!checkExist(datatype)"
                                                       ng-click="addDt(datatype)"><i class="fa fa-plus fa-fw"></i></a>

                                                    <p ng-show="checkExist(datatype)">Selected</p>
                                                </td>
                                                <td><a class="pointer" ng-click="addDtFlv(datatype)"><i
                                                        class="fa fa-plus fa-fw"></i></a>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </tab>
                            <tab>
                                <tab-heading>User Datatypes</tab-heading>
                                <div class="col-md-6">
                                    <div ng-show="loading" style="text-align:center">
                                        <i class="fa fa-spinner fa-pulse fa-2x"></i>
                                    </div>
                                    <select ng-model="usrLib" class="form-control" ng-change="selectUserDtLib(usrLib)"
                                            ng-options="usrLib.metaData.name for usrLib in userDtLib track by usrLib.id">
                                        <option value="" disabled selected>Choose a User Library</option>
                                        <!--<option ng-repeat="usrLib in userDtLib" value='{{usrLib}}'> {{usrLib.metaData.name}}</option>-->
                                    </select>

                                    <div ng-show="usrLib" class="igl-table">

                                        <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                                            <input ng-model="search.name" class="form-control" placeholder="by name">
                                            <thead>
                                            <tr class="tbl-header">

                                                <th>Name</th>
                                                <th>Version</th>
                                                <!--<th>As is</th>-->
                                                <th>As Flavor</th>

                                            </tr>

                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="datatype in userDatatypes | orderBy: 'name' | filter:search:strict">

                                                <td>{{datatype.label}}</td>
                                                <td>{{datatype.hl7Version}}
                                                    <!--<td><a class="pointer" ng-show="!checkExist(datatype)" ng-click="addDt(datatype)"><i class="fa fa-plus fa-fw"></i></a>
                                                            <p ng-show="checkExist(datatype)">Selected</p>
                                                        </td>-->
                                                <td><a class="pointer" ng-click="addDtFlv(datatype)"><i
                                                        class="fa fa-plus fa-fw"></i></a>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </tab>
                        </tabset>


                        <div class="col-md-6" ng-show="selectedDatatypes.length> 0">
                            <div class="igl-table">
                                <h5>Selected Data Types</h5>
                                <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                                    <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Ext</th>
                                        <th>Version</th>

                                        <th/>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="dt in selectedDatatypes">
                                        <td>{{dt.name}}</td>
                                        <td><span ng-show="!edit">{{dt.ext}}</span>
                                            <a class="pointer"
                                               ng-show="!edit && dt.ext!==null && dt.ext!==''&& dt.scope!=='MASTER'"
                                               ng-click="edit=true;checkExt(dt)"><i class="fa fa-pencil fa-fw"></i></a>
                                            <input ng-show="edit" ng-change="checkExt(dt)" ng-model="dt.ext"/>
                                            <a class="pointer" ng-show="edit && checkedExt && NocheckedExt"
                                               ng-click="edit=false"><i class="fa fa-check-circle"></i></a>
                                            <span ng-if="edit && !checkedExt" class="danger">This extension already exists</span>
                                            <span ng-if="edit && !NocheckedExt" class="danger">A flavor must have an extension</span>
                                        </td>
                                        <td>{{dt.hl7Version}}</td>

                                        <td><a class="pointer" ng-click="deleteDt(dt)"><i
                                                class="fa fa-times fa-fw"></i></a></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
    </div>


    </div>


    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default" type="button" ng-click="cancel()"><i class="fa fa-times fa-fw"></i>Cancel
        </button>
        <button class="btn btn-raised btn-primary" type="button" ng-click="ok()"
                ng-disabled="!checkedExt||!NocheckedExt||selectedDatatypes.length===0"><i class="fa fa-check fa-fw"></i>Add
        </button>
    </div>
    </form>
    </div>
</script>
<script type="text/ng-template" id="AddSegmentDlg.html">
    <div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add Segment</h3>
            </div>

            <!--<form name="addSeg" id="addSeg">-->
            <!--<div class="modal-body">

                    <div class="container" style="margin-bottom: 20px;margin-top: 20px">
                        <div class="row flavor-seach-box">


                            <div class="input-group" style="padding-bottom:5px;"  align="center" data-toggle="buttons">
                                <span class="input-group-addon" id="version-basic-addon1">HL7 Versions</span>
                                <select ng-model="version1" class="form-control col-md-3" ng-change="setVersion(version1)">
                                        <option ng-repeat="vr in versions" value='{{vr}}'> {{vr}}</option>
                                    </select>
                            </div>
                            <div class="input-group">
                                <span class="input-group-addon" id="segment-basic-addon1"><i class="fa fa-search"></i> Search</span>
                                <input type="text" class="form-control input-lg" ng-model="newSegment" data-limit="15" data-animation="am-flip-x" data-auto-select="true" typeahead="segment as segment.name for segment in hl7Segments|filter:{name:$viewValue}| limitTo:5" placeholder="Search By Name">
                            </div>
                        </div>
                    </div>
                </div>-->
            <form class="form-horizontal" novalidate>
                <div class="modal-body">


                    <div class="row">
                        <div class="col-md-12">
                            <div class="btn-group btn-group-sm pull-left" data-toggle="buttons">
                                <label class="btn btn-raised btn-info btn-xs" ng-click="setVersion(vr)"
                                       ng-class="{ 'active':vr===version1}" ng-repeat="vr in versions">
                                    <input type="radio" ng-value="vr" ng-model="version1">{{vr}}</input>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-6" ng-show="version1 !==''">
                            <div ng-show="loading" style="text-align:center">
                                <i class="fa fa-spinner fa-pulse fa-2x"></i>
                            </div>
                            <div ng-show="!loading" class="igl-table">
                                <h5>Segments for {{version1}}</h5>
                                <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                                    <input ng-model="search.name" class="form-control" placeholder="by name">
                                    <thead>
                                    <tr>

                                        <th>Name</th>
                                        <th>As is</th>
                                        <th>As Flavor</th>

                                    </tr>

                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="segment in hl7Segments | orderBy: 'name' | filter:search:strict">

                                        <td>{{segment.name}}</td>
                                        <td><a class="pointer" ng-show="!checkExist(segment)"
                                               ng-click="addseg(segment)"><i class="fa fa-plus fa-fw"></i></a>

                                            <p ng-show="checkExist(segment)">Selected</p>
                                        </td>
                                        <td><a class="pointer" ng-click="addsegFlv(segment)"><i
                                                class="fa fa-plus fa-fw"></i></a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="col-md-6" ng-show="selectedSegments.length> 0">
                            <div class="igl-table">
                                <h5>Selected Segments</h5>
                                <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                                    <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Ext</th>
                                        <th>HL7 Version</th>
                                        <th/>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="seg in selectedSegments">
                                        <td>{{seg.name}}</td>
                                        <td><span ng-show="!edit">{{seg.ext}}</span>
                                            <a class="pointer" ng-show="!edit && seg.ext!==null"
                                               ng-click="edit=true;checkExt(seg)"><i class="fa fa-pencil fa-fw"></i></a>
                                            <input ng-show="edit" ng-change="checkExt(seg)" ng-model="seg.ext"/>
                                            <a class="pointer" ng-show="edit && checkedExt && NocheckedExt"
                                               ng-click="edit=false"><i class="fa fa-check-circle"></i></a>
                                            <span ng-if="edit && !checkedExt" class="danger">This extension already exists</span>
                                            <span ng-if="edit && !NocheckedExt" class="danger">A flavor must have an extension</span>
                                        </td>
                                        <td>{{seg.hl7Version}}</td>
                                        <td><a class="pointer" ng-click="deleteSeg(seg)"><i
                                                class="fa fa-times fa-fw"></i></a></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button class="btn btn-raised btn-default" type="button" ng-click="cancel()"><i
                            class="fa fa-times fa-fw"></i>
                        Cancel
                    </button>
                    <button class="btn btn-raised btn-primary" type="button" ng-click="ok()"
                            ng-disabled="!checkedExt||!NocheckedExt||selectedSegments.length===0"><i
                            class="fa fa-check"></i>Add
                    </button>
                </div>
            </form>
            <!--</form>-->
        </div>
    </div>
</script>

<script type="text/ng-template" id="ShareIGDocumentModal.html">
    <md-dialog aria-label="Share IG Document">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Share IG Document </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content medium-dialog">
                    <div class="container" style="margin-bottom: 20px;margin-top: 20px">
                        <div layout="row"  layout-align="center center"  style="min-height: 26px">
                            <div flex="80">
                                <md-input-container layout="row">
                                    <label>Share URL</label>
                                    <input flex="100" ng-model="shareURL" readonly="readonly" type="text" aria-label="Share URL" style="width:100%">
                                </md-input-container>
                            </div>
                            <div flex="20">
                                <md-button class="md-raised" ng-click="copyUrlToClipboard()" ng-show="clipboardSupported">Copy to clipboard</md-button>
                            </div>
                        </div>
                        <div layout="row" ng-show="shareUrlCopiedToClipboard">
                            <p>Share URL successfully copied to clipboard.</p>
                        </div>
                        <div class="row" ng-if="error != null">
                            <div class="col-md-12">
                                <span ng-bind="error" style="color: red;"></span>
                            </div>
                        </div>

                        <div class="row" >
                            <div class="md-padding autocomplete">
                                <div layout="row">
                                <span class="material-icons" flex="10" style="font-size: 39px;
    margin-top: 15px;">search</span>
                                <md-contact-chips  flex="90" style="width: 100%"
                                                  ng-model="tags"
                                                  md-contacts="loadUsernames($query)"
                                                  md-contact-name="fullname"
                                                  md-require-match="true"
                                                  md-contact-email="email"
                                                  md-contact-image="image"
                                                  md-require-match="true"
                                                  md-highlight-flags="i"
                                                  placeholder="Search by username">
                                </md-contact-chips>
                                </div>

                                <md-list class="fixedRows" ng-if="igdocumentSelected.realUsers">
                                    <!--<md-subheader class="md-no-sticky">List of Participants</md-subheader>-->
                                    <h5>List of Participants</h5>
                                    <hr />
                                    <md-list-item class="md-2-line contact-item" ng-repeat="contact in igdocumentSelected.realUsers">
                                        <img ng-src="{{generateHash(contact.email)}}" class="md-avatar" alt="{{contact.fullname}}" />
                                        <div class="md-list-item-text compact">
                                            <h3>{{contact.fullname}}     <span  title="unshare" class="pull-right" type="button" style="margin-top: 0;" ng-click="unshare(contact)"><i class="fa fa-times"></i>
                                            </span> </h3>

                                            <p>{{contact.email}}</p>
                                        </div>
                                    </md-list-item>
                                </md-list>

                            </div>

                            <!--<div class="table-responsive">-->
                                <!--<table class="table">-->
                                    <!--<tbody>-->
                                    <!--<tr ng-repeat="participant in igdocumentSelected.shareParticipants">-->
                                        <!--<td><i>{{participant.fullname}} ({{participant.username}})</i></td>-->
                                        <!--<td>-->
                                            <!--<md-button disabled="loading" class="btn btn-raised btn-danger btn-xs"-->
                                                       <!--type="button" style="margin-top: 0;"-->
                                                       <!--ng-click="unshare(participant)"-->
                                                       <!--ng-if="!participant.pendingApproval"><i class="fa fa-times"></i>-->
                                                <!--Remove-->
                                            <!--</md-button>-->
                                            <!--<button disabled class="btn btn-raised btn-warning btn-xs"-->
                                                    <!--type="button" style="margin-top: 0;"-->
                                                    <!--ng-if="participant.pendingApproval">Pending Request-->
                                            <!--</button>-->
                                            <!--<md-button ng-disabled="loading" class="btn btn-raised btn-danger btn-xs"-->
                                                       <!--type="button" style="margin-top: 0;"-->
                                                       <!--ng-click="unshare(participant)"-->
                                                       <!--ng-if="participant.pendingApproval"><i class="fa fa-times"></i>-->
                                                <!--Cancel-->
                                            <!--</md-button>-->
                                        <!--</td>-->
                                        <!--<td>-->
                                            <!--{{participant.permission}}-->
                                        <!--</td>-->
                                    <!--</tr>-->
                                    <!--</tbody>-->
                                <!--</table>-->
                            <!--</div>-->
                        </div>
                        <div layout="row" layout-align="start start">


                                <!--<tags-input ng-model="tags" key-property="id" display-property="username"-->
                                            <!--placeholder="Find user" replace-spaces-with-dashes="false"-->
                                            <!--add-from-autocomplete-only="true">-->
                                    <!--<auto-complete source="loadUsernames($query)" min-length="0" load-on-focus="true"-->
                                                   <!--load-on-empty="true" max-results-to-show="32"-->
                                                   <!--template="autocomplete-template"></auto-complete>-->
                                <!--</tags-input>-->
                            <!--<div flex="20">-->
                                <!--<ui-select ng-model="selectedItem.selected" theme="bootstrap" ng-disabled="true">-->
                                    <!--<ui-select-match>{{$select.selected}}</ui-select-match>-->
                                    <!--<ui-select-choices repeat="item in itemArray | filter: $select.search">-->
                                        <!--<div ng-bind-html="item | highlight: $select.search"></div>-->
                                    <!--</ui-select-choices>-->
                                <!--</ui-select>-->
                            <!--</div>-->
                        </div>
                    </div>
                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">

                <md-button class="btn btn-raised btn-primary" type="button" ng-click="ok()"
                           ng-disabled="tags.length === 0"><i class="fa fa-check"></i>Share
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="autocomplete-template">
    <div class="autocomplete-template">
        <div class="share_left-panel">
            <i class="fa fa-user" aria-hidden="true"></i>
        </div>
    </div>
    <div class="share_right-panel">
        <span ng-bind-html="$highlight($getDisplayText())"></span>
        <span>({{data.fullname}})</span>
    </div>
</script>


<script type="text/ng-template" id="addMorePcsToCompositeProfile.html">
    <div class="modal-header">
        <h3 class="modal-title">Add Profile Components to {{compositeProfileStructure.name}}</h3>
    </div>
    <form role="form">
        <div class="modal-body" style="height:500px;overflow-y:scroll">
            <div layout="row">
                <div flex="30">

                    <div class=" panel panel-default" style="margin-top:10px;">
                        <div class="panel-heading">Choose Profile Components
                            <!--<span title="If two profile components are in conflict, priority is for the profile component with higher position">(?)</span>-->
                            <md-icon>
                                <i class="material-icons">info_outline</i>
                                <md-tooltip style="z-index: 99999999;">
                                    If two profile components are in conflict, priority is for the profile component
                                    with higher position
                                </md-tooltip>
                            </md-icon>
                        </div>
                        <div class="panel-body">
                            <table class="table table-condensed hl7-versions-valueset table-fixed">
                                <tbody>
                                <tr ng-repeat="pc in pcs" class="col-md-12">
                                    <td class="col-md-10">
                                        <div>
                                            <h5 style="margin:0px;">{{pc.name}}</h5>
                                            <p style="max-width:250px;margin:0px;">{{pc.description}}</p>
                                            <p style="max-width:250px;margin:0px;"> {{pc.comment}}</p>
                                        </div>
                                    </td>
                                    <td class="col-md-2">
                                        <button ng-show="!checkExist(pc)" type="button"
                                                class="btn btn-raised btn-raised btn-xs btn-info"
                                                ng-click="selectPC(pc)">
                                            <span><i class="fa fa-plus fa-fw"></i></span>
                                        </button>

                                    </td>
                                </tr>

                                </tr>
                                </tbody>
                            </table>

                        </div>
                    </div>


                </div>
                <div flex="70">
                    <div>
                        <div class=" panel panel-default" style="margin-top:10px;">
                            <div class="panel-heading">Composite Profile</div>
                            <div class="panel-body" style="overflow-y: auto;height: 250px;">
                                <div class="row margin-0 full-width hidden-xs">
                                    <div class="yy-timeline-box" ng-class-odd="'right'" ng-class-even="'right'">
                                        <div class="yy-timeline-box-inner">
                                            <div class="yy-timeline-image-container">
                                                <img src="images/square.jpg" alt="" style="margin-top:-55px;"/>
                                            </div>
                                            <div class="yy-timeline-content"
                                                 style="margin-top:-40px;background-color:#d3d7da;width:30%;">
                                                <div align="center">
                                                    <h5>Core Profile </h5>
                                                </div>
                                                <div>

                                                    <table>
                                                        <tr>
                                                            <td>Name :</td>
                                                            <td>{{coreMessageMetaData.name}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Description :</td>
                                                            <td>{{coreMessageMetaData.description}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Identifier :</td>
                                                            <td>{{coreMessageMetaData.identifier}}</td>
                                                        </tr>

                                                    </table>
                                                </div>


                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row margin-0 full-width hidden-xs" ng-repeat="existingPc in existingPcList">
                                    <div class="yy-timeline-box" ng-class-odd="'right'" ng-class-even="'right'">
                                        <div class="yy-timeline-box-inner">
                                            <span class="yy-timeline-date"> {{$index+1}} </span>
                                            <div class="yy-timeline-image-container">
                                                <img src="images/circle.gif" alt=""/>
                                            </div>
                                            <div class="yy-timeline-content"
                                                 style="background-color :#43b17e;width:30%;">
                                                <div class="row" align="center">
                                                    <strong>{{existingPc.name}} </strong> <span
                                                        ng-if="existingPc.description"> : {{existingPc.description}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row margin-0 full-width hidden-xs" ng-repeat="pc in pcList">
                                    <div class="yy-timeline-box" ng-class-odd="'right'" ng-class-even="'right'">
                                        <div class="yy-timeline-box-inner">
                                            <span class="yy-timeline-date"> {{pc.position}} </span>
                                            <div class="yy-timeline-image-container">
                                                <img src="images/circle.gif" alt=""/>
                                            </div>
                                            <div class="yy-timeline-content"
                                                 style="background-color :#43b17e;width:30%;">

                                                <div class="row" align="center">
                                                    <strong>{{pc.name}} </strong> <span ng-if="pc.description"> : {{pc.description}}</span>
                                                </div>


                                                <div class="row" align="center">
                                                    <button style="margin-bottom:10px;"
                                                            class="btn btn-raised btn-danger btn-xs"
                                                            ng-click="removePc(pc)"><span><i class="fa fa-times fa-fw">
                                                        &nbsp; </i></span>
                                                    </button>
                                                </div>


                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">


            <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">
                        &nbsp; </i>Cancel</span>
            </button>
            <button class="btn btn-raised btn-info btn-sm" ng-disabled="pcList.length<1" ng-click="update()">
                <span><i class="fa fa-check fa-fw">&nbsp; </i>Add</span>
            </button>

        </div>
    </form>
</script>


<script type="text/ng-template" id="createProfileComponent.html">

    <md-dialog aria-label="create profile component" style="width: 50%">
        <form ng-cloak role="form" name="creatingForm" id="creatingForm">
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Create Profile Component </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">

                    <div style="margin-top: 20px" ng-cloak class="md-inline-form" layout="column">
                        <md-content layout-padding>


                            <md-input-container class="md-block" flex-gt-sm>
                                <label class="input-left">Name</label>
                                <input type="text" name="name" ng-model="name" required>

                            </md-input-container>
                            <!--<md-input-container class="md-block" flex-gt-sm>-->
                                <!--<label class="input-left">Description</label>-->
                                <!--<input type="text" name="description" ng-model="description">-->
                            <!--</md-input-container>-->
                        </md-content>

                    </div>
                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">
                <md-button class="md-primary md-raised" md-autofocus ng-click="create()"
                           ng-disabled="creatingForm.$invalid">
                    Create
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>


<script type="text/ng-template" id="createCompositeProfile.html">

    <md-dialog aria-label="create profile component" style="width: 50%">
        <form ng-cloak role="form" name="newForm">
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Create Composite Profile </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content" style="height:500px;overflow-y:scroll;">
                    <md-tabs md-dynamic-height md-border-bottom md-selected="tabStatus.active">
                        <md-tab ng-disabled="true">
                            <md-tab-label>
                                <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>MetaData
                            </md-tab-label>
                            <md-tab-body>

                                <div style="margin-top: 20px" ng-cloak class="md-inline-form" layout="column">

                                    <md-content layout-padding>

                                        <label class="input-left igamt-label">Name*</label>

                                        <md-input-container class="md-block igamt-input-block" flex-gt-sm>
                                            <input type="text" name="name" ng-model="name" required>
                                            <div ng-messages="newForm.name.$error">
                                                <div ng-message="required">Name is required.</div>
                                            </div>

                                        </md-input-container>
                                        <label class="input-left igamt-label">Extension*</label>

                                        <md-input-container class="md-block igamt-input-block" flex-gt-sm>
                                            <input type="text" name="ext" ng-model="ext" required ng-checkcompext
                                                   property="new">

                                            <div ng-messages="newForm.ext.$error">
                                                <div ng-message="required">Extension is required.</div>
                                                <div ng-message="checkcompext">Extension already exists.</div>
                                                <!--<div class="has-error" ng-show="compExist">Extension already exists.</div>-->

                                            </div>
                                        </md-input-container>
                                    </md-content>


                                </div>


                            </md-tab-body>
                        </md-tab>
                        <md-tab ng-disabled="true">
                            <md-tab-label>
                                <i class="fa fa-code-fork fa-fw" aria-hidden="true"></i>Structure
                            </md-tab-label>
                            <md-tab-body>
                                <div layout="row">
                                    <div flex="30">

                                        <div class=" panel panel-default" style="margin-top:10px;">
                                            <div class="panel-heading">Choose Core Profile</div>
                                            <div class="panel-body">
                                                <table class="table table-condensed hl7-versions-valueset table-fixed">
                                                    <tbody>
                                                    <tr ng-repeat="baseProfile in baseProfiles" class="col-md-12">
                                                        <td class="col-md-10">
                                                            <div>
                                                                <h5 style="margin:0px;">{{baseProfile.name}}</h5>
                                                                <p style="max-width:250px;margin:0px;">
                                                                    {{baseProfile.identifier}} :
                                                                    {{baseProfile.description}}</p>

                                                            </div>
                                                        </td>
                                                        <td class="col-md-2">
                                                            <button ng-show="baseProfile.id!==baseP.id" type="button"
                                                                    class="btn btn-raised btn-raised btn-xs btn-info"
                                                                    ng-click="selectBaseProfile(baseProfile)">
                                                                <span><i class="fa fa-plus fa-fw"></i></span>
                                                            </button>

                                                        </td>
                                                    </tr>

                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>


                                        <div class=" panel panel-default" style="margin-top:10px;">
                                            <div class="panel-heading">Choose Profile Components
                                                <!--<span title="If two profile components are in conflict, priority is for the profile component with higher position">
                                                        <md-icon>
                                                            <i class="material-icons">info_outline</i>
                                                        </md-icon>
                                                    </span>-->
                                                <md-icon>
                                                    <i class="material-icons">info_outline</i>
                                                    <md-tooltip style="z-index: 99999999;">
                                                        If two profile components are in conflict, priority is for the
                                                        profile component with higher position
                                                    </md-tooltip>
                                                </md-icon>


                                            </div>
                                            <div class="panel-body">
                                                <table class="table table-condensed hl7-versions-valueset table-fixed">
                                                    <tbody>
                                                    <tr ng-repeat="pc in pcs" class="col-md-12">
                                                        <td class="col-md-10">
                                                            <div>
                                                                <h5 style="margin:0px;">{{pc.name}}</h5>
                                                                <p style="max-width:250px;margin:0px;">
                                                                    {{pc.description}}</p>
                                                                <p style="max-width:250px;margin:0px;">
                                                                    {{pc.comment}}</p>
                                                            </div>
                                                        </td>
                                                        <td class="col-md-2">
                                                            <button ng-show="!checkExist(pc)" type="button"
                                                                    class="btn btn-raised btn-raised btn-xs btn-info"
                                                                    ng-click="selectPC(pc)">
                                                                <span><i class="fa fa-plus fa-fw"></i></span>
                                                            </button>

                                                        </td>
                                                    </tr>

                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>

                                        </div>


                                    </div>
                                    <div flex="70" style="padding-left:10px">

                                        <div class=" panel panel-default" style="margin-top:10px;">
                                            <div class="panel-heading">Composite Profile</div>
                                            <div class="panel-body" style="overflow-y: auto;height: 345px;">
                                                <div class="row margin-0 full-width hidden-xs" ng-show="baseP">
                                                    <div class="yy-timeline-box" ng-class-odd="'right'"
                                                         ng-class-even="'right'">
                                                        <div class="yy-timeline-box-inner">
                                                            <div class="yy-timeline-image-container">
                                                                <img src="images/square.jpg" alt=""
                                                                     style="margin-top:-55px;"/>
                                                            </div>
                                                            <div class="yy-timeline-content"
                                                                 style="margin-top:-40px;background-color:#d3d7da;width:30%;">
                                                                <div align="center">
                                                                    <h5>Core Profile </h5>
                                                                </div>
                                                                <div>
                                                                    <table>
                                                                        <tr>
                                                                            <td>Name :</td>
                                                                            <td>{{baseP.name}}</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>Description :</td>
                                                                            <td>{{baseP.description}}</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>Identifier :</td>
                                                                            <td>{{baseP.identifier}}</td>
                                                                        </tr>

                                                                    </table>
                                                                </div>


                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row margin-0 full-width hidden-xs" ng-repeat="pc in pcList">
                                                    <div class="yy-timeline-box" ng-class-odd="'right'"
                                                         ng-class-even="'right'">
                                                        <div class="yy-timeline-box-inner">
                                                            <span class="yy-timeline-date"> {{pc.position}} </span>
                                                            <div class="yy-timeline-image-container">
                                                                <img src="images/circle.gif" alt=""/>
                                                            </div>
                                                            <div class="yy-timeline-content"
                                                                 style="background-color :#43b17e;width:30%;">
                                                                <div class="row" align="center">
                                                                    <strong>{{pc.name}} </strong> <span
                                                                        ng-if="pcInfo.pc.description"> : {{pc.description}}</span>
                                                                </div>


                                                                <div class="row" align="center">
                                                                    <button style="margin-bottom:5px;"
                                                                            class="btn btn-raised btn-danger btn-xs"
                                                                            ng-click="removePc(pc)"><span><i
                                                                            class="fa fa-times fa-fw">
                                                        &nbsp; </i></span>
                                                                    </button>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                </div>

                            </md-tab-body>
                        </md-tab>
                    </md-tabs>


                </div>

            </md-dialog-content>
            <md-dialog-actions layout="row" layout-align="end end">
                <md-button ng-show="compositeMetaData" class="btn btn-raised btn-primary btn-sm"
                           ng-click="compositeMetaData=!compositeMetaData;next()"><span>Next</span>
                </md-button>
                <md-button ng-show="!compositeMetaData" class="btn btn-raised btn-primary btn-sm"
                           ng-click="compositeMetaData=!compositeMetaData;back()"><span>Back</span>
                </md-button>

                <!--<md-button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">-->
                <!--&nbsp; </i>Cancel</span>-->
                <!--</md-button>-->
                <md-button class="btn btn-raised btn-info btn-sm"
                           ng-disabled="pcList.length<1 || !baseP || newForm.$invalid ||!newForm.$dirty"
                           ng-click="create()">
                    <span><i class="fa fa-check fa-fw">&nbsp; </i>Create</span>
                </md-button>

            </md-dialog-actions>

        </form>
    </md-dialog>

</script>


<script type="text/ng-template" id="createCompositeMessageWithDrag.html">
    <div class="modal-header">
        <h3 class="modal-title">Create Composite Profile</h3>
    </div>
    <form role="form">
        <div class="modal-body">
            <div class="row">

                <div class="col-md-6">
                    <h5>Base Profiles</h5>
                    <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                        <thead>
                        <tr class="tbl-header">
                            <th>Choose Base Profile</th>

                        </tr>

                        </thead>
                        <tbody>
                        <tr ng-repeat=" baseProfile in baseProfiles">
                            <td ng-model="baseProfile" data-drag="true"
                                jqyoui-draggable="{index: {{$index}}, onStart:'start(baseProfile)',onDrop:'dropBase:(baseProfile)'}"
                                data-jqyoui-options="{revert: 'invalid'}">
                                {{baseProfile.name}}
                            </td>
                        </tr>
                        </tbody>


                    </table>
                    <!--<div data-drag="true" ng-repeat="baseProfile in baseProfiles" data-jqyoui-options="{revert: 'invalid'}" ng-model="base" jqyoui-draggable="{animate:true}">{{baseProfile.name}}</div>-->


                </div>
                <div class="col-md-6">
                    <h5>Profile Components</h5>
                    <table class="table table-striped table-bordered table-condensed hl7-versions-valueset table-fixed">
                        <thead>
                        <tr class="tbl-header">
                            <th>Choose profiles Components</th>

                        </tr>

                        </thead>
                        <tbody>
                        <tr ng-repeat="pc in pcs">
                            <td ng-model="profileC" data-drag="true" jqyoui-draggable="{animate:true}"
                                data-jqyoui-options="{revert: 'invalid'}">
                                {{pc.name}}
                            </td>
                        </tr>
                        </tbody>
                    </table>

                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <h5>Composite Profile</h5>
                    <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">

                        <thead>
                        <tr class="tbl-header">
                            <th class="col-md-6">Base Profile</th>
                            <th class="col-md-3">Profile Component</th>
                        </tr>

                        </thead>
                        <tbody>
                        <tr>
                            <td class="col-md-6" ng-model="compositeMessage" data-drop="true"
                                data-jqyoui-options="baseProfileOption"
                                jqyoui-droppable="{onDrop:'myCallback(event,ui)'}">
                                {{compositeMessage.name}}
                            </td>
                            <td class="col-md-3" ng-model="pcList" data-drop="true" data-jqyoui-options
                                jqyoui-droppable="{onDrop:'myCallback(event,ui)'}"></td>

                        </tr>
                        </tbody>


                    </table>
                    <!--<div style="border:10px;" data-drop="true" data-jqyoui-options ng-model="composite" jqyoui-droppable style='height:50px;'>
                        <div data-drag="false" data-jqyoui-options ng-model="composite" jqyoui-draggable>{{composite.name}}</div>
                    </div>-->

                </div>


            </div>

        </div>

        <div class="modal-footer">
            <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">
                &nbsp; </i>Cancel</span>
            </button>
            <button type="submit" ng-disabled="!name" class="btn btn-raised btn-info btn-sm" ng-click="create()">
                <span><i class="fa fa-check fa-fw">&nbsp; </i>Create</span>
            </button>
        </div>
    </form>
</script>
