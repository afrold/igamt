<style id="antiClickjack">
    body {
        display: none !important;
    }
</style>
<script type="text/javascript">
    if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
    } else {
        top.location = self.location;
    }
</script>
<script type="text/ng-template" id="warning-dialog.html">
    <div class="modal-header">
        <h3>Your session will expire soon!</h3>
    </div>
    <div idle-countdown="countdown" ng-init="countdown=30" class="modal-body">
        <progressbar type="warning" max="30" value="30" animate="false" class="progress-striped active">Your session will expire in {{countdown}} second(s).
        </progressbar>
    </div>
</script>
<script type="text/ng-template" id="timedout-dialog.html">
    <div class="modal-body info-dlg">
        <p>
            Your session has expired.
        </p>
    </div>
</script>
<script type="text/ng-template" id="NewAppVersion.html">
    <div class="modal-body error-dlg">
        <div ng-include="'InvalidAppState.html'"></div>
        <br/>
        <div style="text-align:center">
            <p>Please click
                <button class="btn btn-raised btn-xs btn-primary" ng-click="close()" type="button" title="Cancel" class="point">
                    <i class="fa fa-refresh"></i>
                    reset
                </button> to reinitialize your browser.</p>
        </div>

    </div>
</script>
<script type="text/ng-template" id="CriticalError.html">
    <div class="modal-body error-dlg">
        <p ng-bind="error">
        </p>
    </div>
    <div class="modal-footer error-dlg">
        <div class="pull-right">
            <button class="btn btn-raised btn-xs btn-primary" ng-click="close()" type="button" title="Cancel" class="point">
                <i class="fa fa-times"></i>
                Close
            </button>
        </div>
    </div>
</script>
<script type="text/ng-template" id="ConfirmLogout.html">

    <div class="modal-header">
        <h3 class="modal-title">Logout Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>You currently have unsaved changes. Are you sure you want to proceed ? All unsaved changes will be lost</p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-primary btn-sm" ng-disabled="loading" ng-click="logout()"><span><i
                class="fa fa-sign-out fa-fw">&nbsp; </i>Logout</span>
        </button>
        <button class="btn btn-raised btn-warning btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
    </div>
</script>
<script type="text/ng-template" id="ConfirmLeaveDlg.html">
    <div class="modal-header">
        <p class="modal-title" style="font-size:20px; font-weight:bold"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Confirmation
        </p>
    </div>
    <div class="modal-body">
        <p style="text-align: left">You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost.</p>
    </div>
    <div class="modal-footer">

        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-warning btn-sm" ng-click="discard()"><span><i
                class="fa fa-sign-out fa-fw">&nbsp; </i>Discard Changes</span>
        </button>
        <button class="btn btn-raised btn-success btn-sm" ng-click="save()"><span><i
                class="fa fa-sign-out fa-fw">&nbsp; </i>Save and Continue</span>
        </button>
        <div ng-show="error!=null" ng-bind="error"></div>
    </div>
</script>
<script type="text/ng-template" id="NotificationSuccessTemplate.html">
    <div class="ui-notification custom-template">
        <div class="message">
            <i class="fa fa-check" aria-hidden="true"></i>
            <span ng-bind-html="message"></span>
        </div>
    </div>
</script>
<script type="text/ng-template" id="NotificationErrorTemplate.html">
    <div class="ui-notification custom-template">
        <div class="message">
            <i class="fa fa-times" aria-hidden="true"></i>
            <span ng-bind-html="message"></span>
        </div>
    </div>
</script>
<script type="text/ng-template" id="NotificationWarningTemplate.html">
    <div class="ui-notification custom-template">
        <div class="message">
            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
            <span ng-bind-html="message"></span>
        </div>
    </div>
</script>
<script type="text/ng-template" id="Blank.html">
    No Section Selected
</script>
<script type="text/ng-template" id="CreateNewIGAlert.html">
    <div class="modal-header">
        <p class="modal-title" style="font-size:20px; font-weight:bold"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Alert
        </p>
    </div>
    <div class="modal-body">
        <p style="text-align: left">You Currently Have An IG Document In Progress. Please Close The Current IG Document Before Creating A New One.</p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-primary btn-sm" ng-click="close()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Close</span>
        </button>
    </div>
</script>
<script type="text/ng-template" id="AddHL7TableOpenCtrl.html">
    <div class="modal-header modal-wide">
        <div class="form-inline">
            <span class="header4">Add HL7 Value Sets</span>
        </div>
    </div>

    <div class="modal-body">
        <form class="form-horizontal" novalidate>
            <div class="row">
                <div class="col-md-12">
                    <div class="btn-group btn-group-sm pull-left" data-toggle="buttons">
                        <label ng-repeat="vr in hl7Versions" class="btn btn-raised btn-info btn-xs" ng-click="loadTablesByVersion(vr)" ng-class="{ 'active':vr===selectedHL7Version}">
                                <input type="radio" ng-value="vr" ng-model="selectedHL7Version">{{vr}}</input>
                            </label>
                    </div>
                </div>
			
                <div class="col-md-6" ng-show="selectedHL7Version !==''">
                    <div ng-show="loading" style="text-align:center">
                        <i class="fa fa-spinner fa-pulse fa-2x"></i>
                    </div>
                    <div ng-show="!loading" class="igl-table">
                        <h5>Tables for {{source}} {{selectedHL7Version}}</h5>
                        <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                            <thead>
                                <tr class="tbl-header">
                                    <th>Binding Identifier</th>
                                    <th>Name</th>
                                    <th/>
                                </tr>
                                <tr>
                                    <th>
                                        <input ng-model="search.bindingIdentifier" class="form-control" placeholder="by id">
                                    </th>
                                    <th>
                                        <input ng-model="search.name" class="form-control" placeholder="by name">
                                    </th>
                                    <th/>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="table in hl7Tables | orderBy: 'bindingIdentifier' | filter:search:strict">
                                    <td>{{table.bindingIdentifier}}</td>
                                    <td>{{table.name}}</td>
                                    <td><a class="pointer" ng-click="addTable(table)"><i class="fa fa-plus fa-fw"></i></a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-md-6" ng-show="selectedTables.length> 0">
                    <div class="igl-table">
                        <h5>Selected tables</h5>
                        <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                            <thead>
                                <tr class="tbl-header">
                                    <th>Binding Identifier</th>
                                    <th>Name</th>
                                    <th>HL7 Version</th>
                                    <th>oid</th>
                                    <th/>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="table in selectedTables">
                                    <td>{{table.bindingIdentifier}}</td>
                                    <td>{{table.name}}</td>
                                    <td>{{table.hl7Version}}</td>
                                    <td>{{table.oid}}</td>
                                    <td><a class="pointer" ng-click="deleteTable(table)"><i
                                            class="fa fa-times fa-fw"></i></a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-primary btn-sm" ng-show="selectedTables.length > 0" ng-disabled="loading" ng-click="save()"><span><i
                    class="fa fa-plus fa-fw">&nbsp; </i>Save</span></button>
        <button class="btn btn-raised btn-warning btn-sm" ng-show="selectedTables.length > 0" ng-disabled="loading" ng-click="cancel()"><span><i
                    class="fa fa-times fa-fw">&nbsp; </i>Close</span></button>
        <button class="btn btn-raised btn-warning btn-sm" ng-show="selectedTables.length === 0" ng-disabled="loading" ng-click="cancel()"><span><i
                    class="fa fa-times fa-fw">&nbsp; </i>Close</span></button>
    </div>
</script>
<script type="text/ng-template" id="AddCSVTableOpenCtrl.html">
    <div class="modal-header modal-wide">
        <div class="form-inline">
            <span class="header4">Add ValueSet From CSV file</span>
        </div>
    </div>
    <div class="modal-body">
        <form class="form-horizontal" novalidate>
            <div class="form-group">
                <div class="col-sm-12">
                    <label for="file" class="custom-file-upload">
                            <i class="fa fa-cloud-upload"></i> Choose CSV File
                        </label>
                    <input id="file" type="file" name="file" />
                </div>
            </div>

            <p style="color:lightskyblue;">How it works</p>
            <ol style="color:lightskyblue;">
                <li style="color:lightskyblue;">Download 'ValueSet Empty Form (Excel)'</li>
                <li style="color:lightskyblue;">Edit sheets using MS Excel</li>
                <li style="color:lightskyblue;">Save as CSV file</li>
                <li style="color:lightskyblue;">Upload CSV file</li>
            </ol>

            <p style="color:lightskyblue;">Files</p>
            <ul>
                <li style="color:lightskyblue;"><a class="pointer" href="docs/ValueSet_EmptyForm_Excel.xlsx" target="_blank"><i class="fa fa-file-excel-o fa-fw"></i>ValueSet Empty Form (Excel)</a></li>
                <li style="color:lightskyblue;"><a class="pointer" href="docs/ValueSet_EmptyForm_csv.csv" target="_blank"><i class="fa fa-file-code-o fa-fw"></i>ValueSet Empty Form (CSV)</a></li>
                <li style="color:lightskyblue;"><a class="pointer" href="docs/ValueSet_sample_excel.xlsx" target="_blank"><i class="fa fa-file-excel-o fa-fw"></i>ValueSet Sample Form (Excel)</a></li>
                <li style="color:lightskyblue;"><a class="pointer" href="docs/ValueSet_sample_csv.csv" target="_blank"><i class="fa fa-file-code-o fa-fw"></i>ValueSet Sample Form (CSV)</a></li>
            </ul>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-warning btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Close</span></button>
        <button class="btn btn-raised btn-success btn-sm" ng-click="uploadCSVFile()"><span><i class="fa fa-check fa-fw">&nbsp; </i>Save</span></button>
    </div>
</script>
<script type="text/ng-template" id="AddPHINVADSTableOpenCtrl.html">
    <div class="modal-header modal-wide">
        <div class="form-inline">
            <span class="header4">Add PHINVADs Tables</span>
        </div>
    </div>
    <div class="modal-body">
        <form class="form-horizontal" novalidate>
            <div class="form-group">
                <div class="col-sm-11">
                    <input type="text" name="searchText" ng-model="searchText" class="form-control" placeholder="Type Criteria">
                </div>
                <div class="col-sm-1">
                    <a ng-click="searchPhinvads(searchText)" class="point">
                        <span><i class="fa fa-search fa-fw"></i></span>
                    </a>
                </div>
            </div>

            <div class="col-md-6">
                <div ng-show="loading" style="text-align:center">
                    <i class="fa fa-spinner fa-pulse fa-2x"></i>
                </div>
                <div ng-show="!loading && phinvadsTables" class="igl-table">
                    <h5>{{phinvadsTables.length}} tables found!</h5>
                    <table ng-show="phinvadsTables.length > 0" class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                        <thead>
                            <tr>
                                <th>Binding Identifier</th>
                                <th>Name</th>
                                <th/>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="table in phinvadsTables | orderBy:'bindingIdentifier' |  filter:search:strict">
                                <td>{{table.bindingIdentifier}}</td>
                                <td>{{table.name}}</td>
                                <td><a class="pointer" ng-click="addTable(table)"><i class="fa fa-plus fa-fw"></i></a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="col-md-6" ng-show="selectedTables.length > 0">
                <div class="igl-table">
                    <h5>Selected tables</h5>
                    <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                        <thead>
                            <tr>
                                <th class="col-sm-7">Binding Identifier</th>
                                <th class="col-sm-2">Name</th>
                                <th class="col-sm-2">oid</th>
                                <th class="col-sm-1" />
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="table in selectedTables">
                                <td class="col-sm-7" ng-class="{'has-error': isDuplicatedID(table)}">
                                    <textarea rows="3" class="form-control" ng-model="table.bindingIdentifier" />
                                    <div ng-show="isDuplicatedID(table)">
                                        <p class="warning">Duplicated ID</p>
                                    </div>
                                </td>
                                <td class="col-sm-2">
                                    <textarea rows="3" disabled class="form-control" ng-model="table.name" />
                                </td>
                                <td class="col-sm-2">
                                    <textarea rows="3" disabled class="form-control" ng-model="table.oid" />
                                </td>
                                <td class="col-sm-1"><a class="pointer" ng-click="deleteTable(table)"><i class="fa fa-times fa-fw"></i></a></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-primary btn-sm" ng-show="selectedTables.length > 0" ng-disabled="loading" ng-click="save()"><span><i
                class="fa fa-plus fa-fw">&nbsp; </i>Save</span></button>
        <button class="btn btn-raised btn-warning btn-sm" ng-show="selectedTables.length > 0" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Close</span></button>
        <button class="btn btn-raised btn-warning btn-sm" ng-show="selectedTables.length === 0" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Close</span></button>
</div>
</script>
<script type="text/ng-template" id="hl7VersionsDlg.html">
            <form id="hl7VersionsDlgForm" name="hl7VersionsDlgForm" class="form-horizontal">

                <div class="modal-header modal-wide">
                    <div class="form-inline">
                        <span class="header4" style="color:white;">Create IG Document</span>

                        <button ng-show="clickSource === 'btn'" class="btn btn-raised btn-info btn-xs pull-right" type="button" ng-click="ok()" ng-disabled="okDisabled || hl7VersionsDlgForm.$invalid">
                    <i class="fa fa-check"></i>Submit
                </button>
                        <button ng-show="clickSource === 'ctx'" class="btn btn-raised btn-info btn-xs pull-right" type="button" ng-click="ok()" ng-disabled="okDisabled">
                    <i class="fa fa-check"></i>Submit
                </button>
                        <button class="btn btn-raised btn-default btn-xs pull-right" type="button" ng-click="cancel()">
                    <i class="fa fa-times"></i>Cancel
                </button>
                    </div>
                </div>
                <div class="modal-body">

                    <div class="col-md-12">
                        <div ng-show="clickSource === 'btn'" ng-class="{'igl-has-error has-feedback' : hl7VersionsDlgForm.hl7Version.$invalid}">
                            <label class="col-md-2 control-label" style="text-align: left">HL7 Version*:</label>

                            <div class="col-md-3">
                                <select class="form-control" name="hl7Version" id="hl7Version" ng-change="loadIGDocumentsByVersion()" ng-disabled="loading || igdocument" required ng-model="hl7Version" ng-options="vr for vr in hl7Versions" />
                            </div>
                        </div>

                        <!--<div class="col-md-12">-->
                        <!--<h4 class="modal-title">Select HL7 Version</h4>-->
                        <!--</div>-->
                        <!--<div class="col-md-12">-->
                        <!--<div ng-show="!igdocument" class="btn-group btn-group-sm pull-left" data-toggle="buttons">-->
                        <!--<label class="btn btn-raised btn-primary btn-xs"-->
                        <!--ng-click="$parent.hl7Version = vr; loadIGDocumentsByVersion()"-->
                        <!--ng-class="{'active':vr === hl7Version}" ng-repeat="vr in hl7Versions">-->
                        <!--<input ng-disabled="loading" type="radio" ng-value="vr" ng-model="$parent.hl7Version">{{vr}}-->
                        <!--</label>-->
                        <!--</div>-->
                        <!--</div>-->
                    </div>



                    <accordion ng-show="hl7Version">
                        <div accordion-group class="panel-primary" is-open="status.isFirstOpen" ng-show="clickSource==='btn'">
                            <accordion-heading>
                                <span style="color:white;"> IG Document Metadata</span> <i class="pull-left fa" style="color:white;" ng-class="{'fa-chevron-down': status.isFirstOpen, 'fa-chevron-right': !status.isFirstOpen}"></i>
                            </accordion-heading>
                            <div class="row">
                                <!--<div class="row">
                            <label for="example-version-input" class="col-xs-2 col-form-label">HL7 Version*</label>
                            <div class="col-xs-10">
                                <input class="form-control" type="text" ng-model="hl7Version" disabled>

                            </div>
                        </div>-->
                                <div class=" row" style="padding-top:5px">
                                    <label for="example-text-input" class="col-xs-2 col-form-label">Title*</label>
                                    <div class="col-xs-10">
                                        <input class="form-control form-control-xs" type="text" ng-model="hl7VersionsDlgForm.metaData.title" required>
                                    </div>
                                </div>
                                <div class=" row">
                                    <label for="example-search-input" class="col-xs-2 col-form-label">Sub-Title</label>
                                    <div class="col-xs-10">
                                        <input class="form-control" type="text" ng-model="hl7VersionsDlgForm.metaData.subTitle">
                                    </div>
                                </div>
                                <div class=" row">
                                    <label for="example-email-input" class="col-xs-2 col-form-label">Organization</label>
                                    <div class="col-xs-10">
                                        <input class="form-control" type="text" ng-model="hl7VersionsDlgForm.metaData.orgName">
                                    </div>
                                </div>
                                <div class="row">
                                    <label for="example-url-input" class="col-xs-2 col-form-label">Extension</label>
                                    <div class="col-xs-10">
                                        <input class="form-control" type="text" ng-model="hl7VersionsDlgForm.metaData.ext">
                                    </div>
                                </div>
                                <div class="row">
                                    <label for="example-tel-input" class="col-xs-2 col-form-label">Specification</label>
                                    <div class="col-xs-10">
                                        <input class="form-control" type="text" ng-model="hl7VersionsDlgForm.metaData.specificationName">
                                    </div>
                                </div>
                                <div class="row">
                                    <label for="example-password-input" class="col-xs-2 col-form-label">Status</label>
                                    <div class="col-xs-10">
                                        <input class="form-control" type="text" ng-model="hl7VersionsDlgForm.metaData.status">
                                    </div>
                                </div>
                                <div class="row">
                                    <label for="example-number-input" class="col-xs-2 col-form-label">Topics</label>
                                    <div class="col-xs-10">
                                        <input class="form-control" type="text" ng-model="hl7VersionsDlgForm.metaData.topics">
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div accordion-group class="panel-primary" is-open="status.isSecondOpen">
                            <accordion-heading>
                                <span style="color:white;"> List of Events*</span> <i class="pull-left fa" style="color:white;" ng-class="{'fa-chevron-down': status.isSecondOpen, 'fa-chevron-right': !status.isSecondOpen}"></i>
                            </accordion-heading>
                            <div class="input-group">
                                <span class="input-group-addon">Selected Messages:</span>
                                <span ng-repeat="event in eventList" class="label label-primary">{{::event.name}}^{{::event.parentStructId}}</span>

                            </div>
                            <div class="row" style="margin-left:20px">
                                <div ng-show="loading" style="text-align:center">
                                    <i class="fa fa-spinner fa-pulse fa-2x"></i>
                                </div>
                                <div ng-show="!loading">
                                    <div class="table-responsive">
                                        <table tt-table tt-params="messageEventsParams" ng-show="messageEventsParams" class="table table-striped table-bordered table-fix-header table-condensed hl7-versions-table">
                                            <thead>
                                                <tr class="tbl-header">
                                                    <td class="" style="width:300px">Struct ID</td>
                                                    <td class="" style="width:600px">Description</td>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </accordion>

                </div>
                <div class="modal-footer">

                </div>
            </form>
        </script>
        <script type="text/ng-template" id="MessageEventsNode.html">
            <tr tt-node is-branch="node.type === 'message'">
                <td class="" style="width:300px;color:black">

                    <input ng-show="node.type === 'event'" type="checkbox" ng-model="bool" ng-change="trackSelections(bool, node)">
                    </input><span ng-bind="::node.name" style="margin-left : 7px;"></span>
                </td>
                <td class="" style="width:585px;color:black" ng-bind="::node.description "></td>


            </tr>

        </script>
        <script type="text/ng-template " id="ConfirmIGDocumentDeleteCtrl.html ">
            <div class="modal-header ">
                <h3 class="modal-title ">Delete Confirmation
        </h3>
            </div>
            <div class="modal-body ">

                <p>Are you sure you want to delete the IG Document:"{{::igdocumentToDelete.metaData.title}} " ? This operation is irreversible</p>
            </div>
    </div>
    <div class="modal-footer ">
        <button class="btn btn-raised btn-default btn-sm " ng-disabled="loading " ng-click="cancel() "><span><i
                class="fa fa-times fa-fw ">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-danger btn-sm " ng-disabled="loading " ng-click="delete() "><span><i
                class="fa fa-trash-o fa-fw ">&nbsp; </i>Delete</span>
        </button>
        <div ng-show="loading " style="text-align:center;padding-top:20px; padding-bottom:20px ">
            <img class="ajax-loading " ng-src="images/ajax-loader.gif " alt="loading... " />
        </div>
    </div>
    </div>
    </script>
    <script type="text/ng-template " id="ConfirmIGDocumentCloseCtrl.html ">
        <div class="modal-header ">
            <h3 class="modal-title ">Close Confirmation
        </h3>
        </div>
        <div class="modal-body ">
            <p>You currently have unsaved changes. Are you sure you want to close the IG Document ? All unsaved changes will be lost</p>
        </div>
        <div class="modal-footer ">
            <button class="btn btn-raised btn-default btn-sm " ng-disabled="loading " ng-click="cancel() "><span><i
                class="fa fa-times fa-fw ">&nbsp; </i>Cancel</span>
        </button>
            <button class="btn btn-raised btn-warning btn-sm " ng-disabled="loading " ng-click="discardChangesAndClose() "><span><i
                class="fa fa-times-circle fa-fw ">&nbsp; </i>Discard Changes</span>
        </button>
            <button class="btn btn-raised btn-primary btn-sm " ng-disabled="loading " ng-click="saveChangesAndClose() "><span><i
                class="fa fa-check-circle fa-fw ">&nbsp; </i>Apply Changes</span>
        </button>
            <div ng-show="loading " style="text-align:center;padding-top:20px; padding-bottom:20px ">
                <img class="ajax-loading " ng-src="images/ajax-loader.gif " alt="loading... " />
            </div>
        </div>
    </script>
    <script type="text/ng-template " id="ConfirmIGDocumentOpenCtrl.html ">
        <div class="modal-header ">
            <h3 class="modal-title ">Open Confirmation
        </h3>
        </div>
        <div class="modal-body ">
            <p>You currently have an open IG document with unsaved changes. Are you sure you want to open the IG document ? All unsaved changes will be lost</p>
        </div>
        <div class="modal-footer ">
            <button class="btn btn-raised btn-default btn-sm " ng-disabled="loading " ng-click="cancel() "><span><i
                class="fa fa-times fa-fw ">&nbsp; </i>Cancel</span>
        </button>
            <button class="btn btn-raised btn-warning btn-sm " ng-disabled="loading " ng-click="discardChangesAndOpen() "><span><i
                class="fa fa-times-circle fa-fw ">&nbsp; </i>Discard Changes</span>
        </button>
            <button class="btn btn-raised btn-primary btn-sm " ng-disabled="loading " ng-click="saveChangesAndOpen() "><span><i
                class="fa fa-check-circle fa-fw ">&nbsp; </i>Apply Changes</span>
        </button>
            <div ng-show="loading " style="text-align:center;padding-top:20px; padding-bottom:20px ">
                <img class="ajax-loading " ng-src="images/ajax-loader.gif " alt="loading... " />
            </div>
        </div>
    </script>
    <script type="text/ng-template " id="RichTextCtrl.html ">
        <div class="modal-header modal-wide ">
            <h3 class="modal-title ">{{::editorTarget.obj.position}} . {{::editorTarget.obj.name}} :
            {{::editorTarget.title}}</h3>
        </div>
        <div class="modal-body ">
            <div class="row ">
                <div class="col-md-12 ">
                    <div ng-show="!editorTarget.disabled ">
                        <textarea rows="10 " froala="froalaEditorOptions " style="width:100%; " autofocus ng-model="editorTarget.obj[editorTarget.key] " id="globalEditor " name="content " ng-change="recordChanged() "></textarea>
                    </div>
                    <div ng-show="editorTarget.disabled " style="width:100%; ">
                        <div froala-view="editorTarget.obj[editorTarget.key] "></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer ">
            <button class="btn btn-raised btn-primary btn-md " ng-click="close() "><span><i class="fa fa-times fa-fw ">
            &nbsp; </i>Close</span>
        </button>
        </div>
    </script>
    <script type="text/ng-template " id="InputTextCtrl.html ">
        <div class="modal-header ">
            <h3 ng-show="editorTarget.obj.type==='segmentRef' ">
            {{editorTarget.obj.position}}.{{segmentsMap[editorTarget.obj.ref].name}}:{{segmentsMap[editorTarget.obj.ref].description}}</h3>

            <h3 ng-show="editorTarget.obj.type==='group' ">{{editorTarget.obj.position}}.{{editorTarget.obj.name}}</h3>

            <h3 ng-show="editorTarget.obj.type !='segmentRef' && editorTarget.obj.type !='group' " class="modal-title ">
            {{editorTarget.obj.position}} . {{editorTarget.obj.name}} :
            {{editorTarget.title}}</h3> {{::editorTarget.obj.position}}.{{::segmentsMap[editorTarget.obj.ref].name}}:{{::segmentsMap[editorTarget.obj.ref].description}}
            </h3>

        </div>
        <div class="modal-body ">
            <form class="form-horizontal " novalidate>
                <div class="row ">
                    <div class="col-md-12 ">
                        <textarea rows="10 " type="text " ng-disabled="editorTarget.disabled " style="width:100%; " autofocus name="inputEditor " class="form-control " ng-change="recordChanged() " ng-model="editorTarget.obj[editorTarget.key] "></textarea>
                    </div>
                </div>
            </form>
        </div>
        </div>
        <div class="modal-footer ">
            <button class="btn btn-raised btn-primary btn-md " ng-click="close() "><span><i class="fa fa-times fa-fw ">
            &nbsp; </i>Close</span>
        </button>
        </div>
    </script>
    <script type="text/ng-template " id="tree_node ">

        <tr tt-node is-branch="node.fields!==undefined || node.segments!==undefined ||(node.components.length!==0 && node.components!==undefined) ">
            <td class="col-md-1 " style="width:14% ">
                <span ng-bind="node.position.element "></span>
            </td>
            <td class="col-md-2 " style="width:37% ">
                <table class=" table-borderless " ng-show="(node.label.element && (node.ext.element||node.ext.element===null) )||(node.label.element && !node.ext) ">
                    <tr>
                        <td class="col-sm-1 ">
                            <span ng-show="node.type.element==='segmentRef' " class="label label-segment label-icon lb-sm ">S</span>
                            <span ng-show="node.type.element==='segment' " class="label label-segment label-icon lb-sm ">S</span>
                            <span ng-show="node.type.element==='group' " class="label label-success label-icon lb-sm ">G</span>
                            <span ng-show="node.type.element==='field' " class="label label-field label-icon lb-sm ">F</span>
                            <span ng-show="node.type.element==='component' " class="label label-component label-icon lb-sm ">C</span>
                            <span ng-bind="node.label.element "></span><span ng-show="node.description.element ">:<span ng-bind="node.description.element "></span></span>
                        </td>
                    </tr>
                </table>
                <table class=" table-borderless " ng-show="(node.label.element1 && node.label.element2) || (node.label.element && (node.ext.element1 || node.ext.element2)) ||(node.label.element1 || node.label.element2) ">
                    <tr style="background-color:#B5F7EC ">
                        <td class="col-sm-1 ">
                            <span ng-show="node.type.element==='segmentRef' " class="label label-segment label-icon lb-sm " align="center ">S</span>
                            <span ng-show="node.type.element==='segment' " class="label label-segment label-icon lb-sm " align="center ">S</span>
                            <span ng-show="node.type.element==='group' " class="label label-success label-icon lb-sm ">G</span>
                            <span ng-show="node.type.element==='field' " class="label label-field label-icon lb-sm ">F</span>
                            <span ng-show="node.type.element1==='field' " class="label label-field label-icon lb-sm ">F</span>

                            <span ng-show="node.type.element==='component' " class="label label-component label-icon lb-sm ">C</span>
                            <span ng-show="node.type.element1==='group' " class="label label-success label-icon lb-sm ">G</span>
                            <span ng-show="node.type.element1==='segmentRef' " class="label label-segment label-icon lb-sm ">S</span>
                            <span ng-bind="node.label.element "></span>
                            <span ng-bind="node.label.element1 "></span>
                            <span ng-show="node.ext.element1|| node.ext.element ">_
                        <span ng-show="node.ext.element1 " ng-bind="node.ext.element1 "></span>
                            <span ng-show="node.ext.element " ng-bind="node.ext.element "></span>
                            </span>
                            <span ng-show="node.description ">:
                        <span ng-show="node.description.element1 " ng-bind="node.description.element1 "></span>
                            <span ng-show="node.description.element " ng-bind="node.description.element "></span>
                            </span>
                        </td>
                    </tr>
                    <tr style="background-color:#EDE1AF ">
                        <td class="col-sm-1 ">
                            <span ng-show="node.type.element==='segmentRef' " class="label label-segment label-icon lb-sm " align="center ">S</span>
                            <span ng-show="node.type.element==='segment' " class="label label-segment label-icon lb-sm " align="center ">S</span>
                            <span ng-show="node.type.element==='group' " class="label label-success label-icon lb-sm ">G</span>
                            <span ng-show="node.type.element==='field' " class="label label-field label-icon lb-sm ">F</span>
                            <span ng-show="node.type.element2==='field' " class="label label-field label-icon lb-sm ">F</span>

                            <span ng-show="node.type.element==='component' " class="label label-component label-icon lb-sm ">C</span>
                            <span ng-show="node.type.element2==='group' " class="label label-success label-icon lb-sm ">G</span>
                            <span ng-show="node.type.element2==='segmentRef'" class="label label-segment label-icon lb-sm ">S</span>
                            <span ng-show="node.type.element2==='segment'" class="label label-segment label-icon lb-sm ">S</span>
                            <span ng-bind="node.label.element"></span>
                            <span ng-bind="node.label.element2 "></span>
                            <span ng-show="node.ext.element2||node.ext.element ">_
                        <span ng-show="node.ext.element2" ng-bind="node.ext.element2 "></span>
                            <span ng-show="node.ext.element " ng-bind="node.ext.element "></span>
                            </span>
                            <span ng-show="node.description ">:
                        <span ng-show="node.description.element2 " ng-bind="node.description.element2 "></span>
                            <span ng-show="node.description.element " ng-bind="node.description.element "></span>
                            </span>
                        </td>
                    </tr>
                </table>
            </td>
            <td class="col-md-1 " ng-show="node.usage " style="width:2% ">
                <div align="center ">
                    <table class=" table-borderless ">
                        <tr>
                            <td class="col-md-1 " style="background-color:#B5F7EC ">
                                <div align="center "> <span ng-bind="node.usage.element1 "></span></div>
                            </td>
                        </tr>
                        <tr>
                            <td class="col-md-1 " style="background-color:#EDE1AF ">
                                <div align="center "> <span ng-bind="node.usage.element2 "></span></div>
                            </td>
                        </tr>
                    </table>
                </div>
            </td>
            <td class="col-md-1 " ng-show="!node.usage " style="width:2% ">
                <div align="center "> - </div>
            </td>
            <td class="col-md-1 " ng-show="node.minCard " style="width:2% ">
                <table class=" table-borderless ">
                    <tr>
                        <td class="col-md-1 " style="background-color:#B5F7EC ">
                            <div align="center "> <span ng-bind="node.minCard.element1 "></span></div>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-1 " style="background-color:#EDE1AF ">
                            <div align="center "> <span ng-bind="node.minCard.element2 "></span></div>
                        </td>
                    </tr>
                </table>
            </td>
            <td class="col-md-1 c " ng-show="!node.minCard " style="width:2% ">
                <div align="center "> - </div>
            </td>
            <td class="col-md-1 " ng-show="node.maxCard " style="width:2% ">
                <table class="table-borderless ">
                    <tr>
                        <td class="col-md-1 " style="background-color:#B5F7EC ">
                            <div align="center "> <span ng-bind="node.maxCard.element1 "></span></div>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-1 " style="background-color:#EDE1AF ">
                            <div align="center "> <span ng-bind="node.maxCard.element2 "></span></div>
                        </td>
                    </tr>
                </table>
            </td>
            <td class="col-md-1 " ng-show="!node.maxCard " style="width:2% ">
                <div align="center "> - </div>
            </td>
            <td class="col-md-1 " ng-show="node.minLength " style="width:2% ">
                <table class=" table-borderless ">
                    <tr>
                        <td class="col-md-1 " style="background-color:#B5F7EC ">
                            <div align="center "> <span ng-bind="node.minLength.element1 "></span></div>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-1 " style="background-color:#EDE1AF ">
                            <div align="center "> <span ng-bind="node.minLength.element2 "></span></div>
                        </td>
                    </tr>
                </table>
            </td>
            <td class="col-md-1 " ng-show="!node.minLength " style="width:2% ">
                <div align="center "> - </div>
            </td>
            <td class="col-md-1 " ng-show="node.maxLength " style="width:2% ">
                <table class=" table-borderless ">
                    <tr>
                        <td class="col-md-1 " style="background-color:#B5F7EC ">
                            <div align="center "> <span ng-bind="node.maxLength.element1 "></span></div>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-1 " style="background-color:#EDE1AF ">
                            <div align="center "> <span ng-bind="node.maxLength.element2 "></span></div>
                        </td>
                    </tr>
                </table>
            </td>
            <td class="col-md-1 " ng-show="!node.maxLength " style="width:2% ">
                <div align="center "> - </div>
            </td>
            <td class="col-md-1 col-fixed-20 " ng-show="node.confLength " style="width:2% ">
                <table class=" table-borderless ">
                    <tr>
                        <td class="col-md-1 " style="background-color:#B5F7EC ">
                            <div align="center "> <span ng-bind="node.confLength.element1 "></span></div>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-1 " style="background-color:#EDE1AF ">
                            <div align="center "> <span ng-bind="node.confLength.element2 "></span></div>
                        </td>
                    </tr>
                </table>
            </td>
            <td class="col-md-1 " ng-show="!node.confLength " style="width:2% ">
                <div align="center "> - </div>
            </td>
            <td class="col-md-1 col-fixed-20 " ng-show="node.datatype " style="width:21% ">
                <table class=" table-borderless ">
                    <tr>
                        <td class="col-md-1 " style="background-color:#B5F7EC ">
                            <div align="center "> <span ng-bind="node.datatype.element1 "></span></div>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-1 " style="background-color:#EDE1AF ">
                            <div align="center "> <span ng-bind="node.datatype.element2 "></span></div>
                        </td>
                    </tr>
                </table>
            </td>
            <td class="col-md-1 " ng-show="!node.datatype " style="width:21% ">
                <div align="center "> - </div>
            </td>
            <td class="col-md-1 " ng-show="node.valueset " style="width:16% ">
                <table class=" table-borderless ">
                    <tr>
                        <td class="col-md-1 " style="background-color:#B5F7EC ">
                            <div align="center "> <span ng-bind="node.valueset.element1 "></span></div>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-1 " style="background-color:#EDE1AF ">
                            <div align="center "> <span ng-bind="node.valueset.element2 "></span></div>
                        </td>
                    </tr>
                </table>
            </td>
            <td class="col-md-1 " ng-show="!node.valueset " style="width:16% ">
                <div align="center "> - </div>
            </td>
        </tr>
    </script>
    <script type="text/ng-template " id="ConfirmIGDocumentUnshareCtrl.html ">
        <div class="modal-header ">
            <h3 class="modal-title ">Remove Participant Confirmation
        </h3>
        </div>
        <div class="modal-body ">
            <p ng-if="shareParticipant.id===g etAccountID() ">Are you sure you want to be removed from the IG Document:"{{::igdocumentSelected.metaData.title}} "?</p>
            <p ng-if="shareParticipant.id !==g etAccountID() ">Are you sure you want to remove '{{shareParticipant.fullname}}' from the IG Document:"{{::igdocumentSelected.metaData.title}} "?</p>

            <div class="row " ng-if="error !=null ">
                <div class="col-md-12 ">
                    <span ng-bind="error " style="color: red; "></span>
                </div>
            </div>
        </div>
        </div>
        <div class="modal-footer ">
            <button class="btn btn-raised btn-default btn-sm " ng-disabled="loading " ng-click="cancel() "><span><i
                class="fa fa-times fa-fw ">&nbsp; </i>Cancel</span>
        </button>
            <button class="btn btn-raised btn-danger btn-sm " ng-disabled="loading " ng-click="delete() "><span><i
                class="fa fa-trash-o fa-fw ">&nbsp; </i>Remove</span>
        </button>
            <div ng-show="loading " style="text-align:center;padding-top:20px; padding-bottom:20px ">
                <img class="ajax-loading " ng-src="images/ajax-loader.gif " alt="loading... " />
            </div>

        </div>
        </div>
    </script>

    <script type="text/ng-template " id="GlobalPredicateCtrl.html ">
        <div class="modal-header ">
            <div>
                <h3 class="header4 ">Predicate for {{::selectedNode.locationPath}}({{::selectedNode.path}})</h3>
            </div>
        </div>

        <div class="modal-body">
            <form role="form ">
                <div class="col-md-3 ">
                    <div class="panel panel-default ">
                        <div class="panel-heading ">Full Message</div>
                        <div class="panel-body " style="min-height:200px; max-height:200px;overflow-y: scroll; ">
                            <table class="table table-striped ">
                                <tbody ng-repeat="data in treeDataForMessage " ng-include=" 'message_tree_Predicate_item.html' ">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-md-9 ">
                    <div class="panel panel-default ">
                        <div class="panel-heading ">Constraint Builder</div>
                        <div class="panel-body " style="min-height:200px; max-height:200px;overflow-y: scroll; ">
                            <span class="pull-right ">
                            <div class="btn-group btn-group-sm " data-toggle="buttons">
                                <label class="btn btn-raised btn-primary btn-xs " ng-click="constraintType='Free';" ng-class="{ 'active':constraintType==='Free' } ">
                                    <input type="radio" ng-value="constraintType">Add new Free-Text Predicate
                                </label>
                                <label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType='Plain' ; " ng-class="{ 'active':constraintType==='Plain' } ">
                                    <input type="radio" ng-value="constraintType">Add New Plain Predicate
                                </label>
                                <label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType='Complex' ; " ng-class="{ 'active':constraintType==='Complex' } ">
                                    <input type="radio" ng-value="constraintType">Add New Complex Predicate
                                </label>
                            </div>
                        </span>
                            <table class="table table-striped table-bordered " ng-show="constraintType==='Free' ">
                                <thead>
                                    <tr class="tbl-header ">
                                        <th class="col-md-10 ">Free-Text (Not supported by validation tool)</th>
                                        <th class="col-md-2 "></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="col-md-10 ">
                                            <input class="form-control " ng-model="newConstraint.freeText " type="text " />
                                        </td>
                                        <td class="col-md-2 " align="center ">
                                            <button class="btn btn-raised btn-info btn-xxs " ng-click="initPredicate() "><span><i class="fa fa-refresh fa-fw ">&nbsp; </i>Reset</span></button>
                                            <button class="btn btn-raised btn-primary btn-xxs " ng-click="addFreeTextPredicate(); "><span><i class="fa fa-plus fa-fw ">&nbsp; </i>Add</span></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <table class="table table-striped table-bordered " ng-show="constraintType==='Plain' ">
                                <thead>
                                    <tr class="tbl-header ">
                                        <th class="col-md-2 ">If</th>
                                        <th class="col-md-2 ">Node</th>
                                        <th class="col-md-2 ">Verb</th>
                                        <th class="col-md-2 ">Constraint Pattern</th>
                                        <th class="col-md-2 ">Value</th>
                                        <th class="col-md-2 "></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="col-md-2 ">If</td>
                                        <td class="col-md-2 " data-drop="true " data-jqyoui-options ng-model="firstNodeData " jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterNodeDrop'} ">
                                            <div ng-show="draggingStatus=='ContextTreeNodeDragging' ">
                                                <span style="color:red; " class="blink_me ">You can drop here!!</span>
                                            </div>
                                            <div ng-show="newConstraint.location_1 ">
                                                <span>
                                    <span ng-repeat="info in newConstraint.pathInfoSet_1 ">
                                        <span ng-show="$index==1 && info.isInstanceNumberEditable ">
                                            {{info.locationName}}[<input class="form-control-veryshort " ng-model="info.instanceNumber " ng-change="generateFirstPositionAndLocationPath(); " type="text "/>]
                                        </span>
                                                <span ng-show="$index==1 && !info.isInstanceNumberEditable ">
                                            {{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index> 1 && info.isInstanceNumberEditable"> .{{info.locationName}}[
                    <input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text" />]
                    </span>
                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                            .{{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                            ({{info.nodeName}})
                                        </span>
                                                </span>
                                                </span>
                                            </div>
                                            <div ng-show="!newConstraint.location_1">
                                                <span style="color:red;">Drop the node!</span>
                                            </div>
                                        </td>
                                        <td class="col-md-2">
                                            <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintVerb(newConstraint)}" ng-model="newConstraint.verb" ng-options="conditionalConstraintVerb for conditionalConstraintVerb in config.conditionalConstraintVerbs | orderBy:'toString()'"
                                            />
                                            <span style="color:red;" ng-show="isEmptyConstraintVerb(newConstraint)">Empty verb</span>
                                        </td>
                                        <td class="col-md-2">
                                            <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintPattern(newConstraint)}" ng-model="newConstraint.contraintType" ng-options="contraintType for contraintType in config.constraintTypes | orderBy:'toString()'" />
                                            <span style="color:red;" ng-show="isEmptyConstraintPattern(newConstraint)">Empty constraint pattern</span>
                                        </td>
                                        <td class="col-md-2" ng-hide="newConstraint.contraintType == 'identical to another node' ||
                                     newConstraint.contraintType == 'equal to another node' ||
                                     newConstraint.contraintType == 'not-equal to another node' ||
                                     newConstraint.contraintType == 'greater than another node' ||
                                     newConstraint.contraintType == 'equal to or greater than another node' ||
                                     newConstraint.contraintType == 'less than another node' ||
                                     newConstraint.contraintType == 'equal to or less than another node'">
                                            <span ng-show="newConstraint.contraintType == 'a literal value' ||
                                           newConstraint.contraintType == 'equal to' ||
                                           newConstraint.contraintType == 'not-equal to' ||
                                           newConstraint.contraintType == 'greater than' ||
                                           newConstraint.contraintType == 'equal to or greater than' ||
                                           newConstraint.contraintType == 'less than' ||
                                           newConstraint.contraintType == 'equal to or less than'">
                                <input class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}" ng-model="newConstraint.value" type="text"/>
                                <span ng-show="newConstraint.contraintType == 'a literal value'">Case Insensitive: </span>
                                            <input ng-show="newConstraint.contraintType == 'a literal value'" type="checkbox" ng-model="newConstraint.ignoreCase" />
                                            <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty value</span>
                                            </span>
                                            <span ng-show="newConstraint.contraintType == 'one of list values'">
                                <input class="form-control"
                                       ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}"
                                       ng-model="newConstraint.value"
                                       placeholder="Comma-Separated Values(CSV)"
                                       type="text"/>
                                <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty list value</span>
                                            </span>
                                            <span ng-show="newConstraint.contraintType == 'formatted value'">
                                <select class="form-control"
                                        ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}"
                                        ng-model="newConstraint.value"
                                        ng-options="predefinedFormat for predefinedFormat in config.predefinedFormats | orderBy:'toString()'"/>
                                <div ng-show="newConstraint.value === 'Regular expression'">
                                    <input class="form-control"
                                           ng-class="{'form-control-invalid': isEmptyConstraintValue2(newConstraint)}"
                                           ng-model="newConstraint.value2" placeholder="Regular expression" type="text"/>
                                </div>
                                <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty format</span>
                                            <span style="color:red;" ng-show="newConstraint.value === 'Regular expression' && isEmptyConstraintValue2(newConstraint)">Empty regular expression</span>
                                            </span>
                                            <span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                                <span>ValueSet ID: </span>
                                            <select class="form-control form-control-short" ng-class="{'form-control-invalid': isEmptyConstraintValueSet(newConstraint)}" ng-model="newConstraint.valueSetId">
                                    <option ng-repeat="table in tables track by table.id|orderBy:'+bindingIdentifier'" value="{{table.bindingIdentifier}}">
                                        {{::table.bindingIdentifier}}
                                    </option>
                                </select>
                                            <span style="color:red;" ng-show="isEmptyConstraintValueSet(newConstraint)">Empty valueset</span>
                                            <br/>
                                            <span>BindingStrength: </span>
                                            <select name="bindingStrength" class="form-control form-control-short" ng-model="newConstraint.bindingStrength">
                                    <option value="R">R</option>
                                    <option value="S">S</option>
                                    <option value="U">U</option>
                                </select>
                                            <br/>
                                            <span>BindingLocation: </span>
                                            <input class="form-control form-control-short" ng-model="newConstraint.bindingLocation" type="text" />
                                            </span>
                                        </td>
                                        <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="secondNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterSecondNodeDrop'}" ng-show="newConstraint.contraintType == 'identical to another node' ||
                                     newConstraint.contraintType == 'equal to another node' ||
                                     newConstraint.contraintType == 'not-equal to another node' ||
                                     newConstraint.contraintType == 'greater than another node' ||
                                     newConstraint.contraintType == 'equal to or greater than another node' ||
                                     newConstraint.contraintType == 'less than another node' ||
                                     newConstraint.contraintType == 'equal to or less than another node'">
                                            <div ng-show="draggingStatus == 'ContextTreeNodeDragging'">
                                                <span style="color:red;" class="blink_me">You can drop Here!!</span>
                                            </div>
                                            <div ng-show="newConstraint.location_2">
                                                <span>
                                    <span ng-repeat="info in newConstraint.pathInfoSet_2">
                                        <span ng-show="$index == 1 && info.isInstanceNumberEditable">
                                            {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">
                                            {{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">
                                            .{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                            .{{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                            ({{info.nodeName}})
                                        </span>
                                                </span>
                                                </span>
                                            </div>
                                            <div ng-show="!newConstraint.location_2">
                                                <span style="color:red;">Drop the node!</span>
                                            </div>
                                        </td>
                                        <td class="col-md-2" align="center">
                                            <button class="btn btn-raised btn-info btn-xxs" ng-click="initPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                            <button class="btn btn-raised btn-info btn-xxs" ng-click="addPredicate();" ng-disabled="erorrForPredicate(newConstraint, 'message', selectedNode)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-2">Complex Type</th>
                                        <th class="col-md-1"></th>
                                        <th ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-7">Constraints</th>
                                        <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-3">First Constraint</th>
                                        <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1"></th>
                                        <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-3">Second Constraint</th>
                                        <th class="col-md-2"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="col-md-2">
                                            <select class="form-control" ng-class="{'form-control-invalid': isEmptyCompositeType(compositeType)}" ng-model="compositeType">
                                        <option value="AND">AND</option>
                                        <option value="OR">OR</option>
                                        <option value="XOR">XOR</option>
                                        <option value="IFTHEN">IFTHEN(IMPLY)</option>
                                        <option value="FORALL">FORALL(True, if all assertions are true)</option>
                                        <option value="EXIST">EXIST(True, if one of assertions is true)</option>
                                    </select>
                                            <span style="color:red;" ng-show="isEmptyCompositeType(compositeType)">Empty composite type</span>
                                        </td>
                                        <td class="col-md-1" align="center">
                                            <span ng-show="compositeType == 'IFTHEN'">IF</span>
                                            <span ng-show="compositeType == 'FORALL'">FORALL</span>
                                            <span ng-show="compositeType == 'EXIST'">EXIST</span>
                                        </td>
                                        <td ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-7" data-drop="true" ng-model='constraints' jqyoui-droppable="{multiple:true}" data-jqyoui-options>
                                            <span style="color:red;" ng-show="constraints.length < 2">Drop two more constraints here!</span>
                                            <li ng-repeat="c in constraints" ng-show="constraints.length > 0" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="constraints" jqyoui-draggable="{animate:true}">{{c.description}}</li>
                                        </td>
                                        <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-3" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
                                            <span style="color:red;" ng-hide="firstConstraint">Drop the first constraint here!</span>
                                            <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
                                        </td>
                                        <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" align="center">
                                            <span ng-show="compositeType == 'AND'">AND</span>
                                            <span ng-show="compositeType == 'OR'">OR</span>
                                            <span ng-show="compositeType == 'XOR'">XOR</span>
                                            <span ng-show="compositeType == 'IFTHEN'">THEN</span>
                                        </td>
                                        <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-3" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
                                            <span style="color:red;" ng-hide="secondConstraint">Drop the second constraint here!</span>
                                            <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
                                        </td>
                                        <td class="col-md-1" align="center">
                                            <button class="btn btn-raised btn-info btn-xxs" ng-click="initComplexPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                            <button class="btn btn-raised btn-primary btn-xxs" ng-click="addComplexPredicate()" ng-disabled="erorrForComplexPredicate(compositeType, firstConstraint, secondConstraint, null, null, constraints)">
                                        <span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span>
                                    </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-md-12" style="margin-top: 10px">
                    <div class="panel panel-default">
                        <div class="panel-heading">List of constraints for selected Context</div>
                        <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                            <table st-table="displayed" st-safe-src="tempPredicates" class="table table-striped table-bordered">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-1">Draggable</th>
                                        <th class="col-md-10">Description (
                                            <input type="checkbox" ng-model="viewAssertion"> view assertion )
                                        </th>
                                        <th class="col-md-1"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="c in displayed">
                                        <td class="col-md-1" align="center">
                                            <i class="glyphicon glyphicon-move cursorMove" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="c" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingPredicate({nodeData: data})'}"></i>
                                        </td>
                                        <td class="col-md-10">
                                            <input class="form-control" ng-model="c.description" type="text" />
                                            <input ng-show="viewAssertion" class="form-control" ng-model="c.assertion" type="text" />
                                        </td>
                                        <td class="col-md-1" align="center">
                                            <button class="btn btn-raised btn-danger btn-xxs" ng-click="deleteTempPredicate(c)"><span><i class="fa fa-trash fa-fw">&nbsp; </i>Del</span></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="col-md-12" style="margin-top: 10px" style="margin-top: 10px">
                    <div class="panel panel-default" data-drop="true" data-jqyoui-options ng-model="predicateData" jqyoui-droppable="{beforeDrop: 'beforePredicateDrop', onDrop: 'afterPredicateDrop'}">
                        <div class="panel-heading">Selected Node Info</div>
                        <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                            <div class="col-md-6">
                                <div class="form-group control-group">
                                    <label class="col-md-4 control-label">Name</label>
                                    <div class="controls col-md-8">
                                        <input class="form-control" type="text" disabled ng-model="selectedNode.obj.name">
                                    </div>
                                </div>
                                <div class="form-group control-group">
                                    <label class="col-md-4 control-label">Path</label>
                                    <div class="controls col-md-8">
                                        <input class="form-control" type="text" disabled ng-model="selectedNode.locationPath">
                                    </div>
                                </div>
                                <div class="form-group control-group">
                                    <label class="col-md-4 control-label">Position Path</label>
                                    <div class="controls col-md-8">
                                        <input class="form-control" type="text" disabled ng-model="selectedNode.path">
                                    </div>
                                </div>
                                <div class="form-group control-group">
                                    <button ng-show="existingPredicate" class="btn btn-raised btn-danger btn-xs" ng-click="deletePredicate()"><span><i class="fa fa-trash fa-fw">&nbsp; </i>Dismiss the current Predicate</span></button>
                                    <span ng-show="!existingPredicate" style="color:red;">No Predicate</span>
                                </div>

                            </div>
                            <div class="col-md-6">
                                <div ng-show="existingPredicate">
                                    <div class="form-group control-group">
                                        <label class="col-md-4 control-label">Predicate Context</label>
                                        <div class="controls col-md-8">
                                            <input class="form-control" type="text" disabled ng-model="existingContext.name">
                                        </div>
                                    </div>
                                    <div class="form-group control-group">
                                        <label class="col-md-4 control-label">Predicate Description</label>
                                        <div class="controls col-md-8">
                                            <input class="form-control" type="text" ng-change="setChanged()" ng-model="existingPredicate.description">
                                        </div>
                                    </div>
                                    <div class="form-group control-group">
                                        <label class="col-md-4 control-label">Predicate Assertion</label>
                                        <div class="controls col-md-8">
                                            <input class="form-control" type="text" ng-change="setChanged()" ng-model="existingPredicate.assertion">
                                        </div>
                                    </div>
                                    <div class="form-group control-group">
                                        <label class="col-md-4 control-label">Conditional Usage</label>
                                        <div class="col-md-4">
                                            <select class="form-control" ng-class="{'form-control-invalid': !existingPredicate.trueUsage}" ng-change="setChanged()" ng-model="existingPredicate.trueUsage" ng-options="usage for usage in config.conditionalUsage" />
                                            <span style="color:red;" ng-show="!existingPredicate.trueUsage">Empty true usage</span>
                                        </div>
                                        <div class="col-md-4">
                                            <select class="form-control" ng-class="{'form-control-invalid': !existingPredicate.falseUsage}" ng-change="setChanged()" ng-model="existingPredicate.falseUsage" ng-options="usage for usage in config.conditionalUsage" />
                                            <span style="color:red;" ng-show="!existingPredicate.falseUsage">Empty true usage</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div class="modal-footer" style="padding-top:5px">
            <button type="button" class="btn btn-raised btn-warning btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span></button>
            <button type="button" class="btn btn-raised btn-success btn-sm" ng-disabled="!changed || !existingPredicate || !existingPredicate.trueUsage || !existingPredicate.falseUsage" ng-click="saveclose()"><span><i class="fa fa-check fa-fw">&nbsp; </i>Save</span></button>
        </div>
    </script>
    <script type="text/ng-template" id="GlobalConformanceStatementCtrl.html">
        <div class="modal-header">
            <h3 class="header4">Conformance Statements</h3>
        </div>

        <div class="modal-body">
            <form role="form">
                <div class="col-md-12">
                    <span ng-show="!contextKey" style="color:red;">No selected Context. </span>
                    <span style="color:blue;">In order to select Context, please do DoubleClick for message or group in a message tree.</span>
                </div>
                <div class="col-md-3">
                    <div class="panel panel-default">
                        <div class="panel-heading">Message Tree
                        </div>
                        <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                            <table class="table table-striped">
                                <tbody ng-repeat="data in treeDataForMessage" ng-include="'message_tree_item.html'">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="panel panel-default">
                        <div class="panel-heading">Conformance Statement Builder</div>
                        <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                            <span class="pull-right">
                            <div class="btn-group btn-group-sm" data-toggle="buttons">
                                <label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Free'; newConstraint.constraintId = calNextCSID(igdocument.metaData.ext, selectedMessage.structID);" ng-class="{'active':constraintType === 'Free'}">
                                    <input type="radio" ng-value="constraintType">Add new Free-Text Conf.Statement
                                </label>
                                <label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Plain'; newConstraint.constraintId = calNextCSID(igdocument.metaData.ext, selectedMessage.structID);" ng-class="{'active':constraintType === 'Plain'}">
                                    <input type="radio" ng-value="constraintType">Add New Plain Conf.Statement
                                </label>
                                <label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Complex'; newComplexConstraintId = calNextCSID(igdocument.metaData.ext, selectedMessage.structID);" ng-class="{'active':constraintType === 'Complex'}">
                                    <input type="radio" ng-value="constraintType">Add New Complex Conf.Statement
                                </label>
                            </div>
                        </span>
                            <table class="table table-striped table-bordered" ng-show="constraintType === 'Free'">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-2">ID</th>
                                        <th class="col-md-8">Free-Text (Not supported by validation tool)</th>
                                        <th class="col-md-2"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="col-md-2">
                                            <input class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintID(newConstraint)}" ng-model="newConstraint.constraintId" type="text" />
                                            <span style="color:red;" ng-show="isEmptyConstraintID(newConstraint)">ID Empty</span>
                                        </td>
                                        <td class="col-md-8">
                                            <input class="form-control" ng-model="newConstraint.freeText" type="text" />
                                        </td>
                                        <td class="col-md-2" align="center">
                                            <button class="btn btn-raised btn-info btn-xxs" ng-click="initConformanceStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                            <button class="btn btn-raised btn-primary btn-xxs" ng-click="addFreeTextConformanceStatement();"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <table class="table table-striped table-bordered" ng-show="constraintType === 'Plain'">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-2">ID</th>
                                        <th class="col-md-2">Node</th>
                                        <th class="col-md-2">Verb</th>
                                        <th class="col-md-2">Constraint Pattern</th>
                                        <th class="col-md-2">Value</th>
                                        <th class="col-md-2"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="col-md-2">
                                            <input class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintID(newConstraint)}" ng-model="newConstraint.constraintId" type="text" />
                                            <span style="color:red;" ng-show="isEmptyConstraintID(newConstraint)">ID Empty</span>
                                        </td>
                                        <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="firstNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterNodeDrop'}">
                                            <div ng-show="draggingStatus == 'ContextTreeNodeDragging'">
                                                <span style="color:red;" class="blink_me">You can drop here!!</span>
                                            </div>
                                            <div ng-show="newConstraint.location_1">
                                                <span>
                                    <span ng-repeat="info in newConstraint.pathInfoSet_1">
                                        <span ng-show="$index == 1 && info.isInstanceNumberEditable">
                                            {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">
                                            {{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">
                                            .{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                            .{{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                            ({{info.nodeName}})
                                        </span>
                                                </span>
                                                </span>
                                            </div>
                                            <div ng-show="!newConstraint.location_1">
                                                <span style="color:red;">Drop the node!</span>
                                            </div>
                                        </td>
                                        <td class="col-md-2">
                                            <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintVerb(newConstraint)}" ng-model="newConstraint.verb" ng-options="constraintVerb for constraintVerb in config.constraintVerbs | orderBy:'toString()'" />
                                            <span style="color:red;" ng-show="isEmptyConstraintVerb(newConstraint)">Empty verb</span>
                                        </td>
                                        <td class="col-md-2">
                                            <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintPattern(newConstraint)}" ng-model="newConstraint.contraintType" ng-options="contraintType for contraintType in config.constraintTypes | orderBy:'toString()'" />
                                            <span style="color:red;" ng-show="isEmptyConstraintPattern(newConstraint)">Empty constraint pattern</span>
                                        </td>
                                        <td class="col-md-2" ng-hide="newConstraint.contraintType == 'identical to another node' ||
                                     newConstraint.contraintType == 'equal to another node' ||
                                     newConstraint.contraintType == 'not-equal to another node' ||
                                     newConstraint.contraintType == 'greater than another node' ||
                                     newConstraint.contraintType == 'equal to or greater than another node' ||
                                     newConstraint.contraintType == 'less than another node' ||
                                     newConstraint.contraintType == 'equal to or less than another node'">
                                            <span ng-show="newConstraint.contraintType == 'a literal value' ||
                                           newConstraint.contraintType == 'equal to' ||
                                           newConstraint.contraintType == 'not-equal to' ||
                                           newConstraint.contraintType == 'greater than' ||
                                           newConstraint.contraintType == 'equal to or greater than' ||
                                           newConstraint.contraintType == 'less than' ||
                                           newConstraint.contraintType == 'equal to or less than'">
                                <input class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}" ng-model="newConstraint.value" type="text"/>
                                <span ng-show="newConstraint.contraintType == 'a literal value'">Case Insensitive: </span>
                                            <input ng-show="newConstraint.contraintType == 'a literal value'" type="checkbox" ng-model="newConstraint.ignoreCase" />
                                            <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty value</span>
                                            </span>
                                            <span ng-show="newConstraint.contraintType == 'one of list values'">
                                <input class="form-control"
                                       ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}"
                                       ng-model="newConstraint.value"
                                       placeholder="Comma-Separated Values(CSV)"
                                       type="text"/>
                                <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty list value</span>
                                            </span>
                                            <span ng-show="newConstraint.contraintType == 'formatted value'">
                                <select class="form-control"
                                        ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}"
                                        ng-model="newConstraint.value"
                                        ng-options="predefinedFormat for predefinedFormat in config.predefinedFormats | orderBy:'toString()'"/>
                                <div ng-show="newConstraint.value === 'Regular expression'">
                                    <input class="form-control"
                                           ng-class="{'form-control-invalid': isEmptyConstraintValue2(newConstraint)}"
                                           ng-model="newConstraint.value2" placeholder="Regular expression" type="text"/>
                                </div>
                                <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty format</span>
                                            <span style="color:red;" ng-show="newConstraint.value === 'Regular expression' && isEmptyConstraintValue2(newConstraint)">Empty regular expression</span>
                                            </span>
                                            <span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                                <span>ValueSet ID: </span>
                                            <select class="form-control form-control-short" ng-class="{'form-control-invalid': isEmptyConstraintValueSet(newConstraint)}" ng-model="newConstraint.valueSetId">
                                    <option ng-repeat="table in tables track by table.id|orderBy:'+bindingIdentifier'" value="{{table.bindingIdentifier}}">
                                        {{::table.bindingIdentifier}}
                                    </option>
                                </select>
                                            <span style="color:red;" ng-show="isEmptyConstraintValueSet(newConstraint)">Empty valueset</span>
                                            <br/>
                                            <span>BindingStrength: </span>
                                            <select name="bindingStrength" class="form-control form-control-short" ng-model="newConstraint.bindingStrength">
                                    <option value="R">R</option>
                                    <option value="S">S</option>
                                    <option value="U">U</option>
                                </select>
                                            <br/>
                                            <span>BindingLocation: </span>
                                            <input class="form-control form-control-short" ng-model="newConstraint.bindingLocation" type="text" />
                                            </span>
                                        </td>
                                        <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="secondNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterSecondNodeDrop'}" ng-show="newConstraint.contraintType == 'identical to another node' ||
                                     newConstraint.contraintType == 'equal to another node' ||
                                     newConstraint.contraintType == 'not-equal to another node' ||
                                     newConstraint.contraintType == 'greater than another node' ||
                                     newConstraint.contraintType == 'equal to or greater than another node' ||
                                     newConstraint.contraintType == 'less than another node' ||
                                     newConstraint.contraintType == 'equal to or less than another node'">
                                            <div ng-show="draggingStatus == 'ContextTreeNodeDragging'">
                                                <span style="color:red;" class="blink_me">You can drop Here!!</span>
                                            </div>
                                            <div ng-show="newConstraint.location_2">
                                                <span>
                                    <span ng-repeat="info in newConstraint.pathInfoSet_2">
                                        <span ng-show="$index == 1 && info.isInstanceNumberEditable">
                                            {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">
                                            {{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">
                                            .{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                            .{{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                            ({{info.nodeName}})
                                        </span>
                                                </span>
                                                </span>
                                            </div>
                                            <div ng-show="!newConstraint.location_2">
                                                <span style="color:red;">Drop the node!</span>
                                            </div>
                                        </td>
                                        <td class="col-md-2" align="center">
                                            <button class="btn btn-raised btn-info btn-xxs" ng-click="addConformanceStatement();" ng-disabled="erorrForConfStatement(newConstraint, targetPlainId, 'message', selectedNode)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                            <button class="btn btn-raised btn-info btn-xxs" ng-click="initConformanceStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-2">ID</th>
                                        <th class="col-md-2">Complex Type</th>
                                        <th class="col-md-1" style="width: 4.1667%"></th>
                                        <th ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5">Constraints</th>
                                        <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">First Constraint</th>
                                        <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" style="width: 4.1667%"></th>
                                        <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">Second Constraint</th>
                                        <th class="col-md-2"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="col-md-2">
                                            <input class="form-control" ng-class="{'form-control-invalid': !newComplexConstraintId || newComplexConstraintId == ''}" ng-model="newComplexConstraintId" type="text" />
                                            <span style="color:red;" ng-show="!newComplexConstraintId || newComplexConstraintId == ''">ID Empty</span>
                                        </td>
                                        <td class="col-md-2">
                                            <select class="form-control" ng-class="{'form-control-invalid': isEmptyCompositeType(compositeType)}" ng-model="compositeType">
                                        <option value="AND">AND</option>
                                        <option value="OR">OR</option>
                                        <option value="XOR">XOR</option>
                                        <option value="IFTHEN">IFTHEN(IMPLY)</option>
                                        <option value="FORALL">FORALL(True, if all assertions are true)</option>
                                        <option value="EXIST">EXIST(True, if one of assertions is true)</option>
                                    </select>
                                            <span style="color:red;" ng-show="isEmptyCompositeType(compositeType)">Empty composite type</span>
                                        </td>
                                        <td class="col-md-1" align="center" style="width: 4.1667%">
                                            <span ng-show="compositeType == 'IFTHEN'">IF</span>
                                            <span ng-show="compositeType == 'FORALL'">FORALL</span>
                                            <span ng-show="compositeType == 'EXIST'">EXIST</span>
                                        </td>
                                        <td ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5" data-drop="true" ng-model='constraints' jqyoui-droppable="{multiple:true}" data-jqyoui-options>
                                            <span style="color:red;" ng-show="constraints.length < 2">Drop two more constraints here!</span>
                                            <li ng-repeat="c in constraints" ng-show="constraints.length > 0" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="constraints" jqyoui-draggable="{animate:true}">{{c.description}}</li>
                                        </td>
                                        <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
                                            <span style="color:red;" ng-hide="firstConstraint">Drop the first constraint here!</span>
                                            <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
                                        </td>
                                        <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" align="center" style="width: 4.1667%">
                                            <span ng-show="compositeType == 'AND'">AND</span>
                                            <span ng-show="compositeType == 'OR'">OR</span>
                                            <span ng-show="compositeType == 'XOR'">XOR</span>
                                            <span ng-show="compositeType == 'IFTHEN'">THEN</span>
                                        </td>
                                        <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
                                            <span style="color:red;" ng-hide="secondConstraint">Drop the second constraint here!</span>
                                            <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
                                        </td>
                                        <td class="col-md-1" align="center">
                                            <button class="btn btn-raised btn-info btn-xxs" ng-click="initComplexStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                            <button class="btn btn-raised btn-primary btn-xxs" ng-click="addComplexConformanceStatement()" ng-disabled="erorrForComplexConfStatement(newComplexConstraintId, targetComplexId, compositeType, firstConstraint, secondConstraint, constraints)">
                                        <span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span>
                                    </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div ng-show="contextKey">
                    <div class="col-md-12" style="margin-top: 10px">
                        <div class="panel panel-default">
                            <div class="panel-heading">Conformance Statements of {{selectedContextNode.name}}</div>
                            <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                <table st-table="displayed" st-safe-src="selectedContextNode.conformanceStatements" class="table table-striped table-bordered">
                                    <thead>
                                        <tr class="tbl-header">
                                            <th ng-show="constraintType === 'Complex'" class="col-md-1" style="width: 4.1667%">Draggable</th>
                                            <th st-sort="constraintId" class="col-md-2">ID</th>
                                            <th class="col-md-8">Description (
                                                <input type="checkbox" ng-model="viewAssertion"> view assertion )
                                            </th>
                                            <th class="col-md-1"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="c in displayed">
                                            <td ng-show="constraintType === 'Complex'" class="col-md-1" align="center" style="width: 4.1667%">
                                                <i ng-show="c.assertion" class="glyphicon glyphicon-move cursorMove" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="c" jqyoui-draggable="{placeholder:'keep',animate:true}"></i>
                                            </td>
                                            <td class="col-md-2">
                                                <input class="form-control" ng-model="c.constraintId" ng-change="setChanged();" type="text" />
                                                <span style="color:red;" ng-show="isEmptyConstraintID(c)">ID Empty</span>
                                            </td>
                                            <td class="col-md-8">
                                                <input class="form-control" ng-model="c.description" ng-change="setChanged()" type="text" />
                                                <input ng-show="viewAssertion" class="form-control" ng-model="c.assertion" ng-change="setChanged()" type="text" />
                                            </td>
                                            <td class="col-md-1" align="center">
                                                <button class="btn btn-raised btn-danger btn-xxs" ng-click="deleteConformanceStatement(c)"><span><i class="fa fa-trash fa-fw">&nbsp; </i>Del</span></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div class="modal-footer" style="padding-top:5px">
            <button type="button" class="btn btn-raised btn-warning btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">
        &nbsp; </i>Cancel</span></button>
            <button type="button" class="btn btn-raised btn-success btn-sm" ng-disabled="!changed" ng-click="saveclose()"><span><i class="fa fa-check fa-fw">
            &nbsp; </i>Save</span></button>
        </div>
    </script>
    <script type="text/ng-template" id="message_tree_item.html">
        <tr style="width:100%">
            <td ng-if="data.folderClass">
                <div ng-if="data.type === 'message' || data.type === 'group' || data.type === 'segmentRef'">
                    <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="data.type === 'field' || data.type === 'component'">
                    <div ng-if="data.child.components &&  data.child.components.length > 0">
                        <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
                    </div>
                    <div ng-if="!data.child.components ||  data.child.components.length == 0">
                        <i class="fa fa-check" />
                    </div>
                </div>
            </td>
            <td ng-if="!data.folderClass">
                <div ng-if="data.type === 'message' || data.type === 'group' || data.type === 'segmentRef'">
                    <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="data.type === 'field' || data.type === 'component'">
                    <div ng-if="data.child.components &&  data.child.components.length > 0">
                        <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
                    </div>
                    <div ng-if="!data.child.components ||  data.child.components.length == 0">
                        <i class="fa fa-check" />
                    </div>
                </div>
            </td>
            <td>
                <div ng-if="data.type === 'message'">
                    <div ng-show="contextKey == data.contextKey">
                        <div ng-dblclick="selectContext(data);" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                            <span class="label label-success label-icon">M</span>
                            <span style="font-weight:bold;color:blue;">&nbsp;{{::data.name}}</span>
                        </div>
                    </div>
                    <div ng-hide="contextKey == data.contextKey">
                        <div ng-dblclick="selectContext(data);">
                            <span class="label label-success label-icon">M</span>
                            <span style="color:lightskyblue;">&nbsp;{{::data.name}}</span>
                        </div>
                    </div>

                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.children" ng-include="'message_tree_item.html'"></div>
                        </table>
                    </div>
                </div>
                <div ng-if="data.type === 'group'">
                    <div ng-show="contextKey == data.contextKey">
                        <div ng-dblclick="selectContext(data);" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                            <span class="label label-success label-icon">G</span>
                            <span style="font-weight:bold;color:blue;">&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::data.name}}</span>
                        </div>
                    </div>
                    <div ng-hide="contextKey == data.contextKey">
                        <div ng-dblclick="selectContext(data);">
                            <span class="label label-success label-icon">G</span>
                            <span style="color:lightskyblue;">&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::data.name}}</span>
                        </div>
                    </div>

                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.children" ng-include="'message_tree_item.html'"></div>
                        </table>
                    </div>
                </div>
                <div ng-if="data.type === 'segmentRef'">
                    <div ng-show="contextKey == data.contextKey">
                        <div data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                            <span class="label label-segment label-icon">S</span>
                            <span style="font-weight:bold;">&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::segmentsMap[data.ref.id].name}}</span>
                        </div>
                    </div>
                    <div ng-hide="contextKey == data.contextKey">
                        <div>
                            <span class="label label-segment label-icon">S</span>
                            <span style="color:#bebebe">&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::segmentsMap[data.ref.id].name}}</span>
                        </div>
                    </div>

                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.segment.fields" ng-include="'message_tree_item.html'"></div>
                        </table>
                    </div>
                </div>
                <div ng-if="data.type === 'field'">
                    <div ng-show="contextKey == data.contextKey">
                        <div data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                            <span class="label label-field label-icon">F</span>
                            <span style="font-weight:bold;">&nbsp;{{::data.position}}. &nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}] {{::data.name}}</span>
                        </div>
                    </div>
                    <div ng-hide="contextKey == data.contextKey">
                        <div>
                            <span class="label label-field label-icon">F</span>
                            <span style="color:#bebebe">&nbsp;{{::data.position}}. &nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}] {{::data.name}}</span>
                        </div>
                    </div>
                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.child.components" ng-include="'message_tree_item.html'"></div>
                        </table>
                    </div>
                </div>
                <div ng-if="data.type === 'component'">
                    <div ng-show="contextKey == data.contextKey">
                        <div data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                            <span class="label label-component label-icon">C</span>
                            <span style="font-weight:bold;">&nbsp;{{::data.position}}. &nbsp;[{{::data.usage}}] {{::data.name}}</span>
                        </div>
                    </div>
                    <div ng-hide="contextKey == data.contextKey">
                        <div ">
                        <span class="label label-component label-icon ">C</span>
                        <span style="color:#bebebe ">&nbsp;{{::data.position}}. &nbsp;[{{::data.usage}}] {{::data.name}}</span>
                    </div>
                </div>
                <div id="expanded-data " ng-if="data.childrenVisible ">
                    <table class="table table-striped " id="nested-table ">
                        <div ng-repeat="data in data.child.components " ng-include=" 'message_tree_item.html' "></div>
                    </table>
                </div>
            </div>
        </td>
    </tr>
</script>
<script type="text/ng-template " id="message_tree_Predicate_item.html ">
    <tr style="width:100% ">
        <td ng-if="data.folderClass ">
            <div ng-if="data.type==='message' || data.type==='group' || data.type==='segmentRef' ">
                <i class="fa " ng-class="data.folderClass " ng-click="toggleChildren(data) "></i>
            </div>
            <div ng-if="data.type==='field' || data.type==='component' ">
                <div ng-if="data.child.components && data.child.components.length> 0">
                            <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
                        </div>
                        <div ng-if="!data.child.components ||  data.child.components.length == 0">
                            <i class="fa fa-check" />
                        </div>
                    </div>
            </td>
            <td ng-if="!data.folderClass">
                <div ng-if="data.type === 'message' || data.type === 'group' || data.type === 'segmentRef'">
                    <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="data.type === 'field' || data.type === 'component'">
                    <div ng-if="data.child.components &&  data.child.components.length > 0">
                        <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
                    </div>
                    <div ng-if="!data.child.components ||  data.child.components.length == 0">
                        <i class="fa fa-check" />
                    </div>
                </div>
            </td>
            <td>
                <div ng-if="data.type === 'message'">
                    <div ng-show="contextKey == data.contextKey">
                        <div ng-dblclick="selectContext(data);" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                            <span class="label label-success label-icon">M</span>
                            <span style="font-weight:bold;color:blue;">&nbsp;{{::data.name}}</span>
                        </div>
                    </div>
                    <div ng-hide="contextKey == data.contextKey">
                        <div ng-dblclick="selectContext(data);">
                            <span class="label label-success label-icon">M</span>
                            <span style="color:lightskyblue;">&nbsp;{{::data.name}}</span>
                        </div>
                    </div>

                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.children" ng-include="'message_tree_Predicate_item.html'"></div>
                        </table>
                    </div>
                </div>
                <div ng-if="data.type === 'group'">
                    <div ng-if="selectedNode.path.startsWith(data.positionPath)">
                        <div ng-show="contextKey == data.contextKey">
                            <div ng-dblclick="selectContext(data);" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                                <span class="label label-success label-icon">G</span>
                                <span style="font-weight:bold;color:blue;">&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::data.name}}</span>
                            </div>
                        </div>
                        <div ng-hide="contextKey == data.contextKey">
                            <div ng-dblclick="selectContext(data);">
                                <span class="label label-success label-icon">G</span>
                                <span style="color:lightskyblue;">&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::data.name}}</span>
                            </div>
                        </div>
                    </div>
                    <div ng-if="!selectedNode.path.startsWith(data.positionPath)">
                        <div ng-show="contextKey == data.contextKey">
                            <div data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                                <span class="label label-success label-icon">G</span>
                                <span style="font-weight:bold;">&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::data.name}}</span>
                            </div>
                        </div>
                        <div ng-hide="contextKey == data.contextKey">
                            <div>
                                <span class="label label-success label-icon">G</span>
                                <span style="color:#bebebe">&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::data.name}}</span>
                            </div>
                        </div>
                    </div>
                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.children" ng-include="'message_tree_Predicate_item.html'"></div>
                        </table>
                    </div>
                </div>
                <div ng-if="data.type === 'segmentRef'">
                    <div ng-show="contextKey == data.contextKey">
                        <div data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                            <span class="label label-segment label-icon">S</span>
                            <span style="font-weight:bold;">&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::segmentsMap[data.ref.id].name}}</span>
                        </div>
                    </div>
                    <div ng-hide="contextKey == data.contextKey">
                        <div>
                            <span class="label label-segment label-icon">S</span>
                            <span style="color:#bebebe">&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::segmentsMap[data.ref.id].name}}</span>
                        </div>
                    </div>

                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.segment.fields" ng-include="'message_tree_Predicate_item.html'"></div>
                        </table>
                    </div>
                </div>
                <div ng-if="data.type === 'field'">
                    <div ng-show="contextKey == data.contextKey">
                        <div data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                            <span class="label label-field label-icon">F</span>
                            <span style="font-weight:bold;">&nbsp;{{::data.position}}. &nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}] {{::data.name}}</span>
                        </div>
                    </div>
                    <div ng-hide="contextKey == data.contextKey">
                        <div>
                            <span class="label label-field label-icon">F</span>
                            <span style="color:#bebebe">&nbsp;{{::data.position}}. &nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}] {{::data.name}}</span>
                        </div>
                    </div>
                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.child.components" ng-include="'message_tree_Predicate_item.html'"></div>
                        </table>
                    </div>
                </div>
                <div ng-if="data.type === 'component'">
                    <div ng-show="contextKey == data.contextKey">
                        <div data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                            <span class="label label-component label-icon">C</span>
                            <span style="font-weight:bold;">&nbsp;{{::data.position}}. &nbsp;[{{::data.usage}}] {{::data.name}}</span>
                        </div>
                    </div>
                    <div ng-hide="contextKey == data.contextKey">
                        <div ">
                    <span class="label label-component label-icon ">C</span>
                    <span style="color:#bebebe ">&nbsp;{{::data.position}}. &nbsp;[{{::data.usage}}] {{::data.name}}</span>
                </div>
            </div>
            <div id="expanded-data " ng-if="data.childrenVisible ">
                <table class="table table-striped " id="nested-table ">
                    <div ng-repeat="data in data.child.components " ng-include=" 'message_tree_Predicate_item.html' "></div>
                </table>
            </div>
            </div>
        </td>
    </tr>
</script>

<script type="text/ng-template " id="ConformanceStatementSegmentCtrl.html ">
    <div class="modal-header ">
        <h3 class="header4 ">Conformance statement for {{::segment.name}}</h3>
    </div>
    <div class="modal-body ">
        <form role="form ">
            <div class="col-md-3 ">
                <div class="panel panel-default ">
                    <div class="panel-heading ">Segment Tree</div>
                    <div class="panel-body " style="min-height:200px; max-height:200px;overflow-y: scroll; ">
                        <table class="table table-striped ">
                            <tbody ng-repeat="data in treeDataForContext " ng-include=" 'segment_tree_item.html' ">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-9 ">
                <div class="panel panel-default">
                    <div class="panel-heading ">Conformance Statements Builder</div>
                    <div class="panel-body " style="min-height:200px; max-height:200px;overflow-y: scroll; ">
                        <span class="pull-right">
                            	<div class="btn-group btn-group-sm" data-toggle="buttons">
                                	<label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Free';" ng-class="{'active':constraintType === 'Free'}">
                                    	<input type="radio" ng-value="constraintType">Add new Free-Text Constraint
                                	</label>
                                	<label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Plain';" ng-class="{'active':constraintType === 'Plain'}">
                                    	<input type="radio" ng-value="constraintType">Add new plain Constraint
                                	</label>
                                	<label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Complex';" ng-class="{'active':constraintType === 'Complex'}">
                                    	<input type="radio" ng-value="constraintType">Add new complex Constraint
                                	</label>
                            	</div>
                        </span>

                        <table class="table table-striped table-bordered " ng-show="constraintType==='Free' ">
                            <thead>
                            <tr class="tbl-header ">
                                <th class="col-md-2 ">ID</th>
                                <th class="col-md-8 ">Free-Text (Not supported by validation tool)</th>
                                <th class="col-md-2 "></th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td class="col-md-2 ">
                                    <input class="form-control " ng-class="{ 'form-control-invalid': isEmptyConstraintID(newConstraint)} " ng-model="newConstraint.constraintId " type="text "/>
                                    <span style="color:red; " ng-show="isEmptyConstraintID(newConstraint) ">ID Empty</span>
                                </td>
                                <td class="col-md-8 ">
                                    <input class="form-control " ng-model="newConstraint.freeText " type="text "/>
                                </td>
                                <td class="col-md-2 " align="center ">
                                    <button class="btn btn-raised btn-info btn-xxs " ng-click="initConformanceStatement() "><span><i class="fa fa-refresh fa-fw ">&nbsp; </i>Reset</span></button>
                                    <button class="btn btn-raised btn-primary btn-xxs " ng-click="addFreeTextConformanceStatement(); "><span><i class="fa fa-plus fa-fw ">&nbsp; </i>Add</span></button>
                                </td>
                            </tr>
                            </tbody>
                        </table>


                        <table class="table table-striped table-bordered " ng-show="constraintType==='Plain' ">
                            <thead>
                            <tr class="tbl-header ">
                                <th class="col-md-2 ">ID</th>
                                <th class="col-md-2 ">Node</th>
                                <th class="col-md-2 ">Verb</th>
                                <th class="col-md-2 ">Constraint Pattern</th>
                                <th class="col-md-2 ">Value</th>
                                <th class="col-md-2 "></th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td class="col-md-2 ">
                                    <input class="form-control " ng-class="{ 'form-control-invalid': isEmptyConstraintID(newConstraint)} " ng-model="newConstraint.constraintId " type="text "/>
                                    <span style="color:red; " ng-show="isEmptyConstraintID(newConstraint) ">ID Empty</span>
                                </td>
                                <td class="col-md-2 " data-drop="true "  data-jqyoui-options ng-model="firstNodeData " jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterNodeDrop'} ">
                                    <div ng-show="draggingStatus=='ContextTreeNodeDragging' ">
                                        <span style="color:red; " class="blink_me ">You can drop here!!</span>
                                    </div>
                                    <div ng-show="newConstraint.location_1 ">
                                        <span>{{::segment.name}}-</span>
                                        <span>
                                    <span ng-repeat="info in newConstraint.pathInfoSet_1 ">
                                        <span ng-show="$index==1 && info.isInstanceNumberEditable ">
                                            {{info.locationName}}[<input class="form-control-veryshort " ng-model="info.instanceNumber " ng-change="generateFirstPositionAndLocationPath(); " type="text "/>]
                                        </span>
                                        <span ng-show="$index==1 && !info.isInstanceNumberEditable ">
                                            {{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                        <span ng-show="$index> 1 && info.isInstanceNumberEditable"> .{{info.locationName}}[
                            <input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text" />]
                            </span>
                            <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                            .{{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                            <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                            ({{info.nodeName}})
                                        </span>
                            </span>
                            </span>
                        </div>
                        <div ng-show="!newConstraint.location_1">
                            <span style="color:red;">Drop the node!</span>
                        </div>
            </td>
            <td class="col-md-2">
                <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintVerb(newConstraint)}" ng-model="newConstraint.verb" ng-options="constraintVerb for constraintVerb in config.constraintVerbs | orderBy:'toString()'" />
                <span style="color:red;" ng-show="isEmptyConstraintVerb(newConstraint)">Empty verb</span>
            </td>
            <td class="col-md-2">
                <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintPattern(newConstraint)}" ng-model="newConstraint.contraintType" ng-options="contraintType for contraintType in config.constraintTypes | orderBy:'toString()'" />
                <span style="color:red;" ng-show="isEmptyConstraintPattern(newConstraint)">Empty contraint pattern</span>
            </td>
            <td class="col-md-2" ng-hide="newConstraint.contraintType == 'identical to another node' ||
                                     newConstraint.contraintType == 'equal to another node' ||
                                     newConstraint.contraintType == 'not-equal to another node' ||
                                     newConstraint.contraintType == 'greater than another node' ||
                                     newConstraint.contraintType == 'equal to or greater than another node' ||
                                     newConstraint.contraintType == 'less than another node' ||
                                     newConstraint.contraintType == 'equal to or less than another node'">
                <span ng-show="newConstraint.contraintType == 'a literal value' ||
                                           newConstraint.contraintType == 'equal to' ||
                                           newConstraint.contraintType == 'not-equal to' ||
                                           newConstraint.contraintType == 'greater than' ||
                                           newConstraint.contraintType == 'equal to or greater than' ||
                                           newConstraint.contraintType == 'less than' ||
                                           newConstraint.contraintType == 'equal to or less than'">
                                <input class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}" ng-model="newConstraint.value" type="text"/>
                                <span ng-show="newConstraint.contraintType == 'a literal value'">Case Insensitive: </span>
                <input ng-show="newConstraint.contraintType == 'a literal value'" type="checkbox" ng-model="newConstraint.ignoreCase" />
                <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty value</span>
                </span>
                <span ng-show="newConstraint.contraintType == 'one of list values'">
                                <input class="form-control" ng-model="newConstraint.value" placeholder="Comma-Separated Values(CSV)" type="text"/>
                                <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty list value</span>
                </span>
                <span ng-show="newConstraint.contraintType == 'formatted value'">
                                <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}"
                                        ng-model="newConstraint.value" ng-options="predefinedFormat for predefinedFormat in config.predefinedFormats | orderBy:'toString()'" />
                                <div ng-show="newConstraint.value === 'Regular expression'">
                                    <input class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintValue2(newConstraint)}" ng-model="newConstraint.value2" placeholder="Regular expression" type="text"/>
                                </div>
                                <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty format</span>
                <span style="color:red;" ng-show="newConstraint.value === 'Regular expression' &&  isEmptyConstraintValue2(newConstraint)">Empty regular expression</span>
                </span>
                <span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                                <span>ValueSet ID: </span>
                <select class="form-control form-control-short" ng-class="{'form-control-invalid': isEmptyConstraintValueSet(newConstraint)}" ng-model="newConstraint.valueSetId">
                                    <option ng-repeat="table in tables|orderBy:'+bindingIdentifier'" value="{{table.bindingIdentifier}}">{{getTableLabel(tablesMap[table.id])}}</option>
                                </select>
                <span style="color:red;" ng-show="isEmptyConstraintValueSet(newConstraint)">Empty valueset</span>
                <br/>
                <span>BindingStrength: </span>
                <select name="bindingStrength" class="form-control form-control-short" ng-model="newConstraint.bindingStrength">
                                    <option value="R">R</option>
                                    <option value="S">S</option>
                                    <option value="U">U</option>
                                </select>
                <br/>
                <span>BindingLocation: </span>
                <input class="form-control form-control-short" ng-model="newConstraint.bindingLocation" type="text" />
                </span>
            </td>
            <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="secondNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterSecondNodeDrop'}" ng-show="newConstraint.contraintType == 'identical to another node' ||
                                     newConstraint.contraintType == 'equal to another node' ||
                                     newConstraint.contraintType == 'not-equal to another node' ||
                                     newConstraint.contraintType == 'greater than another node' ||
                                     newConstraint.contraintType == 'equal to or greater than another node' ||
                                     newConstraint.contraintType == 'less than another node' ||
                                     newConstraint.contraintType == 'equal to or less than another node'">
                <div ng-show="draggingStatus == 'ContextTreeNodeDragging'">
                    <span style="color:red;" class="blink_me">You can drop Here!!</span>
                </div>
                <div ng-show="newConstraint.location_2">
                    <span>
                                    <span>{{::segment.name}}-</span>
                    <span ng-repeat="info in newConstraint.pathInfoSet_2">
                                        <span ng-show="$index == 1 && info.isInstanceNumberEditable">
                                            {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                        </span>
                    <span ng-show="$index == 1 && !info.isInstanceNumberEditable">
                                            {{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                    <span ng-show="$index > 1 && info.isInstanceNumberEditable">
                                            .{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                        </span>
                    <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                            .{{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                    <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                            ({{info.nodeName}})
                                        </span>
                    </span>
                    </span>
                </div>
                <div ng-show="!newConstraint.location_2">
                    <span style="color:red;">Drop the node!</span>
                </div>
            </td>
            <td class="col-md-1" align="center">
                <button class="btn btn-raised btn-info btn-xxs" ng-click="initConformanceStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                <button class="btn btn-raised btn-primary btn-xxs" ng-click="addConformanceStatement();" ng-disabled="erorrForConfStatement(newConstraint, targetPlainId, 'segment', selectedNode)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
            </td>
        </tr>
        </tbody>
        </table>
        <table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
            <thead>
                <tr class="tbl-header">
                    <th class="col-md-2">ID</th>
                    <th class="col-md-2">Complex Type</th>
                    <th class="col-md-1" style="width: 4.1667%"></th>
                    <th ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5">Constraints</th>
                    <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">First Constraint</th>
                    <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" style="width: 4.1667%"></th>
                    <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">Second Constraint</th>
                    <th class="col-md-2"></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="col-md-2">
                        <input class="form-control" ng-class="{'form-control-invalid': isEmptyComplexConstraintID(newComplexConstraintId)}" ng-model="newComplexConstraintId" type="text" />
                        <span style="color:red;" ng-show="isEmptyComplexConstraintID(newComplexConstraintId)">ID Empty</span>
                    </td>
                    <td class="col-md-2">
                        <select class="form-control" ng-class="{'form-control-invalid': isEmptyCompositeType(compositeType)}" ng-model="compositeType">
                                        <option value="AND">AND</option>
                                        <option value="OR">OR</option>
                                        <option value="XOR">XOR</option>
                                        <option value="IFTHEN">IFTHEN(IMPLY)</option>
                                        <option value="FORALL">FORALL(True, if all assertions are true)</option>
                                        <option value="EXIST">EXIST(True, if one of assertions is true)</option>
                                    </select>
                        <span style="color:red;" ng-show="isEmptyCompositeType(compositeType)">Empty composite type</span>
                    </td>
                    <td class="col-md-1" align="center" style="width: 4.1667%">
                        <span ng-show="compositeType == 'IFTHEN'">IF</span>
                        <span ng-show="compositeType == 'FORALL'">FORALL</span>
                        <span ng-show="compositeType == 'EXIST'">EXIST</span>
                    </td>
                    <td ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5" data-drop="true" ng-model='constraints' jqyoui-droppable="{multiple:true}" data-jqyoui-options>
                        <span style="color:red;" ng-show="constraints.length < 2">Drop two more constraints here!</span>
                        <li ng-repeat="c in constraints" ng-show="constraints.length > 0" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="constraints" jqyoui-draggable="{animate:true}">{{c.description}}</li>
                    </td>
                    <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
                        <span style="color:red;" ng-hide="firstConstraint">Drop the first constraint here!</span>
                        <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
                    </td>
                    <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" align="center" style="width: 4.1667%">
                        <span ng-show="compositeType == 'AND'">AND</span>
                        <span ng-show="compositeType == 'OR'">OR</span>
                        <span ng-show="compositeType == 'XOR'">XOR</span>
                        <span ng-show="compositeType == 'IFTHEN'">THEN</span>
                    </td>
                    <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
                        <span style="color:red;" ng-hide="secondConstraint">Drop the second constraint here!</span>
                        <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
                    </td>
                    <td class="col-md-1" align="center">
                        <button class="btn btn-raised btn-info btn-xxs" ng-click="initComplexStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                        <button class="btn btn-raised btn-primary btn-xxs" ng-click="addComplexConformanceStatement()" ng-disabled="erorrForComplexConfStatement(newComplexConstraintId, targetComplexId, compositeType, firstConstraint, secondConstraint, constraints)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                    </td>
                </tr>
            </tbody>
        </table>
        </div>
        </div>
        </div>
        <div class="col-md-12" style="margin-top: 10px">
            <div class="panel panel-default">
                <div class="panel-heading">List of Conformance Statements</div>
                <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                    <table st-table="displayed" st-safe-src="tempComformanceStatements" class="table table-striped table-bordered">
                        <thead>
                            <tr class="tbl-header">
                                <th ng-show="constraintType === 'Complex'" class="col-md-1" style="width: 4.1667%">Draggable</th>
                                <th st-sort="constraintId" class="col-md-2">ID</th>
                                <th class="col-md-8">Description (<input type="checkbox" ng-model="viewAssertion"> view assertion)</th>
                                <th class="col-md-1"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="c in displayed">
                                <td ng-show="constraintType === 'Complex'" class="col-md-1" align="center" style="width: 4.1667%">
                                    <i ng-show="c.assertion" class="glyphicon glyphicon-move cursorMove" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="c" jqyoui-draggable="{placeholder:'keep',animate:true}"></i>
                                </td>
                                <td class="col-md-2">
                                    <input class="form-control" ng-model="c.constraintId" ng-change="setChanged();" type="text" />
                                    <span style="color:red;" ng-show="isEmptyConstraintID(c)">ID Empty</span>
                                </td>
                                <td class="col-md-8">
                                    <input class="form-control" ng-model="c.description" ng-change="setChanged()" type="text" />
                                    <textarea ng-show="viewAssertion" class="form-control" ng-model="c.assertion" ng-change="setChanged()" />
                                </td>
                                <td class="col-md-1" align="center">
                                    <button class="btn btn-raised btn-danger btn-xxs" ng-click="deleteConformanceStatement(c)"><span><i class="fa fa-trash fa-fw">&nbsp; </i>Del</span></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        </form>
        </div>
        <div class="modal-footer" style="padding-top:5px">
            <button class="btn btn-raised btn-warning btn-sm" ng-click="ok()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Close</span></button>
            <button class="btn btn-raised btn-success btn-sm" ng-disabled="!changed" ng-click="saveclose()"><span><i class="fa fa-check fa-fw">&nbsp; </i>Save</span></button>
        </div>
    </script>
    <script type="text/ng-template" id="PredicateSegmentCtrl.html">
        <div class="modal-header">
            <h3 class="header4">Predicate for {{::segment.name}}.{{::selectedNode.position}}</h3>
        </div>
        <div class="modal-body">
            <form role="form">
                <div class="col-md-3">
                    <div class="panel panel-default">
                        <div class="panel-heading">Segment Tree</div>
                        <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                            <table class="table table-striped">
                                <tbody ng-repeat="data in treeDataForContext" ng-include="'segment_tree_Predicate_item.html'">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="col-md-9">
                    <div class="panel panel-default">
                        <div class="panel-heading">Constraint Builder</div>
                        <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                            <span class="pull-right">
                            	<div class="btn-group btn-group-sm" data-toggle="buttons">
                                	<label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Free';" ng-class="{'active':constraintType === 'Free'}">
                                    	<input type="radio" ng-value="constraintType">Add new Free-Text Constraint
                                	</label>
                                	<label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Plain';" ng-class="{'active':constraintType === 'Plain'}">
                                    	<input type="radio" ng-value="constraintType">Add new plain Constraint
                                	</label>
                                	<label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Complex';" ng-class="{'active':constraintType === 'Complex'}">
                                    	<input type="radio" ng-value="constraintType">Add new complex Constraint
                                	</label>
                            	</div>
                        	</span>

                            <table class="table table-striped table-bordered" ng-show="constraintType === 'Free'">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-10">Free-Text (Not supported by validation tool)</th>
                                        <th class="col-md-2"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="col-md-10">
                                            <input class="form-control" ng-model="newConstraint.freeText" type="text" />
                                        </td>
                                        <td class="col-md-2" align="center">
                                            <button class="btn btn-raised btn-info btn-xxs" ng-click="initPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                            <button class="btn btn-raised btn-primary btn-xxs" ng-click="addFreeTextPredicate();"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>


                            <table class="table table-striped table-bordered" ng-show="constraintType === 'Plain'">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-2">Node</th>
                                        <th class="col-md-2">Verb</th>
                                        <th class="col-md-2">Constraint Pattern</th>
                                        <th class="col-md-2">Value</th>
                                        <th class="col-md-2"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="firstNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterNodeDrop'}">
                                            <div ng-show="draggingStatus == 'ContextTreeNodeDragging'">
                                                <span style="color:red;" class="blink_me">You can drop here!!</span>
                                            </div>
                                            <div ng-show="newConstraint.location_1">
                                                <span>{{::segment.name}}-</span>
                                                <span>
                                    <span ng-repeat="info in newConstraint.pathInfoSet_1">
                                        <span ng-show="$index == 1 && info.isInstanceNumberEditable">
                                            {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">
                                            {{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">
                                            .{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                            .{{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                            ({{info.nodeName}})
                                        </span>
                                                </span>
                                                </span>
                                            </div>
                                            <div ng-show="!newConstraint.location_1">
                                                <span style="color:red;">Drop the node!</span>
                                            </div>
                                        </td>
                                        <td class="col-md-2">
                                            <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintVerb(newConstraint)}" ng-model="newConstraint.verb" ng-options="conditionalConstraintVerb for conditionalConstraintVerb in config.conditionalConstraintVerbs | orderBy:'toString()'"
                                            />
                                            <span style="color:red;" ng-show="isEmptyConstraintVerb(newConstraint)">Empty verb</span>
                                        </td>
                                        <td class="col-md-2">
                                            <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintPattern(newConstraint)}" ng-model="newConstraint.contraintType" ng-options="contraintType for contraintType in config.constraintTypes | orderBy:'toString()'" />
                                            <span style="color:red;" ng-show="isEmptyConstraintPattern(newConstraint)">Empty contraint pattern</span>
                                        </td>
                                        <td class="col-md-2" ng-hide="newConstraint.contraintType == 'identical to another node' ||
                                     newConstraint.contraintType == 'equal to another node' ||
                                     newConstraint.contraintType == 'not-equal to another node' ||
                                     newConstraint.contraintType == 'greater than another node' ||
                                     newConstraint.contraintType == 'equal to or greater than another node' ||
                                     newConstraint.contraintType == 'less than another node' ||
                                     newConstraint.contraintType == 'equal to or less than another node'">
                                            <span ng-show="newConstraint.contraintType == 'a literal value' ||
                                           newConstraint.contraintType == 'equal to' ||
                                           newConstraint.contraintType == 'not-equal to' ||
                                           newConstraint.contraintType == 'greater than' ||
                                           newConstraint.contraintType == 'equal to or greater than' ||
                                           newConstraint.contraintType == 'less than' ||
                                           newConstraint.contraintType == 'equal to or less than'">
                                <input class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}" ng-model="newConstraint.value" type="text"/>
                                <span ng-show="newConstraint.contraintType == 'a literal value'">Case Insensitive: </span>
                                            <input ng-show="newConstraint.contraintType == 'a literal value'" type="checkbox" ng-model="newConstraint.ignoreCase" />
                                            <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty value</span>
                                            </span>
                                            <span ng-show="newConstraint.contraintType == 'one of list values'">
                                <input class="form-control" ng-model="newConstraint.value" placeholder="Comma-Separated Values(CSV)" type="text"/>
                                <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty list value</span>
                                            </span>
                                            <span ng-show="newConstraint.contraintType == 'formatted value'">
                                <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}"
                                        ng-model="newConstraint.value" ng-options="predefinedFormat for predefinedFormat in config.predefinedFormats | orderBy:'toString()'" />
                                <div ng-show="newConstraint.value === 'Regular expression'">
                                    <input class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintValue2(newConstraint)}" ng-model="newConstraint.value2" placeholder="Regular expression" type="text"/>
                                </div>
                                <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty format</span>
                                            <span style="color:red;" ng-show="newConstraint.value === 'Regular expression' &&  isEmptyConstraintValue2(newConstraint)">Empty regular expression</span>
                                            </span>
                                            <span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                                <span>ValueSet ID: </span>
                                            <select class="form-control form-control-short" ng-class="{'form-control-invalid': isEmptyConstraintValueSet(newConstraint)}" ng-model="newConstraint.valueSetId">
                                    <option ng-repeat="table in tables|orderBy:'+bindingIdentifier'" value="{{table.bindingIdentifier}}">{{getTableLabel(tablesMap[table.id])}}</option>
                                </select>
                                            <span style="color:red;" ng-show="isEmptyConstraintValueSet(newConstraint)">Empty valueset</span>
                                            <br/>
                                            <span>BindingStrength: </span>
                                            <select name="bindingStrength" class="form-control form-control-short" ng-model="newConstraint.bindingStrength">
                                    <option value="R">R</option>
                                    <option value="S">S</option>
                                    <option value="U">U</option>
                                </select>
                                            <br/>
                                            <span>BindingLocation: </span>
                                            <input class="form-control form-control-short" ng-model="newConstraint.bindingLocation" type="text" />
                                            </span>
                                        </td>
                                        <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="secondNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterSecondNodeDrop'}" ng-show="newConstraint.contraintType == 'identical to another node' ||
                                     newConstraint.contraintType == 'equal to another node' ||
                                     newConstraint.contraintType == 'not-equal to another node' ||
                                     newConstraint.contraintType == 'greater than another node' ||
                                     newConstraint.contraintType == 'equal to or greater than another node' ||
                                     newConstraint.contraintType == 'less than another node' ||
                                     newConstraint.contraintType == 'equal to or less than another node'">
                                            <div ng-show="draggingStatus == 'ContextTreeNodeDragging'">
                                                <span style="color:red;" class="blink_me">You can drop Here!!</span>
                                            </div>
                                            <div ng-show="newConstraint.location_2">
                                                <span>
                                    <span>{{::segment.name}}-</span>
                                                <span ng-repeat="info in newConstraint.pathInfoSet_2">
                                        <span ng-show="$index == 1 && info.isInstanceNumberEditable">
                                            {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">
                                            {{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">
                                            .{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                            .{{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                            ({{info.nodeName}})
                                        </span>
                                                </span>
                                                </span>
                                            </div>
                                            <div ng-show="!newConstraint.location_2">
                                                <span style="color:red;">Drop the node!</span>
                                            </div>
                                        </td>
                                        <td class="col-md-1" align="center">
                                            <button class="btn btn-raised btn-info btn-xxs" ng-click="initPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                            <button class="btn btn-raised btn-primary btn-xxs" ng-click="addPredicate();" ng-disabled="erorrForConfStatement(newConstraint, targetPlainId, 'segment', selectedNode)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-2">Complex Type</th>
                                        <th class="col-md-1" style="width: 4.1667%"></th>
                                        <th ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5">Constraints</th>
                                        <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">First Constraint</th>
                                        <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" style="width: 4.1667%"></th>
                                        <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">Second Constraint</th>
                                        <th class="col-md-2"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="col-md-2">
                                            <select class="form-control" ng-class="{'form-control-invalid': isEmptyCompositeType(compositeType)}" ng-model="compositeType">
                                        <option value="AND">AND</option>
                                        <option value="OR">OR</option>
                                        <option value="XOR">XOR</option>
                                        <option value="IFTHEN">IFTHEN(IMPLY)</option>
                                        <option value="FORALL">FORALL(True, if all assertions are true)</option>
                                        <option value="EXIST">EXIST(True, if one of assertions is true)</option>
                                    </select>
                                            <span style="color:red;" ng-show="isEmptyCompositeType(compositeType)">Empty composite type</span>
                                        </td>
                                        <td class="col-md-1" align="center" style="width: 4.1667%">
                                            <span ng-show="compositeType == 'IFTHEN'">IF</span>
                                            <span ng-show="compositeType == 'FORALL'">FORALL</span>
                                            <span ng-show="compositeType == 'EXIST'">EXIST</span>
                                        </td>
                                        <td ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5" data-drop="true" ng-model='constraints' jqyoui-droppable="{multiple:true}" data-jqyoui-options>
                                            <span style="color:red;" ng-show="constraints.length < 2">Drop two more constraints here!</span>
                                            <li ng-repeat="c in constraints" ng-show="constraints.length > 0" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="constraints" jqyoui-draggable="{animate:true}">{{c.description}}</li>
                                        </td>
                                        <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
                                            <span style="color:red;" ng-hide="firstConstraint">Drop the first constraint here!</span>
                                            <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
                                        </td>
                                        <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" align="center" style="width: 4.1667%">
                                            <span ng-show="compositeType == 'AND'">AND</span>
                                            <span ng-show="compositeType == 'OR'">OR</span>
                                            <span ng-show="compositeType == 'XOR'">XOR</span>
                                            <span ng-show="compositeType == 'IFTHEN'">THEN</span>
                                        </td>
                                        <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
                                            <span style="color:red;" ng-hide="secondConstraint">Drop the second constraint here!</span>
                                            <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
                                        </td>
                                        <td class="col-md-1" align="center">
                                            <button class="btn btn-raised btn-info btn-xxs" ng-click="initComplexPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                            <button class="btn btn-raised btn-primary btn-xxs" ng-click="addComplexPredicate()" ng-disabled="erorrForComplexConfStatement(newComplexConstraintId, targetComplexId, compositeType, firstConstraint, secondConstraint, constraints)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="col-md-12" style="margin-top: 10px">
                    <div class="panel panel-default">
                        <div class="panel-heading">List of Temporary Constraints</div>
                        <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                            <table st-table="displayed" st-safe-src="tempPredicates" class="table table-striped table-bordered">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-1">Draggable</th>
                                        <th class="col-md-10">Description (<input type="checkbox" ng-model="viewAssertion"> view assertion )</th>
                                        <th class="col-md-1"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="p in displayed">
                                        <td class="col-md-1" align="center">
                                            <i class="glyphicon glyphicon-move cursorMove" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="p" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingPredicate({nodeData: data})'}"></i>
                                        </td>
                                        <td class="col-md-10">
                                            <input class="form-control" ng-model="p.description" type="text" />
                                            <input ng-show="viewAssertion" class="form-control" ng-model="p.assertion" type="text" />
                                        </td>
                                        <td class="col-md-1" align="center">
                                            <button class="btn btn-raised btn-danger btn-xxs" ng-click="deleteTempPredicate(p)"><span><i class="fa fa-trash fa-fw">&nbsp; </i>Del</span></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="col-md-12" style="margin-top: 10px">
                    <div class="panel panel-default" data-drop="true" data-jqyoui-options ng-model="predicateData" jqyoui-droppable="{beforeDrop: 'beforePredicateDrop', onDrop: 'afterPredicateDrop'}">
                        <div class="panel-heading">Selected Node Info</div>
                        <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                            <div class="col-md-6">
                                <div class="form-group control-group">
                                    <label class="col-md-4 control-label">Field Name</label>
                                    <div class="controls col-md-8">
                                        <input class="form-control" type="text" disabled ng-model="selectedNode.name">
                                    </div>
                                </div>
                                <div class="form-group control-group">
                                    <label class="col-md-4 control-label">Field Position</label>
                                    <div class="controls col-md-8">
                                        <input class="form-control" type="text" disabled ng-model="selectedNode.position">
                                    </div>
                                </div>
                                <div class="form-group control-group">
                                    <button ng-show="existingPredicate" class="btn btn-raised btn-danger btn-xs" ng-click="deletePredicate()"><span><i class="fa fa-trash fa-fw">&nbsp; </i>Dismiss the current Predicate</span></button>
                                    <span ng-show="!existingPredicate" style="color:red;">No Predicate</span>
                                </div>

                            </div>
                            <div class="col-md-6">
                                <div ng-show="existingPredicate">
                                    <div class="form-group control-group">
                                        <label class="col-md-4 control-label">Predicate Description</label>
                                        <div class="controls col-md-8">
                                            <input class="form-control" type="text" ng-change="setChanged()" ng-model="existingPredicate.description">
                                        </div>
                                    </div>
                                    <div class="form-group control-group">
                                        <label class="col-md-4 control-label">Predicate Assertion</label>
                                        <div class="controls col-md-8">
                                            <input class="form-control" type="text" ng-change="setChanged()" ng-model="existingPredicate.assertion">
                                        </div>
                                    </div>
                                    <div class="form-group control-group">
                                        <label class="col-md-4 control-label">Conditional Usage</label>
                                        <div class="col-md-4">
                                            <select class="form-control" ng-class="{'form-control-invalid': !existingPredicate.trueUsage}" ng-change="setChanged()" ng-model="existingPredicate.trueUsage" ng-options="usage for usage in config.conditionalUsage" />
                                            <span style="color:red;" ng-show="!existingPredicate.trueUsage">Empty true usage</span>
                                        </div>
                                        <div class="col-md-4">
                                            <select class="form-control" ng-class="{'form-control-invalid': !existingPredicate.falseUsage}" ng-change="setChanged()" ng-model="existingPredicate.falseUsage" ng-options="usage for usage in config.conditionalUsage" />
                                            <span style="color:red;" ng-show="!existingPredicate.falseUsage">Empty true usage</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer" style="padding-top:5px">
            <button class="btn btn-raised btn-warning btn-sm" ng-click="ok()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span></button>
            <button class="btn btn-raised btn-success btn-sm" ng-disabled="!changed || !existingPredicate || !existingPredicate.trueUsage || !existingPredicate.falseUsage" ng-click="saveclose()"><span><i class="fa fa-check fa-fw"> &nbsp; </i>Save</span></button>
        </div>
    </script>
    <script type="text/ng-template" id="segment_tree_item.html">
        <tr style="width:100%">
            <td ng-if="data.folderClass">
                <div ng-if="data.type === 'segment'">
                    <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="data.type === 'field' || data.type === 'component'">
                    <div ng-if="data.child.components &&  data.child.components.length > 0">
                        <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
                    </div>
                    <div ng-if="!data.child.components ||  data.child.components.length == 0">
                        <i class="fa fa-check" />
                    </div>
                </div>
            </td>
            <td ng-if="!data.folderClass">
                <div ng-if="data.type === 'segment'">
                    <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="data.type === 'field' || data.type === 'component'">
                    <div ng-if="data.child.components &&  data.child.components.length > 0">
                        <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
                    </div>
                    <div ng-if="!data.child.components ||  data.child.components.length == 0">
                        <i class="fa fa-check" />
                    </div>
                </div>
            </td>
            <td>
                <div ng-if="data.type === 'segment'">
                    <div>
                        <span class="label label-segment label-icon">S</span>
                        <span>&nbsp;{{::data.name}}</span>
                    </div>
                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.fields" ng-include="'segment_tree_item.html'"></div>
                        </table>
                    </div>
                </div>
                <div ng-if="data.type === 'field'">
                    <div data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                        <span class="label label-field label-icon">F</span>
                        <span>&nbsp;{{::data.position}}. &nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}] {{::data.name}}</span>
                    </div>
                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.child.components" ng-include="'segment_tree_item.html'"></div>
                        </table>
                    </div>
                </div>
                <div ng-if="data.type === 'component'">
                    <div data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                        <span class="label label-component label-icon">C</span>
                        <span>&nbsp;{{::data.position}}. &nbsp;[{{::data.usage}}] {{::data.name}}</span>
                    </div>
                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.child.components" ng-include="'segment_tree_item.html'"></div>
                        </table>
                    </div>
                </div>
            </td>
        </tr>
    </script>
    <script type="text/ng-template" id="segment_tree_Predicate_item.html">
        <tr style="width:100%">
            <td ng-if="data.folderClass">
                <div ng-if="data.type === 'segment'">
                    <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="data.type === 'field' || data.type === 'component'">
                    <div ng-if="data.child.components &&  data.child.components.length > 0">
                        <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
                    </div>
                    <div ng-if="!data.child.components ||  data.child.components.length == 0">
                        <i class="fa fa-check" />
                    </div>
                </div>
            </td>
            <td ng-if="!data.folderClass">
                <div ng-if="data.type === 'segment'">
                    <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="data.type === 'field' || data.type === 'component'">
                    <div ng-if="data.child.components &&  data.child.components.length > 0">
                        <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
                    </div>
                    <div ng-if="!data.child.components ||  data.child.components.length == 0">
                        <i class="fa fa-check" />
                    </div>
                </div>
            </td>
            <td>
                <div ng-if="data.type === 'segment'">
                    <div>
                        <span class="label label-segment label-icon">S</span>
                        <span>&nbsp;{{::data.name}}</span>
                    </div>
                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.fields" ng-include="'segment_tree_Predicate_item.html'"></div>
                        </table>
                    </div>
                </div>
                <div ng-if="data.type === 'field'">
                    <div data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                        <span class="label label-field label-icon">F</span>
                        <span>&nbsp;{{::data.position}}. &nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}] {{::data.name}}</span>
                    </div>
                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.child.components" ng-include="'segment_tree_Predicate_item.html'"></div>
                        </table>
                    </div>
                </div>
                <div ng-if="data.type === 'component'">
                    <div data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                        <span class="label label-component label-icon">C</span>
                        <span>&nbsp;{{::data.position}}. &nbsp;[{{::data.usage}}] {{::data.name}}</span>
                    </div>
                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.child.components" ng-include="'segment_tree_Predicate_item.html'"></div>
                        </table>
                    </div>
                </div>
            </td>
        </tr>
    </script>

    <script type="text/ng-template" id="ConformanceStatementDatatypeCtrl.html">
        <div class="modal-header">
            <h3 class="header4">Conformance statement for {{::datatype.name}}</h3>
        </div>
        <div class="modal-body">
            <form role="form">
                <div class="col-md-3">
                    <div class="panel panel-default">
                        <div class="panel-heading">Datatype Tree</div>
                        <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                            <table class="table table-striped">
                                <tbody ng-repeat="data in treeDataForContext" ng-include="'datatype_tree_item.html'">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="panel panel-default">
                        <div class="panel-heading">Conformance Statement Builder</div>
                        <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                            <span class="pull-right">
                    <div class="btn-group btn-group-sm" data-toggle="buttons">
                        <label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Free';" ng-class="{'active':constraintType === 'Free'}">
                            <input type="radio" ng-value="constraintType">Add new Free-Text Conf.Statement
                        </label>
                        <label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Plain';" ng-class="{'active':constraintType === 'Plain'}">
                            <input type="radio" ng-value="constraintType">Add new Plain Conf.Statement
                        </label>
                        <label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Complex';" ng-class="{'active':constraintType === 'Complex'}">
                            <input type="radio" ng-value="constraintType">Add new complex Conf.Statement
                        </label>
                    </div>
                </span>

                            <table class="table table-striped table-bordered" ng-show="constraintType === 'Free'">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-2">ID</th>
                                        <th class="col-md-8">Free-Text (Not supported by validation tool)</th>
                                        <th class="col-md-2"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="col-md-2">
                                            <input class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintID(newConstraint)}" ng-model="newConstraint.constraintId" type="text" />
                                            <span style="color:red;" ng-show="isEmptyConstraintID(newConstraint)">ID Empty</span>
                                        </td>
                                        <td class="col-md-8">
                                            <input class="form-control" ng-model="newConstraint.freeText" type="text" />
                                        </td>
                                        <td class="col-md-2" align="center">
                                            <button class="btn btn-raised btn-info btn-xxs" ng-click="initConformanceStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                            <button class="btn btn-raised btn-primary btn-xxs" ng-click="addFreeTextConformanceStatement();"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>


                            <table class="table table-striped table-bordered" ng-show="constraintType === 'Plain'">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-2">ID</th>
                                        <th class="col-md-2">Node</th>
                                        <th class="col-md-2">Verb</th>
                                        <th class="col-md-2">Constraint Pattern</th>
                                        <th class="col-md-2">Value</th>
                                        <th class="col-md-2"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="col-md-2">
                                            <input class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintID(newConstraint)}" ng-model="newConstraint.constraintId" type="text" />
                                            <span style="color:red;" ng-show="isEmptyConstraintID(newConstraint)">ID Empty</span>
                                        </td>
                                        <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="firstNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterNodeDrop'}">
                                            <div ng-show="draggingStatus == 'ContextTreeNodeDragging'">
                                                <span style="color:red;" class="blink_me">You can drop here!!</span>
                                            </div>
                                            <div ng-show="newConstraint.location_1">
                                                <span>{{::datatype.name}}-</span>
                                                <span>
                                    <span ng-repeat="info in newConstraint.pathInfoSet_1">
                                        <span ng-show="$index == 1 && info.isInstanceNumberEditable">
                                            {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">
                                            {{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">
                                            .{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                            .{{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                            ({{info.nodeName}})
                                        </span>
                                                </span>
                                                </span>
                                            </div>
                                            <div ng-show="!newConstraint.location_1">
                                                <span style="color:red;">Drop the node!</span>
                                            </div>
                                        </td>
                                        <td class="col-md-2">
                                            <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintVerb(newConstraint)}" ng-model="newConstraint.verb" ng-options="constraintVerb for constraintVerb in config.constraintVerbs | orderBy:'toString()'" />
                                            <span style="color:red;" ng-show="isEmptyConstraintVerb(newConstraint)">Empty verb</span>
                                        </td>
                                        <td class="col-md-2">
                                            <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintPattern(newConstraint)}" ng-model="newConstraint.contraintType" ng-options="contraintType for contraintType in config.constraintTypes | orderBy:'toString()'" />
                                            <span style="color:red;" ng-show="isEmptyConstraintPattern(newConstraint)">Empty contraint pattern</span>
                                        </td>
                                        <td class="col-md-2" ng-hide="newConstraint.contraintType == 'identical to another node' ||
                                     newConstraint.contraintType == 'equal to another node' ||
                                     newConstraint.contraintType == 'not-equal to another node' ||
                                     newConstraint.contraintType == 'greater than another node' ||
                                     newConstraint.contraintType == 'equal to or greater than another node' ||
                                     newConstraint.contraintType == 'less than another node' ||
                                     newConstraint.contraintType == 'equal to or less than another node'">
                                            <span ng-show="newConstraint.contraintType == 'a literal value' ||
                                           newConstraint.contraintType == 'equal to' ||
                                           newConstraint.contraintType == 'not-equal to' ||
                                           newConstraint.contraintType == 'greater than' ||
                                           newConstraint.contraintType == 'equal to or greater than' ||
                                           newConstraint.contraintType == 'less than' ||
                                           newConstraint.contraintType == 'equal to or less than'">
                                <input class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}" ng-model="newConstraint.value" type="text"/>
                                <span ng-show="newConstraint.contraintType == 'a literal value'">Case Insensitive: </span>
                                            <input ng-show="newConstraint.contraintType == 'a literal value'" type="checkbox" ng-model="newConstraint.ignoreCase" />
                                            <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty value</span>
                                            </span>
                                            <span ng-show="newConstraint.contraintType == 'one of list values'">
                                <input class="form-control" ng-model="newConstraint.value" placeholder="Comma-Separated Values(CSV)" type="text"/>
                                <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty list value</span>
                                            </span>
                                            <span ng-show="newConstraint.contraintType == 'formatted value'">
                                <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}"
                                        ng-model="newConstraint.value" ng-options="predefinedFormat for predefinedFormat in config.predefinedFormats | orderBy:'toString()'" />
                                <div ng-show="newConstraint.value === 'Regular expression'">
                                    <input class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintValue2(newConstraint)}" ng-model="newConstraint.value2" placeholder="Regular expression" type="text"/>
                                </div>
                                <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty format</span>
                                            <span style="color:red;" ng-show="newConstraint.value === 'Regular expression' &&  isEmptyConstraintValue2(newConstraint)">Empty regular expression</span>
                                            </span>
                                            <span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                                <span>ValueSet ID: </span>
                                            <select class="form-control form-control-short" ng-class="{'form-control-invalid': isEmptyConstraintValueSet(newConstraint)}" ng-model="newConstraint.valueSetId">
                                    <option ng-repeat="table in tables|orderBy:'+bindingIdentifier'" value="{{table.bindingIdentifier}}">{{getTableLabel(tablesMap[table.id])}}</option>
                                </select>
                                            <span style="color:red;" ng-show="isEmptyConstraintValueSet(newConstraint)">Empty valueset</span>
                                            <br/>
                                            <span>BindingStrength: </span>
                                            <select name="bindingStrength" class="form-control form-control-short" ng-model="newConstraint.bindingStrength">
                                    <option value="R">R</option>
                                    <option value="S">S</option>
                                    <option value="U">U</option>
                                </select>
                                            <br/>
                                            <span>BindingLocation: </span>
                                            <input class="form-control form-control-short" ng-model="newConstraint.bindingLocation" type="text" />
                                            </span>
                                        </td>
                                        <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="secondNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterSecondNodeDrop'}" ng-show="newConstraint.contraintType == 'identical to another node' ||
                                     newConstraint.contraintType == 'equal to another node' ||
                                     newConstraint.contraintType == 'not-equal to another node' ||
                                     newConstraint.contraintType == 'greater than another node' ||
                                     newConstraint.contraintType == 'equal to or greater than another node' ||
                                     newConstraint.contraintType == 'less than another node' ||
                                     newConstraint.contraintType == 'equal to or less than another node'">
                                            <div ng-show="draggingStatus == 'ContextTreeNodeDragging'">
                                                <span style="color:red;" class="blink_me">You can drop Here!!</span>
                                            </div>
                                            <div ng-show="newConstraint.location_2">
                                                <span>
                                    <span>{{::datatype.name}}-</span>
                                                <span ng-repeat="info in newConstraint.pathInfoSet_2">
                                        <span ng-show="$index == 1 && info.isInstanceNumberEditable">
                                            {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">
                                            {{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">
                                            .{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                            .{{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                            ({{info.nodeName}})
                                        </span>
                                                </span>
                                                </span>
                                            </div>
                                            <div ng-show="!newConstraint.location_2">
                                                <span style="color:red;">Drop the node!</span>
                                            </div>
                                        </td>
                                        <td class="col-md-1" align="center">
                                            <button class="btn btn-raised btn-info btn-xxs" ng-click="initConformanceStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                            <button class="btn btn-raised btn-primary btn-xxs" ng-click="addConformanceStatement();" ng-disabled="erorrForConfStatement(newConstraint, targetPlainId, 'segment', selectedNode)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-2">ID</th>
                                        <th class="col-md-2">Complex Type</th>
                                        <th class="col-md-1" style="width: 4.1667%"></th>
                                        <th ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5">Constraints</th>
                                        <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">First Constraint</th>
                                        <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" style="width: 4.1667%"></th>
                                        <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">Second Constraint</th>
                                        <th class="col-md-2"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="col-md-2">
                                            <input class="form-control" ng-class="{'form-control-invalid': isEmptyComplexConstraintID(newComplexConstraintId)}" ng-model="newComplexConstraintId" type="text" />
                                            <span style="color:red;" ng-show="isEmptyComplexConstraintID(newComplexConstraintId)">ID Empty</span>
                                        </td>
                                        <td class="col-md-2">
                                            <select class="form-control" ng-class="{'form-control-invalid': isEmptyCompositeType(compositeType)}" ng-model="compositeType">
                                        <option value="AND">AND</option>
                                        <option value="OR">OR</option>
                                        <option value="XOR">XOR</option>
                                        <option value="IFTHEN">IFTHEN(IMPLY)</option>
                                        <option value="FORALL">FORALL(True, if all assertions are true)</option>
                                        <option value="EXIST">EXIST(True, if one of assertions is true)</option>
                                    </select>
                                            <span style="color:red;" ng-show="isEmptyCompositeType(compositeType)">Empty composite type</span>
                                        </td>
                                        <td class="col-md-1" align="center" style="width: 4.1667%">
                                            <span ng-show="compositeType == 'IFTHEN'">IF</span>
                                            <span ng-show="compositeType == 'FORALL'">FORALL</span>
                                            <span ng-show="compositeType == 'EXIST'">EXIST</span>
                                        </td>
                                        <td ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5" data-drop="true" ng-model='constraints' jqyoui-droppable="{multiple:true}" data-jqyoui-options>
                                            <span style="color:red;" ng-show="constraints.length < 2">Drop two more constraints here!</span>
                                            <li ng-repeat="c in constraints" ng-show="constraints.length > 0" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="constraints" jqyoui-draggable="{animate:true}">{{c.description}}</li>
                                        </td>
                                        <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
                                            <span style="color:red;" ng-hide="firstConstraint">Drop the first constraint here!</span>
                                            <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
                                        </td>
                                        <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" align="center" style="width: 4.1667%">
                                            <span ng-show="compositeType == 'AND'">AND</span>
                                            <span ng-show="compositeType == 'OR'">OR</span>
                                            <span ng-show="compositeType == 'XOR'">XOR</span>
                                            <span ng-show="compositeType == 'IFTHEN'">THEN</span>
                                        </td>
                                        <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
                                            <span style="color:red;" ng-hide="secondConstraint">Drop the second constraint here!</span>
                                            <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
                                        </td>
                                        <td class="col-md-1" align="center">
                                            <button class="btn btn-raised btn-info btn-xxs" ng-click="initComplexStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                            <button class="btn btn-raised btn-primary btn-xxs" ng-click="addComplexConformanceStatement()" ng-disabled="erorrForComplexConfStatement(newComplexConstraintId, targetComplexId, compositeType, firstConstraint, secondConstraint, constraints)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-md-12" style="margin-top: 10px">
                    <div class="panel panel-default">
                        <div class="panel-heading">List of Conformance Statements</div>
                        <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                            <table st-table="displayed" st-safe-src="tempComformanceStatements" class="table table-striped table-bordered">
                                <thead>
                                    <tr class="tbl-header">
                                        <th ng-show="constraintType === 'Complex'" class="col-md-1" style="width: 4.1667%">Draggable</th>
                                        <th st-sort="constraintId" class="col-md-2">ID</th>
                                        <th class="col-md-8">Description (<input type="checkbox" ng-model="viewAssertion"> view assertion)</th>
                                        <th class="col-md-1"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="c in displayed">
                                        <td ng-show="constraintType === 'Complex'" class="col-md-1" align="center" style="width: 4.1667%">
                                            <i ng-show="c.assertion" class="glyphicon glyphicon-move cursorMove" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="c" jqyoui-draggable="{placeholder:'keep',animate:true}"></i>
                                        </td>
                                        <td class="col-md-2">
                                            <input class="form-control" ng-model="c.constraintId" ng-change="setChanged();" type="text" />
                                            <span style="color:red;" ng-show="isEmptyConstraintID(c)">ID Empty</span>
                                        </td>
                                        <td class="col-md-8">
                                            <input class="form-control" ng-model="c.description" ng-change="setChanged()" type="text" />
                                            <textarea ng-show="viewAssertion" class="form-control" ng-model="c.assertion" ng-change="setChanged()" />
                                        </td>
                                        <td class="col-md-1" align="center">
                                            <button class="btn btn-raised btn-danger btn-xxs" ng-click="deleteConformanceStatement(c)"><span><i class="fa fa-trash fa-fw">&nbsp; </i>Del</span></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer" style="padding-top:5px">
            <button class="btn btn-raised btn-warning btn-sm" ng-click="ok()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Close</span></button>
            <button class="btn btn-raised btn-success btn-sm" ng-disabled="!changed" ng-click="saveclose()"><span><i class="fa fa-check fa-fw">&nbsp; </i>Save</span></button>
        </div>
    </script>
    <script type="text/ng-template" id="PredicateDatatypeCtrl.html">
        <div class="modal-header">
            <h3 class="header4">Predicate for {{::datatype.name}}-{{::selectedNode.position}}</h3>
        </div>
        <div class="modal-body">
            <form role="form">
                <div class="col-md-3">
                    <div class="panel panel-default">
                        <div class="panel-heading">Datatype Tree</div>
                        <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                            <table class="table table-striped">
                                <tbody ng-repeat="data in treeDataForContext" ng-include="'datatype_tree_Predicate.html'">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="col-md-9">
                    <div class="panel panel-default">
                        <div class="panel-heading">Constraint Builder</div>
                        <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                            <span class="pull-right">
                            <div class="btn-group btn-group-sm" data-toggle="buttons">
                                <label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Free';" ng-class="{'active':constraintType === 'Free'}">
                                    <input type="radio" ng-value="constraintType">Add new Free-Text Constraint
                                </label>
                                <label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Plain';" ng-class="{'active':constraintType === 'Plain'}">
                                    <input type="radio" ng-value="constraintType">Add new plain Constraint
                                </label>
                                <label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType = 'Complex';" ng-class="{'active':constraintType === 'Complex'}">
                                    <input type="radio" ng-value="constraintType">Add new complex Constraint
                                </label>
                            </div>
                        </span>

                            <table class="table table-striped table-bordered" ng-show="constraintType === 'Free'">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-10">Free-Text (Not supported by validation tool)</th>
                                        <th class="col-md-2"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="col-md-10">
                                            <input class="form-control" ng-model="newConstraint.freeText" type="text" />
                                        </td>
                                        <td class="col-md-2" align="center">
                                            <button class="btn btn-raised btn-info btn-xxs" ng-click="initPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                            <button class="btn btn-raised btn-primary btn-xxs" ng-click="addFreeTextPredicate();"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>


                            <table class="table table-striped table-bordered" ng-show="constraintType === 'Plain'">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-2">Node</th>
                                        <th class="col-md-2">Verb</th>
                                        <th class="col-md-2">Constraint Pattern</th>
                                        <th class="col-md-2">Value</th>
                                        <th class="col-md-2"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="firstNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterNodeDrop'}">
                                            <div ng-show="draggingStatus == 'ContextTreeNodeDragging'">
                                                <span style="color:red;" class="blink_me">You can drop here!!</span>
                                            </div>
                                            <div ng-show="newConstraint.location_1">
                                                <span>{{::datatype.name}}-</span>
                                                <span>
                                    <span ng-repeat="info in newConstraint.pathInfoSet_1">
                                        <span ng-show="$index == 1 && info.isInstanceNumberEditable">
                                            {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">
                                            {{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">
                                            .{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                            .{{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                            ({{info.nodeName}})
                                        </span>
                                                </span>
                                                </span>
                                            </div>
                                            <div ng-show="!newConstraint.location_1">
                                                <span style="color:red;">Drop the node!</span>
                                            </div>
                                        </td>
                                        <td class="col-md-2">
                                            <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintVerb(newConstraint)}" ng-model="newConstraint.verb" ng-options="conditionalConstraintVerb for conditionalConstraintVerb in config.conditionalConstraintVerbs | orderBy:'toString()'"
                                            />
                                            <span style="color:red;" ng-show="isEmptyConstraintVerb(newConstraint)">Empty verb</span>
                                        </td>
                                        <td class="col-md-2">
                                            <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintPattern(newConstraint)}" ng-model="newConstraint.contraintType" ng-options="contraintType for contraintType in config.constraintTypes | orderBy:'toString()'" />
                                            <span style="color:red;" ng-show="isEmptyConstraintPattern(newConstraint)">Empty contraint pattern</span>
                                        </td>
                                        <td class="col-md-2" ng-hide="newConstraint.contraintType == 'identical to another node' ||
                                     newConstraint.contraintType == 'equal to another node' ||
                                     newConstraint.contraintType == 'not-equal to another node' ||
                                     newConstraint.contraintType == 'greater than another node' ||
                                     newConstraint.contraintType == 'equal to or greater than another node' ||
                                     newConstraint.contraintType == 'less than another node' ||
                                     newConstraint.contraintType == 'equal to or less than another node'">
                                            <span ng-show="newConstraint.contraintType == 'a literal value' ||
                                           newConstraint.contraintType == 'equal to' ||
                                           newConstraint.contraintType == 'not-equal to' ||
                                           newConstraint.contraintType == 'greater than' ||
                                           newConstraint.contraintType == 'equal to or greater than' ||
                                           newConstraint.contraintType == 'less than' ||
                                           newConstraint.contraintType == 'equal to or less than'">
                                <input class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}" ng-model="newConstraint.value" type="text"/>
                                <span ng-show="newConstraint.contraintType == 'a literal value'">Case Insensitive: </span>
                                            <input ng-show="newConstraint.contraintType == 'a literal value'" type="checkbox" ng-model="newConstraint.ignoreCase" />
                                            <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty value</span>
                                            </span>
                                            <span ng-show="newConstraint.contraintType == 'one of list values'">
                                <input class="form-control" ng-model="newConstraint.value" placeholder="Comma-Separated Values(CSV)" type="text"/>
                                <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty list value</span>
                                            </span>
                                            <span ng-show="newConstraint.contraintType == 'formatted value'">
                                <select class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintValue(newConstraint)}"
                                        ng-model="newConstraint.value" ng-options="predefinedFormat for predefinedFormat in config.predefinedFormats | orderBy:'toString()'" />
                                <div ng-show="newConstraint.value === 'Regular expression'">
                                    <input class="form-control" ng-class="{'form-control-invalid': isEmptyConstraintValue2(newConstraint)}" ng-model="newConstraint.value2" placeholder="Regular expression" type="text"/>
                                </div>
                                <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty format</span>
                                            <span style="color:red;" ng-show="newConstraint.value === 'Regular expression' &&  isEmptyConstraintValue2(newConstraint)">Empty regular expression</span>
                                            </span>
                                            <span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                                <span>ValueSet ID: </span>
                                            <select class="form-control form-control-short" ng-class="{'form-control-invalid': isEmptyConstraintValueSet(newConstraint)}" ng-model="newConstraint.valueSetId">
                                    <option ng-repeat="table in tables|orderBy:'+bindingIdentifier'" value="{{table.bindingIdentifier}}">{{getTableLabel(tablesMap[table.id])}}</option>
                                </select>
                                            <span style="color:red;" ng-show="isEmptyConstraintValueSet(newConstraint)">Empty valueset</span>
                                            <br/>
                                            <span>BindingStrength: </span>
                                            <select name="bindingStrength" class="form-control form-control-short" ng-model="newConstraint.bindingStrength">
                                    <option value="R">R</option>
                                    <option value="S">S</option>
                                    <option value="U">U</option>
                                </select>
                                            <br/>
                                            <span>BindingLocation: </span>
                                            <input class="form-control form-control-short" ng-model="newConstraint.bindingLocation" type="text" />
                                            </span>
                                        </td>
                                        <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="secondNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterSecondNodeDrop'}" ng-show="newConstraint.contraintType == 'identical to another node' ||
                                     newConstraint.contraintType == 'equal to another node' ||
                                     newConstraint.contraintType == 'not-equal to another node' ||
                                     newConstraint.contraintType == 'greater than another node' ||
                                     newConstraint.contraintType == 'equal to or greater than another node' ||
                                     newConstraint.contraintType == 'less than another node' ||
                                     newConstraint.contraintType == 'equal to or less than another node'">
                                            <div ng-show="draggingStatus == 'ContextTreeNodeDragging'">
                                                <span style="color:red;" class="blink_me">You can drop Here!!</span>
                                            </div>
                                            <div ng-show="newConstraint.location_2">
                                                <span>
                                    <span>{{::datatype.name}}-</span>
                                                <span ng-repeat="info in newConstraint.pathInfoSet_2">
                                        <span ng-show="$index == 1 && info.isInstanceNumberEditable">
                                            {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">
                                            {{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">
                                            .{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                        </span>
                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                            .{{info.locationName}}[{{info.instanceNumber}}]
                                        </span>
                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                            ({{info.nodeName}})
                                        </span>
                                                </span>
                                                </span>
                                            </div>
                                            <div ng-show="!newConstraint.location_2">
                                                <span style="color:red;">Drop the node!</span>
                                            </div>
                                        </td>
                                        <td class="col-md-1" align="center">
                                            <button class="btn btn-raised btn-info btn-xxs" ng-click="initPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                            <button class="btn btn-raised btn-primary btn-xxs" ng-click="addPredicate();" ng-disabled="erorrForConfStatement(newConstraint, targetPlainId, 'datatype', selectedNode)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-2">Complex Type</th>
                                        <th class="col-md-1" style="width: 4.1667%"></th>
                                        <th ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5">Constraints</th>
                                        <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">First Constraint</th>
                                        <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" style="width: 4.1667%"></th>
                                        <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">Second Constraint</th>
                                        <th class="col-md-2"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="col-md-2">
                                            <select class="form-control" ng-class="{'form-control-invalid': isEmptyCompositeType(compositeType)}" ng-model="compositeType">
                                        <option value="AND">AND</option>
                                        <option value="OR">OR</option>
                                        <option value="XOR">XOR</option>
                                        <option value="IFTHEN">IFTHEN(IMPLY)</option>
                                        <option value="FORALL">FORALL(True, if all assertions are true)</option>
                                        <option value="EXIST">EXIST(True, if one of assertions is true)</option>
                                    </select>
                                            <span style="color:red;" ng-show="isEmptyCompositeType(compositeType)">Empty composite type</span>
                                        </td>
                                        <td class="col-md-1" align="center" style="width: 4.1667%">
                                            <span ng-show="compositeType == 'IFTHEN'">IF</span>
                                            <span ng-show="compositeType == 'FORALL'">FORALL</span>
                                            <span ng-show="compositeType == 'EXIST'">EXIST</span>
                                        </td>
                                        <td ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5" data-drop="true" ng-model='constraints' jqyoui-droppable="{multiple:true}" data-jqyoui-options>
                                            <span style="color:red;" ng-show="constraints.length < 2">Drop two more constraints here!</span>
                                            <li ng-repeat="c in constraints" ng-show="constraints.length > 0" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="constraints" jqyoui-draggable="{animate:true}">{{c.description}}</li>
                                        </td>
                                        <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
                                            <span style="color:red;" ng-hide="firstConstraint">Drop the first constraint here!</span>
                                            <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
                                        </td>
                                        <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" align="center" style="width: 4.1667%">
                                            <span ng-show="compositeType == 'AND'">AND</span>
                                            <span ng-show="compositeType == 'OR'">OR</span>
                                            <span ng-show="compositeType == 'XOR'">XOR</span>
                                            <span ng-show="compositeType == 'IFTHEN'">THEN</span>
                                        </td>
                                        <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
                                            <span style="color:red;" ng-hide="secondConstraint">Drop the second constraint here!</span>
                                            <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
                                        </td>
                                        <td class="col-md-1" align="center">
                                            <button class="btn btn-raised btn-info btn-xxs" ng-click="initComplexPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                            <button class="btn btn-raised btn-primary btn-xxs" ng-click="addComplexPredicate()" ng-disabled="erorrForComplexConfStatement(newComplexConstraintId, targetComplexId, compositeType, firstConstraint, secondConstraint, constraints)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="col-md-12" style="margin-top: 10px">
                    <div class="panel panel-default">
                        <div class="panel-heading">List of Temporary Constraints</div>
                        <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                            <table st-table="displayed" st-safe-src="tempPredicates" class="table table-striped table-bordered">
                                <thead>
                                    <tr class="tbl-header">
                                        <th class="col-md-1">Draggable</th>
                                        <th class="col-md-10">Description (<input type="checkbox" ng-model="viewAssertion"> view assertion )</th>
                                        <th class="col-md-1"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="p in displayed">
                                        <td class="col-md-1" align="center">
                                            <i class="glyphicon glyphicon-move cursorMove" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="p" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingPredicate({nodeData: data})'}"></i>
                                        </td>
                                        <td class="col-md-10">
                                            <input class="form-control" ng-model="p.description" type="text" />
                                            <input ng-show="viewAssertion" class="form-control" ng-model="p.assertion" type="text" />
                                        </td>
                                        <td class="col-md-1" align="center">
                                            <button class="btn btn-raised btn-danger btn-xxs" ng-click="deleteTempPredicate(p)"><span><i class="fa fa-trash fa-fw">&nbsp; </i>Del</span></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="col-md-12" style="margin-top: 10px">
                    <div class="panel panel-default" data-drop="true" data-jqyoui-options ng-model="predicateData" jqyoui-droppable="{beforeDrop: 'beforePredicateDrop', onDrop: 'afterPredicateDrop'}">
                        <div class="panel-heading">Selected Node Info</div>
                        <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                            <div class="col-md-6">
                                <div class="form-group control-group">
                                    <label class="col-md-4 control-label">Field Name</label>
                                    <div class="controls col-md-8">
                                        <input class="form-control" type="text" disabled ng-model="selectedNode.name">
                                    </div>
                                </div>
                                <div class="form-group control-group">
                                    <label class="col-md-4 control-label">Field Position</label>
                                    <div class="controls col-md-8">
                                        <input class="form-control" type="text" disabled ng-model="selectedNode.position">
                                    </div>
                                </div>
                                <div class="form-group control-group">
                                    <button ng-show="existingPredicate" class="btn btn-raised btn-danger btn-xs" ng-click="deletePredicate()"><span><i class="fa fa-trash fa-fw">&nbsp; </i>Dismiss the current Predicate</span></button>
                                    <span ng-show="!existingPredicate" style="color:red;">No Predicate</span>
                                </div>

                            </div>
                            <div class="col-md-6">
                                <div ng-show="existingPredicate">
                                    <div class="form-group control-group">
                                        <label class="col-md-4 control-label">Predicate Description</label>
                                        <div class="controls col-md-8">
                                            <input class="form-control" type="text" ng-change="setChanged()" ng-model="existingPredicate.description">
                                        </div>
                                    </div>
                                    <div class="form-group control-group">
                                        <label class="col-md-4 control-label">Predicate Assertion</label>
                                        <div class="controls col-md-8">
                                            <input class="form-control" type="text" ng-change="setChanged()" ng-model="existingPredicate.assertion">
                                        </div>
                                    </div>
                                    <div class="form-group control-group">
                                        <label class="col-md-4 control-label">Conditional Usage</label>
                                        <div class="col-md-4">
                                            <select class="form-control" ng-class="{'form-control-invalid': !existingPredicate.trueUsage}" ng-change="setChanged()" ng-model="existingPredicate.trueUsage" ng-options="usage for usage in config.conditionalUsage" />
                                            <span style="color:red;" ng-show="!existingPredicate.trueUsage">Empty true usage</span>
                                        </div>
                                        <div class="col-md-4">
                                            <select class="form-control" ng-class="{'form-control-invalid': !existingPredicate.falseUsage}" ng-change="setChanged()" ng-model="existingPredicate.falseUsage" ng-options="usage for usage in config.conditionalUsage" />
                                            <span style="color:red;" ng-show="!existingPredicate.falseUsage">Empty true usage</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

        </div>
        </form>
        </div>
        <div class="modal-footer" style="padding-top:5px">
            <button class="btn btn-raised btn-warning btn-sm" ng-click="ok()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span></button>
            <button class="btn btn-raised btn-success btn-sm" ng-disabled="!changed || !existingPredicate || !existingPredicate.trueUsage || !existingPredicate.falseUsage" ng-click="saveclose()"><span><i class="fa fa-check fa-fw"> &nbsp; </i>Save</span></button>
        </div>
    </script>
    <script type="text/ng-template" id="ConfirmIGDocumentUnshareCtrl.html">
        <div class="modal-header">
            <h3 class="modal-title">Remove Participant Confirmation
        </h3>
        </div>
        <div class="modal-body">
            <p ng-if="shareParticipant.id === getAccountID()">Are you sure you want to be removed from the IG Document:"{{::igdocumentSelected.metaData.title}}"?</p>
            <p ng-if="shareParticipant.id !== getAccountID()">Are you sure you want to remove '{{shareParticipant.fullname}}' from the IG Document:"{{::igdocumentSelected.metaData.title}}"?</p>

            <div class="row" ng-if="error != null">
                <div class="col-md-12">
                    <span ng-bind="error" style="color: red;"></span>
                </div>
            </div>
        </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
            <button class="btn btn-raised btn-danger btn-sm" ng-disabled="loading" ng-click="delete()"><span><i
                class="fa fa-trash-o fa-fw">&nbsp; </i>Remove</span>
        </button>
            <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
                <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
            </div>

        </div>
        </div>
    </script>

    <script type="text/ng-template" id="createMasterDt.html">

        <div class="modal-content">
            <div class="modal-header modal-wide">

                <div class="form-inline">
                    <span class="header4" style="color:white;">Add Master Datatype</span>

                    <span class="pull-right">
                    <button class="btn btn-raised btn-default btn-xs" type="button" ng-click="cancel()"><i class="fa fa-times fa-fw"></i>Cancel
                    </button>
                    <button class="btn btn-raised btn-primary btn-xs" type="button" ng-click="ok()" ng-disabled="addedDatatypes===0"><i class="fa fa-check fa-fw"></i>Add
                    </button>
                </span>
                </div>
            </div>


            <form name="addDT">
                <div class="modal-body">
                    <div class="container" style="margin-bottom: 20px;margin-top: 10px">
                        <div class="row" style="padding-top:10px">

                            <div class="row container">
                                <label style="color:black !important; margin-right:8px;">Select HL7 version:</label>
                                <div class="btn-group btn-group-sm" data-toggle="buttons">
                                    <label class="btn btn-raised btn-info btn-xs" ng-click="setVersion(vr)" ng-class="{ 'active':vr===version1}" ng-repeat="vr in versions">
                                                            <input type="radio" ng-value="vr" ng-model="version1">{{vr}}</input>
                                                        </label>
                                </div>

                            </div>

                            <hr style="border-top: 2px solid #271e1e" ng-if="version1" />

                            <div class="row container" ng-if="version1">

                                <div class="panel panel-primary col-md-5">
                                    <div class="panel-heading">Source</div>
                                    <div class="panel-body container">

                                        <div align="right" class="container" style="margin-top: 8px;">
                                            <i class="icon-search"></i>
                                            <input type="search" class="form-control" placeholder="Search Datatypes" ng-model="search.name" />
                                        </div>
                                        <div>
                                            <table class="table table-bordered table-stripped container">
                                                <thead>
                                                    <tr class="tbl-header">
                                                        <th>Name</th>
                                                        <th>Versions</th>
                                                        <th></th>

                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="data in AllUnchanged| filter:search" ng-if="containsCurrentVersion(data)">
                                                        <td>
                                                            <span>{{data.name}}</span>
                                                        </td>
                                                        <td>
                                                            <ul>
                                                                <li ng-repeat="version in data.versions">{{version}}</li>
                                                            </ul>
                                                        </td>
                                                        <td>
                                                            <i ng-click="getDatatypeFromUnchanged(data)" class="fa fa-plus fa-fw" style="color:blue;cursor:pointer !important"></i>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-1"></div>
                                <div class="panel panel-primary col-md-6">
                                    <div class="panel-heading">Selected Data Types</div>
                                    <div class="panel-body container">
                                        <div align="right" class="container" style="margin-top: 8px;">
                                            <i class="icon-search"></i>
                                            <input type="search" class="form-control" placeholder="Search" ng-model="search1.name" />
                                        </div>
                                        <table class="table table-bordered table-stripped container">
                                            <thead>
                                                <tr class="tbl-header">
                                                    <th>Name</th>
                                                    <th>Extension</th>
                                                    <th>Compatible HL7 Version</th>
                                                    <th>Description
                                                    </th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="data in addedDatatypes| filter:search1">
                                                    <td class="col-md-1">
                                                        <span>{{data.name}}</span>
                                                    </td>
                                                    <td>
                                                        <input type="text" class="form-control" ng-model="data.ext" required></input>
                                                        <span style="color:red;" ng-if="existingExtension(data,addedDatatypes)">Extesion already exists</span>
                                                    </td>
                                                    <td>
                                                        <ul>
                                                            <li ng-repeat="version in data.hl7versions"><span ng-class="{'choosed': version===data.hl7Version}">{{version}}</span></li>
                                                        </ul>
                                                    </td>
                                                    <td>
                                                        {{data.description}}
                                                    </td>
                                                    <td>
                                                        <button class="btn btn-raised btn-xs btn-danger" ng-click="addedDatatypes.splice($index,1);miniDTMap[data.id]=false">X</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                </div>
                            </div>


                        </div>
            </form>
            </div>
    </script>

    <script type="text/ng-template" id="AddHL7Datatype.html">

        <div class="modal-content">
            <div class="modal-header modal-wide">

                <div class="form-inline">
                    <span class="header4" style="color:white;">Add HL7 Datatypes</span>

                    <span class="pull-right">
                    <button class="btn btn-raised btn-default btn-xs" type="button" ng-click="cancel()"><i class="fa fa-times fa-fw"></i>Cancel
                    </button>
                    <button class="btn btn-raised btn-primary btn-xs" type="button" ng-click="ok()" ng-disabled="!checkedExt||!NocheckedExt||selectedDatatypes.length===0"><i class="fa fa-check fa-fw"></i>Add
                    </button>
                </span>
                </div>
            </div>

            <form name="addDT">
                <div class="modal-body">
                    <div class="container" style="margin-bottom: 20px;margin-top: 10px">
                        <div class="row" style="padding-top:10px">

                            <div class="row container">
                                <label style="color:black !important; margin-right:8px;">Select HL7 version:</label>
                                <div class="btn-group btn-group-sm" data-toggle="buttons">
                                    <label class="btn btn-raised btn-info btn-xs" ng-click="setVersion(vr)" ng-class="{ 'active':vr===version1}" ng-repeat="vr in versions">
                                                            <input type="radio" ng-value="vr" ng-model="version1">{{vr}}</input>
                                                        </label>
                                </div>

                            </div>

                            <hr style="border-top: 2px solid #271e1e" ng-if="version1" />

                            <div class="row container" ng-if="version1">

                                <div class="panel panel-primary col-md-5">
                                    <div class="panel-heading">Source</div>
                                    <div class="panel-body container">

                                        <div align="right" class="container" style="margin-top: 8px;">
                                            <i class="icon-search"></i>
                                            <input type="search" class="form-control" placeholder="Search Datatypes" ng-model="search.name" />
                                        </div>
                                        <div>
                                            <table class="table table-bordered table-stripped container">
                                                <thead>
                                                    <tr class="tbl-header">

                                                        <th>Name</th>
                                                        <th>As is</th>
                                                        <th>As Flavor</th>

                                                    </tr>

                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="datatype in hl7Datatypes | orderBy: 'name' | filter:search:strict">

                                                        <td>{{datatype.name}}</td>
                                                        <td><a class="pointer" ng-show="!checkExist(datatype)" ng-click="addDt(datatype)"><i class="fa fa-plus fa-fw"></i></a>
                                                            <p ng-show="checkExist(datatype)">Selected</p>
                                                        </td>
                                                        <td><a class="pointer" ng-click="addDtFlv(datatype)"><i class="fa fa-plus fa-fw"></i></a>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-1"></div>
                                <div class="panel panel-primary col-md-6">
                                    <div class="panel-heading">Selected Data Types</div>
                                    <div class="panel-body container">
                                        <div align="right" class="container" style="margin-top: 8px;">
                                            <i class="icon-search"></i>
                                            <input type="search" class="form-control" placeholder="Search" ng-model="search1.name" />
                                        </div>
                                        <table class="table table-bordered table-stripped container">
                                            <thead>
                                                <tr class="tbl-header">
                                                    <th>Name</th>
                                                    <th>Ext</th>
                                                    <th>HL7 Version</th>
                                                    <th>Actions</th>


                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="dt in selectedDatatypes">
                                                    <td>{{dt.name}}<span class="badge" ng-if="versionAndUseMap[dt.id]">v{{versionAndUseMap[dt.id].publicationVersion}}</span></td>
                                                    <td><span ng-show="!edit">{{dt.ext}}</span>
                                                        <a class="pointer" ng-show="!edit && dt.ext!==null && dt.ext!==''&& dt.status!=='PUBLISHED'" ng-click="edit=true;checkExt(dt)"><i class="fa fa-pencil fa-fw"></i></a>
                                                        <input ng-show="edit" ng-change="checkExt(dt)" ng-model="dt.ext" />
                                                        <a class="pointer" ng-show="edit && checkedExt && NocheckedExt" ng-click="edit=false"><i class="fa fa-check-circle"></i></a>
                                                        <span ng-if="edit && !checkedExt" class="danger">This extension already exists</span>
                                                        <span ng-if="edit && !NocheckedExt" class="danger">A flavor must have an extension</span>
                                                    </td>
                                                    <td>{{dt.hl7Version}}</td>

                                                    <td><a class="pointer" ng-click="deleteDt(dt)"><i
                                                                                    class="fa fa-times fa-fw"></i></a></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                </div>
                            </div>
                        </div>
            </form>
            </div>
    </script>

    <script type="text/ng-template" id="AddSharedDatatype.html">
        <div class="modal-content">
            <div class="modal-header modal-wide">
                <div class="form-inline">
                    <span class="header4" style="color:white;">Add Shared Datatypes</span>

                    <span class="pull-right">
                    <button class="btn btn-raised btn-default btn-xs" type="button" ng-click="cancel()"><i class="fa fa-times fa-fw"></i>Cancel
                    </button>
                    <button class="btn btn-raised btn-primary btn-xs" type="button" ng-click="ok()" ng-disabled="!checkedExt||!NocheckedExt||selectedDatatypes.length===0"><i class="fa fa-check fa-fw"></i>Add
                    </button>
                </span>
                </div>
            </div>


            <form name="addDT">
                <div class="modal-body">
                    <div class="container" style="margin-bottom: 20px;margin-top: 10px">
                        <div class="row" style="padding-top:10px">

                            <div class="row container">

                                <div class="panel panel-primary col-md-5">
                                    <div class="panel-heading">Source</div>
                                    <div class="panel-body container">

                                        <div align="right" class="container" style="margin-top: 8px;">
                                            <i class="icon-search"></i>
                                            <input type="search" class="form-control" placeholder="Search Datatypes" ng-model="search.name" />
                                        </div>
                                        <div>
                                            <table class="table table-bordered table-stripped container">
                                                <thead>
                                                    <tr class="tbl-header">

                                                        <th>Name</th>
                                                        <th>HL7 Version</th>
                                                        <th>As Is</th>
                                                        <th>As Flavor</th>

                                                    </tr>

                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="datatype in hl7Datatypes | orderBy: 'name' | filter:search:strict">

                                                        <td>{{datatype.name}}<span class="badge" ng-if="datatype.publicationVersion">{{datatype.publicationVersion}}</span></td>
                                                        <td>{{datatype.hl7Version}}</td>
                                                        <td><a class="pointer" ng-show="!checkExist(datatype)" ng-click="addDt(datatype)"><i class="fa fa-plus fa-fw"></i></a>
                                                            <p ng-show="checkExist(datatype)">Selected</p>
                                                        </td>
                                                        <td><a class="pointer" ng-click="addDtFlv(datatype)"><i class="fa fa-plus fa-fw"></i></a>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-1"></div>
                                <div class="panel panel-primary col-md-6">
                                    <div class="panel-heading">Selected Data Types</div>
                                    <div class="panel-body container">
                                        <div align="right" class="container" style="margin-top: 8px;">
                                            <i class="icon-search"></i>
                                            <input type="search" class="form-control" placeholder="Search" ng-model="search1.name" />
                                        </div>
                                        <table class="table table-bordered table-stripped container">
                                            <thead>
                                                <tr class="tbl-header">
                                                    <th>Name</th>
                                                    <th>Ext</th>
                                                    <th>HL7 Version</th>
                                                    <th>Actions</th>

                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="dt in selectedDatatypes">
                                                    <td>{{dt.name}}<span class="badge" ng-if="versionAndUseMap[dt.id]">v{{versionAndUseMap[dt.id].publicationVersion}}</span></td>
                                                    <td><span ng-show="!edit">{{dt.ext}}</span>
                                                        <a class="pointer" ng-show="!edit && dt.ext!==null && dt.ext!==''&& dt.status!=='PUBLISHED'" ng-click="edit=true;checkExt(dt)"><i class="fa fa-pencil fa-fw"></i></a>
                                                        <input ng-show="edit" ng-change="checkExt(dt)" ng-model="dt.ext" />
                                                        <a class="pointer" ng-show="edit && checkedExt && NocheckedExt" ng-click="edit=false"><i class="fa fa-check-circle"></i></a>
                                                        <span ng-if="edit && !checkedExt" class="danger">This extension already exists</span>
                                                        <span ng-if="edit && !NocheckedExt" class="danger">A flavor must have an extension</span>
                                                    </td>
                                                    <td>{{dt.hl7Version}}</td>

                                                    <td><a class="pointer" ng-click="deleteDt(dt)"><i
                                                                                    class="fa fa-times fa-fw"></i></a></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                </div>
                            </div>
                        </div>
            </form>
            </div>
    </script>

    <script type="text/ng-template" id="AddUserDatatype.html">

        <div class="modal-content">
            <div class="modal-header modal-wide">
                <div class="form-inline">
                    <span class="header4" style="color:white;">Add Datatypes From User Library</span>

                    <span class="pull-right">
                    <button class="btn btn-raised btn-default btn-xs" type="button" ng-click="cancel()"><i class="fa fa-times fa-fw"></i>Cancel
                    </button>
                    <button class="btn btn-raised btn-primary btn-xs" type="button" ng-click="ok()" ng-disabled="!checkedExt||!NocheckedExt||selectedDatatypes.length===0"><i class="fa fa-check fa-fw"></i>Add
                    </button>
                </span>
                </div>
            </div>

            <form name="addDT">
                <div class="modal-body">
                    <div class="container" style="margin-bottom: 20px;margin-top: 10px">
                        <div class="row" style="padding-top:10px">

                            <div class="row container">
                                <select style="background-color: rgb(21, 101, 192);
    color: white;" ng-model="usrLib" class="form-control col-md-6" ng-change="selectUserDtLib(usrLib)" ng-options="usrLib.metaData.name for usrLib in userDtLib track by usrLib.id">
                                                        <option value="" disabled selected>Choose a User Library</option>
                                            <!--<option ng-repeat="usrLib in userDtLib" value='{{usrLib}}'> {{usrLib.metaData.name}}</option>-->
                     </select>
                            </div>

                            <hr style="border-top: 2px solid #271e1e" />

                            <div class="row container">

                                <div class="panel panel-primary col-md-5">
                                    <div class="panel-heading">Source</div>
                                    <div class="panel-body container">

                                        <div align="right" class="container" style="margin-top: 8px;">
                                            <i class="icon-search"></i>
                                            <input type="search" class="form-control" placeholder="Search Datatypes" ng-model="search.name" />
                                        </div>
                                        <div>
                                            <table class="table table-bordered table-stripped container">
                                                <thead>
                                                    <tr class="tbl-header">

                                                        <th>Name</th>
                                                        <th>Version</th>
                                                        <th>As is</th>
                                                        <th>As Flavor</th>

                                                    </tr>

                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="datatype in userDatatypes | orderBy: 'name' | filter:search:strict" ng-if="datatype.status==='PUBLISHED'&&datatype.scope==='USER'">

                                                        <td>{{datatype.label}}<span class="badge" ng-if="versionAndUseMap[datatype.id]">v{{versionAndUseMap[datatype.id].publicationVersion}}</span></td>
                                                        <td>{{datatype.hl7Version}}
                                                            <td><a class="pointer" ng-show="!checkExist(datatype)" ng-click="addDt(datatype)"><i class="fa fa-plus fa-fw"></i></a>
                                                                <p ng-show="checkExist(datatype)">Selected</p>
                                                            </td>
                                                            <td><a class="pointer" ng-click="addDtFlv(datatype)"><i class="fa fa-plus fa-fw"></i></a>
                                                            </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-1"></div>
                                <div class="panel panel-primary col-md-6">
                                    <div class="panel-heading">Selected Data Types</div>
                                    <div class="panel-body container">
                                        <div align="right" class="container" style="margin-top: 8px;">
                                            <i class="icon-search"></i>
                                            <input type="search" class="form-control" placeholder="Search" ng-model="search1.name" />
                                        </div>
                                        <table class="table table-bordered table-stripped container">
                                            <thead>
                                                <tr class="tbl-header">
                                                    <th>Name</th>
                                                    <th>Ext</th>
                                                    <th>HL7 Version</th>
                                                    <th>Actions</th>

                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="dt in selectedDatatypes">
                                                    <td>{{dt.name}}<span class="badge" ng-if="versionAndUseMap[dt.id]">v{{versionAndUseMap[dt.id].publicationVersion}}</span></td>
                                                    <td><span ng-show="!edit">{{dt.ext}}</span>
                                                        <a class="pointer" ng-show="!edit && dt.ext!==null && dt.ext!==''&& dt.status!=='PUBLISHED'" ng-click="edit=true;checkExt(dt)"><i class="fa fa-pencil fa-fw"></i></a>
                                                        <input ng-show="edit" ng-change="checkExt(dt)" ng-model="dt.ext" />
                                                        <a class="pointer" ng-show="edit && checkedExt && NocheckedExt" ng-click="edit=false"><i class="fa fa-check-circle"></i></a>
                                                        <span ng-if="edit && !checkedExt" class="danger">This extension already exists</span>
                                                        <span ng-if="edit && !NocheckedExt" class="danger">A flavor must have an extension</span>
                                                    </td>
                                                    <td>{{dt.hl7Version}}</td>

                                                    <td><a class="pointer" ng-click="deleteDt(dt)"><i
                                                                                    class="fa fa-times fa-fw"></i></a></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                </div>
                            </div>
                        </div>

            </form>
            </div>
    </script>

    <script type="text/ng-template" id="AddMasterDatatypeIntoUser.html">

        <div class="modal-content">
            <div class="modal-header modal-wide">
                <div class="form-inline">
                    <span class="header4" style="color:white;">Add Datatypes From Master Library</span>

                    <span class="pull-right">
                    <button class="btn btn-raised btn-default btn-xs" type="button" ng-click="cancel()"><i class="fa fa-times fa-fw"></i>Cancel
                    </button>
                    <button class="btn btn-raised btn-primary btn-xs" type="button" ng-click="ok()" ng-disabled="!checkedExt||!NocheckedExt||selectedDatatypes.length===0"><i class="fa fa-check fa-fw"></i>Add
                    </button>
                </span>
                </div>
            </div>


            <form name="addDT">
                <div class="modal-body">
                    <div class="container" style="margin-bottom: 20px;margin-top: 10px">
                        <div class="row" style="padding-top:10px">

                            <div class="row container">

                                <select style="background-color: rgb(21, 101, 192);
    color: white;" ng-model="masLib" class="form-control col-md-6" ng-change="selectMasterDtLib(masLib)" ng-options="masLib.metaData.name for masLib in masterLib track by masLib.id">
                        <option value="" disabled selected>Choose a Master Library</option>
                </select>
                            </div>

                            <hr style="border-top: 2px solid #271e1e" />

                            <div class="row container">

                                <div class="panel panel-primary col-md-5">
                                    <div class="panel-heading">Source</div>
                                    <div class="panel-body container">

                                        <div align="right" class="container" style="margin-top: 8px;">
                                            <i class="icon-search"></i>
                                            <input type="search" class="form-control" placeholder="Search Datatypes" ng-model="search.name" />
                                        </div>
                                        <div>
                                            <table class="table table-bordered table-stripped container">
                                                <thead>
                                                    <tr class="tbl-header">

                                                        <th class="col-md-3">Name</th>
                                                        <th class="col-md-7">Compatible HL7 Versions</th>
                                                        <th class="col-md-2">Actions</th>
                                                    </tr>

                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="datatype in masterDatatypes | orderBy: 'name' | filter:search:strict">

                                                        <td class="col-md-3">{{datatype.label}} <span class="badge">v{{versionAndUseMap[datatype.id].publicationVersion}}</span></td>
                                                        <td class="col-md-7">
                                                            <ul ng-if="igdocument">
                                                                <li ng-repeat="vr in datatype.hl7versions">
                                                                    {{vr}}
                                                                </li>
                                                            </ul>
                                                            <div ng-if="!igdocument">
                                                                <p ng-repeat="vr in datatype.hl7versions">
                                                                    <input type="radio" ng-model="datatype.hl7Version" ng-value="vr"></input>{{vr}}
                                                                </p>
                                                            </div>

                                                        </td>
                                                        <td class="col-md-2"><a class="pointer" ng-click="addDtFlv(datatype)"><i class="fa fa-plus fa-fw"></i></a>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-1"></div>
                                <div class="panel panel-primary col-md-6">
                                    <div class="panel-heading">Selected Data Types</div>
                                    <div class="panel-body container">
                                        <div align="right" class="container" style="margin-top: 8px;">
                                            <i class="icon-search"></i>
                                            <input type="search" class="form-control" placeholder="Search" ng-model="search1.name" />
                                        </div>
                                        <table class="table table-bordered table-stripped container">
                                            <thead>
                                                <tr class="tbl-header">
                                                    <th>Name</th>
                                                    <th>Ext</th>
                                                    <th>HL7 Version</th>
                                                    <th>Actions</th>

                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="dt in selectedDatatypes">
                                                    <td>{{dt.name}}<span class="badge" ng-if="versionAndUseMap[dt.id]">v{{versionAndUseMap[dt.id].publicationVersion}}</span></td>
                                                    <td><span ng-show="!edit">{{dt.ext}}</span>
                                                        <a class="pointer" ng-show="!edit && dt.ext!==null && dt.ext!==''&& dt.status!=='PUBLISHED'" ng-click="edit=true;checkExt(dt)"><i class="fa fa-pencil fa-fw"></i></a>
                                                        <input ng-show="edit" ng-change="checkExt(dt)" ng-model="dt.ext" />
                                                        <a class="pointer" ng-show="edit && checkedExt && NocheckedExt" ng-click="edit=false"><i class="fa fa-check-circle"></i></a>
                                                        <span ng-if="edit && !checkedExt" class="danger">This extension already exists</span>
                                                        <span ng-if="edit && !NocheckedExt" class="danger">A flavor must have an extension</span>
                                                    </td>
                                                    <td>{{dt.hl7Version}}</td>

                                                    <td><a class="pointer" ng-click="deleteDt(dt)"><i
                                                                                    class="fa fa-times fa-fw"></i></a></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                </div>
                            </div>
                        </div>
            </form>
            </div>
    </script>

    <script type="text/ng-template" id="AbortPublishCtl.html">
        <div class="modal-header">
            <h3 class="modal-title">
        </h3>
        </div>
        <div class="modal-body">
            <p>You cannot Publish this data type since it contains unpublished elements </p>
            <div ng-show="unpublishedDatatypes.length>0">
                <h4>Datatype<h4>
        <div class="igl-table" ng-show="unpublishedDatatypes.length>0">
            <table class="table table-striped table-condensed table-bordered">
                <thead>
                <tr class="tbl-header">
                    <th>Component Path</th>
                    <th>Unpublishted Data Type</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="obj in unpublishedDatatypes" class="ng-scope">
                    <td>
                            <span>
                                <img style="width:15px; height:15px" ng-src="images/component.png" src="images/component.png">
                                <span style="width:60%" name="name" ng-bind="obj.location.name" class="ng-binding"> </span>
                                <span ng-bind="obj.location" class="ng-binding"></span>
                                </span>

                    </td>
                    <td>
                        <div class="ng-binding">{{obj.datatype.name}}_{{obj.datatype.ext}}</div>
                    </td>
                </tr><!-- end ngRepeat: ref in references -->
                </tbody>
            </table>
        </div>

        </div>

        <div ng-show="unpublishedTables.length>0">
         <h4>Tables<h4>

        <div class="igl-table" ng-show="unpublishedTables.length>0">
            <table class="table table-striped table-condensed table-bordered">
                <thead>
                <tr class="tbl-header">
                    <th>Component Path</th>
                    <th>Unpublishted Tables</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="obj in unpublishedTables" class="ng-scope">
                    <td>
                            <span>
                                <img style="width:15px; height:15px" ng-src="images/component.png" src="images/component.png">
                                <span style="width:60%" name="name" ng-bind="obj.location.name" class="ng-binding"> </span>
                                <span ng-bind="obj.location" class="ng-binding"></span>
                                </span>

                    </td>
                    <td>
                        <div class="ng-binding">{{obj.table.bindingIdentifier +obj.table.ext}}</div>
                    </td>
                </tr><!-- end ngRepeat: ref in references -->
                </tbody>
            </table>
        </div>

        </div>




    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>


<script type="text/ng-template" id="ConfirmDatatypePublishCtl.html">
    <div class="modal-header">
        <h3 class="modal-title">Publish Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>Are You Sure You Want To Publish This Data Type ? A published Data Type Is Assigned A Version And Cannot Be Edited.</p>
        <p>This Operation is Irreversible.</p>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-primary btn-sm" ng-disabled="loading" ng-click="delete()"><span><i
                class="fa fa-check fa-fw">&nbsp; </i>Confirm</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>
<script type="text/ng-template" id="cannotPublish.html">
    <div class="modal-header">
        <h3 class="modal-title">Redirecting confirmation
        </h3>
    </div>
    <div class="modal-body">
	<span> You cannot create a new version of {{datatypeTo.name}}_{{datatypeTo.ext}} until you pubish the pervious version </span>
    </div>
    </div>
    <div class="modal-footer">
            <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>

<script type="text/ng-template" id="ConfirmTablePublish.html">
    <div class="modal-header">
        <h3 class="modal-title">Publish Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>Are You Sure You Want To Publish This Value Set? A Published Value Set Is Assigned A Version And Cannot Be Edited.</p>
        <p>This Operation is Irreversible.</p>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-primary btn-sm" ng-disabled="loading" ng-click="confirm()"><span><i
                class="fa fa-check fa-fw">&nbsp; </i>Confirm</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>

<script type="text/ng-template" id="ShareTableModal.html">
	<div>
		<div class="modal-header">
			<h3 class="modal-title">Share Value Set</h3> </div>
		<div class="modal-body">
			<div class="container" style="margin-bottom: 20px;margin-top: 20px">
				<div class="row" ng-if="error != null">
					<div class="col-md-12">
						<span ng-bind="error" style="color: red;"></span>
					</div>
				</div>

				<div class="row" ng-if="igdocumentSelected.shareParticipantIds.length > 0">
					<div class="col-md-12">
						<h5>Shared with</h5>
						<div class="table-responsive">
							<table class="table">
								<tbody>
									<tr ng-repeat="participant in igdocumentSelected.shareParticipantIds">
										<td><i>{{participant.fullname}} ({{participant.username}})</i></td>
										<td>
                      <button ng-disabled="loading" class="btn btn-raised btn-warning btn-xs" type="button" style="margin-top: 0;" ng-if="participant.pendingApproval">Pending Request</button>
                      <button ng-disabled="loading" class="btn btn-raised btn-danger btn-xs" type="button" style="margin-top: 0;" ng-click="unshare(participant)" ng-if="participant.pendingApproval"><i class="fa fa-times"></i> Cancel</button>
                    </td>
                    <td>
                        {{participant.permission}}
                    </td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>


				<div class="row">
					<div class="col-md-8">
						<tags-input ng-model="tags" key-property="id" display-property="username" placeholder="Find user" replace-spaces-with-dashes="false" add-from-autocomplete-only="true">
							<auto-complete source="loadUsernames($query)" min-length="0" load-on-focus="true" load-on-empty="true" max-results-to-show="32" template="autocomplete-template"></auto-complete>
						</tags-input>
					</div>
					<div class="col-md-4">
						<ui-select ng-model="selectedItem.selected" theme="bootstrap" ng-disabled="true">
							<ui-select-match>{{$select.selected}}</ui-select-match>
							<ui-select-choices repeat="item in itemArray | filter: $select.search">
								<div ng-bind-html="item | highlight: $select.search"></div>
							</ui-select-choices>
						</ui-select>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button class="btn btn-raised btn-default" type="button" ng-click="cancel()"><i class="fa fa-times fa-fw"></i> Cancel </button>
				<button class="btn btn-raised btn-primary" type="button" ng-click="ok()" ng-disabled="tags.length === 0"><i class="fa fa-check"></i>Share</button>
			</div>
		</div>
	</div>
</script>

<script type="text/ng-template" id="ShareDatatypeModal.html">
  <div>
    <div class="modal-header">
      <h3 class="modal-title">Share Datatype</h3>
    </div>
    <div class="modal-body">
      <div class="container" style="margin-bottom: 20px;margin-top: 20px">
        <div class="row" ng-if="error != null">
          <div class="col-md-12">
            <span ng-bind="error" style="color: red;"></span>
          </div>
        </div>

        <div class="row" ng-if="igdocumentSelected.shareParticipantIds.length > 0">
          <div class="col-md-12">
            <h5>Shared with</h5>
            <div class="table-responsive">
              <table class="table">
                <tbody>
                  <tr ng-repeat="participant in igdocumentSelected.shareParticipantIds">
                    <td><i>{{participant.fullname}} ({{participant.username}})</i></td>
                    <td>
                      <button ng-disabled="loading" class="btn btn-raised btn-warning btn-xs" type="button" style="margin-top: 0;" ng-if="participant.pendingApproval">Pending Request</button>
                      <button ng-disabled="loading" class="btn btn-raised btn-danger btn-xs" type="button" style="margin-top: 0;" ng-click="unshare(participant)" ng-if="participant.pendingApproval"><i class="fa fa-times"></i> Cancel</button>
                    </td>
                    <td>
                      {{participant.permission}}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>


        <div class="row">
          <div class="col-md-8">
            <tags-input ng-model="tags" key-property="id" display-property="username" placeholder="Find user" replace-spaces-with-dashes="false" add-from-autocomplete-only="true">
              <auto-complete source="loadUsernames($query)" min-length="0" load-on-focus="true" load-on-empty="true" max-results-to-show="32" template="autocomplete-template"></auto-complete>
            </tags-input>
          </div>
          <div class="col-md-4">
            <ui-select ng-model="selectedItem.selected" theme="bootstrap" ng-disabled="true">
              <ui-select-match>{{$select.selected}}</ui-select-match>
              <ui-select-choices repeat="item in itemArray | filter: $select.search">
                <div ng-bind-html="item | highlight: $select.search"></div>
              </ui-select-choices>
            </ui-select>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-raised btn-default" type="button" ng-click="cancel()"><i class="fa fa-times fa-fw"></i> Cancel </button>
        <button class="btn btn-raised btn-primary" type="button" ng-click="ok()" ng-disabled="tags.length === 0"><i class="fa fa-check"></i>Share</button>
      </div>
    </div>
  </div>
</script>

<script type="text/ng-template" id="ShareDatatypeErrorModal.html">
	<div>
		<div class="modal-header">
			<h3 class="modal-title">Share Datatype Error</h3> </div>
		<div class="modal-body">
			<div class="container" style="margin-bottom: 20px;margin-top: 20px">
				<div class="row">
					<div class="col-md-12">
						<span style="color: red;">
              Please Publish this datatype before sharing it. You cannot share a datatype that is not Published.
            </span>
					</div>
				</div>

      </div>

      <div class="modal-footer">
				<button class="btn btn-raised btn-primary" type="button" ng-click="cancel()"><i class="fa fa-check"></i>OK</button>
			</div>
    </div>
  </div>
</script>

<script type="text/ng-template" id="ShareTableErrorModal.html">
	<div>
		<div class="modal-header">
			<h3 class="modal-title">Share Value Set Error</h3> </div>
		<div class="modal-body">
			<div class="container" style="margin-bottom: 20px;margin-top: 20px">
				<div class="row">
					<div class="col-md-12">
						<span style="color: red;">
              Please Publish this Value Set before sharing it. You cannot share a Value Set that is not Published.
            </span>
					</div>
				</div>

      </div>

      <div class="modal-footer">
				<button class="btn btn-raised btn-primary" type="button" ng-click="cancel()"><i class="fa fa-check"></i>OK</button>
			</div>
    </div>
  </div>
</script>

<script type="text/ng-template" id="autocomplete-template">
    <div class="autocomplete-template">
        <div class="share_left-panel">
            <i class="fa fa-user" aria-hidden="true"></i>
        </div>
    </div>
    <div class="share_right-panel">
        <span ng-bind-html="$highlight($getDisplayText())"></span>
        <span>({{data.fullname}})</span>
    </div>
</script>
<script type="text/ng-template" id="confirmSwitch.html">
    <div class="modal-header">
        <h3 class="modal-title">Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>All references to  {{source.name}}_{{source.ext}}<span class="version-badge-label">v{{source.publicationVersion}}</span> will be replaced by  {{dest.name}}_{{dest.ext}}<span class="version-badge-label">v{{dest.publicationVersion}}</span> in your IG Document</p>

    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-success btn-sm" ng-disabled="loading" ng-click="confirm()"><span><i
                class="fa fa-trash-o fa-fw">&nbsp; </i>Confirm</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>

<script type="text/ng-template" id="confirmUnshare.html">
    <div class="modal-header">
        <h3 class="modal-title">Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>Are you sure you want to remove this {{datatypeTo.name}}_{{datatypeTo.ext}}<span class="version-badge-label">v{{datatypeTo.publicationVersion}}</span></p>

    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-success btn-sm" ng-disabled="loading" ng-click="confirm()"><span><i
                class="fa fa-trash-o fa-fw">&nbsp; </i>Confirm</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>

<script type="text/ng-template" id="abortDeleteDatatype.html">
    <div class="modal-header">
        <h3 class="modal-title">Data Type References Found
            <button class="btn btn-raised  btn-xs btn-primary pull-right" ng-click="ok()"><span><i class="fa fa-times fa-fw">
                &nbsp; </i>Close</span>
            </button>
        </h3>
    </div>
    <div class="modal-body">
        <p>We cannot delete this {{getMessage()}} because it is being referenced by elements below:</p>

        <div class="igl-table">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr class="tbl-header">
                        <th>Name</th>
                        <th>Path</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="ref in refsForDelete  track by $index ">
                        <td>
                            <span>
                            <span ng-show="ref.type === 'field'" class="label label-field label-icon">F</span>
                            <span ng-show="ref.type === 'component'" class="label label-component label-icon">C</span>
                            <span ng-show="ref.type === 'subcomponent'" class="label label-sub-component label-icon">S</span>
                            <span style="width:60%" name="name" ng-bind="ref.name"></span>
                            <span ng-bind="ref.description"></span>
                            </span>
                        </td>
                        <td>
                            <div>{{::ref.path}}</div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</script>



<script type="text/ng-template" id="datatype_tree_item.html">
    <tr style="width:100%">
        <td ng-if="data.folderClass">
            <div ng-if="data.type === 'datatype'">
                <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
            </div>
            <div ng-if="data.type === 'component'">
                <div ng-if="data.child.components &&  data.child.components.length > 0">
                    <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="data.type === 'component'">
                    <div ng-if="data.child.components &&  data.child.components.length > 0">
                        <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
                    </div>
                    <div ng-if="!data.child.components ||  data.child.components.length == 0">
                        <i class="fa fa-check" />
                    </div>
                </div>
            </td>
            <td ng-if="!data.folderClass">
                <div ng-if="data.type === 'datatype'">
                    <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="data.type === 'component'">
                    <div ng-if="data.child.components &&  data.child.components.length > 0">
                        <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
                    </div>
                    <div ng-if="!data.child.components ||  data.child.components.length == 0">
                        <i class="fa fa-check" />
                    </div>
                </div>
            </td>
            <td>
                <div ng-if="data.type === 'datatype'">
                    <div>
                        <span class="label label-datatype label-icon">D</span>
                        <span>&nbsp;{{::data.name}}</span>
                    </div>
                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.components" ng-include="'datatype_tree_item.html'"></div>
                        </table>
                    </div>
                </div>
                <div ng-if="data.type === 'component'">
                    <div data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                        <span class="label label-component label-icon">C</span>
                        <span>&nbsp;{{::data.position}}. &nbsp;[{{::data.usage}}] {{::data.name}}</span>
                    </div>
                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.child.components" ng-include="'datatype_tree_item.html'"></div>
                        </table>
                    </div>
                </div>
            </td>
        </tr>
    </script>
    <script type="text/ng-template" id="datatype_tree_Predicate.html">
        <tr style="width:100%">
            <td ng-if="data.folderClass">
                <div ng-if="data.type === 'datatype'">
                    <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="data.type === 'component'">
                    <div ng-if="data.child.components &&  data.child.components.length > 0">
                        <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
                    </div>
                    <div ng-if="!data.child.components ||  data.child.components.length == 0">
                        <i class="fa fa-check" />
                    </div>
                </div>
            </td>
            <td ng-if="!data.folderClass">
                <div ng-if="data.type === 'datatype'">
                    <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="data.type === 'component'">
                    <div ng-if="data.child.components &&  data.child.components.length > 0">
                        <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
                    </div>
                    <div ng-if="!data.child.components ||  data.child.components.length == 0">
                        <i class="fa fa-check" />
                    </div>
                </div>
            </td>
            <td>
                <div ng-if="data.type === 'datatype'">
                    <div>
                        <span class="label label-datatype label-icon">D</span>
                        <span>&nbsp;{{::data.name}}</span>
                    </div>
                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.components" ng-include="'datatype_tree_Predicate.html'"></div>
                        </table>
                    </div>
                </div>
                <div ng-if="data.type === 'component'">
                    <div data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                        <span class="label label-component label-icon">C</span>
                        <span>&nbsp;{{::data.position}}. &nbsp;[{{::data.usage}}] {{::data.name}}</span>
                    </div>
                    <div id="expanded-data" ng-if="data.childrenVisible">
                        <table class="table table-striped" id="nested-table">
                            <div ng-repeat="data in data.child.components" ng-include="'datatype_tree_Predicate.html'"></div>
                        </table>
                    </div>
                </div>

            </div>
        </td>
    </tr>
</script>

<script type="text/ng-template" id="CustomExportModal.html">
    <div class="modal-header">
        <h3 class="modal-title">Custom Export
        </h3>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-md-6">
                <span>Export Type:</span>
                <ui-select ng-model="selectedType.selected">
                    <ui-select-match placeholder="Select type...">{{$select.selected.type}}</ui-select-match>
                    <ui-select-choices repeat="item in exportType | filter: $select.search">
                        <div ng-bind-html="item.type | highlight: $select.search"></div>
                    </ui-select-choices>
                </ui-select>
            </div>

            <div class="col-md-6" ng-if="selectedType.selected">
                <span>Layout:</span>
                <ui-select ng-model="selectedLayout.selected">
                    <ui-select-match placeholder="Select layout...">{{$select.selected}}</ui-select-match>
                    <ui-select-choices repeat="item in selectedType.selected.layout | filter: $select.search">
                        <div ng-bind-html="item | highlight: $select.search"></div>
                    </ui-select-choices>
                </ui-select>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span>
          <i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-success btn-sm" ng-click="ok()"><span>
          <i class="fa fa-trash-o fa-fw">&nbsp; </i>Confirm</span>
        </button>
    </div>
</script>
<script type="text/ng-template" id="confirmDecisionDeleteCtrl.html">
      <div class="modal-header">
        <h3 class="modal-title">Delete Confirmation
        </h3>
    </div>
    <div class="modal-body">
	<span> Are you sure you want to delete this Decision </span>
    </div>
    </div>
    <div class="modal-footer">
            <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-success btn-sm" ng-click="ok()"><span>
          <i class="fa fa-trash-o fa-fw">&nbsp; </i>Confirm</span>
        </button>
    </div>
    </div>
</script>