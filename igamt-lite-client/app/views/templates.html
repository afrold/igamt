<style id="antiClickjack">
    body {
        display: none !important;
    }
</style>
<script type="text/javascript">
    if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
    } else {
        top.location = self.location;
    }
</script>
<script type="text/ng-template" id="warning-dialog.html">
    <div class="modal-header">
        <h3>Your session will expire soon!</h3>
    </div>
    <div idle-countdown="countdown" ng-init="countdown=30" class="modal-body">
        <progressbar type="warning" max="30" value="30" animate="false" class="progress-striped active">Your session will expire in {{countdown}} second(s).
        </progressbar>
    </div>
</script>
<script type="text/ng-template" id="timedout-dialog.html">
    <div class="modal-body info-dlg">
        <p>
            Your session has expired.
        </p>
    </div>
</script>
<script type="text/ng-template" id="NewAppVersion.html">
    <div class="modal-body error-dlg">
        <div ng-include="'InvalidAppState.html'"></div>
        <br/>
        <div style="text-align:center">
            <p>Please click
                <button class="btn btn-raised btn-xs btn-primary" ng-click="close()" type="button" title="Cancel" class="point">
                    <i class="fa fa-refresh"></i>
                    reset
                </button> to reinitialize your browser.</p>
        </div>

    </div>
</script>
<script type="text/ng-template" id="CriticalError.html">
    <div class="modal-body error-dlg">
        <p ng-bind="error">
        </p>
    </div>
    <div class="modal-footer error-dlg">
        <div class="pull-right">
            <button class="btn btn-raised btn-xs btn-primary" ng-click="close()" type="button" title="Cancel" class="point">
                <i class="fa fa-times"></i>
                Close
            </button>
        </div>
    </div>
</script>
<script type="text/ng-template" id="ConfirmLogout.html">

    <md-dialog aria-label="confirmation">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2>Logout Confirmation</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                    <p>You currently have unsaved changes. Are you sure you want to proceed ? All unsaved changes will be lost</p>
                </div>
            </md-dialog-content>

            <md-dialog-actions layout="row">
                <md-button class="btn btn-raised btn-success btn-sm" ng-click="logout()"><span><i
                        class="fa fa-sign-out fa-fw">&nbsp; </i>Logout</span>
                </md-button>
             </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="ConfirmLeaveDlg.html">
    <!--<div class="modal-header">-->
        <!--<p class="modal-title" style="font-size:20px; font-weight:bold"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Confirmation-->
        <!--</p>-->
    <!--</div>-->
    <!--<div class="modal-body">-->
        <!--<p style="text-align: left">You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost.</p>-->
    <!--</div>-->
    <!--<div class="modal-footer">-->

        <!--<md-button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i-->
                <!--class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>-->
        <!--</md-button>-->
        <!--<md-button class="btn btn-raised btn-warning btn-sm" ng-click="discard()"><span><i-->
                <!--class="fa fa-sign-out fa-fw">&nbsp; </i>Discard Changes</span>-->
        <!--</md-button>-->
        <!--<md-button class="btn btn-raised btn-success btn-sm" ng-click="save()"><span><i-->
                <!--class="fa fa-sign-out fa-fw">&nbsp; </i>Save and Continue</span>-->
        <!--</md-button>-->
        <!--<div ng-show="error!=null" ng-bind="error"></div>-->
    <!--</div>-->
    <md-dialog aria-label="confirmation">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2>Confirmation </h2>

                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                    <p style="text-align: left">You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost.</p>

                </div>
            </md-dialog-content>

            <md-dialog-actions layout="row">
                <md-button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
                </md-button>
                <md-button class="btn btn-raised btn-warning btn-sm" ng-click="discard()"><span><i
                class="fa fa-sign-out fa-fw">&nbsp; </i>Discard Changes</span>
                </md-button>
                <md-button class="btn btn-raised btn-success btn-sm" ng-disabled="!valid" ng-click="save()"><span><i
                class="fa fa-sign-out fa-fw">&nbsp; </i>Save and Continue</span>
                </md-button>
                <div ng-show="error!=null" ng-bind="error"></div>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="NotificationSuccessTemplate.html">
    <div class="ui-notification custom-template">
        <div class="message">
            <i class="fa fa-check" aria-hidden="true"></i>
            <span ng-bind-html="message"></span>
        </div>
    </div>
</script>
<script type="text/ng-template" id="NotificationErrorTemplate.html">
    <div class="ui-notification custom-template">
        <div class="message">
            <i class="fa fa-times" aria-hidden="true"></i>
            <span ng-bind-html="message"></span>
        </div>
    </div>
</script>
<script type="text/ng-template" id="NotificationWarningTemplate.html">
    <div class="ui-notification custom-template">
        <div class="message">
            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
            <span ng-bind-html="message"></span>
        </div>
    </div>
</script>
<script type="text/ng-template" id="Blank.html">
    No Section Selected
</script>
<script type="text/ng-template" id="CreateNewIGAlert.html">
    <div class="modal-header">
        <p class="modal-title" style="font-size:20px; font-weight:bold"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Alert
        </p>
    </div>
    <div class="modal-body">
        <p style="text-align: left">You Currently Have An IG Document In Progress. Please Close The Current IG Document Before Creating A New One.</p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-primary btn-sm" ng-click="close()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Close</span>
        </button>
    </div>
</script>
<script type="text/ng-template" id="AddHL7TableOpenCtrlMd.html">
    <md-dialog aria-label="confirmation">
    <form ng-cloak>
        <md-toolbar>
            <div class="md-toolbar-tools">
                <h2> Add HL7 Value Sets </h2>
                <span flex></span>
                <md-button class="md-icon-button" ng-click="cancel()">
                    <i class="material-icons">clear</i>
                </md-button>
            </div>
        </md-toolbar>

        <md-dialog-content>
            <div class="md-dialog-content">
            <div class="row">
                <!--<div class="col-md-12">-->
                    <!--<div class="btn-group btn-group-sm pull-left" data-toggle="buttons">-->
                        <!--<label ng-repeat="vr in hl7Versions" class="btn btn-raised btn-info btn-xs" ng-click="loadTablesByVersion(vr)" ng-class="{ 'active':vr===selectedHL7Version}">-->
                                <!--<input type="radio" ng-value="vr" ng-model="selectedHL7Version">{{vr}}</input>-->
                            <!--</label>-->
                    <!--</div>-->
                <!--</div>-->



                <div layout="row" layout-align="start center">
                    <label style="color:black !important; margin-right:8px;">Select HL7 version:</label>


                    <md-radio-group ng-model="selectedHL7Version" ng-change="loadTablesByVersion(selectedHL7Version)" style="display: inline-flex;" required>

                        <md-radio-button ng-repeat="vr in hl7Versions"  ng-value="vr" class="md-primary" style="margin-left:25px;">{{vr}}</md-radio-button>

                    </md-radio-group>

                </div>

                <div class="col-md-6" ng-if="selectedHL7Version&&selectedHL7Version !==''">
                    <div ng-show="loading" style="text-align:center">
                        <i class="fa fa-spinner fa-pulse fa-2x"></i>
                    </div>
                    <div ng-show="!loading">
                        <h5>Tables for {{source}} {{selectedHL7Version}}</h5>
                        <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                            <thead>
                                <tr class="tbl-header" layout="row">
                                    <th flex="40">Binding Identifier</th>
                                    <th flex="40">Name</th>
                                    <th flex="20"></th>
                                </tr>
                                <tr layout="row">
                                    <th flex="40">
                                        <input ng-model="search.bindingIdentifier" class="form-control" placeholder="by id">
                                    </th>
                                    <th flex="40">
                                        <input ng-model="search.name" class="form-control" placeholder="by name">
                                    </th>
                                    <th flex="20"></th>
                                </tr>
                            </thead>
                            <tbody style="display: block; max-height:400px; overflow-y:scroll">
                                <tr layout="row" ng-repeat="table in hl7Tables | orderBy: 'bindingIdentifier' | filter:search:strict">
                                    <td flex="40">{{table.bindingIdentifier}}</td>
                                    <td flex="40">{{table.name}}</td>
                                    <td style="cursor:pointer"  title="add" flex="20"><a class="pointer" ng-click="addTable(table)"><i class="fa fa-plus fa-fw"></i></a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-md-6" ng-show="selectedTables.length> 0">
                    <div class="igl-table">
                        <h5>Selected tables</h5>
                        <table class="table table-striped table-bordered table-condensed hl7-versions-valueset">
                            <thead>
                                <tr class="tbl-header">
                                    <th>Binding Identifier</th>
                                    <th>Name</th>
                                    <th>HL7 Version</th>
                                    <th>oid</th>
                                    <th/>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="table in selectedTables">
                                    <td>{{table.bindingIdentifier}}</td>
                                    <td>{{table.name}}</td>
                                    <td>{{table.hl7Version}}</td>
                                    <td>{{table.oid}}</td>
                                    <td style="cursor:pointer" title="Delete Value Set"><a class="pointer" ng-click="deleteTable(table)"><i
                                            class="fa fa-times fa-fw"></i></a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            </div>
        </md-dialog-content>
        <md-dialog-actions layout="row" layout-align="end end">
            <md-button class="btn btn-raised btn-primary btn-sm" ng-show="selectedTables.length > 0" ng-disabled="loading" ng-click="save()"><span><i
                    class="fa fa-plus fa-fw">&nbsp; </i>Save</span></md-button>
            <!--<md-button class="btn btn-raised btn-warning btn-sm" ng-show="selectedTables.length > 0" ng-disabled="loading" ng-click="cancel()"><span><i-->
                    <!--class="fa fa-times fa-fw">&nbsp; </i>Close</span></md-button>-->
            <!--<md-button class="btn btn-raised btn-warning btn-sm" ng-show="selectedTables.length === 0" ng-disabled="loading" ng-click="cancel()"><span><i-->
                    <!--class="fa fa-times fa-fw">&nbsp; </i>Close</span></md-button>-->
        </md-dialog-actions>
    </form>
</md-dialog>
</script>
<script type="text/ng-template" id="AddCSVTableOpenCtrlMd.html">
    <md-dialog aria-label="confirmation">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2>Add ValueSet From CSV file</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                    <form class="form-horizontal" novalidate>
            <div class="form-group">
                <div class="col-sm-12">
                    <label for="csvValueSetFile" class="custom-file-upload">
                        <i class="fa fa-cloud-upload"></i> Choose CSV File
                    </label>
                    <input id="csvValueSetFile" accept=".csv"
                           onchange="angular.element(this).scope().validateForSelectedFile(this.files)" type="file"
                           name="csvValueSetFile"/>

                    <div id="csvFileName"></div>
                    <div id="errorMessageForCSV"></div>
                </div>
            </div>

            <p style="color:lightskyblue;">How it works</p>
            <ol style="color:lightskyblue;">
                <li style="color:lightskyblue;">Download 'ValueSet Empty Form (Excel)'</li>
                <li style="color:lightskyblue;">Edit sheets using MS Excel</li>
                <li style="color:lightskyblue;">Save as CSV file</li>
                <li style="color:lightskyblue;">Upload CSV file</li>
            </ol>

            <p style="color:lightskyblue;">Files</p>
            <ul>
                <li style="color:lightskyblue;"><a class="pointer" href="docs/ValueSet_EmptyForm_Excel.xlsx" target="_blank"><i class="fa fa-file-excel-o fa-fw"></i>ValueSet Empty Form (Excel)</a></li>
                <li style="color:lightskyblue;"><a class="pointer" href="docs/ValueSet_EmptyForm_csv.csv" target="_blank"><i class="fa fa-file-code-o fa-fw"></i>ValueSet Empty Form (CSV)</a></li>
                <li style="color:lightskyblue;"><a class="pointer" href="docs/ValueSet_sample_excel.xlsx" target="_blank"><i class="fa fa-file-excel-o fa-fw"></i>ValueSet Sample Form (Excel)</a></li>
                <li style="color:lightskyblue;"><a class="pointer" href="docs/ValueSet_sample_csv.csv" target="_blank"><i class="fa fa-file-code-o fa-fw"></i>ValueSet Sample Form (CSV)</a></li>
            </ul>
        </form>

                </div>
            </md-dialog-content>

             <md-dialog-actions layout="row">
                <md-button id="csvSaveButton" class="btn btn-raised btn-success btn-sm" ng-click="save()" disabled><span><i class="fa fa-check fa-fw">&nbsp; </i>Save</span></md-button>
             </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="AddPHINVADSTableOpenCtrlMd1.html">
    <md-dialog aria-label="confirmation" style="width:90%;">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Add PHINVADs Tables </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="row" style="padding: 10px;">
                        <div class="col-md-6">
                            <div flex layout="row">
                                <span class="material-icons" style="font-size: 33px;">search</span>
                                <md-input-container flex style="margin: 0px !important">
                                    <input type="search" class="input-search-border" ng-model="searchText.bindingIdentifier" placeholder="Search by Binding Identifier"/>
                                </md-input-container>
                            </div>
                            <table class="table table-striped table-bordered table-fixed-45">
                                <thead>
                                <tr class="tbl-header" layout="row" layout-align="start start">
                                    <th flex="30">Binding Identifier</th>
                                    <th flex="30">Name</th>
                                    <th flex="30">oid</th>
                                    <th flex="10">Actions</th>
                                </tr>
                                </thead>
                                <tbody style="display: block !important; max-height: 350px !important; overflow-y: scroll">
                                <tr ng-repeat="table in tablestoAdd| filter:searchText" layout="row" layout-align="start start">
                                    <td flex="30">
                                        {{table.bindingIdentifier}}
                                    </td>
                                    <td flex="30">
                                        {{table.name}}
                                    </td>
                                    <td flex="30">
                                        {{table.oid}}
                                    </td>
                                    <td flex="10" style="text-align:center">
                                        <a class="pointer" ng-hide="isAlreadyIn(table) || isAlreadySelected(table)" ng-click="addTable(table)"><i class="fa fa-plus fa-fw"></i></a>
                                        <span ng-show="isAlreadyIn(table)">Added</span>
                                        <span ng-show="isAlreadySelected(table)">Selected</span>
                                    </td>
                                </tr>
                                </tbody>
                            </table>

                        </div>
                    <div class="col-md-1">
                    </div>

                        <div class="col-md-5" ng-show="selectedTables.length > 0">
                            <div flex layout="row">
                                <span class="material-icons" style="font-size: 33px;">search</span>
                                <md-input-container flex style="margin: 0px !important">
                                    <input type="search" class="input-search-border" ng-model="searchText2.bindingIdentifier" placeholder="Search by Binding Identifier"/>
                                </md-input-container>
                            </div>
                            <table class="table table-striped table-bordered table-fixed-45">
                                <thead>
                                <tr class="tbl-header" layout="row" layout-align="start start">
                                    <th flex="30">Binding Identifier</th>
                                    <th flex="30">Name</th>
                                    <th flex="30">oid</th>
                                    <th flex="10">Actions</th>
                                </tr>
                                </thead>
                                <tbody style="display: block; max-height: 350px !important; overflow-y: scroll">
                                <tr ng-repeat="table in selectedTables|filter:searchText2" layout="row" layout-align="start start" >
                                    <td flex="30">
                                        {{table.bindingIdentifier}}
                                    </td>
                                    <td flex="30">
                                        {{table.name}}
                                    </td>
                                    <td flex="30">
                                        {{table.oid}}
                                    </td>
                                    <td flex="10" style="text-align:center;cursor: pointer;"><a class="pointer" ng-click="deleteTable(table)">
                                        <i class="fa fa-times fa-fw"></i></a>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">
                <md-button class="btn btn-raised btn-primary btn-sm" ng-disabled="loading || selectedTables.length === 0" ng-click="save()"> ADD </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="AddPHINVADSTableOpenCtrlMd.html">
    <md-dialog aria-label="confirmation" style="width: 90%">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Add PHINVADs Tables </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                    <form class="form-horizontal" novalidate id="phinvadFrom" name="phinvadFrom">
                        <div class="form-group" layout="row">

                            <div class="col-sm-12">
                                <input type="text" name="searchText" ng-model="search.bindingIdentifier"  ng-change="searchPhinvads(search.bindingIdentifier);search2={}" ng-model-options="{ debounce: 1000 }" class="form-control" placeholder="Search by Binding Indentifier" no-dirty-check>
                            </div>


                        </div>
                        <div layout="row">

                        <div flex="50" ng-if="searched">
                            <table ng-show="phinvadsTables.length > 0" st-safe-src="phinvadsTables" st-table="phinvadsTablesTemp" class="table table-striped table-condensed table-bordered">
                                <thead>
                                <tr>
                                    <th flex="30">

                                        <md-input-container class="normal">
                                            <input ng-model="search2.bindingIdentifier">

                                        </md-input-container>
                                    </th>
                                    <th flex="30">
                                        <md-input-container class="normal">
                                            <input ng-model="search2.name">
                                        </md-input-container>
                                    </th>
                                    <th flex="20"></th>
                                    <th flex="10"></th>
                                    <th flex="10"></th>

                                </tr>
                                <tr class="tbl-header">
                                    <th flex="30" st-sort="bindingIdentifier">Binding Identifier</th>
                                    <th flex="30" st-sort="name">Name</th>
                                    <th flex="20" st-sort="numberOfCodes">#codes</th>
                                    <th flex="10"> As Is</th>
                                    <th flex="10">As a Flavor</th>

                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="table in phinvadsTablesTemp|filter:search2">
                                    <td flex="30">
                                        {{table.bindingIdentifier}}
                                    </td>
                                    <td flex="30">
                                        {{table.name}}
                                    </td>
                                    <td flex="20">
                                        {{table.numberOfCodes}}
                                    </td>
                                    <td flex="10" style="text-align:center">
                                        <a class="pointer" ng-hide="isAlreadyIn(table) || isAlreadySelected(table)" ng-click="AsIs(table)"><i class="fa fa-plus fa-fw"></i></a>
                                        <span ng-show="isAlreadyIn(table)">Added</span>
                                        <span ng-show="isAlreadySelected(table)">Selected</span>
                                    </td>

                                    <td flex="10" style="text-align:center">
                                        <a class="pointer" ng-click="AsFlavor(table)"><i class="fa fa-plus fa-fw"></i></a>
                                    </td>
                                </tr>
                                </tbody>
                                <tr style="float:center!important;" ng-if="phinvadsTables.length > 10">
                                    <td colspan="6" class="text-center" style="float:center !important;">
                                        <div st-pagination="" st-items-by-page="10" st-displayed-pages="7" style="float:center !important;"></div>
                                    </td>
                                </tr>
                            </table>

                            <div ng-show="!phinvadsTables || phinvadsTables.length === 0">
                                No table found.
                            </div>
                        </div>


                        <div flex="50" ng-if="searched" style="margin-left: 10px;">
                            <table ng-show="selectedTables.length > 0"  st-table="selectedTables" class="table table-striped table-condensed table-bordered">
                                <thead>
                                <tr>
                                    <th flex="40">

                                        <md-input-container class="normal">
                                            <input ng-model="search3.bindingIdentifier">

                                        </md-input-container></th>
                                    <th flex="30">
                                        <md-input-container class="normal">
                                            <input ng-model="search3.name">

                                        </md-input-container>
                                    </th>
                                    <th flex="10"></th>
                                    <th flex="10"></th>

                                    <th flex="10"></th>

                                </tr>
                                <tr class="tbl-header">
                                    <th flex="40" st-sort="bindingIdentifier">Binding Identifier</th>
                                    <th flex="30" st-sort="name">Name</th>
                                    <th flex="10" st-sort="numberOfCodes">#Codes</th>
                                    <th flex="10">Include Codes</th>
                                    <th flex="10"></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="table in selectedTables  | filter:search3 track by $index">
                                    <td flex="40">
                                        <div ng-if="table.scope!=='USER'" style="max-width: 200px; word-wrap: break-word;">{{table.bindingIdentifier}}</div>
                                        <md-input-container class="normal" ng-if="table.scope=='USER'" style="width: 100%" required>
                                            <input ng-model="table.bindingIdentifier" no-dirty-check>
                                        </md-input-container>
                                        <div role="alert" style="color:red" ng-show="duplicated(table)" >
                                            <div class="my-message">Binding Identifier already used</div>
                                        </div>

                                    </td>
                                    <td flex="30">
                                        {{table.name}}
                                    </td>
                                    <td flex="10">
                                        {{table.numberOfCodes}}
                                    </td>
                                    <td flex="10">
                                        <md-checkbox ng-if="table.status=='PUBLISHED' && table.numberOfCodes<=500" ng-model="codesPresence[table.id]"></md-checkbox>
                                        <div ng-if="table.status=='PUBLISHED' && table.numberOfCodes>500">Not Included</div>

                                        <md-checkbox ng-if="table.scope=='USER' && table.numberOfCodes<=500" ng-checked="table.sourceType=='INTERNAL'" ng-click="toggleFlavor(table)"></md-checkbox>
                                        <div ng-if="table.scope=='USER'&& table.numberOfCodes>500">Not Included</div>

                                    </td>
                                    <td flex="10" style="text-align:center;cursor: pointer;"><a class="pointer" ng-click="deleteTable(table)">
                                        <i class="fa fa-times fa-fw"></i></a>
                                    </td>
                                </tr>
                                </tbody>
                                <tr style="float:center !important;" ng-if="selectedTables.length > 10">
                                    <td colspan="6" class="text-center" style="float:center !important;">
                                        <div st-pagination="" st-items-by-page="10" st-displayed-pages="7" style="float:center !important;"></div>
                                    </td>
                                </tr>
                            </table>
                            <div ng-show="!selectedTables || selectedTables.length === 0" flex="50" style="margin-left:10px;">
                                No table selected.
                            </div>
                        </div>
                        </div>
                    </form>
                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">

                <md-button class="btn btn-raised btn-primary btn-sm" ng-disabled="saveDisabled()|| $invalid" ng-if="selectedTables.length" ng-click="save()"> Add </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="ConfirmIGDocumentDeleteCtrlMd.html">
    <md-dialog aria-label="confirmation">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Delete Confirmation</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                    <p>Are you sure you want to delete the IG Document:"{{igdocumentToDelete.metaData.title}}" ? This operation
                        is irreversible
                    </p>                    </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">
                <md-button  class="md-primary md-raised" md-autofocus ng-click="delete()">delete
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="ConfirmIGDocumentCloseCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Close Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>You currently have unsaved changes. Are you sure you want to close the IG Document ? All unsaved changes will be lost</p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-warning btn-sm" ng-disabled="loading" ng-click="discardChangesAndClose()"><span><i
                class="fa fa-times-circle fa-fw">&nbsp; </i>Discard Changes</span>
        </button>
        <button class="btn btn-raised btn-primary btn-sm" ng-disabled="loading" ng-click="saveChangesAndClose()"><span><i
                class="fa fa-check-circle fa-fw">&nbsp; </i>Apply Changes</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
</script>
<script type="text/ng-template" id="ConfirmIGDocumentOpenCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Open Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>You currently have an open IG document with unsaved changes. Are you sure you want to open the IG document ? All unsaved changes will be lost</p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-warning btn-sm" ng-disabled="loading" ng-click="discardChangesAndOpen()"><span><i
                class="fa fa-times-circle fa-fw">&nbsp; </i>Discard Changes</span>
        </button>
        <button class="btn btn-raised btn-primary btn-sm" ng-disabled="loading" ng-click="saveChangesAndOpen()"><span><i
                class="fa fa-check-circle fa-fw">&nbsp; </i>Apply Changes</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
</script>
<script type="text/ng-template" id="RichTextCtrlMd.html">
    <md-dialog aria-label="defTxt">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> {{::editorTarget.obj.position}} . {{::editorTarget.obj.name}} : {{::editorTarget.title}} </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                    <div ng-show="!editorTarget.disabled">
                        <textarea rows="10" froala="froalaEditorOptions" style="width:100%;" autofocus ng-model="editorTarget.obj[editorTarget.key]" id="globalEditor" name="content"></textarea>
                      </div>
                    <div ng-show="editorTarget.disabled" style="width:100%;">
                        <div froala-view="editorTarget.obj[editorTarget.key]"></div>
                    </div>

                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">
                <md-button  class="md-primary md-raised" md-autofocus ng-click="close()">Save
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>

</script>
<script type="text/ng-template" id="InputTextCtrl.html">

    <md-dialog aria-label="InputTextCtrl">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2 ng-show="editorTarget.obj.type==='segmentRef'">
                        {{editorTarget.obj.position}}.{{segmentsMap[editorTarget.obj.ref].name}}:{{segmentsMap[editorTarget.obj.ref].description}}</h2>

                    <h2 ng-show="editorTarget.obj.type==='group'">{{editorTarget.obj.position}}.{{editorTarget.obj.name}}</h2>

                    <h2 ng-show="editorTarget.obj.type !='segmentRef' && editorTarget.obj.type !='group'" class="modal-title">
                        {{editorTarget.obj.position}} . {{editorTarget.obj.name}} : {{editorTarget.title}}
                    </h2> {{::editorTarget.obj.position}}.{{::segmentsMap[editorTarget.obj.ref].name}}:{{::segmentsMap[editorTarget.obj.ref].description}}
                    </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                    <textarea rows="10" type="text" ng-disabled="editorTarget.disabled" style="width:100%;" autofocus name="inputEditor" class="form-control" ng-change="recordChanged()" ng-model="editorTarget.obj[editorTarget.key]"></textarea>


                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">
                <md-button  class="md-primary md-raised" md-autofocus ng-click="close()">Save
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="EditUserData.html">
    <md-dialog aria-label="editUserData">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> {{::definition.title}}</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                    <textarea rows="10" type="text" ng-disabled="disabled" style="width:100%;" autofocus name="inputEditor" class="form-control" ng-model="textData"></textarea>
                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">
                <md-button  class="md-primary md-raised" md-autofocus ng-disabled="disabled" ng-click="close()">Save</md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="EditCommentMd.html">


    <md-dialog aria-label="confirmation">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> {{title}}</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                    <div class="col-md-12">
                        <textarea rows="10" type="text" ng-disabled="disabled" style="width:100%;" autofocus name="inputEditor" class="form-control" ng-model="descriptionText"></textarea>
                    </div>
                    <div class="col-md-12">
                        <p ng-show="!currentComment" style="text-align: right">New Comments</p>
                        <p ng-show="currentComment" style="text-align: right">Last updated at {{currentComment.lastUpdatedDate|date:dateFormat}}</p>
                    </div>

                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">
                <md-button  class="md-primary md-raised" md-autofocus ng-click="close()">Save
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="EditDMSecondReference.html">
    <div class="modal-header">
        <h3>Select Second Reference</h3>
    </div>
    <div class="modal-body">
        <form class="form-horizontal" novalidate>
            <div class="row">
                <div class="col-md-4">
                    <select class="form-control" ng-model='selectedFieldPosition' ng-change="updateField();">
                        <option ng-repeat="field in segment.fields" value="{{field.position}}">
                            {{field.position}}. {{field.name}}
                        </option>
                    </select>
                </div>
                <div class="col-md-4">
                    <select class="form-control" ng-show="components" ng-model='selectedComponentPosition' ng-change="updateComponent();">
                        <option ng-repeat="component in components" value="{{component.position}}">
                            {{component.position}}. {{component.name}}
                        </option>
                    </select>
                </div>
                <div class="col-md-4">
                    <select class="form-control" ng-show="subComponents" ng-model='selectedSubComponentPosition'>
                        <option ng-repeat="component in subComponents" value="{{component.position}}">
                            {{component.position}}. {{component.name}}
                        </option>
                    </select>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">
            &nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-primary btn-sm" ng-click="close()"><span><i class="fa fa-floppy-o fa-fw">
            &nbsp; </i>Save</span>
        </button>
    </div>
</script>
<script type="text/ng-template" id="CoConstraintUSERDefinition.html">

    <md-dialog aria-label="Define USER column for CoConstraintTable" style="width:70%;">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h3>Define USER column for CoConstraintTable</h3>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>


            <md-dialog-content>
                <div class="md-dialog-content">

        <form class="form-horizontal" novalidate>

            <md-input-container layout="row">
                <label class="input-left">Title</label>
                <input flex="100" type="text"
                       ng-change="setDirty()"
                       name="title"
                       ng-model="title"
                       required>

            </md-input-container>

        </form>

                    </div>
                <md-dialog-actions layout="row" layout-align="end end">

                    <md-button class="btn btn-raised btn-primary btn-sm" ng-click="close()"><span><i class="fa fa-floppy-o fa-fw">
            &nbsp; </i>Save</span>
                    </md-button>
                </md-dialog-actions>
            </md-dialog-content>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="CoConstraintTHENDefinition.html">

    <md-dialog aria-label="Define THEN Column for CoConstraintTable" style="width:70%;">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h3>Define THEN Column for CoConstraintTable</h3>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>


            <md-dialog-content>
                <div class="md-dialog-content">
                    <form  novalidate>
                        <div layout="row">
                            <div flex style="margin-right: 5px; color:black; font-weight: bold;">
                                {{segment.name}}
                            </div>
                            <div flex style="margin-right: 5px;">
                                <md-select  ng-model='selectedFieldPosition' ng-change="updateField();">
                                    <md-option ng-repeat="field in segment.fields" ng-value="{{field.position}}">
                                        {{field.position}}. {{field.name}}
                                    </md-option>
                                </md-select>
                            </div>
                            <div flex style="margin-right: 5px;">
                                <md-select  ng-show="components" ng-model='selectedComponentPosition' ng-change="updateComponent();">
                                    <md-option ng-repeat="component in components" ng-value="{{component.position}}">
                                        {{component.position}}. {{component.name}}
                                    </md-option>
                                </md-select>
                            </div>
                            <div flex style="margin-right: 5px;">
                                <md-select  ng-show="subComponents" ng-model='selectedSubComponentPosition' ng-change="updateSubComponent();">
                                    <md-option ng-repeat="component in subComponents" ng-value="{{component.position}}">
                                        {{component.position}}. {{component.name}}
                                    </md-option>
                                </md-select>
                            </div>
                        </div>
                        <div layout="row" ng-show="!dMReference && !isVariesDT()">
                            <div flex="40" >
                                <span style="color:black; font-weight: bold">Type:</span>
                            </div>

                            <div flex="60">
                                <md-radio-group ng-model="coConstraintType">
                                    <md-radio-button value="value" class="md-primary">Value</md-radio-button>
                                    <md-radio-button value="valueset">Value Set</md-radio-button>
                                </md-radio-group>
                            </div>
                        </div>
                        <span class="header3" ng-show="dMReference">
                            <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>This is Dynamic Mapping Reference Field. Data cell requires DT base name and Flavor.
                        </span>
                        <span class="header3" ng-show="isVariesDT()">
                            <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>This is Varies Field. You will define the Constraint type for each row.
                        </span>
                    </form>
                </div>

                <md-dialog-actions layout="row" layout-align="end end">

                    <md-button class="btn btn-raised btn-primary btn-sm" ng-click="close()"><span><i class="fa fa-floppy-o fa-fw">
            &nbsp; </i>Save</span>
                    </md-button>
                </md-dialog-actions>
            </md-dialog-content>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="CoConstraintIFDefinition.html">

    <md-dialog aria-label="Define IF Column for CoConstraintTable" style="width:70%;">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h3>Define IF Column for CoConstraintTable</h3>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>


            <md-dialog-content>
                <div class="md-dialog-content">
        <form  novalidate>
            <div layout="row">
                <div flex style="margin-right: 5px; color:black; font-weight: bold;">
                    {{segment.name}}
                </div>
                <div flex style="margin-right: 5px;">
                    <md-select  ng-model='selectedFieldPosition' ng-change="updateField();">
                        <md-option ng-repeat="field in segment.fields" ng-value="{{field.position}}">
                            {{field.position}}. {{field.name}}
                        </md-option>
                    </md-select>
                </div>
                <div flex style="margin-right: 5px;">
                    <md-select  ng-show="components" ng-model='selectedComponentPosition' ng-change="updateComponent();">
                        <md-option ng-repeat="component in components" ng-value="{{component.position}}">
                            {{component.position}}. {{component.name}}
                        </md-option>
                    </md-select>
                </div>
                <div flex style="margin-right: 5px;">
                    <md-select  ng-show="subComponents" ng-model='selectedSubComponentPosition' ng-change="updateSubComponent();">
                        <md-option ng-repeat="component in subComponents" ng-value="{{component.position}}">
                            {{component.position}}. {{component.name}}
                        </md-option>
                    </md-select>
                </div>
            </div>
            <div layout="row">
                <div flex="40" >
                    <span style="color:black; font-weight: bold">Type:</span>
                </div>

                <div flex="60">
                    <md-radio-group ng-model="coConstraintType">
                        <md-radio-button value="value" class="md-primary">Value</md-radio-button>
                        <md-radio-button value="valueset" ng-disabled="true" class="md-primary">Value Set</md-radio-button>
                    </md-radio-group>
                </div>
            </div>

            <span class="header3">
                <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>
                The 'Value Set' is not allowed for IF Statement.
            </span>
        </form>
                </div>

                <md-dialog-actions layout="row" layout-align="end end">

                <md-button class="btn btn-raised btn-primary btn-sm" ng-click="close()"><span><i class="fa fa-floppy-o fa-fw">
            &nbsp; </i>Save</span>
            </md-button>
                </md-dialog-actions>
            </md-dialog-content>
        </form>
    </md-dialog>


</script>
<script type="text/ng-template" id="EditIFData.html">
    <div class="modal-header">
        <h3>Edit</h3>

    </div>
    <div class="modal-body">
        <form class="form-horizontal" novalidate>
            <div class="row">
                <div class="col-md-12">
                    <table class="table table-striped table-condensed table-bordered">
                        <thead>
                            <tr class="tbl-header">
                                <th class="col-md-1" style="text-align:center">#</th>
                                <th class="col-md-10" style="text-align:center">Value</th>
                                <th class="col-md-1" style="text-align:center">
                                    <span ng-click="addValue();"><i class="fa fa-plus" aria-hidden="true"></i></span>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="v in data track by $index">
                                <td class="col-md-1" style="text-align:center">
                                    <span>{{$index + 1}}</span>
                                </td>
                                <td class="col-md-10">
                                    <input class="form-control" type="text" ng-model="data[$index]" />
                                </td>
                                <td class="col-md-1" style="text-align:center">
                                    <span ng-click="deleteValue($index)"><i class="fa fa-times" aria-hidden="true"></i></span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">
            &nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-primary btn-sm" ng-click="close()"><span><i class="fa fa-floppy-o fa-fw">
            &nbsp; </i>Save</span>
        </button>
    </div>
</script>
<script type="text/ng-template" id="EditThenData.html">
    <md-dialog aria-label="confirmation">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h3>Edit Value Set bindings for CoConstraint</h3>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>
        <md-dialog-content>
            <div class="md-dialog-content">
        <div class="row">
                <div class="col-md-12">
                    <table class="table table-striped table-bordered normal-table">
                        <thead>
                            <tr class="tbl-header">
                                <th class="col-md-1" style="text-align:center">#</th>
                                <th class="col-md-3" style="text-align:center">Binding Identifier</th>
                                <th class="col-md-3" style="text-align:center">Name</th>
                                <th class="col-md-2" style="text-align:center">Binding Strength</th>
                                <th class="col-md-2" style="text-align:center">Binding Location</th>
                                <th class="col-md-1" style="text-align:center">
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="vs in data.valueSets">
                                <td class="col-md-1" style="text-align:center">
                                    <span>{{$index + 1}}</span>
                                </td>
                                <td class="col-md-3">
                                    {{tablesMap[vs.tableId].bindingIdentifier}}
                                </td>
                                <td class="col-md-3">
                                    {{tablesMap[vs.tableId].name}}
                                </td>
                                <td class="col-md-2">
                                    <md-select placeholder="Select BindingStrength" ng-model='vs.bindingStrength'>
                                        <md-option value="R">Required</md-option>
                                        <md-option value="S">Suggested</md-option>
                                        <md-option value="U">Unspecified</md-option>
                                    </md-select>
                                </td>
                                <td class="col-md-2">
                                    <md-select placeholder="Select BindingLocation" ng-show="listOfBindingLocations" ng-model='vs.bindingLocation'>
                                        <md-option ng-repeat="bl in listOfBindingLocations" ng-value="bl">{{bl}}</md-option>
                                    </md-select>
                                </td>
                                <td class="col-md-1" style="text-align:center">
                                    <span ng-click="deleteValueSet($index);"><i class="fa fa-times" aria-hidden="true"></i></span>
                                </td>
                            </tr>
                        </tbody>
                    </table>


                    <table st-safe-src="tables" st-table="displayCollection" class="table table-striped table-bordered normal-table">
                        <thead>
                            <tr class="tbl-header">
                                <th st-sort="scope" class="col-md-1">Scope/Version</th>
                                <th st-sort="bindingIdentifier" class="col-md-3">Binding Identifier</th>
                                <th class="col-md-7">Name</th>
                                <th class="col-md-1">Action</th>
                            </tr>
                            <tr>
                                <th colspan="5">
                                    <input st-search="bindingIdentifier" placeholder="search for BindingIdentifier" class="input-sm form-control" type="search" />
                                </th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr ng-repeat="v in displayCollection">
                                <td class="col-md-1">
                                    <span class="badge" ng-class="{'label-HL7' : getScopeLabel(v)==='HL7', 'label-USE': getScopeLabel(v)==='USR','label-MASTER':getScopeLabel(v)==='MAS','label-PRL':getScopeLabel(v)==='PRL','label-PVS':getScopeLabel(v)==='PVS'}">{{getScopeLabel(v)}} {{hasSameVersion(v)}}</span>
                                </td>
                                <td class="col-md-3">
                                    {{v.bindingIdentifier}}
                                </td>
                                <td class="col-md-7">
                                    {{v.name}}
                                </td>
                                <td class="col-md-1" align="center">
                                    <span>
                                        <md-checkbox md-checked="isSelected(v)" ng-click="toggle(v)">
                                </md-checkbox></span>
                                    <!--<a ng-show="isSelected(v)" ng-click="unselectValueSet(v)" class="point">-->
                                        <!--<i class="icon-size-15 fa-check-circle fa"></i>-->
                                    <!--</a>-->
                                </td>
                            </tr>
                        </tbody>
                        <tr style="float:center !important;" ng-if="tables.length > 10">
                            <td colspan="5" class="text-center" style="float:center !important;">
                                <div st-pagination="" st-items-by-page="10" st-displayed-pages="10" style="float:center !important;"></div>
                            </td>
                        </tr>
                    </table>
                </div>
        </div>
            </div>
        </md-dialog-content>
        <md-dialog-actions layout="row">
            <md-button  class="md-primary md-raised" md-autofocus ng-click="close()">save
            </md-button>
        </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="EditDescription.html">
    <div class="modal-header">
        <h3>Edit</h3>

    </div>
    <div class="modal-body">
        <form class="form-horizontal" novalidate>
            <div class="row">
                <div class="col-md-12">
                    <input style="width:100%;" class="form-control" type="text" ng-model="data" required/>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">
            &nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-primary btn-sm" ng-click="close()"><span><i class="fa fa-floppy-o fa-fw">
            &nbsp; </i>Save</span>
        </button>
    </div>
</script>
<script type="text/ng-template" id="EditSingleElement.html">

    <md-dialog aria-label="confirmation">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Constant Value of {{currentNode.path}} </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                    <md-input-container style="width:100%;">
                    <input style="width:100%;" aria-label=" SE Value" type="text" ng-model="sevVale" required/>
                    </md-input-container>
                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">
                <md-button  class="md-primary md-raised" md-autofocus ng-click="close()">
                    save
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="tree_node">

    <tr tt-node is-branch="node.fields!==undefined || node.segments!==undefined ||(node.components.length!==0 && node.components!==undefined)">
        <td class="col-md-1" style="width:14%">
            <span ng-bind="node.position.element"></span>
        </td>
        <td class="col-md-2" style="width:37%">
            <table class=" table-borderless" ng-show="(node.label.element && (node.ext.element||node.ext.element===null) )||(node.label.element && !node.ext)">
                <tr>
                    <td class="col-sm-1">
                        <span ng-show="node.type.element==='segmentRef'" class="label label-segment label-icon lb-sm">S</span>
                        <span ng-show="node.type.element==='segment'" class="label label-segment label-icon lb-sm">S</span>
                        <span ng-show="node.type.element==='group'" class="label label-success label-icon lb-sm">G</span>
                        <span ng-show="node.type.element==='field'" class="label label-field label-icon lb-sm">F</span>
                        <span ng-show="node.type.element==='component'" class="label label-component label-icon lb-sm">C</span>
                        <span ng-bind="node.label.element"></span><span ng-show="node.description.element">:<span ng-bind="node.description.element"></span></span>
                    </td>
                </tr>
            </table>
            <table class=" table-borderless" ng-show="(node.label.element1 && node.label.element2) || (node.label.element && (node.ext.element1 || node.ext.element2)) ||(node.label.element1 || node.label.element2)">
                <tr style="background-color:#B5F7EC">
                    <td class="col-sm-1">
                        <span ng-show="node.type.element==='segmentRef'" class="label label-segment label-icon lb-sm" align="center">S</span>
                        <span ng-show="node.type.element==='segment'" class="label label-segment label-icon lb-sm" align="center">S</span>
                        <span ng-show="node.type.element==='group'" class="label label-success label-icon lb-sm">G</span>
                        <span ng-show="node.type.element==='field'" class="label label-field label-icon lb-sm">F</span>
                        <span ng-show="node.type.element1==='field'" class="label label-field label-icon lb-sm">F</span>

                        <span ng-show="node.type.element==='component'" class="label label-component label-icon lb-sm">C</span>
                        <span ng-show="node.type.element1==='group'" class="label label-success label-icon lb-sm">G</span>
                        <span ng-show="node.type.element1==='segmentRef'" class="label label-segment label-icon lb-sm">S</span>
                        <span ng-bind="node.label.element"></span>
                        <span ng-bind="node.label.element1"></span>
                        <span ng-show="node.ext.element1|| node.ext.element">_
                        <span ng-show="node.ext.element1" ng-bind="node.ext.element1"></span>
                        <span ng-show="node.ext.element" ng-bind="node.ext.element"></span>
                        </span>
                        <span ng-show="node.description">:
                        <span ng-show="node.description.element1" ng-bind="node.description.element1"></span>
                        <span ng-show="node.description.element" ng-bind="node.description.element"></span>
                        </span>
                    </td>
                </tr>
                <tr style="background-color:#EDE1AF">
                    <td class="col-sm-1">
                        <span ng-show="node.type.element==='segmentRef'" class="label label-segment label-icon lb-sm" align="center">S</span>
                        <span ng-show="node.type.element==='segment'" class="label label-segment label-icon lb-sm" align="center">S</span>
                        <span ng-show="node.type.element==='group'" class="label label-success label-icon lb-sm">G</span>
                        <span ng-show="node.type.element==='field'" class="label label-field label-icon lb-sm">F</span>
                        <span ng-show="node.type.element2==='field'" class="label label-field label-icon lb-sm">F</span>

                        <span ng-show="node.type.element==='component'" class="label label-component label-icon lb-sm">C</span>
                        <span ng-show="node.type.element2==='group'" class="label label-success label-icon lb-sm">G</span>
                        <span ng-show="node.type.element2==='segmentRef'" class="label label-segment label-icon lb-sm">S</span>
                        <span ng-show="node.type.element2==='segment'" class="label label-segment label-icon lb-sm">S</span>
                        <span ng-bind="node.label.element"></span>
                        <span ng-bind="node.label.element2"></span>
                        <span ng-show="node.ext.element2||node.ext.element">_
                        <span ng-show="node.ext.element2" ng-bind="node.ext.element2"></span>
                        <span ng-show="node.ext.element" ng-bind="node.ext.element"></span>
                        </span>
                        <span ng-show="node.description">:
                        <span ng-show="node.description.element2" ng-bind="node.description.element2"></span>
                        <span ng-show="node.description.element" ng-bind="node.description.element"></span>
                        </span>
                    </td>
                </tr>
            </table>
        </td>
        <td class="col-md-1" ng-show="node.usage" style="width:2%">
            <div align="center">
                <table class=" table-borderless">
                    <tr>
                        <td class="col-md-1" style="background-color:#B5F7EC">
                            <div align="center"> <span ng-bind="node.usage.element1"></span></div>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-1" style="background-color:#EDE1AF">
                            <div align="center"> <span ng-bind="node.usage.element2"></span></div>
                        </td>
                    </tr>
                </table>
            </div>
        </td>
        <td class="col-md-1" ng-show="!node.usage" style="width:2%">
            <div align="center"> - </div>
        </td>
        <td class="col-md-1" ng-show="node.minCard" style="width:2%">
            <table class=" table-borderless">
                <tr>
                    <td class="col-md-1" style="background-color:#B5F7EC">
                        <div align="center"> <span ng-bind="node.minCard.element1"></span></div>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-1" style="background-color:#EDE1AF">
                        <div align="center"> <span ng-bind="node.minCard.element2"></span></div>
                    </td>
                </tr>
            </table>
        </td>
        <td class="col-md-1 c" ng-show="!node.minCard" style="width:2%">
            <div align="center"> - </div>
        </td>
        <td class="col-md-1" ng-show="node.maxCard" style="width:2%">
            <table class="table-borderless">
                <tr>
                    <td class="col-md-1" style="background-color:#B5F7EC">
                        <div align="center"> <span ng-bind="node.maxCard.element1"></span></div>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-1" style="background-color:#EDE1AF">
                        <div align="center"> <span ng-bind="node.maxCard.element2"></span></div>
                    </td>
                </tr>
            </table>
        </td>
        <td class="col-md-1" ng-show="!node.maxCard" style="width:2%">
            <div align="center"> - </div>
        </td>
        <td class="col-md-1" ng-show="node.minLength" style="width:2%">
            <table class=" table-borderless">
                <tr>
                    <td class="col-md-1" style="background-color:#B5F7EC">
                        <div align="center"> <span ng-bind="node.minLength.element1"></span></div>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-1" style="background-color:#EDE1AF">
                        <div align="center"> <span ng-bind="node.minLength.element2"></span></div>
                    </td>
                </tr>
            </table>
        </td>
        <td class="col-md-1" ng-show="!node.minLength" style="width:2%">
            <div align="center"> - </div>
        </td>
        <td class="col-md-1" ng-show="node.maxLength" style="width:2%">
            <table class=" table-borderless">
                <tr>
                    <td class="col-md-1" style="background-color:#B5F7EC">
                        <div align="center"> <span ng-bind="node.maxLength.element1"></span></div>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-1" style="background-color:#EDE1AF">
                        <div align="center"> <span ng-bind="node.maxLength.element2"></span></div>
                    </td>
                </tr>
            </table>
        </td>
        <td class="col-md-1" ng-show="!node.maxLength" style="width:2%">
            <div align="center"> - </div>
        </td>
        <td class="col-md-1 col-fixed-20" ng-show="node.confLength" style="width:2%">
            <table class=" table-borderless">
                <tr>
                    <td class="col-md-1" style="background-color:#B5F7EC">
                        <div align="center"> <span ng-bind="node.confLength.element1"></span></div>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-1" style="background-color:#EDE1AF">
                        <div align="center"> <span ng-bind="node.confLength.element2"></span></div>
                    </td>
                </tr>
            </table>
        </td>
        <td class="col-md-1" ng-show="!node.confLength" style="width:2%">
            <div align="center"> - </div>
        </td>
        <td class="col-md-1 col-fixed-20" ng-show="node.datatype" style="width:21%">
            <table class=" table-borderless">
                <tr>
                    <td class="col-md-1" style="background-color:#B5F7EC">
                        <div align="center"> <span ng-bind="node.datatype.element1"></span></div>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-1" style="background-color:#EDE1AF">
                        <div align="center"> <span ng-bind="node.datatype.element2"></span></div>
                    </td>
                </tr>
            </table>
        </td>
        <td class="col-md-1" ng-show="!node.datatype" style="width:21%">
            <div align="center"> - </div>
        </td>
        <td class="col-md-1" ng-show="node.valueset" style="width:16%">
            <table class=" table-borderless">
                <tr>
                    <td class="col-md-1" style="background-color:#B5F7EC">
                        <div align="center"> <span ng-bind="node.valueset.element1"></span></div>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-1" style="background-color:#EDE1AF">
                        <div align="center"> <span ng-bind="node.valueset.element2"></span></div>
                    </td>
                </tr>
            </table>
        </td>
        <td class="col-md-1" ng-show="!node.valueset" style="width:16%">
            <div align="center"> - </div>
        </td>
    </tr>
</script>
<script type="text/ng-template" id="ConfirmIGDocumentUnshareCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Remove Participant Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p ng-if="shareParticipant.id===g etAccountID()">Are you sure you want to be removed from the IG Document:"{{::igdocumentSelected.metaData.title}}"?</p>
        <p ng-if="shareParticipant.id !==g etAccountID()">Are you sure you want to remove '{{shareParticipant.fullname}}' from the IG Document:"{{::igdocumentSelected.metaData.title}}"?</p>

        <div class="row" ng-if="error !=null">
            <div class="col-md-12">
                <span ng-bind="error" style="color: red;"></span>
            </div>
        </div>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-danger btn-sm" ng-disabled="loading" ng-click="delete()"><span><i
                class="fa fa-trash-o fa-fw">&nbsp; </i>Remove</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>

    </div>
    </div>
</script>
<script type="text/ng-template" id="GlobalPredicateCtrl.html">
    <md-dialog aria-label="Conditional Predicate for Message/Group" style="{{getDialogStyle()}}">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2 ng-if="dialogStep === 0">Predicate Summary</h2>
                    <h2 ng-if="dialogStep === 1">(1/3) Select CONTEXT</h2>
                    <h2 ng-if="dialogStep === 2">(2/3) Create Constraints</h2>
                    <h2 ng-if="dialogStep === 3">(3/3) Select Predicate and Set True/False Usage</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="constraint-dialog">
                    <div ng-show="dialogStep === 0">
                        <form novalidate ng-cloak>
                            <div class="col-md-6">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Selected Node Info</div>
                                    <div class="panel-body" style="min-height:350px; max-height:350px;overflow-y: scroll;">
                                        <div layout="row" layout-align="start center" style="margin-top: 40px">
                                            <md-input-container flex="100">
                                                <label style="font-weight: bold;color:black">Name</label>
                                                <input style="font-weight: bold;color:black"  ng-model="selectedNode.obj.name" disabled>
                                            </md-input-container>
                                        </div>
                                        <div layout="row" layout-align="start center">
                                            <md-input-container flex="100">
                                                <label style="font-weight: bold;color:black">Path</label>
                                                <input style="font-weight: bold;color:black" ng-model="selectedNode.locationPath" disabled>
                                            </md-input-container>
                                        </div>
                                        <div layout="row" layout-align="start center">
                                            <md-input-container flex="100">
                                                <label style="font-weight: bold;color:black">Position Path</label>
                                                <input style="font-weight: bold;color:black" ng-model="selectedNode.path" disabled>
                                            </md-input-container>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Existing Predicate</div>
                                    <div class="panel-body" style="min-height:350px; max-height:350px;overflow-y: scroll;">
                                        <span ng-if="!existingPredicate" style="color:red;margin-top: 40px;">No Predicate. Please go to next step and make a new Predicate.</span>
                                        <div ng-if="existingPredicate">
                                            <div layout="row" layout-align="start center" style="margin-top: 40px">
                                                <md-input-container flex="30">
                                                    <label>Predicate Context</label>
                                                    <input ng-if="mode !== pc" ng-model="existingContext.name" disabled>
                                                    <input ng-if="mode === pc" ng-model="existingPredicate.context.path" disabled>
                                                </md-input-container>
                                                <md-input-container flex="70">
                                                    <label>Predicate Description</label>
                                                    <input ng-model="existingPredicate.description" disabled>
                                                </md-input-container>
                                            </div>
                                            <div layout="row" layout-align="start center">
                                                <md-input-container flex="100">
                                                    <label>Predicate Assertion</label>
                                                    <input ng-model="existingPredicate.assertion" disabled>
                                                </md-input-container>
                                            </div>
                                            <div layout="row" layout-align="start center">
                                                <md-input-container flex="50">
                                                    <label>True Usage</label>
                                                    <md-select placeholder="Select TRUE Usage" ng-model="existingPredicate.trueUsage" ng-change="setChanged()">
                                                        <md-option ng-repeat="usage in config.conditionalUsage" ng-value="usage">
                                                            {{usage}}
                                                        </md-option>
                                                    </md-select>
                                                </md-input-container>
                                                <md-input-container flex="50">
                                                    <label>False Usage</label>
                                                    <md-select placeholder="Select FALSE Usage" ng-model="existingPredicate.falseUsage" ng-change="setChanged()">
                                                        <md-option ng-repeat="usage in config.conditionalUsage" ng-value="usage">
                                                            {{usage}}
                                                        </md-option>
                                                    </md-select>
                                                </md-input-container>
                                            </div>
                                            <div layout="row" layout-sm="column" layout-align="end center" layout-wrap ng-show="existingPredicate">
                                                <md-button class="md-raised md-warn" ng-click="deletePredicate()">
                                                    <i class="fa fa-trash fa-fw"/> Delete Predicate
                                                </md-button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div ng-show="dialogStep === 1">
                        <form novalidate ng-cloak>
                            <div class="col-md-12">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Message/Group Tree</div>
                                    <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                        <table class="table table-striped">
                                            <tbody ng-repeat="data in treeDataForMessage" ng-include="'message_tree_Predicate_item.html'" />
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <span ng-if="!contextKey" style="color:red;">No selected context.</span>
                                <span ng-if="!contextKey" style="color:blue;">Please select message or group in a message tree.</span>
                                <span ng-if="contextKey" style="color:blue;">{{selectedContextNode.name}} is selected.</span>
                            </div>
                        </form>
                    </div>
                    <div ng-show="dialogStep === 2">
                        <form novalidate ng-cloak>
                            <div class="col-md-4">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Selected Context Tree</div>
                                    <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                        <table class="table table-striped">
                                            <tbody ng-repeat="data in treeDataForContext" ng-include="'context_tree_item.html'">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Temporary Constraints</div>
                                    <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                        <table st-table="tempPredicatesDisplayed" st-safe-src="tempPredicates" class="table table-striped table-bordered">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-1" ng-show="constraintType === 'Complex'">Draggable</th>
                                                <th class="col-md-10">Description (<input type="checkbox" ng-model="viewAssertion"/> view assertion )</th>
                                                <th class="col-md-1"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="c in tempPredicatesDisplayed">
                                                <td class="col-md-1" align="center" ng-show="constraintType === 'Complex'">
                                                    <i class="glyphicon glyphicon-move cursorMove" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="c" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingPredicate({nodeData: data})'}"></i>
                                                </td>
                                                <td class="col-md-10">
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal">
                                                            <input ng-model="c.description" type="text" disabled />
                                                        </md-input-container>
                                                    </div>
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal" ng-show="viewAssertion">
                                                            <input ng-model="c.assertion" type="text" disabled />
                                                        </md-input-container>
                                                    </div>
                                                </td>
                                                <td class="col-md-1" align="center">
                                                    <button class="btn btn-raised btn-danger btn-xxs" ng-click="deleteTempPredicate(c)"><span><i class="fa fa-trash fa-fw"></i></span></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-12" style="margin-top: 10px">
                                <div ng-cloak>
                                    <md-content>
                                        <md-nav-bar md-selected-nav-item="constraintType" nav-bar-aria-label="navigation links">
                                            <md-nav-item md-nav-click="constraintType = 'Free'" name="Free">
                                                Add new Free-Text Constraint
                                            </md-nav-item>
                                            <md-nav-item md-nav-click="constraintType = 'Plain'" name="Plain">
                                                Add New Plain Constraint
                                            </md-nav-item>
                                            <md-nav-item md-nav-click="constraintType = 'Complex'" name="Complex">
                                                Add New Complex Constraint
                                            </md-nav-item>
                                        </md-nav-bar>

                                        <table class="table table-striped table-bordered" ng-show="constraintType==='Free'">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-10">Free-Text (Not supported by validation tool)</th>
                                                <th class="col-md-2"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td class="col-md-10">
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal">
                                                            <input ng-model="newConstraint.freeText"
                                                                   type="text"/>
                                                        </md-input-container>
                                                        <span style="color:red;" ng-show="!newConstraint.freeText || newConstraint.freeText === ''">Empty text</span>
                                                    </div>
                                                </td>
                                                <td class="col-md-2" align="center">
                                                    <button class="btn btn-raised btn-warning btn-xxs" ng-click="initPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                    <button class="btn btn-raised btn-primary btn-xxs" ng-click="addFreeTextPredicate();" ng-disabled="!newConstraint.freeText || newConstraint.freeText === ''"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>

                                        <table class="table table-striped table-bordered" ng-show="constraintType==='Plain'">
                                            <thead>
                                                <tr class="tbl-header">
                                                    <th class="col-md-2">If</th>
                                                    <th class="col-md-2">Node</th>
                                                    <th class="col-md-2">Verb</th>
                                                    <th class="col-md-2">Constraint Pattern</th>
                                                    <th class="col-md-2">Value</th>
                                                    <th class="col-md-2"></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td class="col-md-2">If</td>
                                                <td class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="firstNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterFirstNodeDrop'}">
                                                    <div ng-show="newConstraint.location_1">
                                                        <span>
                                                            <span ng-repeat="info in newConstraint.pathInfoSet_1">
                                                                <span ng-show="$index===1 && info.isInstanceNumberEditable">{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]</span>
                                                                <span ng-show="$index===1 && !info.isInstanceNumberEditable">{{info.locationName}}[{{info.instanceNumber}}]</span>
                                                                <span ng-show="$index >1 && info.isInstanceNumberEditable">.{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text" />]</span>
                                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">.{{info.locationName}}[{{info.instanceNumber}}]</span>
                                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">({{info.nodeName}})</span>
                                                            </span>
                                                        </span>
                                                    </div>
                                                    <div ng-show="!newConstraint.location_1">
                                                        <span style="color:red;">Drop the node!</span>
                                                    </div>
                                                </td>
                                                <td class="col-md-2">
                                                    <md-select placeholder="Select verb" class="inside-table"
                                                               ng-class="{'form-control-invalid' : isEmptyConstraintVerb(newConstraint)}"
                                                               ng-model="newConstraint.verb">
                                                        <md-option ng-repeat="constraintVerb in config.conditionalConstraintVerbs | orderBy:'toString()'" ng-value="constraintVerb">
                                                            {{constraintVerb}}
                                                        </md-option>
                                                    </md-select>
                                                    <span style="color:red;" ng-show="isEmptyConstraintVerb(newConstraint)">Empty verb</span>
                                                </td>
                                                <td class="col-md-2">
                                                    <md-select placeholder="Select verb" class="inside-table"
                                                               ng-class="{'form-control-invalid' : isEmptyConstraintPattern(newConstraint)}"
                                                               ng-model="newConstraint.contraintType">
                                                        <md-option ng-repeat="contraintType in config.constraintTypes | orderBy:'toString()'" ng-value="contraintType">
                                                            {{contraintType}}
                                                        </md-option>
                                                    </md-select>
                                                    <span style="color:red;" ng-show="isEmptyConstraintPattern(newConstraint)">Empty constraint pattern</span>
                                                </td>
                                                <td class="col-md-2" ng-hide="newConstraint.contraintType == 'identical to another node' ||
                                                                              newConstraint.contraintType == 'equal to another node' ||
                                                                              newConstraint.contraintType == 'not-equal to another node' ||
                                                                              newConstraint.contraintType == 'greater than another node' ||
                                                                              newConstraint.contraintType == 'equal to or greater than another node' ||
                                                                              newConstraint.contraintType == 'less than another node' ||
                                                                              newConstraint.contraintType == 'equal to or less than another node'">
                                                    <span ng-show="newConstraint.contraintType == 'a literal value' ||
                                                                   newConstraint.contraintType == 'equal to' ||
                                                                   newConstraint.contraintType == 'not-equal to' ||
                                                                   newConstraint.contraintType == 'greater than' ||
                                                                   newConstraint.contraintType == 'equal to or greater than' ||
                                                                   newConstraint.contraintType == 'less than' ||
                                                                   newConstraint.contraintType == 'equal to or less than'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       ng-if="newConstraint.contraintType === 'a literal value'"
                                                                       type="text"/>
                                                                <input ng-model="newConstraint.value"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       ng-if="newConstraint.contraintType !== 'a literal value'"
                                                                       step="any" ng-pattern="/^1234$/"
                                                                       type="number" />
                                                                <md-checkbox ng-model="newConstraint.ignoreCase" ng-if="newConstraint.contraintType == 'a literal value'">
                                                                    Case Sensitive?
                                                                </md-checkbox>
                                                            </md-input-container>
                                                            <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty value</span>
                                                        </div>
                                                    </span>

                                                    <span ng-show="newConstraint.contraintType == 'one of list values'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value"
                                                                       placeholder="Comma-Separated Values(CSV)"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       type="text"/>
                                                            </md-input-container>
                                                        </div>
                                                        <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty list value</span>
                                                    </span>

                                                    <span ng-show="newConstraint.contraintType == 'formatted value'">
                                                        <md-select placeholder="Select format" class="inside-table"
                                                                   ng-class="{'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                   ng-model="newConstraint.value">
                                                            <md-option ng-repeat="predefinedFormat in config.predefinedFormats | orderBy:'toString()'" ng-value="predefinedFormat">
                                                                {{predefinedFormat}}
                                                            </md-option>
                                                        </md-select>
                                                        <div ng-show="newConstraint.value === 'Regular expression'" layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value2"
                                                                       placeholder="Regular expression"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue2(newConstraint)}"
                                                                       type="text"/>
                                                            </md-input-container>
                                                        </div>
                                                        <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty format</span>
                                                        <span style="color:red;" ng-show="newConstraint.value === 'Regular expression' && isEmptyConstraintValue2(newConstraint)">Empty regular expression</span>
                                                    </span>

                                                    <span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <md-select placeholder="Select ValueSet" class="inside-table"
                                                                           ng-class="{'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                           ng-model="newConstraint.valueSetId">
                                                                    <md-option ng-repeat="table in tables track by table.id|orderBy:'+bindingIdentifier'" ng-value="getUpdatedBindingIdentifier(table)">
                                                                        {{::table.bindingIdentifier}}
                                                                    </md-option>
                                                                </md-select>
                                                            </md-input-container>
                                                        </div>
                                                        <span style="color:red;" ng-show="isEmptyConstraintValueSet(newConstraint)">Empty valueset</span>
                                                        <br/>
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <md-select placeholder="Select BindingStrength" class="inside-table"
                                                                           ng-model="newConstraint.bindingStrength">
                                                                    <md-option value="R">R</md-option>
                                                                    <md-option value="S">S</md-option>
                                                                    <md-option value="U">U</md-option>
                                                                </md-select>
                                                            </md-input-container>
                                                        </div>
                                                        <br/>
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.bindingLocation" type="text"/>
                                                            </md-input-container>
                                                        </div>
                                                    </span>
                                                </td>

                                                <td class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="secondNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterSecondNodeDrop'}"
                                                    ng-show="newConstraint.contraintType == 'identical to another node' ||
                                                             newConstraint.contraintType == 'equal to another node' ||
                                                             newConstraint.contraintType == 'not-equal to another node' ||
                                                             newConstraint.contraintType == 'greater than another node' ||
                                                             newConstraint.contraintType == 'equal to or greater than another node' ||
                                                             newConstraint.contraintType == 'less than another node' ||
                                                             newConstraint.contraintType == 'equal to or less than another node'">
                                                    <div ng-show="newConstraint.location_2">
                                                        <span>
                                                            <span ng-repeat="info in newConstraint.pathInfoSet_2">
                                                                <span ng-show="$index == 1 && info.isInstanceNumberEditable">{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]</span>
                                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">{{info.locationName}}[{{info.instanceNumber}}]</span>
                                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">.{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]</span>
                                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">.{{info.locationName}}[{{info.instanceNumber}}]</span>
                                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">({{info.nodeName}})</span>
                                                            </span>
                                                        </span>
                                                    </div>
                                                    <div ng-show="!newConstraint.location_2">
                                                        <span style="color:red;">Drop the node!</span>
                                                    </div>
                                                </td>
                                                <td class="col-md-2" align="center">
                                                    <button class="btn btn-raised btn-warning btn-xxs" ng-click="initPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                    <button class="btn btn-raised btn-primary btn-xxs" ng-click="addPredicate();" ng-disabled="erorrForPredicate(newConstraint, 'message', selectedNode)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>

                                        <table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-2">Complex Type</th>
                                                <th class="col-md-1"></th>
                                                <th ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-7">Constraints</th>
                                                <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-3">First Constraint</th>
                                                <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1"></th>
                                                <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-3">Second Constraint</th>
                                                <th class="col-md-2"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td class="col-md-2">
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal">
                                                            <md-select placeholder="Select Composite Type" class="inside-table" ng-model="compositeType">
                                                                <md-option value="AND">AND</md-option>
                                                                <md-option value="OR">OR</md-option>
                                                                <md-option value="XOR">XOR</md-option>
                                                                <!--<md-option value="IFTHEN">IFTHEN(IMPLY)</md-option>-->
                                                                <md-option value="FORALL">FORALL(True, if all assertions are true)</md-option>
                                                                <md-option value="EXIST">EXIST(True, if one of assertions is true)</md-option>
                                                            </md-select>
                                                        </md-input-container>
                                                        <span style="color:red;" ng-show="isEmptyCompositeType(compositeType)">Empty composite type</span>
                                                    </div>
                                                </td>
                                                <td class="col-md-1" align="center">
                                                    <span ng-show="compositeType == 'IFTHEN'">IF</span>
                                                    <span ng-show="compositeType == 'FORALL'">FORALL</span>
                                                    <span ng-show="compositeType == 'EXIST'">EXIST</span>
                                                </td>
                                                <td ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-7 drop-zone" align="center" style="vertical-align:middle" data-drop="true" ng-model='constraints' jqyoui-droppable="{multiple:true}" data-jqyoui-options>
                                                    <span style="color:red;" ng-show="constraints.length < 2">Drop two more constraints here!</span>
                                                    <li ng-repeat="c in constraints" ng-show="constraints.length > 0" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="constraints" jqyoui-draggable="{animate:true}">{{c.description}}</li>
                                                </td>
                                                <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-3 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
                                                    <span style="color:red;" ng-hide="firstConstraint">Drop the first constraint here!</span>
                                                    <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
                                                </td>
                                                <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" align="center">
                                                    <span ng-show="compositeType == 'AND'">AND</span>
                                                    <span ng-show="compositeType == 'OR'">OR</span>
                                                    <span ng-show="compositeType == 'XOR'">XOR</span>
                                                    <span ng-show="compositeType == 'IFTHEN'">THEN</span>
                                                </td>
                                                <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-3 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
                                                    <span style="color:red;" ng-hide="secondConstraint">Drop the second constraint here!</span>
                                                    <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
                                                </td>
                                                <td class="col-md-1" align="center">
                                                    <button class="btn btn-raised btn-warning btn-xxs" ng-click="initComplexPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                    <button class="btn btn-raised btn-primary btn-xxs" ng-click="addComplexPredicate()" ng-disabled="erorrForComplexPredicate(compositeType, firstConstraint, secondConstraint, null, null, constraints)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </md-content>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div ng-show="dialogStep === 3">
                        <form novalidate ng-cloak>
                            <div class="col-md-12">
                                <div class="panel panel-primary">
                                    <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                        <table st-table="tempPredicatesDisplayed" st-safe-src="tempPredicates" class="table table-striped table-bordered">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-1"></th>
                                                <th class="col-md-11">Description</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="c in tempPredicatesDisplayed">
                                                <td class="col-md-1" align="center">
                                                    <md-checkbox ng-checked="c.selected"  ng-click="selectPredicate(c);" aria-label="Select Constraint for Predicate" style="margin: 10px;"/>
                                                </td>
                                                <td class="col-md-11">
                                                    <p ng-bind="::c.description" ng-if="!c.selected" />
                                                    <div layout="row" ng-if="c.selected">
                                                        <md-input-container flex="50" class="normal">
                                                            <p ng-bind="::c.description" />
                                                        </md-input-container>
                                                        <md-input-container flex="25" class="normal" style="margin: 18px;">
                                                            <label >True Usage</label>
                                                            <md-select placeholder="Select TRUE Usage" ng-model="existingPredicate.trueUsage" ng-change="setChanged()">
                                                                <md-option ng-repeat="usage in config.conditionalUsage" ng-value="usage">
                                                                    {{usage}}
                                                                </md-option>
                                                            </md-select>
                                                        </md-input-container>
                                                        <md-input-container flex="25" class="normal" style="margin: 18px;">
                                                            <label>False Usage</label>
                                                            <md-select placeholder="Select FALSE Usage" ng-model="existingPredicate.falseUsage" ng-change="setChanged()">
                                                                <md-option ng-repeat="usage in config.conditionalUsage" ng-value="usage">
                                                                    {{usage}}
                                                                </md-option>
                                                            </md-select>
                                                        </md-input-container>
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">
                <md-button ng-show="(dialogStep === 1 && existingPredicate) || dialogStep === 2 || dialogStep === 3" class="btn btn-raised btn-primary btn-sm" ng-click="goBack()"><span><i class="fa fa-arrow-left fa-fw"></i>Back</span></md-button>
                <md-button ng-show="dialogStep === 0" class="btn btn-raised btn-primary btn-sm" ng-click="goNext()"><span><i class="fa fa fa-pencil fa-fw"></i>Recreate Predicate</span></md-button>
                <md-button ng-show="dialogStep === 1 || dialogStep === 2" class="btn btn-raised btn-primary btn-sm" ng-click="goNext()" ng-disabled="(dialogStep === 1 && contextKey === null) || (dialogStep === 2 && tempPredicates.length === 0)"><span><i class="fa fa fa-arrow-right fa-fw"></i>Next</span></md-button>
                <md-button ng-show="dialogStep === 3 || dialogStep === 0" class="btn btn-raised btn-success btn-sm" ng-click="saveClose()"   ng-disabled="!changed || !existingPredicate || !existingPredicate.trueUsage || !existingPredicate.falseUsage" ><span><i class="fa fa-floppy-o fa-fw"></i>Save</span></md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="message_tree_Predicate_item.html">
    <tr style="width:100%">
        <td ng-if="data.folderClass">
            <div ng-if="data.type === 'message' || data.type === 'group'">
                <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
            </div>
            <div ng-if="data.type !== 'message' && data.type !== 'group'">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            </div>
        </td>
        <td ng-if="!data.folderClass">
            <div ng-if="data.type === 'message' || data.type === 'group'">
                <i class="fa fa-caret-right" ng-click="toggleChildren(data)"></i>
            </div>
            <div ng-if="data.type !== 'message' && data.type !== 'group'">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            </div>
        </td>
        <td>
            <div ng-if="data.type === 'message'">
                <input type="checkbox" ng-checked="data.contextKey === contextKey" ng-click="selectContext(data);" />
                <span class="label label-success label-icon">M</span>
                <span style="font-weight:bold;color:blue;">&nbsp;{{::data.name}}</span>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.children" ng-include="'message_tree_Predicate_item.html'"></div>
                    </table>
                </div>
            </div>
            <div ng-if="data.type === 'group'">
                <div ng-if="selectedNode.path.startsWith(data.positionPath)">
                    <input type="checkbox" ng-checked="data.contextKey === contextKey" ng-click="selectContext(data);" />
                    <span class="label label-success label-icon">G</span>
                    <span style="font-weight:bold;color:blue;">&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::data.name}}</span>
                </div>
                <div ng-if="!selectedNode.path.startsWith(data.positionPath)">
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <span class="label label-success label-icon">G</span>
                    <span>&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::data.name}}</span>
                </div>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.children" ng-include="'message_tree_Predicate_item.html'"></div>
                    </table>
                </div>
            </div>
            <div ng-if="data.type === 'segmentRef'">
                <span class="label label-segment label-icon">S</span>
                <span>&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::segmentsMap[data.ref.id].name}}</span>
            </div>
        </td>
    </tr>
</script>
<script type="text/ng-template" id="GlobalConformanceStatementCtrl.html">
    <md-dialog aria-label="Conformance Statements for Message/Group" style="width: 90%" ng-init="init()">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2 ng-if="dialogStep === 0"> (1/2) Select CONTEXT and See List of Conformance Statements</h2>
                    <h2 ng-if="dialogStep === 1 && mode !== 'pc'"> (2/2) Add/Edit Conformance Statements</h2>
                    <h2 ng-if="dialogStep === 1 && mode === 'pc'"> Add/Edit Conformance Statements</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="constraint-dialog">
                    <div ng-show="dialogStep === 0">
                        <form novalidate ng-cloak>
                            <div class="col-md-4">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Message/Group Tree</div>
                                    <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                        <table class="table table-striped">
                                            <tbody ng-repeat="data in treeDataForMessage" ng-include="'message_tree_item.html'">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <span ng-if="!contextKey" style="color:red;">No selected context.</span>
                                <span ng-if="!contextKey" style="color:blue;">Please select message or group in a message tree.</span>
                                <div ng-if="contextKey">
                                    <div class="panel panel-primary">
                                        <div class="panel-heading">Conformance Statements of {{selectedContextNode.name}}</div>
                                        <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                            <table st-table="displayedCS" st-safe-src="selectedContextNode.conformanceStatements" class="table table-striped table-bordered">
                                                <thead>
                                                <tr class="tbl-header">
                                                    <th st-sort="constraintId" class="col-md-2">ID</th>
                                                    <th class="col-md-10">Description (<input type="checkbox" ng-model="viewAssertion"> view assertion )</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr ng-repeat="c in displayedCS">
                                                    <td class="col-md-2">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="c.constraintId"
                                                                       ng-change="setChanged()"
                                                                       ng-class="{ 'has-error' : isEmptyConstraintID(c)}"
                                                                       type="text"
                                                                       disabled/>
                                                            </md-input-container>
                                                        </div>
                                                        <span style="color:red;" ng-show="isEmptyConstraintID(c)">ID Empty</span>
                                                    </td>
                                                    <td class="col-md-10">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="c.description" ng-change="setChanged()" type="text" disabled/>
                                                            </md-input-container>
                                                        </div>
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal" ng-show="viewAssertion">
                                                                <input ng-model="c.assertion" ng-change="setChanged()" type="text" disabled/>
                                                            </md-input-container>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr ng-if="displayed.length==0">
                                                    <td colspan="2">
                                                        No conformance statement.
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div ng-show="dialogStep === 1">
                        <form novalidate ng-cloak>
                            <div class="col-md-4">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Selected Context Tree</div>
                                    <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                        <table class="table table-striped">
                                            <tbody ng-repeat="data in treeDataForContext" ng-include="'context_tree_item.html'">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-8">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Conformance Statements of {{selectedContextNode.name}}</div>
                                    <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                        <table st-table="displayedCS" st-safe-src="selectedContextNode.conformanceStatements" class="table table-striped table-bordered">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th ng-show="constraintType === 'Complex'" class="col-md-1" style="width: 4.1667%">Draggable</th>
                                                <th st-sort="constraintId" class="col-md-2">ID</th>
                                                <th class="col-md-8">Description (
                                                    <input type="checkbox" ng-model="viewAssertion"> view assertion )
                                                </th>
                                                <th class="col-md-1"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="c in displayedCS">
                                                <td ng-show="constraintType === 'Complex'" class="col-md-1" align="center" style="width: 4.1667%">
                                                    <i ng-show="c.assertion" class="glyphicon glyphicon-move cursorMove" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="c" jqyoui-draggable="{placeholder:'keep',animate:true}"></i>
                                                </td>
                                                <td class="col-md-2">
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal">
                                                            <input ng-model="c.constraintId"
                                                                   ng-change="setChanged()"
                                                                   ng-class="{ 'has-error' : isEmptyConstraintID(c)}"
                                                                   type="text"/>
                                                        </md-input-container>
                                                    </div>
                                                    <span style="color:red;" ng-show="isEmptyConstraintID(c)">ID Empty</span>
                                                </td>
                                                <td class="col-md-8">
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal">
                                                            <input ng-model="c.description" ng-change="setChanged()" type="text" disabled/>
                                                        </md-input-container>
                                                    </div>
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal" ng-show="viewAssertion">
                                                            <input ng-model="c.assertion" ng-change="setChanged()" type="text" disabled/>
                                                        </md-input-container>
                                                    </div>
                                                </td>
                                                <td class="col-md-1" align="center">
                                                    <button class="btn btn-raised btn-danger btn-xxs" ng-click="deleteConformanceStatement(c)"><span><i class="fa fa-trash fa-fw"/></span></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-12" style="margin-top: 10px">
                                <div ng-cloak>
                                    <md-content>
                                        <md-nav-bar
                                                md-selected-nav-item="constraintType"
                                                nav-bar-aria-label="navigation links">
                                            <md-nav-item md-nav-click="constraintType = 'Free'" name="Free">
                                                Add new Free-Text Conf.Statement
                                            </md-nav-item>
                                            <md-nav-item md-nav-click="constraintType = 'Plain'" name="Plain">
                                                Add New Plain Conf.Statement
                                            </md-nav-item>
                                            <md-nav-item md-nav-click="constraintType = 'Complex'" name="Complex">
                                                Add New Complex Conf.Statement
                                            </md-nav-item>
                                        </md-nav-bar>


                                        <table class="table table-striped table-bordered" ng-show="constraintType === 'Free'">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-2">ID</th>
                                                <th class="col-md-8">Free-Text (Not supported by validation tool)</th>
                                                <th class="col-md-2"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td class="col-md-2">
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal">
                                                            <input ng-model="newConstraint.constraintId"
                                                                   ng-class="{ 'form-control-invalid' : isEmptyConstraintID(newConstraint)}"
                                                                   type="text"/>
                                                        </md-input-container>
                                                    </div>
                                                    <span style="color:red;" ng-show="isEmptyConstraintID(newConstraint)">ID Empty</span>
                                                </td>
                                                <td class="col-md-8">
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal">
                                                            <input ng-model="newConstraint.freeText"
                                                                   type="text"/>
                                                        </md-input-container>
                                                    </div>
                                                    <span style="color:red;" ng-show="!newConstraint.freeText || newConstraint.freeText === ''">Text required</span>
                                                </td>
                                                <td class="col-md-2" align="center">
                                                    <button class="btn btn-raised btn-warning btn-xxs" ng-click="initConformanceStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                    <button class="btn btn-raised btn-primary btn-xxs" ng-click="addFreeTextConformanceStatement();" ng-disabled="isEmptyConstraintID(newConstraint) || !newConstraint.freeText || newConstraint.freeText === ''"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>

                                        <table class="table table-striped table-bordered" ng-show="constraintType === 'Plain'">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-2">ID</th>
                                                <th class="col-md-2">Node</th>
                                                <th class="col-md-2">Verb</th>
                                                <th class="col-md-2">Constraint Pattern</th>
                                                <th class="col-md-2">Value</th>
                                                <th class="col-md-2"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td class="col-md-2">
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal">
                                                            <input ng-model="newConstraint.constraintId"
                                                                   ng-class="{ 'form-control-invalid' : isEmptyConstraintID(newConstraint)}"
                                                                   type="text"/>
                                                        </md-input-container>
                                                    </div>
                                                    <span style="color:red;" ng-show="isEmptyConstraintID(newConstraint)">ID Empty</span>
                                                </td>
                                                <td class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="firstNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterFirstNodeDrop'}">
                                                    <div ng-show="newConstraint.location_1">
                                                        <span>
                                                            <span ng-repeat="info in newConstraint.pathInfoSet_1">
                                                                <span ng-show="$index == 1 && info.isInstanceNumberEditable">
                                                                    {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]
                                                                </span>
                                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">
                                                                    {{info.locationName}}[{{info.instanceNumber}}]
                                                                </span>
                                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">
                                                                    .{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]
                                                                </span>
                                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                                                    .{{info.locationName}}[{{info.instanceNumber}}]
                                                                </span>
                                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                                                    ({{info.nodeName}})
                                                                </span>
                                                            </span>
                                                        </span>
                                                    </div>
                                                    <div ng-show="!newConstraint.location_1">
                                                        <span style="color:red;">Drop the node!</span>
                                                    </div>
                                                </td>
                                                <td class="col-md-2">
                                                    <md-select placeholder="Select verb" class="inside-table"
                                                               ng-class="{'form-control-invalid' : isEmptyConstraintVerb(newConstraint)}"
                                                               ng-model="newConstraint.verb">
                                                        <md-option ng-repeat="constraintVerb in config.constraintVerbs | orderBy:'toString()'" ng-value="constraintVerb">
                                                            {{constraintVerb}}
                                                        </md-option>
                                                    </md-select>
                                                    <span style="color:red;" ng-show="isEmptyConstraintVerb(newConstraint)">Empty verb</span>
                                                </td>
                                                <td class="col-md-2">
                                                    <md-select placeholder="Select verb" class="inside-table"
                                                               ng-class="{'form-control-invalid' : isEmptyConstraintPattern(newConstraint)}"
                                                               ng-model="newConstraint.contraintType">
                                                        <md-option ng-repeat="contraintType in config.constraintTypes | orderBy:'toString()'" ng-value="contraintType">
                                                            {{contraintType}}
                                                        </md-option>
                                                    </md-select>
                                                    <span style="color:red;" ng-show="isEmptyConstraintPattern(newConstraint)">Empty constraint pattern</span>
                                                </td>
                                                <td class="col-md-2" ng-hide="newConstraint.contraintType == 'identical to another node' ||
                                                                                newConstraint.contraintType == 'equal to another node' ||
                                                                                newConstraint.contraintType == 'not-equal to another node' ||
                                                                                newConstraint.contraintType == 'greater than another node' ||
                                                                                newConstraint.contraintType == 'equal to or greater than another node' ||
                                                                                newConstraint.contraintType == 'less than another node' ||
                                                                                newConstraint.contraintType == 'equal to or less than another node'">
                                                    <span ng-show="newConstraint.contraintType == 'a literal value' ||
                                                                    newConstraint.contraintType == 'equal to' ||
                                                                    newConstraint.contraintType == 'not-equal to' ||
                                                                    newConstraint.contraintType == 'greater than' ||
                                                                    newConstraint.contraintType == 'equal to or greater than' ||
                                                                    newConstraint.contraintType == 'less than' ||
                                                                    newConstraint.contraintType == 'equal to or less than'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       ng-if="newConstraint.contraintType === 'a literal value'"
                                                                       type="text"/>
                                                                <input ng-model="newConstraint.value"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       ng-if="newConstraint.contraintType !== 'a literal value'"
                                                                       step="any" ng-pattern="/^1234$/"
                                                                       type="number" />
                                                                <md-checkbox ng-model="newConstraint.ignoreCase" ng-if="newConstraint.contraintType == 'a literal value'">
                                                                    Case Sensitive?
                                                                </md-checkbox>
                                                            </md-input-container>
                                                            <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty value</span>
                                                        </div>
                                                    </span>

                                                    <span ng-show="newConstraint.contraintType == 'one of list values'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value"
                                                                       placeholder="Comma-Separated Values(CSV)"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       type="text"/>
                                                            </md-input-container>
                                                        </div>
                                                        <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty list value</span>
                                                    </span>

                                                    <span ng-show="newConstraint.contraintType == 'formatted value'">
                                                        <md-select placeholder="Select format" class="inside-table"
                                                                   ng-class="{'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                   ng-model="newConstraint.value">
                                                            <md-option ng-repeat="predefinedFormat in config.predefinedFormats | orderBy:'toString()'" ng-value="predefinedFormat">
                                                                {{predefinedFormat}}
                                                            </md-option>
                                                        </md-select>
                                                        <div ng-show="newConstraint.value === 'Regular expression'" layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value2"
                                                                       placeholder="Regular expression"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue2(newConstraint)}"
                                                                       type="text"/>
                                                            </md-input-container>
                                                        </div>
                                                        <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty format</span>
                                                        <span style="color:red;" ng-show="newConstraint.value === 'Regular expression' && isEmptyConstraintValue2(newConstraint)">Empty regular expression</span>
                                                    </span>

                                                    <span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <md-select placeholder="Select ValueSet" class="inside-table"
                                                                       ng-class="{'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       ng-model="newConstraint.valueSetId">
                                                                    <md-option ng-repeat="table in tables track by table.id|orderBy:'+bindingIdentifier'" ng-value="getUpdatedBindingIdentifier(table)">
                                                                        {{::table.bindingIdentifier}}
                                                                    </md-option>
                                                                </md-select>
                                                            </md-input-container>
                                                        </div>
                                                        <span style="color:red;" ng-show="isEmptyConstraintValueSet(newConstraint)">Empty valueset</span>
                                                        <br/>
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <md-select placeholder="Select BindingStrength" class="inside-table"
                                                                           ng-model="newConstraint.bindingStrength">
                                                                    <md-option value="R">R</md-option>
                                                                    <md-option value="S">S</md-option>
                                                                    <md-option value="U">U</md-option>
                                                                </md-select>
                                                            </md-input-container>
                                                        </div>
                                                        <br/>
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.bindingLocation" type="text"/>
                                                            </md-input-container>
                                                        </div>
                                                    </span>
                                                </td>

                                                <td class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="secondNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterSecondNodeDrop'}"
                                                    ng-show="newConstraint.contraintType == 'identical to another node' ||
                                                            newConstraint.contraintType == 'equal to another node' ||
                                                            newConstraint.contraintType == 'not-equal to another node' ||
                                                            newConstraint.contraintType == 'greater than another node' ||
                                                            newConstraint.contraintType == 'equal to or greater than another node' ||
                                                            newConstraint.contraintType == 'less than another node' ||
                                                            newConstraint.contraintType == 'equal to or less than another node'">
                                                    <div ng-show="newConstraint.location_2">
                                                        <span>
                                                            <span ng-repeat="info in newConstraint.pathInfoSet_2">
                                                                <span ng-show="$index == 1 && info.isInstanceNumberEditable">
                                                                    {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                                                </span>
                                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">
                                                                    {{info.locationName}}[{{info.instanceNumber}}]
                                                                </span>
                                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">
                                                                    .{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                                                </span>
                                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                                                    .{{info.locationName}}[{{info.instanceNumber}}]
                                                                </span>
                                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                                                    ({{info.nodeName}})
                                                                </span>
                                                            </span>
                                                        </span>
                                                    </div>
                                                    <div ng-show="!newConstraint.location_2">
                                                        <span style="color:red;">Drop the node!</span>
                                                    </div>
                                                </td>
                                                <td class="col-md-2" align="center">
                                                    <button class="btn btn-raised btn-warning btn-xxs" ng-click="initConformanceStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                    <button class="btn btn-raised btn-primary btn-xxs" ng-click="addConformanceStatement();" ng-disabled="erorrForConfStatement(newConstraint, targetPlainId, 'message', selectedNode)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>

                                        <table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-2">ID</th>
                                                <th class="col-md-2">Complex Type</th>
                                                <th class="col-md-1" style="width: 4.1667%"></th>
                                                <th ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5">Constraints</th>
                                                <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">First Constraint</th>
                                                <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" style="width: 4.1667%"></th>
                                                <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">Second Constraint</th>
                                                <th class="col-md-2"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td class="col-md-2">
                                                    <input class="form-control" ng-class="{'form-control-invalid': !newComplexConstraintId || newComplexConstraintId == ''}" ng-model="newComplexConstraintId" type="text" />
                                                    <span style="color:red;" ng-show="!newComplexConstraintId || newComplexConstraintId == ''">ID Empty</span>
                                                </td>
                                                <td class="col-md-2">
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal">
                                                            <md-select placeholder="Select Composite Type" class="inside-table" ng-model="compositeType">
                                                                <md-option value="AND">AND</md-option>
                                                                <md-option value="OR">OR</md-option>
                                                                <md-option value="XOR">XOR</md-option>
                                                                <md-option value="IFTHEN">IFTHEN(IMPLY)</md-option>
                                                                <md-option value="FORALL">FORALL(True, if all assertions are true)</md-option>
                                                                <md-option value="EXIST">EXIST(True, if one of assertions is true)</md-option>
                                                            </md-select>
                                                        </md-input-container>
                                                        <span style="color:red;" ng-show="isEmptyCompositeType(compositeType)">Empty composite type</span>
                                                    </div>
                                                </td>
                                                <td class="col-md-1" align="center" style="width: 4.1667%">
                                                    <span ng-show="compositeType == 'IFTHEN'">IF</span>
                                                    <span ng-show="compositeType == 'FORALL'">FORALL</span>
                                                    <span ng-show="compositeType == 'EXIST'">EXIST</span>
                                                </td>
                                                <td ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5 drop-zone" align="center" style="vertical-align:middle" data-drop="true" ng-model='constraints' jqyoui-droppable="{multiple:true}" data-jqyoui-options>
                                                    <span style="color:red;" ng-show="constraints.length < 2">Drop two more constraints here!</span>
                                                    <li ng-repeat="c in constraints" ng-show="constraints.length > 0" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="constraints" jqyoui-draggable="{animate:true}">{{c.description}}</li>
                                                </td>
                                                <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
                                                    <span style="color:red;" ng-hide="firstConstraint">Drop the first constraint here!</span>
                                                    <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
                                                </td>
                                                <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" align="center" style="width: 4.1667%">
                                                    <span ng-show="compositeType == 'AND'">AND</span>
                                                    <span ng-show="compositeType == 'OR'">OR</span>
                                                    <span ng-show="compositeType == 'XOR'">XOR</span>
                                                    <span ng-show="compositeType == 'IFTHEN'">THEN</span>
                                                </td>
                                                <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2  drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
                                                    <span style="color:red;" ng-hide="secondConstraint">Drop the second constraint here!</span>
                                                    <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
                                                </td>
                                                <td class="col-md-1" align="center">
                                                    <button class="btn btn-raised btn-warning btn-xxs" ng-click="initComplexStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                    <button class="btn btn-raised btn-primary btn-xxs" ng-click="addComplexConformanceStatement()" ng-disabled="erorrForComplexConfStatement(newComplexConstraintId, targetComplexId, compositeType, firstConstraint, secondConstraint, constraints)">
                                                        <span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span>
                                                    </button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </md-content>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </md-dialog-content>


            <md-dialog-actions layout="row">
                <md-button ng-show="dialogStep === 1 && mode !== 'pc'" class="btn btn-raised btn-primary btn-sm" ng-click="goBack()"><span><i class="fa fa-arrow-left fa-fw"></i>Back</span></md-button>
                <md-button ng-show="dialogStep === 0" class="btn btn-raised btn-primary btn-sm" ng-click="goNext()" ng-disabled="contextKey === null"><span><i class="fa fa fa-arrow-right fa-fw"></i>Next</span></md-button>
                <md-button ng-show="dialogStep === 1" class="btn btn-raised btn-success btn-sm" ng-click="saveClose()" ng-disabled="!changed" ><span><i class="fa fa-floppy-o fa-fw"></i>Save</span></md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="message_tree_item.html">
    <tr style="width:100%">
        <td ng-if="data.folderClass">
            <div ng-if="data.type === 'message' || data.type === 'group'">
                <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
            </div>
            <div ng-if="data.type !== 'message' && data.type !== 'group'">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            </div>
        </td>
        <td ng-if="!data.folderClass">
            <div ng-if="data.type === 'message' || data.type === 'group'">
                <i class="fa fa-caret-right" ng-click="toggleChildren(data)"></i>
            </div>
            <div ng-if="data.type !== 'message' && data.type !== 'group'">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            </div>
        </td>
        <td>
            <div ng-if="data.type === 'message'">
                <input type="checkbox" ng-checked="data.contextKey === contextKey" ng-click="selectContext(data);" />
                <span class="label label-success label-icon">M</span>
                <span style="font-weight:bold;color:blue;">&nbsp;{{::data.name}}</span>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.children" ng-include="'message_tree_item.html'"></div>
                    </table>
                </div>
            </div>
            <div ng-if="data.type === 'group'">
                <input type="checkbox" ng-checked="data.contextKey === contextKey" ng-click="selectContext(data);" />
                <span class="label label-success label-icon">G</span>
                <span style="font-weight:bold;color:blue;">&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::data.name}}</span>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.children" ng-include="'message_tree_item.html'"></div>
                    </table>
                </div>
            </div>
            <div ng-if="data.type === 'segmentRef'">
                <span class="label label-segment label-icon">S</span>
                <span>&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::segmentsMap[data.ref.id].name}}</span>
            </div>
        </td>
    </tr>
</script>
<script type="text/ng-template" id="context_tree_item.html">
    <tr style="width:100%">
        <td ng-if="data.folderClass">
            <div ng-if="data.type === 'message' || data.type === 'group' || data.type === 'segmentRef' || data.type === 'segment' || data.type === 'datatype'">
                <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
            </div>
            <div ng-if="data.type === 'field' || data.type === 'component'">
                <div ng-if="data.child.components &&  data.child.components.length > 0">
                    <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="!data.child.components ||  data.child.components.length === 0">
                    &nbsp;&nbsp;
                </div>
            </div>
        </td>
        <td ng-if="!data.folderClass">
            <div ng-if="data.type === 'message' || data.type === 'group' || data.type === 'segmentRef' || data.type === 'segment' || data.type === 'datatype'">
                <i class="fa fa-caret-right" ng-click="toggleChildren(data)"></i>
            </div>
            <div ng-if="data.type === 'field' || data.type === 'component'">
                <div ng-if="data.child.components &&  data.child.components.length > 0">
                    <i class="fa fa-caret-right" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="!data.child.components ||  data.child.components.length === 0">
                    &nbsp;&nbsp;
                </div>
            </div>
        </td>
        <td>
            <i class="glyphicon glyphicon-move cursorMove" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-hide="data.type === 'message'  || data.type === 'segment' || data.type === 'datatype' || (contextKey && data.contextKey && data.contextKey === contextKey)" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}"></i>
        </td>
        <td>
            <div ng-if="data.type === 'message'">
                <span class="label label-success label-icon">M</span>
                <span style="font-weight:bold;color:blue;">&nbsp;{{::data.name}}</span>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.children" ng-include="'context_tree_item.html'"></div>
                    </table>
                </div>
            </div>
            <div ng-if="data.type === 'group'">
                <span class="label label-success label-icon">G</span>
                <span style="font-weight:bold;color:blue;">&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::data.name}}</span>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.children" ng-include="'context_tree_item.html'"></div>
                    </table>
                </div>
            </div>
            <div ng-if="data.type === 'segmentRef'">
                <span class="label label-segment label-icon">S</span>
                <span style="font-weight:bold;">&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::segmentsMap[data.ref.id].name}}</span>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.segment.fields" ng-include="'context_tree_item.html'"></div>
                    </table>
                </div>
            </div>
            <div ng-if="data.type === 'segment'">
                <span class="label label-segment label-icon">S</span>
                <span>&nbsp;{{::data.name}}</span>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.fields" ng-include="'context_tree_item.html'"></div>
                    </table>
                </div>
            </div>
            <div ng-if="data.type === 'datatype'">
                <div>
                    <span class="label label-datatype label-icon">D</span>
                    <span>&nbsp;{{::data.name}}</span>
                </div>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.components" ng-include="'context_tree_item.html'"></div>
                    </table>
                </div>
            </div>
            <div ng-if="data.type === 'field'">
                <span class="label label-field label-icon">F</span>
                <span style="font-weight:bold;">&nbsp;{{::data.position}}. &nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}] {{::data.name}}</span>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.child.components" ng-include="'context_tree_item.html'"></div>
                    </table>
                </div>
            </div>
            <div ng-if="data.type === 'component'">
                <span class="label label-component label-icon">C</span>
                <span style="font-weight:bold;">&nbsp;{{::data.position}}. &nbsp;[{{::data.usage}}] {{::data.name}}</span>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.child.components" ng-include="'context_tree_item.html'"></div>
                    </table>
                </div>
            </div>
        </td>
    </tr>
</script>
<script type="text/ng-template" id="ConformanceStatementSegmentCtrl.html">
    <md-dialog aria-label="Conformance Statements for Segment" style="width: 90%">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2>Conformance Statements</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="constraint-dialog">
                    <form novalidate ng-cloak>
                        <div class="col-md-4">
                            <div class="panel panel-primary">
                                <div class="panel-heading">Selected Context Tree</div>
                                <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                    <table class="table table-striped">
                                        <tbody ng-repeat="data in treeDataForContext" ng-include="'context_tree_item.html'">
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-8">
                            <div class="panel panel-primary">
                                <div class="panel-heading">Conformance Statements of {{selectedSegment.name}}</div>
                                <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                    <table st-table="displayedCS" st-safe-src="selectedSegment.conformanceStatements" class="table table-striped table-bordered">
                                        <thead>
                                        <tr class="tbl-header">
                                            <th ng-show="constraintType === 'Complex'" class="col-md-1" style="width: 4.1667%">Draggable</th>
                                            <th st-sort="constraintId" class="col-md-2">ID</th>
                                            <th class="col-md-8">Description (
                                                <input type="checkbox" ng-model="viewAssertion"> view assertion )
                                            </th>
                                            <th class="col-md-1"></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="c in displayedCS">
                                            <td ng-show="constraintType === 'Complex'" class="col-md-1" align="center" style="width: 4.1667%">
                                                <i ng-show="c.assertion" class="glyphicon glyphicon-move cursorMove" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="c" jqyoui-draggable="{placeholder:'keep',animate:true}"></i>
                                            </td>
                                            <td class="col-md-2">
                                                <div layout="row">
                                                    <md-input-container flex="100" class="normal">
                                                        <input ng-model="c.constraintId"
                                                               ng-change="setChanged()"
                                                               ng-class="{ 'has-error' : isEmptyConstraintID(c)}"
                                                               type="text"/>
                                                    </md-input-container>
                                                </div>
                                                <span style="color:red;" ng-show="isEmptyConstraintID(c)">ID Empty</span>
                                            </td>
                                            <td class="col-md-8">
                                                <div layout="row">
                                                    <md-input-container flex="100" class="normal">
                                                        <input ng-model="c.description" ng-change="setChanged()" type="text" disabled/>
                                                    </md-input-container>
                                                </div>
                                                <div layout="row">
                                                    <md-input-container flex="100" class="normal" ng-show="viewAssertion">
                                                        <input ng-model="c.assertion" ng-change="setChanged()" type="text" disabled/>
                                                    </md-input-container>
                                                </div>
                                            </td>
                                            <td class="col-md-1" align="center">
                                                <button class="btn btn-raised btn-danger btn-xxs" ng-click="deleteConformanceStatement(c)"><span><i class="fa fa-trash fa-fw"/></span></button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12" style="margin-top: 10px">
                            <div ng-cloak>
                                <md-content>
                                    <md-nav-bar
                                            md-selected-nav-item="constraintType"
                                            nav-bar-aria-label="navigation links">
                                        <md-nav-item md-nav-click="constraintType = 'Free'" name="Free">
                                            Add new Free-Text Conf.Statement
                                        </md-nav-item>
                                        <md-nav-item md-nav-click="constraintType = 'Plain'" name="Plain">
                                            Add New Plain Conf.Statement
                                        </md-nav-item>
                                        <md-nav-item md-nav-click="constraintType = 'Complex'" name="Complex">
                                            Add New Complex Conf.Statement
                                        </md-nav-item>
                                    </md-nav-bar>


                                    <table class="table table-striped table-bordered" ng-show="constraintType === 'Free'">
                                        <thead>
                                        <tr class="tbl-header">
                                            <th class="col-md-2">ID</th>
                                            <th class="col-md-8">Free-Text (Not supported by validation tool)</th>
                                            <th class="col-md-2"></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td class="col-md-2">
                                                <div layout="row">
                                                    <md-input-container flex="100" class="normal">
                                                        <input ng-model="newConstraint.constraintId"
                                                               ng-class="{ 'form-control-invalid' : isEmptyConstraintID(newConstraint)}"
                                                               type="text"/>
                                                    </md-input-container>
                                                </div>
                                                <span style="color:red;" ng-show="isEmptyConstraintID(newConstraint)">ID Empty</span>
                                            </td>
                                            <td class="col-md-8">
                                                <div layout="row">
                                                    <md-input-container flex="100" class="normal">
                                                        <input ng-model="newConstraint.freeText"
                                                               type="text"/>
                                                    </md-input-container>
                                                </div>
                                                <span style="color:red;" ng-show="!newConstraint.freeText || newConstraint.freeText === ''">Empty text</span>
                                            </td>
                                            <td class="col-md-2" align="center">
                                                <button class="btn btn-raised btn-warning btn-xxs" ng-click="initConformanceStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                <button class="btn btn-raised btn-primary btn-xxs" ng-click="addFreeTextConformanceStatement();" ng-disabled="isEmptyConstraintID(newConstraint) || !newConstraint.freeText || newConstraint.freeText === ''"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>

                                    <table class="table table-striped table-bordered" ng-show="constraintType === 'Plain'">
                                        <thead>
                                        <tr class="tbl-header">
                                            <th class="col-md-2">ID</th>
                                            <th class="col-md-2">Node</th>
                                            <th class="col-md-2">Verb</th>
                                            <th class="col-md-2">Constraint Pattern</th>
                                            <th class="col-md-2">Value</th>
                                            <th class="col-md-2"></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td class="col-md-2">
                                                <div layout="row">
                                                    <md-input-container flex="100" class="normal">
                                                        <input ng-model="newConstraint.constraintId"
                                                               ng-class="{ 'form-control-invalid' : isEmptyConstraintID(newConstraint)}"
                                                               type="text"/>
                                                    </md-input-container>
                                                </div>
                                                <span style="color:red;" ng-show="isEmptyConstraintID(newConstraint)">ID Empty</span>
                                            </td>
                                            <td class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="firstNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterFirstNodeDrop'}">
                                                <div ng-show="newConstraint.location_1">
                                                        <span>
                                                            <span ng-repeat="info in newConstraint.pathInfoSet_1">
                                                                <span ng-show="$index == 1 && info.isInstanceNumberEditable">
                                                                    {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]
                                                                </span>
                                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">
                                                                    {{info.locationName}}[{{info.instanceNumber}}]
                                                                </span>
                                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">
                                                                    .{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]
                                                                </span>
                                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                                                    .{{info.locationName}}[{{info.instanceNumber}}]
                                                                </span>
                                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                                                    ({{info.nodeName}})
                                                                </span>
                                                            </span>
                                                        </span>
                                                </div>
                                                <div ng-show="!newConstraint.location_1">
                                                    <span style="color:red;">Drop the node!</span>
                                                </div>
                                            </td>
                                            <td class="col-md-2">
                                                <md-select placeholder="Select verb" class="inside-table"
                                                           ng-class="{'form-control-invalid' : isEmptyConstraintVerb(newConstraint)}"
                                                           ng-model="newConstraint.verb">
                                                    <md-option ng-repeat="constraintVerb in config.constraintVerbs | orderBy:'toString()'" ng-value="constraintVerb">
                                                        {{constraintVerb}}
                                                    </md-option>
                                                </md-select>
                                                <span style="color:red;" ng-show="isEmptyConstraintVerb(newConstraint)">Empty verb</span>
                                            </td>
                                            <td class="col-md-2">
                                                <md-select placeholder="Select verb" class="inside-table"
                                                           ng-class="{'form-control-invalid' : isEmptyConstraintPattern(newConstraint)}"
                                                           ng-model="newConstraint.contraintType">
                                                    <md-option ng-repeat="contraintType in config.constraintTypes | orderBy:'toString()'" ng-value="contraintType">
                                                        {{contraintType}}
                                                    </md-option>
                                                </md-select>
                                                <span style="color:red;" ng-show="isEmptyConstraintPattern(newConstraint)">Empty constraint pattern</span>
                                            </td>
                                            <td class="col-md-2" ng-hide="newConstraint.contraintType == 'identical to another node' ||
                                                                                newConstraint.contraintType == 'equal to another node' ||
                                                                                newConstraint.contraintType == 'not-equal to another node' ||
                                                                                newConstraint.contraintType == 'greater than another node' ||
                                                                                newConstraint.contraintType == 'equal to or greater than another node' ||
                                                                                newConstraint.contraintType == 'less than another node' ||
                                                                                newConstraint.contraintType == 'equal to or less than another node'">
                                                    <span ng-show="newConstraint.contraintType == 'a literal value' ||
                                                                    newConstraint.contraintType == 'equal to' ||
                                                                    newConstraint.contraintType == 'not-equal to' ||
                                                                    newConstraint.contraintType == 'greater than' ||
                                                                    newConstraint.contraintType == 'equal to or greater than' ||
                                                                    newConstraint.contraintType == 'less than' ||
                                                                    newConstraint.contraintType == 'equal to or less than'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       ng-if="newConstraint.contraintType === 'a literal value'"
                                                                       type="text"/>
                                                                <input ng-model="newConstraint.value"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       ng-if="newConstraint.contraintType !== 'a literal value'"
                                                                       step="any" ng-pattern="/^1234$/"
                                                                       type="number" />
                                                                <md-checkbox ng-model="newConstraint.ignoreCase" ng-if="newConstraint.contraintType == 'a literal value'">
                                                                    Case Sensitive?
                                                                </md-checkbox>
                                                            </md-input-container>
                                                            <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty value</span>
                                                        </div>
                                                    </span>

                                                <span ng-show="newConstraint.contraintType == 'one of list values'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value"
                                                                       placeholder="Comma-Separated Values(CSV)"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       type="text"/>
                                                            </md-input-container>
                                                        </div>
                                                        <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty list value</span>
                                                    </span>

                                                <span ng-show="newConstraint.contraintType == 'formatted value'">
                                                        <md-select placeholder="Select format" class="inside-table"
                                                                   ng-class="{'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                   ng-model="newConstraint.value">
                                                            <md-option ng-repeat="predefinedFormat in config.predefinedFormats | orderBy:'toString()'" ng-value="predefinedFormat">
                                                                {{predefinedFormat}}
                                                            </md-option>
                                                        </md-select>
                                                        <div ng-show="newConstraint.value === 'Regular expression'" layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value2"
                                                                       placeholder="Regular expression"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue2(newConstraint)}"
                                                                       type="text"/>
                                                            </md-input-container>
                                                        </div>
                                                        <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty format</span>
                                                        <span style="color:red;" ng-show="newConstraint.value === 'Regular expression' && isEmptyConstraintValue2(newConstraint)">Empty regular expression</span>
                                                    </span>

                                                <span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <md-select placeholder="Select ValueSet" class="inside-table"
                                                                           ng-class="{'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                           ng-model="newConstraint.valueSetId">
                                                                    <md-option ng-repeat="table in tables track by table.id|orderBy:'+bindingIdentifier'" ng-value="getUpdatedBindingIdentifier(table)">
                                                                        {{::table.bindingIdentifier}}
                                                                    </md-option>
                                                                </md-select>
                                                            </md-input-container>
                                                        </div>
                                                        <span style="color:red;" ng-show="isEmptyConstraintValueSet(newConstraint)">Empty valueset</span>
                                                        <br/>
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <md-select placeholder="Select BindingStrength" class="inside-table"
                                                                           ng-model="newConstraint.bindingStrength">
                                                                    <md-option value="R">R</md-option>
                                                                    <md-option value="S">S</md-option>
                                                                    <md-option value="U">U</md-option>
                                                                </md-select>
                                                            </md-input-container>
                                                        </div>
                                                        <br/>
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.bindingLocation" type="text"/>
                                                            </md-input-container>
                                                        </div>
                                                    </span>
                                            </td>

                                            <td class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="secondNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterSecondNodeDrop'}"
                                                ng-show="newConstraint.contraintType == 'identical to another node' ||
                                                            newConstraint.contraintType == 'equal to another node' ||
                                                            newConstraint.contraintType == 'not-equal to another node' ||
                                                            newConstraint.contraintType == 'greater than another node' ||
                                                            newConstraint.contraintType == 'equal to or greater than another node' ||
                                                            newConstraint.contraintType == 'less than another node' ||
                                                            newConstraint.contraintType == 'equal to or less than another node'">
                                                <div ng-show="newConstraint.location_2">
                                                        <span>
                                                            <span ng-repeat="info in newConstraint.pathInfoSet_2">
                                                                <span ng-show="$index == 1 && info.isInstanceNumberEditable">
                                                                    {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                                                </span>
                                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">
                                                                    {{info.locationName}}[{{info.instanceNumber}}]
                                                                </span>
                                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">
                                                                    .{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                                                </span>
                                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                                                    .{{info.locationName}}[{{info.instanceNumber}}]
                                                                </span>
                                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                                                    ({{info.nodeName}})
                                                                </span>
                                                            </span>
                                                        </span>
                                                </div>
                                                <div ng-show="!newConstraint.location_2">
                                                    <span style="color:red;">Drop the node!</span>
                                                </div>
                                            </td>
                                            <td class="col-md-2" align="center">
                                                <button class="btn btn-raised btn-warning btn-xxs" ng-click="initConformanceStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                <button class="btn btn-raised btn-primary btn-xxs" ng-click="addConformanceStatement();" ng-disabled="erorrForConfStatement(newConstraint, targetPlainId, 'message', selectedNode)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>

                                    <table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
                                        <thead>
                                        <tr class="tbl-header">
                                            <th class="col-md-2">ID</th>
                                            <th class="col-md-2">Complex Type</th>
                                            <th class="col-md-1" style="width: 4.1667%"></th>
                                            <th ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5">Constraints</th>
                                            <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">First Constraint</th>
                                            <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" style="width: 4.1667%"></th>
                                            <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">Second Constraint</th>
                                            <th class="col-md-2"></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td class="col-md-2">
                                                <input class="form-control" ng-class="{'form-control-invalid': !newComplexConstraintId || newComplexConstraintId == ''}" ng-model="newComplexConstraintId" type="text" />
                                                <span style="color:red;" ng-show="!newComplexConstraintId || newComplexConstraintId == ''">ID Empty</span>
                                            </td>
                                            <td class="col-md-2">
                                                <div layout="row">
                                                    <md-input-container flex="100" class="normal">
                                                        <md-select placeholder="Select Composite Type" class="inside-table" ng-model="compositeType">
                                                            <md-option value="AND">AND</md-option>
                                                            <md-option value="OR">OR</md-option>
                                                            <md-option value="XOR">XOR</md-option>
                                                            <md-option value="IFTHEN">IFTHEN(IMPLY)</md-option>
                                                            <md-option value="FORALL">FORALL(True, if all assertions are true)</md-option>
                                                            <md-option value="EXIST">EXIST(True, if one of assertions is true)</md-option>
                                                        </md-select>
                                                        <span style="color:red;" ng-show="isEmptyCompositeType(compositeType)">Empty composite type</span>
                                                    </md-input-container>
                                                </div>
                                            </td>
                                            <td class="col-md-1" align="center" style="width: 4.1667%">
                                                <span ng-show="compositeType == 'IFTHEN'">IF</span>
                                                <span ng-show="compositeType == 'FORALL'">FORALL</span>
                                                <span ng-show="compositeType == 'EXIST'">EXIST</span>
                                            </td>
                                            <td ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5 drop-zone" align="center" style="vertical-align:middle" data-drop="true" ng-model='constraints' jqyoui-droppable="{multiple:true}" data-jqyoui-options>
                                                <span style="color:red;" ng-show="constraints.length < 2">Drop two more constraints here!</span>
                                                <li ng-repeat="c in constraints" ng-show="constraints.length > 0" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="constraints" jqyoui-draggable="{animate:true}">{{c.description}}</li>
                                            </td>
                                            <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
                                                <span style="color:red;" ng-hide="firstConstraint">Drop the first constraint here!</span>
                                                <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
                                            </td>
                                            <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" align="center" style="width: 4.1667%">
                                                <span ng-show="compositeType == 'AND'">AND</span>
                                                <span ng-show="compositeType == 'OR'">OR</span>
                                                <span ng-show="compositeType == 'XOR'">XOR</span>
                                                <span ng-show="compositeType == 'IFTHEN'">THEN</span>
                                            </td>
                                            <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
                                                <span style="color:red;" ng-hide="secondConstraint">Drop the second constraint here!</span>
                                                <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
                                            </td>
                                            <td class="col-md-1" align="center">
                                                <button class="btn btn-raised btn-warning btn-xxs" ng-click="initComplexStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                <button class="btn btn-raised btn-primary btn-xxs" ng-click="addComplexConformanceStatement()" ng-disabled="erorrForComplexConfStatement(newComplexConstraintId, targetComplexId, compositeType, firstConstraint, secondConstraint, constraints)">
                                                    <span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span>
                                                </button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </md-content>
                            </div>
                        </div>
                    </form>
                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">
                <md-button class="btn btn-raised btn-success btn-sm" ng-click="saveClose()" ng-disabled="!changed" ><span><i class="fa fa-floppy-o fa-fw"></i>Save</span></md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="PredicateSegmentCtrl.html">
    <md-dialog aria-label="Conditional Predicate for Segment" style="{{getDialogStyle()}}">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2 ng-if="dialogStep === 0">Predicate Summary</h2>
                    <h2 ng-if="dialogStep === 1">(1/2) Create Constraints</h2>
                    <h2 ng-if="dialogStep === 2">(2/2) Select Predicate and Set True/False Usage</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="constraint-dialog">
                    <div ng-show="dialogStep === 0">
                        <form novalidate ng-cloak>
                            <div class="col-md-6">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Selected Node Info</div>
                                    <div class="panel-body" style="min-height:350px; max-height:350px;overflow-y: scroll;">
                                        <div layout="row" layout-align="start center" style="margin-top: 40px">
                                            <md-input-container flex="100">
                                                <label style="font-weight: bold;color:black">Segment Label Name</label>
                                                <input style="font-weight: bold;color:black"  ng-model="selectedSegment.label" disabled>
                                            </md-input-container>
                                        </div>
                                        <div layout="row" layout-align="start center">
                                            <md-input-container flex="100">
                                                <label style="font-weight: bold;color:black">Position</label>
                                                <input style="font-weight: bold;color:black" ng-model="selectedNode.position" disabled>
                                            </md-input-container>
                                        </div>
                                        <div layout="row" layout-align="start center">
                                            <md-input-container flex="100">
                                                <label style="font-weight: bold;color:black">Description</label>
                                                <input style="font-weight: bold;color:black" ng-model="selectedNode.name" disabled>
                                            </md-input-container>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Existing Predicate</div>
                                    <div class="panel-body" style="min-height:350px; max-height:350px;overflow-y: scroll;">
                                        <span ng-if="!existingPredicate" style="color:red;margin-top: 40px;">No Predicate. Please go to next step and make a new Predicate.</span>
                                        <div ng-if="existingPredicate">
                                            <div layout="row" layout-align="start center" style="margin-top: 40px">
                                                <md-input-container flex="100">
                                                    <label>Predicate Description</label>
                                                    <input ng-model="existingPredicate.description" disabled>
                                                </md-input-container>
                                            </div>
                                            <div layout="row" layout-align="start center">
                                                <md-input-container flex="100">
                                                    <label>Predicate Assertion</label>
                                                    <input ng-model="existingPredicate.assertion" disabled>
                                                </md-input-container>
                                            </div>
                                            <div layout="row" layout-align="start center">
                                                <md-input-container flex="50">
                                                    <label>True Usage</label>
                                                    <md-select placeholder="Select TRUE Usage" ng-model="existingPredicate.trueUsage" ng-change="setChanged()">
                                                        <md-option ng-repeat="usage in config.conditionalUsage" ng-value="usage">
                                                            {{usage}}
                                                        </md-option>
                                                    </md-select>
                                                </md-input-container>
                                                <md-input-container flex="50">
                                                    <label>False Usage</label>
                                                    <md-select placeholder="Select FALSE Usage" ng-model="existingPredicate.falseUsage" ng-change="setChanged()">
                                                        <md-option ng-repeat="usage in config.conditionalUsage" ng-value="usage">
                                                            {{usage}}
                                                        </md-option>
                                                    </md-select>
                                                </md-input-container>
                                            </div>
                                            <div layout="row" layout-sm="column" layout-align="end center" layout-wrap ng-show="existingPredicate">
                                                <md-button class="md-raised md-warn" ng-click="deletePredicate()">
                                                    <i class="fa fa-trash fa-fw"/> Delete Predicate
                                                </md-button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div ng-show="dialogStep === 1">
                        <form novalidate ng-cloak>
                            <div class="col-md-4">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Selected Context Tree</div>
                                    <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                        <table class="table table-striped">
                                            <tbody ng-repeat="data in treeDataForContext" ng-include="'context_tree_item.html'">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Temporary Constraints</div>
                                    <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                        <table st-table="displayedCP" st-safe-src="tempPredicates" class="table table-striped table-bordered">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-1" ng-show="constraintType === 'Complex'">Draggable</th>
                                                <th class="col-md-10">Description (<input type="checkbox" ng-model="viewAssertion"/> view assertion )</th>
                                                <th class="col-md-1"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="c in displayedCP">
                                                <td class="col-md-1" align="center" ng-show="constraintType === 'Complex'">
                                                    <i class="glyphicon glyphicon-move cursorMove" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="c" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingPredicate({nodeData: data})'}"></i>
                                                </td>
                                                <td class="col-md-10">
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal">
                                                            <input ng-model="c.description" type="text" disabled />
                                                        </md-input-container>
                                                    </div>
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal" ng-show="viewAssertion">
                                                            <input ng-model="c.assertion" type="text" disabled />
                                                        </md-input-container>
                                                    </div>
                                                </td>
                                                <td class="col-md-1" align="center">
                                                    <button class="btn btn-raised btn-danger btn-xxs" ng-click="deleteTempPredicate(c)"><span><i class="fa fa-trash fa-fw"></i></span></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-12" style="margin-top: 10px">
                                <div ng-cloak>
                                    <md-content>
                                        <md-nav-bar md-selected-nav-item="constraintType" nav-bar-aria-label="navigation links">
                                            <md-nav-item md-nav-click="constraintType = 'Free'" name="Free">
                                                Add new Free-Text Constraint
                                            </md-nav-item>
                                            <md-nav-item md-nav-click="constraintType = 'Plain'" name="Plain">
                                                Add New Plain Constraint
                                            </md-nav-item>
                                            <md-nav-item md-nav-click="constraintType = 'Complex'" name="Complex">
                                                Add New Complex Constraint
                                            </md-nav-item>
                                        </md-nav-bar>

                                        <table class="table table-striped table-bordered" ng-show="constraintType==='Free'">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-10">Free-Text (Not supported by validation tool)</th>
                                                <th class="col-md-2"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td class="col-md-10">
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal">
                                                            <input ng-model="newConstraint.freeText"
                                                                   type="text"/>
                                                        </md-input-container>
                                                    </div>
                                                </td>
                                                <td class="col-md-2" align="center">
                                                    <button class="btn btn-raised btn-warning btn-xxs" ng-click="initPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                    <button class="btn btn-raised btn-primary btn-xxs" ng-click="addFreeTextPredicate();" ng-disabled="!newConstraint.freeText || newConstraint.freeText === ''"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>

                                        <table class="table table-striped table-bordered" ng-show="constraintType==='Plain'">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-2">If</th>
                                                <th class="col-md-2">Node</th>
                                                <th class="col-md-2">Verb</th>
                                                <th class="col-md-2">Constraint Pattern</th>
                                                <th class="col-md-2">Value</th>
                                                <th class="col-md-2"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td class="col-md-2">If</td>
                                                <td class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="firstNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterFirstNodeDrop'}">
                                                    <div ng-show="newConstraint.location_1">
                                                        <span>
                                                            <span ng-repeat="info in newConstraint.pathInfoSet_1">
                                                                <span ng-show="$index===1 && info.isInstanceNumberEditable">{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]</span>
                                                                <span ng-show="$index===1 && !info.isInstanceNumberEditable">{{info.locationName}}[{{info.instanceNumber}}]</span>
                                                                <span ng-show="$index >1 && info.isInstanceNumberEditable">.{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text" />]</span>
                                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">.{{info.locationName}}[{{info.instanceNumber}}]</span>
                                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">({{info.nodeName}})</span>
                                                            </span>
                                                        </span>
                                                    </div>
                                                    <div ng-show="!newConstraint.location_1">
                                                        <span style="color:red;">Drop the node!</span>
                                                    </div>
                                                </td>
                                                <td class="col-md-2">
                                                    <md-select placeholder="Select verb" class="inside-table"
                                                               ng-class="{'form-control-invalid' : isEmptyConstraintVerb(newConstraint)}"
                                                               ng-model="newConstraint.verb">
                                                        <md-option ng-repeat="constraintVerb in config.conditionalConstraintVerbs | orderBy:'toString()'" ng-value="constraintVerb">
                                                            {{constraintVerb}}
                                                        </md-option>
                                                    </md-select>
                                                    <span style="color:red;" ng-show="isEmptyConstraintVerb(newConstraint)">Empty verb</span>
                                                </td>
                                                <td class="col-md-2">
                                                    <md-select placeholder="Select verb" class="inside-table"
                                                               ng-class="{'form-control-invalid' : isEmptyConstraintPattern(newConstraint)}"
                                                               ng-model="newConstraint.contraintType">
                                                        <md-option ng-repeat="contraintType in config.constraintTypes | orderBy:'toString()'" ng-value="contraintType">
                                                            {{contraintType}}
                                                        </md-option>
                                                    </md-select>
                                                    <span style="color:red;" ng-show="isEmptyConstraintPattern(newConstraint)">Empty constraint pattern</span>
                                                </td>
                                                <td class="col-md-2" ng-hide="newConstraint.contraintType == 'identical to another node' ||
                                                                              newConstraint.contraintType == 'equal to another node' ||
                                                                              newConstraint.contraintType == 'not-equal to another node' ||
                                                                              newConstraint.contraintType == 'greater than another node' ||
                                                                              newConstraint.contraintType == 'equal to or greater than another node' ||
                                                                              newConstraint.contraintType == 'less than another node' ||
                                                                              newConstraint.contraintType == 'equal to or less than another node'">
                                                    <span ng-show="newConstraint.contraintType == 'a literal value' ||
                                                                   newConstraint.contraintType == 'equal to' ||
                                                                   newConstraint.contraintType == 'not-equal to' ||
                                                                   newConstraint.contraintType == 'greater than' ||
                                                                   newConstraint.contraintType == 'equal to or greater than' ||
                                                                   newConstraint.contraintType == 'less than' ||
                                                                   newConstraint.contraintType == 'equal to or less than'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       ng-if="newConstraint.contraintType === 'a literal value'"
                                                                       type="text"/>
                                                                <input ng-model="newConstraint.value"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       ng-if="newConstraint.contraintType !== 'a literal value'"
                                                                       step="any" ng-pattern="/^1234$/"
                                                                       type="number" />
                                                                <md-checkbox ng-model="newConstraint.ignoreCase" ng-if="newConstraint.contraintType == 'a literal value'">
                                                                    Case Sensitive?
                                                                </md-checkbox>
                                                            </md-input-container>
                                                            <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty value</span>
                                                        </div>
                                                    </span>

                                                    <span ng-show="newConstraint.contraintType == 'one of list values'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value"
                                                                       placeholder="Comma-Separated Values(CSV)"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       type="text"/>
                                                                <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty list value</span>
                                                            </md-input-container>
                                                        </div>
                                                    </span>

                                                    <span ng-show="newConstraint.contraintType == 'formatted value'">
                                                        <md-select placeholder="Select format" class="inside-table"
                                                                   ng-class="{'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                   ng-model="newConstraint.value">
                                                            <md-option ng-repeat="predefinedFormat in config.predefinedFormats | orderBy:'toString()'" ng-value="predefinedFormat">
                                                                {{predefinedFormat}}
                                                            </md-option>
                                                        </md-select>
                                                        <div ng-show="newConstraint.value === 'Regular expression'" layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value2"
                                                                       placeholder="Regular expression"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue2(newConstraint)}"
                                                                       type="text"/>
                                                            </md-input-container>
                                                        </div>
                                                        <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty format</span>
                                                        <span style="color:red;" ng-show="newConstraint.value === 'Regular expression' && isEmptyConstraintValue2(newConstraint)">Empty regular expression</span>
                                                    </span>

                                                    <span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <md-select placeholder="Select ValueSet" class="inside-table"
                                                                           ng-class="{'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                           ng-model="newConstraint.valueSetId">
                                                                    <md-option ng-repeat="table in tables track by table.id|orderBy:'+bindingIdentifier'" ng-value="getUpdatedBindingIdentifier(table)">
                                                                        {{::table.bindingIdentifier}}
                                                                    </md-option>
                                                                </md-select>
                                                            </md-input-container>
                                                        </div>
                                                        <span style="color:red;" ng-show="isEmptyConstraintValueSet(newConstraint)">Empty valueset</span>
                                                        <br/>
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <md-select placeholder="Select BindingStrength" class="inside-table"
                                                                           ng-model="newConstraint.bindingStrength">
                                                                    <md-option value="R">R</md-option>
                                                                    <md-option value="S">S</md-option>
                                                                    <md-option value="U">U</md-option>
                                                                </md-select>
                                                            </md-input-container>
                                                        </div>
                                                        <br/>
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.bindingLocation" type="text"/>
                                                            </md-input-container>
                                                        </div>
                                                    </span>
                                                </td>

                                                <td class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="secondNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterSecondNodeDrop'}"
                                                    ng-show="newConstraint.contraintType == 'identical to another node' ||
                                                             newConstraint.contraintType == 'equal to another node' ||
                                                             newConstraint.contraintType == 'not-equal to another node' ||
                                                             newConstraint.contraintType == 'greater than another node' ||
                                                             newConstraint.contraintType == 'equal to or greater than another node' ||
                                                             newConstraint.contraintType == 'less than another node' ||
                                                             newConstraint.contraintType == 'equal to or less than another node'">
                                                    <div ng-show="newConstraint.location_2">
                                                        <span>
                                                            <span ng-repeat="info in newConstraint.pathInfoSet_2">
                                                                <span ng-show="$index == 1 && info.isInstanceNumberEditable">{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]</span>
                                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">{{info.locationName}}[{{info.instanceNumber}}]</span>
                                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">.{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]</span>
                                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">.{{info.locationName}}[{{info.instanceNumber}}]</span>
                                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">({{info.nodeName}})</span>
                                                            </span>
                                                        </span>
                                                    </div>
                                                    <div ng-show="!newConstraint.location_2">
                                                        <span style="color:red;">Drop the node!</span>
                                                    </div>
                                                </td>
                                                <td class="col-md-2" align="center">
                                                    <button class="btn btn-raised btn-warning btn-xxs" ng-click="initPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                    <button class="btn btn-raised btn-primary btn-xxs" ng-click="addPredicate()" ng-disabled="erorrForPredicate(newConstraint, 'segment', selectedNode);"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>

                                        <table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-2">Complex Type</th>
                                                <th class="col-md-1"></th>
                                                <th ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-7">Constraints</th>
                                                <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-3">First Constraint</th>
                                                <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1"></th>
                                                <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-3">Second Constraint</th>
                                                <th class="col-md-2"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td class="col-md-2">
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal">
                                                            <md-select placeholder="Select Composite Type" class="inside-table" ng-model="compositeType">
                                                                <md-option value="AND">AND</md-option>
                                                                <md-option value="OR">OR</md-option>
                                                                <md-option value="XOR">XOR</md-option>
                                                                <!--<md-option value="IFTHEN">IFTHEN(IMPLY)</md-option>-->
                                                                <md-option value="FORALL">FORALL(True, if all assertions are true)</md-option>
                                                                <md-option value="EXIST">EXIST(True, if one of assertions is true)</md-option>
                                                            </md-select>
                                                        </md-input-container>
                                                        <span style="color:red;" ng-show="isEmptyCompositeType(compositeType)">Empty composite type</span>
                                                    </div>
                                                </td>
                                                <td class="col-md-1" align="center">
                                                    <span ng-show="compositeType == 'IFTHEN'">IF</span>
                                                    <span ng-show="compositeType == 'FORALL'">FORALL</span>
                                                    <span ng-show="compositeType == 'EXIST'">EXIST</span>
                                                </td>
                                                <td ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-7 drop-zone" align="center" style="vertical-align:middle" data-drop="true" ng-model='constraints' jqyoui-droppable="{multiple:true}" data-jqyoui-options>
                                                    <span style="color:red;" ng-show="constraints.length < 2">Drop two more constraints here!</span>
                                                    <li ng-repeat="c in constraints" ng-show="constraints.length > 0" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="constraints" jqyoui-draggable="{animate:true}">{{c.description}}</li>
                                                </td>
                                                <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-3 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
                                                    <span style="color:red;" ng-hide="firstConstraint">Drop the first constraint here!</span>
                                                    <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
                                                </td>
                                                <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" align="center">
                                                    <span ng-show="compositeType == 'AND'">AND</span>
                                                    <span ng-show="compositeType == 'OR'">OR</span>
                                                    <span ng-show="compositeType == 'XOR'">XOR</span>
                                                    <span ng-show="compositeType == 'IFTHEN'">THEN</span>
                                                </td>
                                                <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-3 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
                                                    <span style="color:red;" ng-hide="secondConstraint">Drop the second constraint here!</span>
                                                    <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
                                                </td>
                                                <td class="col-md-1" align="center">
                                                    <button class="btn btn-raised btn-warning btn-xxs" ng-click="initComplexPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                    <button class="btn btn-raised btn-primary btn-xxs" ng-click="addComplexPredicate()" ng-disabled="erorrForComplexPredicate(compositeType, firstConstraint, secondConstraint, null, null, constraints)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </md-content>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div ng-show="dialogStep === 2">
                        <form novalidate ng-cloak>
                            <div class="col-md-12">
                                <div class="panel panel-primary">
                                    <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                        <table st-table="displayedCP" st-safe-src="tempPredicates" class="table table-striped table-bordered">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-1"></th>
                                                <th class="col-md-11">Description</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="c in displayedCP">
                                                <td class="col-md-1" align="center">
                                                    <md-checkbox ng-checked="c.selected"  ng-click="selectPredicate(c);" aria-label="Select Constraint for Predicate" style="margin: 10px;"/>
                                                </td>
                                                <td class="col-md-11">
                                                    <p ng-bind="::c.description" ng-if="!c.selected" />
                                                    <div layout="row" ng-if="c.selected">
                                                        <md-input-container flex="50" class="normal">
                                                            <p ng-bind="::c.description" />
                                                        </md-input-container>
                                                        <md-input-container flex="25" class="normal" style="margin: 18px;">
                                                            <label>True Usage</label>
                                                            <md-select placeholder="Select TRUE Usage" ng-model="existingPredicate.trueUsage" ng-change="setChanged()">
                                                                <md-option ng-repeat="usage in config.conditionalUsage" ng-value="usage">
                                                                    {{usage}}
                                                                </md-option>
                                                            </md-select>
                                                        </md-input-container>
                                                        <md-input-container flex="25" class="normal" style="margin: 18px;">
                                                            <label>False Usage</label>
                                                            <md-select placeholder="Select FALSE Usage" ng-model="existingPredicate.falseUsage" ng-change="setChanged()">
                                                                <md-option ng-repeat="usage in config.conditionalUsage" ng-value="usage">
                                                                    {{usage}}
                                                                </md-option>
                                                            </md-select>
                                                        </md-input-container>
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">
                <md-button ng-show="(dialogStep === 1 && existingPredicate) || dialogStep === 2" class="btn btn-raised btn-primary btn-sm" ng-click="goBack()"><span><i class="fa fa-arrow-left fa-fw"></i>Back</span></md-button>
                <md-button ng-show="dialogStep === 0" class="btn btn-raised btn-primary btn-sm" ng-click="goNext()"><span><i class="fa fa fa-pencil fa-fw"></i>Recreate Predicate</span></md-button>
                <md-button ng-show="dialogStep === 1" class="btn btn-raised btn-primary btn-sm" ng-click="goNext()" ng-disabled="!tempPredicates || tempPredicates.length === 0"><span><i class="fa fa fa-arrow-right fa-fw"></i>Next</span></md-button>
                <md-button ng-show="dialogStep === 2 || dialogStep === 0" class="btn btn-raised btn-success btn-sm" ng-click="saveClose()"   ng-disabled="!changed || !existingPredicate || !existingPredicate.trueUsage || !existingPredicate.falseUsage" ><span><i class="fa fa-floppy-o fa-fw"></i>Save</span></md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="segment_tree_CoCon_item.html">
    <tr style="width:100%">
        <td ng-if="data.folderClass">
            <div ng-if="data.type === 'segment'">
                <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
            </div>
            <div ng-if="data.type === 'field' || data.type === 'component'">
                <div ng-if="data.child.components &&  data.child.components.length > 0">
                    <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="!data.child.components ||  data.child.components.length == 0">
                    <i class="fa fa-check" />
                </div>
            </div>
        </td>
        <td ng-if="!data.folderClass">
            <div ng-if="data.type === 'segment'">
                <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
            </div>
            <div ng-if="data.type === 'field' || data.type === 'component'">
                <div ng-if="data.child.components &&  data.child.components.length > 0">
                    <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="!data.child.components ||  data.child.components.length == 0">
                    <i class="fa fa-check" />
                </div>
            </div>
        </td>
        <td>
            <div ng-if="data.type === 'segment'">
                <div>
                    <span class="label label-segment label-icon">S</span>
                    <span>&nbsp;{{::data.name}}</span>
                </div>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.fields" ng-include="'segment_tree_CoCon_item.html'"></div>
                    </table>
                </div>
            </div>
            <div ng-if="data.type === 'field'">
                <div ng-if="!data.child.components || data.child.components.length == 0" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true}">
                    <span class="label label-field label-icon">F</span>
                    <span>&nbsp;{{::data.position}}. &nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}] {{::data.name}}</span>
                </div>
                <div ng-if="data.child.components.length > 0">
                    <span class="label label-field label-icon">F</span>
                    <span>&nbsp;{{::data.position}}. &nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}] {{::data.name}}</span>
                </div>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.child.components" ng-include="'segment_tree_CoCon_item.html'"></div>
                    </table>
                </div>
            </div>
            <div ng-if="data.type === 'component'">
                <div ng-if="!data.child.components || data.child.components.length == 0" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true}">
                    <span class="label label-component label-icon">C</span>
                    <span>&nbsp;{{::data.position}}. &nbsp;[{{::data.usage}}] {{::data.name}}</span>
                </div>
                <div ng-if="data.child.components.length > 0">
                    <span class="label label-component label-icon">C</span>
                    <span>&nbsp;{{::data.position}}. &nbsp;[{{::data.usage}}] {{::data.name}}</span>
                </div>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.child.components" ng-include="'segment_tree_CoCon_item.html'"></div>
                    </table>
                </div>
            </div>
        </td>
    </tr>
</script>
<script type="text/ng-template" id="ConformanceStatementDatatypeCtrl.html">
    <md-dialog aria-label="Conformance Statements for Datatype" style="width: 90%">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2>Conformance Statements</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="constraint-dialog">
                    <form novalidate ng-cloak>
                        <div class="col-md-4">
                            <div class="panel panel-primary">
                                <div class="panel-heading">Selected Context Tree</div>
                                <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                    <table class="table table-striped">
                                        <tbody ng-repeat="data in treeDataForContext" ng-include="'context_tree_item.html'">
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-8">
                            <div class="panel panel-primary">
                                <div class="panel-heading">Conformance Statements of {{selectedDatatype.name}}</div>
                                <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                    <table st-table="displayedCS" st-safe-src="selectedDatatype.conformanceStatements" class="table table-striped table-bordered">
                                        <thead>
                                        <tr class="tbl-header">
                                            <th ng-show="constraintType === 'Complex'" class="col-md-1" style="width: 4.1667%">Draggable</th>
                                            <th st-sort="constraintId" class="col-md-2">ID</th>
                                            <th class="col-md-8">Description (
                                                <input type="checkbox" ng-model="viewAssertion"> view assertion )
                                            </th>
                                            <th class="col-md-1"></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="c in displayedCS">
                                            <td ng-show="constraintType === 'Complex'" class="col-md-1" align="center" style="width: 4.1667%">
                                                <i ng-show="c.assertion" class="glyphicon glyphicon-move cursorMove" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="c" jqyoui-draggable="{placeholder:'keep',animate:true}"></i>
                                            </td>
                                            <td class="col-md-2">
                                                <div layout="row">
                                                    <md-input-container flex="100" class="normal">
                                                        <input ng-model="c.constraintId"
                                                               ng-change="setChanged()"
                                                               ng-class="{ 'has-error' : isEmptyConstraintID(c)}"
                                                               type="text"/>
                                                    </md-input-container>
                                                </div>
                                                <span style="color:red;" ng-show="isEmptyConstraintID(c)">ID Empty</span>
                                            </td>
                                            <td class="col-md-8">
                                                <div layout="row">
                                                    <md-input-container flex="100" class="normal">
                                                        <input ng-model="c.description" ng-change="setChanged()" type="text" disabled />
                                                    </md-input-container>
                                                </div>
                                                <div layout="row">
                                                    <md-input-container flex="100" class="normal" ng-show="viewAssertion">
                                                        <input ng-model="c.assertion" ng-change="setChanged()" type="text" disabled />
                                                    </md-input-container>
                                                </div>
                                            </td>
                                            <td class="col-md-1" align="center">
                                                <button class="btn btn-raised btn-danger btn-xxs" ng-click="deleteConformanceStatement(c)"><span><i class="fa fa-trash fa-fw"/></span></button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12" style="margin-top: 10px">
                            <div ng-cloak>
                                <md-content>
                                    <md-nav-bar
                                            md-selected-nav-item="constraintType"
                                            nav-bar-aria-label="navigation links">
                                        <md-nav-item md-nav-click="constraintType = 'Free'" name="Free">
                                            Add new Free-Text Conf.Statement
                                        </md-nav-item>
                                        <md-nav-item md-nav-click="constraintType = 'Plain'" name="Plain">
                                            Add New Plain Conf.Statement
                                        </md-nav-item>
                                        <md-nav-item md-nav-click="constraintType = 'Complex'" name="Complex">
                                            Add New Complex Conf.Statement
                                        </md-nav-item>
                                    </md-nav-bar>


                                    <table class="table table-striped table-bordered" ng-show="constraintType === 'Free'">
                                        <thead>
                                        <tr class="tbl-header">
                                            <th class="col-md-2">ID</th>
                                            <th class="col-md-8">Free-Text (Not supported by validation tool)</th>
                                            <th class="col-md-2"></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td class="col-md-2">
                                                <div layout="row">
                                                    <md-input-container flex="100" class="normal">
                                                        <input ng-model="newConstraint.constraintId"
                                                               ng-class="{ 'form-control-invalid' : isEmptyConstraintID(newConstraint)}"
                                                               type="text"/>
                                                    </md-input-container>
                                                </div>
                                                <span style="color:red;" ng-show="isEmptyConstraintID(newConstraint)">ID Empty</span>
                                            </td>
                                            <td class="col-md-8">
                                                <div layout="row">
                                                    <md-input-container flex="100" class="normal">
                                                        <input ng-model="newConstraint.freeText"
                                                               ng-class="{ 'form-control-invalid' : !newConstraint.freeText || newConstraint.freeText === ''}"
                                                               type="text"/>
                                                    </md-input-container>
                                                </div>
                                                <span style="color:red;" ng-show="!newConstraint.freeText || newConstraint.freeText === ''">ID Empty</span>
                                            </td>
                                            <td class="col-md-2" align="center">
                                                <button class="btn btn-raised btn-warning btn-xxs" ng-click="initConformanceStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                <button class="btn btn-raised btn-primary btn-xxs" ng-click="addFreeTextConformanceStatement();" ng-disabled="isEmptyConstraintID(newConstraint) || !newConstraint.freeText || newConstraint.freeText === ''"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>

                                    <table class="table table-striped table-bordered" ng-show="constraintType === 'Plain'">
                                        <thead>
                                        <tr class="tbl-header">
                                            <th class="col-md-2">ID</th>
                                            <th class="col-md-2">Node</th>
                                            <th class="col-md-2">Verb</th>
                                            <th class="col-md-2">Constraint Pattern</th>
                                            <th class="col-md-2">Value</th>
                                            <th class="col-md-2"></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td class="col-md-2">
                                                <div layout="row">
                                                    <md-input-container flex="100" class="normal">
                                                        <input ng-model="newConstraint.constraintId"
                                                               ng-class="{ 'form-control-invalid' : isEmptyConstraintID(newConstraint)}"
                                                               type="text"/>
                                                    </md-input-container>
                                                </div>
                                                <span style="color:red;" ng-show="isEmptyConstraintID(newConstraint)">ID Empty</span>
                                            </td>
                                            <td class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="firstNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterFirstNodeDrop'}">
                                                <div ng-show="newConstraint.location_1">
                                                        <span>
                                                            <span ng-repeat="info in newConstraint.pathInfoSet_1">
                                                                <span ng-show="$index == 1 && info.isInstanceNumberEditable">
                                                                    {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]
                                                                </span>
                                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">
                                                                    {{info.locationName}}[{{info.instanceNumber}}]
                                                                </span>
                                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">
                                                                    .{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]
                                                                </span>
                                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                                                    .{{info.locationName}}[{{info.instanceNumber}}]
                                                                </span>
                                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                                                    ({{info.nodeName}})
                                                                </span>
                                                            </span>
                                                        </span>
                                                </div>
                                                <div ng-show="!newConstraint.location_1">
                                                    <span style="color:red;">Drop the node!</span>
                                                </div>
                                            </td>
                                            <td class="col-md-2">
                                                <md-select placeholder="Select verb" class="inside-table"
                                                           ng-class="{'form-control-invalid' : isEmptyConstraintVerb(newConstraint)}"
                                                           ng-model="newConstraint.verb">
                                                    <md-option ng-repeat="constraintVerb in config.constraintVerbs | orderBy:'toString()'" ng-value="constraintVerb">
                                                        {{constraintVerb}}
                                                    </md-option>
                                                </md-select>
                                                <span style="color:red;" ng-show="isEmptyConstraintVerb(newConstraint)">Empty verb</span>
                                            </td>
                                            <td class="col-md-2">
                                                <md-select placeholder="Select verb" class="inside-table"
                                                           ng-class="{'form-control-invalid' : isEmptyConstraintPattern(newConstraint)}"
                                                           ng-model="newConstraint.contraintType">
                                                    <md-option ng-repeat="contraintType in config.constraintTypes | orderBy:'toString()'" ng-value="contraintType">
                                                        {{contraintType}}
                                                    </md-option>
                                                </md-select>
                                                <span style="color:red;" ng-show="isEmptyConstraintPattern(newConstraint)">Empty constraint pattern</span>
                                            </td>
                                            <td class="col-md-2" ng-hide="newConstraint.contraintType == 'identical to another node' ||
                                                                                newConstraint.contraintType == 'equal to another node' ||
                                                                                newConstraint.contraintType == 'not-equal to another node' ||
                                                                                newConstraint.contraintType == 'greater than another node' ||
                                                                                newConstraint.contraintType == 'equal to or greater than another node' ||
                                                                                newConstraint.contraintType == 'less than another node' ||
                                                                                newConstraint.contraintType == 'equal to or less than another node'">
                                                    <span ng-show="newConstraint.contraintType == 'a literal value' ||
                                                                    newConstraint.contraintType == 'equal to' ||
                                                                    newConstraint.contraintType == 'not-equal to' ||
                                                                    newConstraint.contraintType == 'greater than' ||
                                                                    newConstraint.contraintType == 'equal to or greater than' ||
                                                                    newConstraint.contraintType == 'less than' ||
                                                                    newConstraint.contraintType == 'equal to or less than'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       ng-if="newConstraint.contraintType === 'a literal value'"
                                                                       type="text"/>
                                                                <input ng-model="newConstraint.value"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       ng-if="newConstraint.contraintType !== 'a literal value'"
                                                                       step="any" ng-pattern="/^1234$/"
                                                                       type="number" />
                                                                <md-checkbox ng-model="newConstraint.ignoreCase" ng-if="newConstraint.contraintType == 'a literal value'">
                                                                    Case Sensitive?
                                                                </md-checkbox>
                                                            </md-input-container>
                                                            <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty value</span>
                                                        </div>
                                                    </span>

                                                <span ng-show="newConstraint.contraintType == 'one of list values'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value"
                                                                       placeholder="Comma-Separated Values(CSV)"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       type="text"/>
                                                            </md-input-container>
                                                        </div>
                                                        <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty list value</span>
                                                    </span>

                                                <span ng-show="newConstraint.contraintType == 'formatted value'">
                                                        <md-select placeholder="Select format" class="inside-table"
                                                                   ng-class="{'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                   ng-model="newConstraint.value">
                                                            <md-option ng-repeat="predefinedFormat in config.predefinedFormats | orderBy:'toString()'" ng-value="predefinedFormat">
                                                                {{predefinedFormat}}
                                                            </md-option>
                                                        </md-select>
                                                        <div ng-show="newConstraint.value === 'Regular expression'" layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value2"
                                                                       placeholder="Regular expression"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue2(newConstraint)}"
                                                                       type="text"/>
                                                            </md-input-container>
                                                        </div>
                                                        <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty format</span>
                                                        <span style="color:red;" ng-show="newConstraint.value === 'Regular expression' && isEmptyConstraintValue2(newConstraint)">Empty regular expression</span>
                                                    </span>

                                                <span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <md-select placeholder="Select ValueSet" class="inside-table"
                                                                           ng-class="{'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                           ng-model="newConstraint.valueSetId">
                                                                    <md-option ng-repeat="table in tables track by table.id|orderBy:'+bindingIdentifier'" ng-value="getUpdatedBindingIdentifier(table)">
                                                                        {{::table.bindingIdentifier}}
                                                                    </md-option>
                                                                </md-select>
                                                            </md-input-container>
                                                        </div>
                                                        <span style="color:red;" ng-show="isEmptyConstraintValueSet(newConstraint)">Empty valueset</span>
                                                        <br/>
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <md-select placeholder="Select BindingStrength" class="inside-table"
                                                                           ng-model="newConstraint.bindingStrength">
                                                                    <md-option value="R">R</md-option>
                                                                    <md-option value="S">S</md-option>
                                                                    <md-option value="U">U</md-option>
                                                                </md-select>
                                                            </md-input-container>
                                                        </div>
                                                        <br/>
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.bindingLocation" type="text"/>
                                                            </md-input-container>
                                                        </div>
                                                    </span>
                                            </td>

                                            <td class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="secondNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterSecondNodeDrop'}"
                                                ng-show="newConstraint.contraintType == 'identical to another node' ||
                                                            newConstraint.contraintType == 'equal to another node' ||
                                                            newConstraint.contraintType == 'not-equal to another node' ||
                                                            newConstraint.contraintType == 'greater than another node' ||
                                                            newConstraint.contraintType == 'equal to or greater than another node' ||
                                                            newConstraint.contraintType == 'less than another node' ||
                                                            newConstraint.contraintType == 'equal to or less than another node'">
                                                <div ng-show="newConstraint.location_2">
                                                        <span>
                                                            <span ng-repeat="info in newConstraint.pathInfoSet_2">
                                                                <span ng-show="$index == 1 && info.isInstanceNumberEditable">
                                                                    {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                                                </span>
                                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">
                                                                    {{info.locationName}}[{{info.instanceNumber}}]
                                                                </span>
                                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">
                                                                    .{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                                                </span>
                                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                                                    .{{info.locationName}}[{{info.instanceNumber}}]
                                                                </span>
                                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                                                    ({{info.nodeName}})
                                                                </span>
                                                            </span>
                                                        </span>
                                                </div>
                                                <div ng-show="!newConstraint.location_2">
                                                    <span style="color:red;">Drop the node!</span>
                                                </div>
                                            </td>
                                            <td class="col-md-2" align="center">
                                                <button class="btn btn-raised btn-warning btn-xxs" ng-click="initConformanceStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                <button class="btn btn-raised btn-primary btn-xxs" ng-click="addConformanceStatement();" ng-disabled="erorrForConfStatement(newConstraint, targetPlainId, 'message', selectedNode)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>

                                    <table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
                                        <thead>
                                        <tr class="tbl-header">
                                            <th class="col-md-2">ID</th>
                                            <th class="col-md-2">Complex Type</th>
                                            <th class="col-md-1" style="width: 4.1667%"></th>
                                            <th ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5">Constraints</th>
                                            <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">First Constraint</th>
                                            <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" style="width: 4.1667%"></th>
                                            <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">Second Constraint</th>
                                            <th class="col-md-2"></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td class="col-md-2">
                                                <input class="form-control" ng-class="{'form-control-invalid': !newComplexConstraintId || newComplexConstraintId == ''}" ng-model="newComplexConstraintId" type="text" />
                                                <span style="color:red;" ng-show="!newComplexConstraintId || newComplexConstraintId == ''">ID Empty</span>
                                            </td>
                                            <td class="col-md-2">
                                                <div layout="row">
                                                    <md-input-container flex="100" class="normal">
                                                        <md-select placeholder="Select Composite Type" class="inside-table" ng-model="compositeType">
                                                            <md-option value="AND">AND</md-option>
                                                            <md-option value="OR">OR</md-option>
                                                            <md-option value="XOR">XOR</md-option>
                                                            <md-option value="IFTHEN">IFTHEN(IMPLY)</md-option>
                                                            <md-option value="FORALL">FORALL(True, if all assertions are true)</md-option>
                                                            <md-option value="EXIST">EXIST(True, if one of assertions is true)</md-option>
                                                        </md-select>
                                                    </md-input-container>
                                                </div>
                                                <span style="color:red;" ng-show="isEmptyCompositeType(compositeType)">Empty composite type</span>
                                            </td>
                                            <td class="col-md-1" align="center" style="width: 4.1667%">
                                                <span ng-show="compositeType == 'IFTHEN'">IF</span>
                                                <span ng-show="compositeType == 'FORALL'">FORALL</span>
                                                <span ng-show="compositeType == 'EXIST'">EXIST</span>
                                            </td>
                                            <td ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5 drop-zone" align="center" style="vertical-align:middle" data-drop="true" ng-model='constraints' jqyoui-droppable="{multiple:true}" data-jqyoui-options>
                                                <span style="color:red;" ng-show="constraints.length < 2">Drop two more constraints here!</span>
                                                <li ng-repeat="c in constraints" ng-show="constraints.length > 0" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="constraints" jqyoui-draggable="{animate:true}">{{c.description}}</li>
                                            </td>
                                            <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
                                                <span style="color:red;" ng-hide="firstConstraint">Drop the first constraint here!</span>
                                                <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
                                            </td>
                                            <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" align="center" style="width: 4.1667%">
                                                <span ng-show="compositeType == 'AND'">AND</span>
                                                <span ng-show="compositeType == 'OR'">OR</span>
                                                <span ng-show="compositeType == 'XOR'">XOR</span>
                                                <span ng-show="compositeType == 'IFTHEN'">THEN</span>
                                            </td>
                                            <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
                                                <span style="color:red;" ng-hide="secondConstraint">Drop the second constraint here!</span>
                                                <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
                                            </td>
                                            <td class="col-md-1" align="center">
                                                <button class="btn btn-raised btn-warning btn-xxs" ng-click="initComplexStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                <button class="btn btn-raised btn-primary btn-xxs" ng-click="addComplexConformanceStatement()" ng-disabled="erorrForComplexConfStatement(newComplexConstraintId, targetComplexId, compositeType, firstConstraint, secondConstraint, constraints)">
                                                    <span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span>
                                                </button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </md-content>
                            </div>
                        </div>
                    </form>
                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">
                <md-button class="btn btn-raised btn-success btn-sm" ng-click="save()" ng-disabled="!changed" ><span><i class="fa fa-floppy-o fa-fw"></i>Save</span></md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="PredicateDatatypeCtrl.html">
    <md-dialog aria-label="Conditional Predicate for Datatype" style="{{getDialogStyle()}}">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2 ng-if="dialogStep === 0">Predicate Summary</h2>
                    <h2 ng-if="dialogStep === 1">(1/2) Create Constraints</h2>
                    <h2 ng-if="dialogStep === 2">(2/2) Select Predicate and Set True/False Usage</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="constraint-dialog">
                    <div ng-show="dialogStep === 0">
                        <form novalidate ng-cloak>
                            <div class="col-md-6">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Selected Node Info</div>
                                    <div class="panel-body" style="min-height:350px; max-height:350px;overflow-y: scroll;">
                                        <div layout="row" layout-align="start center" style="margin-top: 40px">
                                            <md-input-container flex="100">
                                                <label style="font-weight: bold;color:black">Datatype Label Name</label>
                                                <input  style="font-weight: bold;color:black" ng-model="selectedDatatype.label" disabled>
                                            </md-input-container>
                                        </div>
                                        <div layout="row" layout-align="start center">
                                            <md-input-container flex="100">
                                                <label style="font-weight: bold;color:black">Position</label>
                                                <input style="font-weight: bold;color:black" ng-model="selectedNode.position" disabled>
                                            </md-input-container>
                                        </div>
                                        <div layout="row" layout-align="start center">
                                            <md-input-container flex="100">
                                                <label style="font-weight: bold;color:black">Description</label>
                                                <input style="font-weight: bold;color:black"  ng-model="selectedNode.name" disabled>
                                            </md-input-container>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Existing Predicate</div>
                                    <div class="panel-body" style="min-height:350px; max-height:350px;overflow-y: scroll;">
                                        <span ng-if="!existingPredicate" style="color:red;margin-top: 40px;">No Predicate. Please go to next step and make a new Predicate.</span>
                                        <div ng-if="existingPredicate">
                                            <div layout="row" layout-align="start center" style="margin-top: 40px">
                                                <md-input-container flex="100">
                                                    <label>Predicate Description</label>
                                                    <input ng-model="existingPredicate.description" disabled>
                                                </md-input-container>
                                            </div>
                                            <div layout="row" layout-align="start center">
                                                <md-input-container flex="100">
                                                    <label>Predicate Assertion</label>
                                                    <input ng-model="existingPredicate.assertion" disabled>
                                                </md-input-container>
                                            </div>
                                            <div layout="row" layout-align="start center">
                                                <md-input-container flex="50">
                                                    <label>True Usage</label>
                                                    <md-select placeholder="Select TRUE Usage" ng-model="existingPredicate.trueUsage" ng-change="setChanged()">
                                                        <md-option ng-repeat="usage in config.conditionalUsage" ng-value="usage">
                                                            {{usage}}
                                                        </md-option>
                                                    </md-select>
                                                </md-input-container>
                                                <md-input-container flex="50">
                                                    <label>False Usage</label>
                                                    <md-select placeholder="Select FALSE Usage" ng-model="existingPredicate.falseUsage" ng-change="setChanged()">
                                                        <md-option ng-repeat="usage in config.conditionalUsage" ng-value="usage">
                                                            {{usage}}
                                                        </md-option>
                                                    </md-select>
                                                </md-input-container>
                                            </div>
                                            <div layout="row" layout-sm="column" layout-align="end center" layout-wrap ng-show="existingPredicate">
                                                <md-button class="md-raised md-warn" ng-click="deletePredicate()">
                                                    <i class="fa fa-trash fa-fw"/> Delete Predicate
                                                </md-button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div ng-show="dialogStep === 1">
                        <form novalidate ng-cloak>
                            <div class="col-md-4">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Selected Context Tree</div>
                                    <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                        <table class="table table-striped">
                                            <tbody ng-repeat="data in treeDataForContext" ng-include="'context_tree_item.html'">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Temporary Constraints</div>
                                    <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                        <table st-table="displayedCP" st-safe-src="tempPredicates" class="table table-striped table-bordered">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-1" ng-show="constraintType === 'Complex'">Draggable</th>
                                                <th class="col-md-10">Description (<input type="checkbox" ng-model="viewAssertion"/> view assertion )</th>
                                                <th class="col-md-1"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="c in displayedCP">
                                                <td class="col-md-1" align="center" ng-show="constraintType === 'Complex'">
                                                    <i class="glyphicon glyphicon-move cursorMove" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="c" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingPredicate({nodeData: data})'}"></i>
                                                </td>
                                                <td class="col-md-10">
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal">
                                                            <input ng-model="c.description" type="text" disabled />
                                                        </md-input-container>
                                                    </div>
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal" ng-show="viewAssertion">
                                                            <input ng-model="c.assertion" type="text" disabled />
                                                        </md-input-container>
                                                    </div>
                                                </td>
                                                <td class="col-md-1" align="center">
                                                    <button class="btn btn-raised btn-danger btn-xxs" ng-click="deleteTempPredicate(c)"><span><i class="fa fa-trash fa-fw"></i></span></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-12" style="margin-top: 10px">
                                <div ng-cloak>
                                    <md-content>
                                        <md-nav-bar md-selected-nav-item="constraintType" nav-bar-aria-label="navigation links">
                                            <md-nav-item md-nav-click="constraintType = 'Free'" name="Free">
                                                Add new Free-Text Constraint
                                            </md-nav-item>
                                            <md-nav-item md-nav-click="constraintType = 'Plain'" name="Plain">
                                                Add New Plain Constraint
                                            </md-nav-item>
                                            <md-nav-item md-nav-click="constraintType = 'Complex'" name="Complex">
                                                Add New Complex Constraint
                                            </md-nav-item>
                                        </md-nav-bar>

                                        <table class="table table-striped table-bordered" ng-show="constraintType==='Free'">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-10">Free-Text (Not supported by validation tool)</th>
                                                <th class="col-md-2"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td class="col-md-10">
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal">
                                                            <input ng-model="newConstraint.freeText"
                                                                   type="text"/>
                                                        </md-input-container>
                                                        <span style="color:red;" ng-show="!newConstraint.freeText || newConstraint.freeText === ''">Text required</span>
                                                    </div>
                                                </td>
                                                <td class="col-md-2" align="center">
                                                    <button class="btn btn-raised btn-warning btn-xxs" ng-click="initPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                    <button class="btn btn-raised btn-primary btn-xxs" ng-click="addFreeTextPredicate();" ng-disabled="!newConstraint.freeText || newConstraint.freeText === ''"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>

                                        <table class="table table-striped table-bordered" ng-show="constraintType==='Plain'">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-2">If</th>
                                                <th class="col-md-2">Node</th>
                                                <th class="col-md-2">Verb</th>
                                                <th class="col-md-2">Constraint Pattern</th>
                                                <th class="col-md-2">Value</th>
                                                <th class="col-md-2"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td class="col-md-2">If</td>
                                                <td class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="firstNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterFirstNodeDrop'}">
                                                    <div ng-show="newConstraint.location_1">
                                                        <span>
                                                            <span ng-repeat="info in newConstraint.pathInfoSet_1">
                                                                <span ng-show="$index===1 && info.isInstanceNumberEditable">{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]</span>
                                                                <span ng-show="$index===1 && !info.isInstanceNumberEditable">{{info.locationName}}[{{info.instanceNumber}}]</span>
                                                                <span ng-show="$index >1 && info.isInstanceNumberEditable">.{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text" />]</span>
                                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">.{{info.locationName}}[{{info.instanceNumber}}]</span>
                                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">({{info.nodeName}})</span>
                                                            </span>
                                                        </span>
                                                    </div>
                                                    <div ng-show="!newConstraint.location_1">
                                                        <span style="color:red;">Drop the node!</span>
                                                    </div>
                                                </td>
                                                <td class="col-md-2">
                                                    <md-select placeholder="Select verb" class="inside-table"
                                                               ng-class="{'form-control-invalid' : isEmptyConstraintVerb(newConstraint)}"
                                                               ng-model="newConstraint.verb">
                                                        <md-option ng-repeat="constraintVerb in config.conditionalConstraintVerbs | orderBy:'toString()'" ng-value="constraintVerb">
                                                            {{constraintVerb}}
                                                        </md-option>
                                                    </md-select>
                                                    <span style="color:red;" ng-show="isEmptyConstraintVerb(newConstraint)">Empty verb</span>
                                                </td>
                                                <td class="col-md-2">
                                                    <md-select placeholder="Select verb" class="inside-table"
                                                               ng-class="{'form-control-invalid' : isEmptyConstraintPattern(newConstraint)}"
                                                               ng-model="newConstraint.contraintType">
                                                        <md-option ng-repeat="contraintType in config.constraintTypes | orderBy:'toString()'" ng-value="contraintType">
                                                            {{contraintType}}
                                                        </md-option>
                                                    </md-select>
                                                    <span style="color:red;" ng-show="isEmptyConstraintPattern(newConstraint)">Empty constraint pattern</span>
                                                </td>
                                                <td class="col-md-2" ng-hide="newConstraint.contraintType == 'identical to another node' ||
                                                                              newConstraint.contraintType == 'equal to another node' ||
                                                                              newConstraint.contraintType == 'not-equal to another node' ||
                                                                              newConstraint.contraintType == 'greater than another node' ||
                                                                              newConstraint.contraintType == 'equal to or greater than another node' ||
                                                                              newConstraint.contraintType == 'less than another node' ||
                                                                              newConstraint.contraintType == 'equal to or less than another node'">
                                                    <span ng-show="newConstraint.contraintType == 'a literal value' ||
                                                                   newConstraint.contraintType == 'equal to' ||
                                                                   newConstraint.contraintType == 'not-equal to' ||
                                                                   newConstraint.contraintType == 'greater than' ||
                                                                   newConstraint.contraintType == 'equal to or greater than' ||
                                                                   newConstraint.contraintType == 'less than' ||
                                                                   newConstraint.contraintType == 'equal to or less than'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       ng-if="newConstraint.contraintType === 'a literal value'"
                                                                       type="text"/>
                                                                <input ng-model="newConstraint.value"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       ng-if="newConstraint.contraintType !== 'a literal value'"
                                                                       step="any" ng-pattern="/^1234$/"
                                                                       type="number" />
                                                                <md-checkbox ng-model="newConstraint.ignoreCase" ng-if="newConstraint.contraintType == 'a literal value'">
                                                                    Case Sensitive?
                                                                </md-checkbox>
                                                            </md-input-container>
                                                            <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty value</span>
                                                        </div>
                                                    </span>

                                                    <span ng-show="newConstraint.contraintType == 'one of list values'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value"
                                                                       placeholder="Comma-Separated Values(CSV)"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                       type="text"/>
                                                            </md-input-container>
                                                            <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty list value</span>
                                                        </div>
                                                    </span>

                                                    <span ng-show="newConstraint.contraintType == 'formatted value'">
                                                        <md-select placeholder="Select format" class="inside-table"
                                                                   ng-class="{'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                   ng-model="newConstraint.value">
                                                            <md-option ng-repeat="predefinedFormat in config.predefinedFormats | orderBy:'toString()'" ng-value="predefinedFormat">
                                                                {{predefinedFormat}}
                                                            </md-option>
                                                        </md-select>
                                                        <div ng-show="newConstraint.value === 'Regular expression'" layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.value2"
                                                                       placeholder="Regular expression"
                                                                       ng-class="{ 'form-control-invalid' : isEmptyConstraintValue2(newConstraint)}"
                                                                       type="text"/>
                                                            </md-input-container>
                                                        </div>
                                                        <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty format</span>
                                                        <span style="color:red;" ng-show="newConstraint.value === 'Regular expression' && isEmptyConstraintValue2(newConstraint)">Empty regular expression</span>
                                                    </span>

                                                    <span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <md-select placeholder="Select ValueSet" class="inside-table"
                                                                           ng-class="{'form-control-invalid' : isEmptyConstraintValue(newConstraint)}"
                                                                           ng-model="newConstraint.valueSetId">
                                                                    <md-option ng-repeat="table in tables track by table.id|orderBy:'+bindingIdentifier'" ng-value="getUpdatedBindingIdentifier(table)">
                                                                        {{::table.bindingIdentifier}}
                                                                    </md-option>
                                                                </md-select>
                                                            </md-input-container>
                                                        </div>
                                                        <span style="color:red;" ng-show="isEmptyConstraintValueSet(newConstraint)">Empty valueset</span>
                                                        <br/>
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <md-select placeholder="Select BindingStrength" class="inside-table"
                                                                           ng-model="newConstraint.bindingStrength">
                                                                    <md-option value="R">R</md-option>
                                                                    <md-option value="S">S</md-option>
                                                                    <md-option value="U">U</md-option>
                                                                </md-select>
                                                            </md-input-container>
                                                        </div>
                                                        <br/>
                                                        <div layout="row">
                                                            <md-input-container flex="100" class="normal">
                                                                <input ng-model="newConstraint.bindingLocation" type="text"/>
                                                            </md-input-container>
                                                        </div>
                                                    </span>
                                                </td>

                                                <td class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="secondNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterSecondNodeDrop'}"
                                                    ng-show="newConstraint.contraintType == 'identical to another node' ||
                                                             newConstraint.contraintType == 'equal to another node' ||
                                                             newConstraint.contraintType == 'not-equal to another node' ||
                                                             newConstraint.contraintType == 'greater than another node' ||
                                                             newConstraint.contraintType == 'equal to or greater than another node' ||
                                                             newConstraint.contraintType == 'less than another node' ||
                                                             newConstraint.contraintType == 'equal to or less than another node'">
                                                    <div ng-show="newConstraint.location_2">
                                                        <span>
                                                            <span ng-repeat="info in newConstraint.pathInfoSet_2">
                                                                <span ng-show="$index == 1 && info.isInstanceNumberEditable">{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]</span>
                                                                <span ng-show="$index == 1 && !info.isInstanceNumberEditable">{{info.locationName}}[{{info.instanceNumber}}]</span>
                                                                <span ng-show="$index > 1 && info.isInstanceNumberEditable">.{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]</span>
                                                                <span ng-show="$index > 1 && !info.isInstanceNumberEditable">.{{info.locationName}}[{{info.instanceNumber}}]</span>
                                                                <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">({{info.nodeName}})</span>
                                                            </span>
                                                        </span>
                                                    </div>
                                                    <div ng-show="!newConstraint.location_2">
                                                        <span style="color:red;">Drop the node!</span>
                                                    </div>
                                                </td>
                                                <td class="col-md-2" align="center">
                                                    <button class="btn btn-raised btn-warning btn-xxs" ng-click="initPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                    <button class="btn btn-raised btn-primary btn-xxs" ng-click="addPredicate();" ng-disabled="erorrForPredicate(newConstraint, 'message', selectedNode)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>

                                        <table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-2">Complex Type</th>
                                                <th class="col-md-1"></th>
                                                <th ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-7">Constraints</th>
                                                <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-3">First Constraint</th>
                                                <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1"></th>
                                                <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-3">Second Constraint</th>
                                                <th class="col-md-2"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td class="col-md-2">
                                                    <div layout="row">
                                                        <md-input-container flex="100" class="normal">
                                                            <md-select placeholder="Select Composite Type" class="inside-table" ng-model="compositeType">
                                                                <md-option value="AND">AND</md-option>
                                                                <md-option value="OR">OR</md-option>
                                                                <md-option value="XOR">XOR</md-option>
                                                                <!--<md-option value="IFTHEN">IFTHEN(IMPLY)</md-option>-->
                                                                <md-option value="FORALL">FORALL(True, if all assertions are true)</md-option>
                                                                <md-option value="EXIST">EXIST(True, if one of assertions is true)</md-option>
                                                            </md-select>
                                                        </md-input-container>
                                                        <span style="color:red;" ng-show="isEmptyCompositeType(compositeType)">Empty composite type</span>
                                                    </div>
                                                </td>
                                                <td class="col-md-1" align="center">
                                                    <span ng-show="compositeType == 'IFTHEN'">IF</span>
                                                    <span ng-show="compositeType == 'FORALL'">FORALL</span>
                                                    <span ng-show="compositeType == 'EXIST'">EXIST</span>
                                                </td>
                                                <td ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-7 drop-zone" align="center" style="vertical-align:middle" data-drop="true" ng-model='constraints' jqyoui-droppable="{multiple:true}" data-jqyoui-options>
                                                    <span style="color:red;" ng-show="constraints.length < 2">Drop two more constraints here!</span>
                                                    <li ng-repeat="c in constraints" ng-show="constraints.length > 0" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="constraints" jqyoui-draggable="{animate:true}">{{c.description}}</li>
                                                </td>
                                                <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-3 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
                                                    <span style="color:red;" ng-hide="firstConstraint">Drop the first constraint here!</span>
                                                    <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
                                                </td>
                                                <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" align="center">
                                                    <span ng-show="compositeType == 'AND'">AND</span>
                                                    <span ng-show="compositeType == 'OR'">OR</span>
                                                    <span ng-show="compositeType == 'XOR'">XOR</span>
                                                    <span ng-show="compositeType == 'IFTHEN'">THEN</span>
                                                </td>
                                                <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-3 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
                                                    <span style="color:red;" ng-hide="secondConstraint">Drop the second constraint here!</span>
                                                    <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
                                                </td>
                                                <td class="col-md-1" align="center">
                                                    <button class="btn btn-raised btn-warning btn-xxs" ng-click="initComplexPredicate()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                    <button class="btn btn-raised btn-primary btn-xxs" ng-click="addComplexPredicate()" ng-disabled="erorrForComplexPredicate(compositeType, firstConstraint, secondConstraint, null, null, constraints)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </md-content>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div ng-show="dialogStep === 2">
                        <form novalidate ng-cloak>
                            <div class="col-md-12">
                                <div class="panel panel-primary">
                                    <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                        <table st-table="displayedCP" st-safe-src="tempPredicates" class="table table-striped table-bordered">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th class="col-md-1"></th>
                                                <th class="col-md-11">Description</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="c in displayedCP">
                                                <td class="col-md-1" align="center">
                                                    <md-checkbox ng-checked="c.selected"  ng-click="selectPredicate(c);" aria-label="Select Constraint for Predicate" style="margin: 10px;"/>
                                                </td>
                                                <td class="col-md-11">
                                                    <p ng-bind="::c.description" ng-if="!c.selected" />
                                                    <div layout="row" ng-if="c.selected">
                                                        <md-input-container flex="50" class="normal">
                                                            <p ng-bind="::c.description" />
                                                        </md-input-container>
                                                        <md-input-container flex="25" class="normal" style="margin: 18px;">
                                                            <label>True Usage</label>
                                                            <md-select placeholder="Select TRUE Usage" ng-model="existingPredicate.trueUsage" ng-change="setChanged()">
                                                                <md-option ng-repeat="usage in config.conditionalUsage" ng-value="usage">
                                                                    {{usage}}
                                                                </md-option>
                                                            </md-select>
                                                        </md-input-container>
                                                        <md-input-container flex="25" class="normal" style="margin: 18px;">
                                                            <label>False Usage</label>
                                                            <md-select placeholder="Select FALSE Usage" ng-model="existingPredicate.falseUsage" ng-change="setChanged()">
                                                                <md-option ng-repeat="usage in config.conditionalUsage" ng-value="usage">
                                                                    {{usage}}
                                                                </md-option>
                                                            </md-select>
                                                        </md-input-container>
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </md-dialog-content>

            <md-dialog-actions layout="row">
                <md-button ng-show="(dialogStep === 1 && existingPredicate)|| dialogStep === 2" class="btn btn-raised btn-primary btn-sm" ng-click="goBack()"><span><i class="fa fa-arrow-left fa-fw"></i>Back</span></md-button>
                <md-button ng-show="dialogStep === 0" class="btn btn-raised btn-primary btn-sm" ng-click="goNext()"><span><i class="fa fa fa-pencil fa-fw"></i>Recreate Predicate</span></md-button>
                <md-button ng-show="dialogStep === 1" class="btn btn-raised btn-primary btn-sm" ng-click="goNext()" ng-disabled="!tempPredicates || tempPredicates.length === 0"><span><i class="fa fa fa-arrow-right fa-fw"></i>Next</span></md-button>
                <md-button ng-show="dialogStep === 2 || dialogStep === 0" class="btn btn-raised btn-success btn-sm" ng-click="save()"   ng-disabled="!changed || !existingPredicate || !existingPredicate.trueUsage || !existingPredicate.falseUsage" ><span><i class="fa fa-floppy-o fa-fw"></i>Save</span></md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="ConfirmIGDocumentUnshareCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Remove Participant Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p ng-if="shareParticipant.id === getAccountID()">Are you sure you want to be removed from the IG Document:"{{::igdocumentSelected.metaData.title}}"?</p>
        <p ng-if="shareParticipant.id !== getAccountID()">Are you sure you want to remove '{{shareParticipant.fullname}}' from the IG Document:"{{::igdocumentSelected.metaData.title}}"?</p>

        <div class="row" ng-if="error != null">
            <div class="col-md-12">
                <span ng-bind="error" style="color: red;"></span>
            </div>
        </div>
    </di
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-danger btn-sm" ng-disabled="loading" ng-click="delete()"><span><i
                class="fa fa-trash-o fa-fw">&nbsp; </i>Remove</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>

    </div>
    </div>
</script>
<script type="text/ng-template" id="createDatatype.html">
    <md-dialog aria-label="Create Data Type Library">
        <form ng-cloak name="addDT" id="addDT">
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Add Data Types  </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>

                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
            <div class="modal-body">
                <div class="container" style="margin-bottom: 20px;margin-top: 10px;margin-right:10px;">
                    <div class="row" style="padding-top:10px">

                        <div layout="row" layout-align="center start">

                            <div class="panel panel-primary container" flex="50" style="max-width:400px !important; margin-right:5px;">
                                <div class="panel-heading">Source</div>
                                <div class="panel-body container">
                                    <div class="container">
                                        <div style="margin-top: 8px;">
                                            <i class="icon-search"></i>
                                            <input type="search" class="form-control" placeholder="Search Datatypes" ng-model="search.name" style="width:360px" />
                                        </div>
                                    </div>
                                    <div class="container">
                                        <table class="fixed-header table-bordered">
                                            <thead>
                                                <tr class="tbl-header fixed-header" style="color:black !important;font-weight: bold">
                                                    <th class="widthInside">Name</th>
                                                    <th class="widthInside">Versions</th>
                                                    <th class="widthInside"></th>

                                                </tr>
                                            </thead>
                                            <tbody class="fixed-header">
                                                <tr ng-repeat="data in hl7Datatypes| filter:search|orderBy: 'name'">
                                                    <td class="widthInside">
                                                        <span>{{data.name}}</span>
                                                    </td>
                                                    <td class="widthInside">
                                                        <ul>
                                                            <li ng-repeat="version in data.hl7versions">{{version}}</li>
                                                        </ul>
                                                    </td>
                                                    <td class="widthInside">
                                                        <i ng-click="AddDatatype(data)" class="fa fa-plus fa-fw" style="color:blue;cursor:pointer !important"></i>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <div class="panel panel-primary" flex="50" style="max-width:540px !important">
                                <div class="panel-heading">Selected Data Types</div>
                                <div class="panel-body container">
                                    <div class="container" style="margin-top: 8px;">
                                        <i class="icon-search"></i>
                                        <input type="search" class="form-control" placeholder="Search" ng-model="search1.name" style="width:500px" />
                                    </div>
                                    <div class="container">
                                        <table class="fixed-header table-bordered">
                                            <thead>
                                                <tr class="tbl-header fixed-header" style="color:black !important;font-weight: bold">
                                                    <th class="widthInside2">Name</th>
                                                    <th class="widthInside2">Extension</th>
                                                    <th class="widthInside2">Compatible HL7 Version</th>
                                                    <th class="widthInside2">Description
                                                    </th>
                                                    <th class="widthInside2">Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody style="max-height:500px; overflow:scroll; display:block" class="fixed-header">
                                                <tr ng-repeat="data in addedDatatypes| filter:search1">
                                                    <td class="widthInside2">
                                                        <span>{{data.name}}</span>
                                                    </td>
                                                    <td class="widthInside2">
                                                        <input type="text" class="form-control" ng-model="data.ext" required></input>
                                                        <span style="color:red;" ng-if="existingExtension(data,addedDatatypes)">Extension already exists</span>
                                                    </td>
                                                    <td class="widthInside2">
                                                        <ul>
                                                            <li ng-repeat="version in data.hl7versions"><span ng-class="{'choosed': version===data.hl7Version}">{{version}}</span></li>
                                                        </ul>
                                                    </td>
                                                    <td class="widthInside2">
                                                        {{data.description}}
                                                    </td>
                                                    <td class="widthInside2">
                                                        <button class="btn btn-raised btn-xs btn-danger" ng-click="addedDatatypes.splice($index,1);miniDTMap[data.id]=false">X</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </div>
                        </div>


                    </div>
                </div>

                </div>
                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">
                <md-button class="md-primary md-raised" ng-click="ok()">
                    Submit
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="AddHL7Datatype.html">

    <div class="modal-content">
        <div class="modal-header modal-wide">

            <div class="form-inline">
                <span class="header4" style="color:white;">Add HL7 Datatypes</span>

                <span class="pull-right">
                    <button class="btn btn-raised btn-default btn-xs" type="button" ng-click="cancel()"><i class="fa fa-times fa-fw"></i>Cancel
                    </button>
                    <button class="btn btn-raised btn-primary btn-xs" type="button" ng-click="ok()" ng-disabled="!checkedExt||!NocheckedExt||selectedDatatypes.length===0"><i class="fa fa-check fa-fw"></i>Add
                    </button>
                </span>
            </div>
        </div>

        <form name="addDT">
            <div class="modal-body">
                <div class="container" style="margin-bottom: 20px;margin-top: 10px">
                    <div class="row" style="padding-top:10px">

                        <div class="row container">
                            <label style="color:black !important; margin-right:8px;">Select HL7 version:</label>
                            <div class="btn-group btn-group-sm" data-toggle="buttons">
                                <label class="btn btn-raised btn-info btn-xs" ng-click="setVersion(vr)" ng-class="{ 'active':vr===version1}" ng-repeat="vr in versions">
                                                            <input type="radio" ng-value="vr" ng-model="version1">{{vr}}</input>
                                                        </label>
                            </div>

                        </div>

                        <hr style="border-top: 2px solid #271e1e" ng-if="version1" />

                        <div class="row container" ng-if="version1">

                            <div class="panel panel-primary col-md-5">
                                <div class="panel-heading">Source</div>
                                <div class="panel-body container">

                                    <div align="right" class="container" style="margin-top: 8px;">
                                        <i class="icon-search"></i>
                                        <input type="search" class="form-control" placeholder="Search Datatypes" ng-model="search.name" />
                                    </div>
                                    <div>
                                        <table class="table table-bordered table-stripped container">
                                            <thead>
                                                <tr class="tbl-header">

                                                    <th>Name</th>
                                                    <th>As is</th>
                                                    <th>As Flavor</th>

                                                </tr>

                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="datatype in hl7Datatypes | orderBy: 'name' | filter:search:strict">

                                                    <td>{{datatype.name}}</td>
                                                    <td><a class="pointer" ng-show="!checkExist(datatype)" ng-click="addDt(datatype)"><i class="fa fa-plus fa-fw"></i></a>
                                                        <p ng-show="checkExist(datatype)">Selected</p>
                                                    </td>
                                                    <td><a class="pointer" ng-click="addDtFlv(datatype)"><i class="fa fa-plus fa-fw"></i></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-1"></div>
                            <div class="panel panel-primary col-md-6">
                                <div class="panel-heading">Selected Data Types</div>
                                <div class="panel-body container">
                                    <div align="right" class="container" style="margin-top: 8px;">
                                        <i class="icon-search"></i>
                                        <input type="search" class="form-control" placeholder="Search" ng-model="search1.name" />
                                    </div>
                                    <table class="table table-bordered table-stripped container">
                                        <thead>
                                            <tr class="tbl-header">
                                                <th>Name</th>
                                                <th>Ext</th>
                                                <th>HL7 Version</th>
                                                <th>Actions</th>


                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="dt in selectedDatatypes">
                                                <td>{{dt.name}}<span class="badge" ng-if="versionAndUseMap[dt.id]">v{{versionAndUseMap[dt.id].publicationVersion}}</span></td>
                                                <td><span ng-show="!edit">{{dt.ext}}</span>
                                                    <a class="pointer" ng-show="!edit && dt.ext!==null && dt.ext!==''&& dt.status!=='PUBLISHED'" ng-click="edit=true;checkExt(dt)"><i class="fa fa-pencil fa-fw"></i></a>
                                                    <input ng-show="edit" ng-change="checkExt(dt)" ng-model="dt.ext" />
                                                    <a class="pointer" ng-show="edit && checkedExt && NocheckedExt" ng-click="edit=false"><i class="fa fa-check-circle"></i></a>
                                                    <span ng-if="edit && !checkedExt" class="danger">This extension already exists</span>
                                                    <span ng-if="edit && !NocheckedExt" class="danger">A flavor must have an extension</span>
                                                </td>
                                                <td>{{dt.hl7Version}}</td>

                                                <td><a class="pointer" ng-click="deleteDt(dt)"><i
                                                                                    class="fa fa-times fa-fw"></i></a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>
                        </div>
                    </div>
        </form>
        </div>
</script>
<script type="text/ng-template" id="AddSharedDatatype.html">
    <div class="modal-content">
        <div class="modal-header modal-wide">
            <div class="form-inline">
                <span class="header4" style="color:white;">Add Shared Datatypes</span>

                <span class="pull-right">
                    <button class="btn btn-raised btn-default btn-xs" type="button" ng-click="cancel()"><i class="fa fa-times fa-fw"></i>Cancel
                    </button>
                    <button class="btn btn-raised btn-primary btn-xs" type="button" ng-click="ok()" ng-disabled="!checkedExt||!NocheckedExt||selectedDatatypes.length===0"><i class="fa fa-check fa-fw"></i>Add
                    </button>
                </span>
            </div>
        </div>


        <form name="addDT">
            <div class="modal-body">
                <div class="container" style="margin-bottom: 20px;margin-top: 10px">
                    <div class="row" style="padding-top:10px">

                        <div class="row container">

                            <div class="panel panel-primary col-md-5">
                                <div class="panel-heading">Source</div>
                                <div class="panel-body container">

                                    <div align="right" class="container" style="margin-top: 8px;">
                                        <i class="icon-search"></i>
                                        <input type="search" class="form-control" placeholder="Search Datatypes" ng-model="search.name" />
                                    </div>
                                    <div>
                                        <table class="table table-bordered table-stripped container">
                                            <thead>
                                                <tr class="tbl-header">

                                                    <th>Name</th>
                                                    <th>HL7 Version</th>
                                                    <th>As Is</th>
                                                    <th>As Flavor</th>

                                                </tr>

                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="datatype in hl7Datatypes | orderBy: 'name' | filter:search:strict">

                                                    <td>{{datatype.name}}<span class="badge" ng-if="datatype.publicationVersion">{{datatype.publicationVersion}}</span></td>
                                                    <td>{{datatype.hl7Version}}</td>
                                                    <td><a class="pointer" ng-show="!checkExist(datatype)" ng-click="addDt(datatype)"><i class="fa fa-plus fa-fw"></i></a>
                                                        <p ng-show="checkExist(datatype)">Selected</p>
                                                    </td>
                                                    <td><a class="pointer" ng-click="addDtFlv(datatype)"><i class="fa fa-plus fa-fw"></i></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-1"></div>
                            <div class="panel panel-primary col-md-6">
                                <div class="panel-heading">Selected Data Types</div>
                                <div class="panel-body container">
                                    <div align="right" class="container" style="margin-top: 8px;">
                                        <i class="icon-search"></i>
                                        <input type="search" class="form-control" placeholder="Search" ng-model="search1.name" />
                                    </div>
                                    <table class="table table-bordered table-stripped container">
                                        <thead>
                                            <tr class="tbl-header">
                                                <th>Name</th>
                                                <th>Ext</th>
                                                <th>HL7 Version</th>
                                                <th>Actions</th>

                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="dt in selectedDatatypes">
                                                <td>{{dt.name}}<span class="badge" ng-if="versionAndUseMap[dt.id]">v{{versionAndUseMap[dt.id].publicationVersion}}</span></td>
                                                <td><span ng-show="!edit">{{dt.ext}}</span>
                                                    <a class="pointer" ng-show="!edit && dt.ext!==null && dt.ext!==''&& dt.status!=='PUBLISHED'" ng-click="edit=true;checkExt(dt)"><i class="fa fa-pencil fa-fw"></i></a>
                                                    <input ng-show="edit" ng-change="checkExt(dt)" ng-model="dt.ext" />
                                                    <a class="pointer" ng-show="edit && checkedExt && NocheckedExt" ng-click="edit=false"><i class="fa fa-check-circle"></i></a>
                                                    <span ng-if="edit && !checkedExt" class="danger">This extension already exists</span>
                                                    <span ng-if="edit && !NocheckedExt" class="danger">A flavor must have an extension</span>
                                                </td>
                                                <td>{{dt.hl7Version}}</td>

                                                <td><a class="pointer" ng-click="deleteDt(dt)"><i
                                                                                    class="fa fa-times fa-fw"></i></a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>
                        </div>
                    </div>
        </form>
        </div>
</script>
<script type="text/ng-template" id="AddUserDatatype.html">

    <div class="modal-content">
        <div class="modal-header modal-wide">
            <div class="form-inline">
                <span class="header4" style="color:white;">Add Datatypes From User Library</span>

                <span class="pull-right">
                    <button class="btn btn-raised btn-default btn-xs" type="button" ng-click="cancel()"><i class="fa fa-times fa-fw"></i>Cancel
                    </button>
                    <button class="btn btn-raised btn-primary btn-xs" type="button" ng-click="ok()" ng-disabled="!checkedExt||!NocheckedExt||selectedDatatypes.length===0"><i class="fa fa-check fa-fw"></i>Add
                    </button>
                </span>
            </div>
        </div>

        <form name="addDT">
            <div class="modal-body">
                <div class="container" style="margin-bottom: 20px;margin-top: 10px">
                    <div class="row" style="padding-top:10px">

                        <div class="row container">
                            <select style="background-color: rgb(21, 101, 192);
    color: white;" ng-model="usrLib" class="form-control col-md-6" ng-change="selectUserDtLib(usrLib)" ng-options="usrLib.metaData.name for usrLib in userDtLib track by usrLib.id">
                                                        <option value="" disabled selected>Choose a User Library</option>
                                            <!--<option ng-repeat="usrLib in userDtLib" value='{{usrLib}}'> {{usrLib.metaData.name}}</option>-->
                     </select>
                        </div>

                        <hr style="border-top: 2px solid #271e1e" />

                        <div class="row container">

                            <div class="panel panel-primary col-md-5">
                                <div class="panel-heading">Source</div>
                                <div class="panel-body container">

                                    <div align="right" class="container" style="margin-top: 8px;">
                                        <i class="icon-search"></i>
                                        <input type="search" class="form-control" placeholder="Search Datatypes" ng-model="search.name" />
                                    </div>
                                    <div>
                                        <table class="table table-bordered table-stripped container">
                                            <thead>
                                                <tr class="tbl-header">

                                                    <th>Name</th>
                                                    <th>Version</th>
                                                    <th>As is</th>
                                                    <th>As Flavor</th>

                                                </tr>

                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="datatype in userDatatypes | orderBy: 'name' | filter:search:strict" ng-if="datatype.status==='PUBLISHED'&&datatype.scope==='USER'">

                                                    <td>{{datatype.label}}<span class="badge" ng-if="versionAndUseMap[datatype.id]">v{{versionAndUseMap[datatype.id].publicationVersion}}</span></td>
                                                    <td>{{datatype.hl7Version}}
                                                        <td><a class="pointer" ng-show="!checkExist(datatype)" ng-click="addDt(datatype)"><i class="fa fa-plus fa-fw"></i></a>
                                                            <p ng-show="checkExist(datatype)">Selected</p>
                                                        </td>
                                                        <td><a class="pointer" ng-click="addDtFlv(datatype)"><i class="fa fa-plus fa-fw"></i></a>
                                                        </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-1"></div>
                            <div class="panel panel-primary col-md-6">
                                <div class="panel-heading">Selected Data Types</div>
                                <div class="panel-body container">
                                    <div align="right" class="container" style="margin-top: 8px;">
                                        <i class="icon-search"></i>
                                        <input type="search" class="form-control" placeholder="Search" ng-model="search1.name" />
                                    </div>
                                    <table class="table table-bordered table-stripped container">
                                        <thead>
                                            <tr class="tbl-header">
                                                <th>Name</th>
                                                <th>Ext</th>
                                                <th>HL7 Version</th>
                                                <th>Actions</th>

                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="dt in selectedDatatypes">
                                                <td>{{dt.name}}<span class="badge" ng-if="versionAndUseMap[dt.id]">v{{versionAndUseMap[dt.id].publicationVersion}}</span></td>
                                                <td><span ng-show="!edit">{{dt.ext}}</span>
                                                    <a class="pointer" ng-show="!edit && dt.ext!==null && dt.ext!==''&& dt.status!=='PUBLISHED'" ng-click="edit=true;checkExt(dt)"><i class="fa fa-pencil fa-fw"></i></a>
                                                    <input ng-show="edit" ng-change="checkExt(dt)" ng-model="dt.ext" />
                                                    <a class="pointer" ng-show="edit && checkedExt && NocheckedExt" ng-click="edit=false"><i class="fa fa-check-circle"></i></a>
                                                    <span ng-if="edit && !checkedExt" class="danger">This extension already exists</span>
                                                    <span ng-if="edit && !NocheckedExt" class="danger">A flavor must have an extension</span>
                                                </td>
                                                <td>{{dt.hl7Version}}</td>

                                                <td><a class="pointer" ng-click="deleteDt(dt)"><i
                                                                                    class="fa fa-times fa-fw"></i></a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>
                        </div>
                    </div>

        </form>
        </div>
</script>
<script type="text/ng-template" id="AddMasterDatatypeIntoUser.html">

    <div class="modal-content">
        <div class="modal-header modal-wide">
            <div class="form-inline">
                <span class="header4" style="color:white;">Add Datatypes From {{scopeTag}} Library </span>

                <span class="pull-right">
                    <button class="btn btn-raised btn-default btn-xs" type="button" ng-click="cancel()"><i class="fa fa-times fa-fw"></i>Cancel
                    </button>
                    <button class="btn btn-raised btn-primary btn-xs" type="button" ng-click="ok()" ng-disabled="!checkedExt||!NocheckedExt||selectedDatatypes.length===0"><i class="fa fa-check fa-fw"></i>Add
                    </button>
                </span>
            </div>
        </div>


        <form name="addDT">
            <div class="modal-body">
                <div class="container" style="margin-bottom: 20px;margin-top: 10px">
                    <div class="row" style="padding-top:10px">

                        <div class="row container">

                            <select style="background-color: rgb(21, 101, 192);color: white;" ng-model="masLib" class="form-control col-md-6" ng-change="selectMasterDtLib(masLib)" ng-options="masLib.metaData.name for masLib in masterLib track by masLib.id">
                                    <option value="" disabled selected>Choose a {{scopeTag}} Library</option>

                                 </select>
                        </div>

                        <hr style="border-top: 2px solid #271e1e" />

                        <div class="row container">

                            <div class="panel panel-primary col-md-5">
                                <div class="panel-heading">Source</div>
                                <div class="panel-body container">

                                    <div align="right" class="container" style="margin-top: 8px;">
                                        <i class="icon-search"></i>
                                        <input type="search" class="form-control" placeholder="Search Datatypes" ng-model="search.name" />
                                    </div>
                                    <div>
                                        <table class="table table-bordered table-stripped container">
                                            <thead>
                                                <tr class="tbl-header">

                                                    <th class="col-md-3">Name</th>
                                                    <th class="col-md-7">Compatible HL7 Versions</th>
                                                    <th class="col-md-2">Actions</th>
                                                </tr>

                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="datatype in masterDatatypes | orderBy: 'name' | filter:search:strict" ng-if="datatype.scope!=='INTERMASTER'">

                                                    <td class="col-md-7">
                                                        <display-label of="datatype"></display-label>



                                                    </td>
                                                    <td class="col-md-3">

                                                        <md-radio-group ng-model="datatype.hl7Version">

                                                            <md-radio-button ng-repeat="vr in datatype.hl7versions" ng-value="vr" class="md-primary" ng-disabled="checkImported(datatype,vr)">{{vr}}</md-radio-button>

                                                        </md-radio-group>



                                                    </td>
                                                    <td class="col-md-2">
                                                        <button class="btn btn-raised btn-primary btn-xs" type="button" ng-click="addDtFlv(datatype)" ng-disabled="checkImported(datatype,datatype.hl7Version)"><i class="fa fa-plus fa-fw"></i>
                                                            </button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-1"></div>
                            <div class="panel panel-primary col-md-6">
                                <div class="panel-heading">Selected Data Types</div>
                                <div class="panel-body container">
                                    <div align="right" class="container" style="margin-top: 8px;">
                                        <i class="icon-search"></i>
                                        <input type="search" class="form-control" placeholder="Search" ng-model="search1.name" />
                                    </div>
                                    <table class="table table-bordered table-stripped container">
                                        <thead>
                                            <tr class="tbl-header">
                                                <th>Data Type</th>
                                                <th>Actions</th>

                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="dt in selectedDatatypes">

                                                <td>
                                                    <display-label of="dt" desc="true"></display-label>
                                                </td>
                                                <td>
                                                    <a class="pointer" ng-click="deleteDt(dt)">
                                                        <i class="fa fa-times fa-fw"></i></a>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>
                        </div>
                    </div>
        </form>
        </div>
</script>
<script type="text/ng-template" id="AbortPublishCtl.html">
    <div class="modal-header">
        <h3 class="modal-title">
        </h3>
    </div>
    <div class="modal-body">
        <p>You cannot Publish this data type since it contains unpublished elements </p>
        <div ng-show="unpublishedDatatypes.length>0">
            <h4>Datatype
                <h4>
                    <div class="igl-table" ng-show="unpublishedDatatypes.length>0">
                        <table class="table table-striped table-condensed table-bordered">
                            <thead>
                                <tr class="tbl-header">
                                    <th>Component Path</th>
                                    <th>Unpublishted Data Type</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="obj in unpublishedDatatypes" class="ng-scope">
                                    <td>
                                        <span>
                                <img style="width:15px; height:15px" ng-src="images/component.png" src="images/component.png">
                                <span style="width:60%" name="name" ng-bind="obj.location.name" class="ng-binding"> </span>
                                        <span ng-bind="obj.location" class="ng-binding"></span>
                                        </span>

                                    </td>
                                    <td>
                                        <div class="ng-binding">{{obj.datatype.name}}_{{obj.datatype.ext}}</div>
                                    </td>
                                </tr>
                                <!-- end ngRepeat: ref in references -->
                            </tbody>
                        </table>
                    </div>

        </div>

        <div ng-show="unpublishedTables.length>0">
            <h4>Tables
                <h4>

                    <div class="igl-table" ng-show="unpublishedTables.length>0">
                        <table class="table table-striped table-condensed table-bordered">
                            <thead>
                                <tr class="tbl-header">
                                    <th>Component Path</th>
                                    <th>Unpublishted Tables</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="obj in unpublishedTables" class="ng-scope">
                                    <td>
                                        <span>
                                <img style="width:15px; height:15px" ng-src="images/component.png" src="images/component.png">
                                <span style="width:60%" name="name" ng-bind="obj.location.name" class="ng-binding"> </span>
                                        <span ng-bind="obj.location" class="ng-binding"></span>
                                        </span>

                                    </td>
                                    <td>
                                        <div class="ng-binding">{{obj.table.bindingIdentifier +obj.table.ext}}</div>
                                    </td>
                                </tr>
                                <!-- end ngRepeat: ref in references -->
                            </tbody>
                        </table>
                    </div>

        </div>




    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>
<script type="text/ng-template" id="ConfirmDatatypePublishCtlMd.html">
    <md-dialog aria-label="confirm publish" style="width: 50%">
        <form ng-cloak role="form" name="newForm">
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Publish confirmation </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">

        <p>Are You Sure You Want To Publish this Data Type ? A published Data Type Is Assigned A Version And Cannot Be Edited.</p>
        <p>This Operation is Irreversible.</p>
                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row" layout-align="end end">

                <md-button class="btn btn-raised btn-primary btn-sm" ng-disabled="loading" ng-click="confirm()"><span><i
                        class="fa fa-check fa-fw">&nbsp; </i>Confirm</span>
                </md-button>
            </md-dialog-actions>

        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="cannotPublish.html">
    <div class="modal-header">
        <h3 class="modal-title">Redirecting confirmation
        </h3>
    </div>
    <div class="modal-body">
        <span> You cannot create a new version of <display-label of="datatypeTo" desc="false"></display-label> until you pubish the pervious version </span>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>
<script type="text/ng-template" id="ConfirmTablePublish.html">
    <div class="modal-header">
        <h3 class="modal-title">Publish Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>Are You Sure You Want To Publish This Value Set? A Published Value Set Is Assigned A Version And Cannot Be Edited.</p>
        <p>This Operation is Irreversible.</p>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-primary btn-sm" ng-disabled="loading" ng-click="confirm()"><span><i
                class="fa fa-check fa-fw">&nbsp; </i>Confirm</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>
<script type="text/ng-template" id="ShareTableModal.html">
    <div>
        <div class="modal-header">
            <h3 class="modal-title">Share Value Set</h3>
        </div>
        <div class="modal-body">
            <div class="container" style="margin-bottom: 20px;margin-top: 20px">
                <div class="row" ng-if="error != null">
                    <div class="col-md-12">
                        <span ng-bind="error" style="color: red;"></span>
                    </div>
                </div>

                <div class="row" ng-if="igdocumentSelected.shareParticipantIds.length > 0">
                    <div class="col-md-12">
                        <h5>Shared with</h5>
                        <div class="table-responsive">
                            <table class="table">
                                <tbody>
                                    <tr ng-repeat="participant in igdocumentSelected.shareParticipantIds">
                                        <td><i>{{participant.fullname}} ({{participant.username}})</i></td>
                                        <td>
                                            <button ng-disabled="loading" class="btn btn-raised btn-warning btn-xs" type="button" style="margin-top: 0;" ng-if="participant.pendingApproval">Pending Request</button>
                                            <button ng-disabled="loading" class="btn btn-raised btn-danger btn-xs" type="button" style="margin-top: 0;" ng-click="unshare(participant)" ng-if="participant.pendingApproval"><i class="fa fa-times"></i> Cancel</button>
                                        </td>
                                        <td>
                                            {{participant.permission}}
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>


                <div class="row">
                    <div class="col-md-8">
                        <tags-input ng-model="tags" key-property="id" display-property="username" placeholder="Find user" replace-spaces-with-dashes="false" add-from-autocomplete-only="true">
                            <auto-complete source="loadUsernames($query)" min-length="0" load-on-focus="true" load-on-empty="true" max-results-to-show="32" template="autocomplete-template"></auto-complete>
                        </tags-input>
                    </div>
                    <div class="col-md-4">
                        <ui-select ng-model="selectedItem.selected" theme="bootstrap" ng-disabled="true">
                            <ui-select-match>{{$select.selected}}</ui-select-match>
                            <ui-select-choices repeat="item in itemArray | filter: $select.search">
                                <div ng-bind-html="item | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-raised btn-default" type="button" ng-click="cancel()"><i class="fa fa-times fa-fw"></i> Cancel </button>
                <button class="btn btn-raised btn-primary" type="button" ng-click="ok()" ng-disabled="tags.length === 0"><i class="fa fa-check"></i>Share</button>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="ShareDatatypeModal.html">
    <md-dialog aria-label="Share IG Document">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Share IG Document </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content medium-dialog">
                    <div class="md-padding autocomplete">
                    <div layout="row">
                                <span class="material-icons" flex="10" style="font-size: 39px; margin-top: 15px;">search</span>
                        <md-contact-chips  flex="90" style="width: 100%"
                                           ng-model="tags"
                                           md-contacts="loadUsernames($query)"
                                           md-contact-name="fullname"
                                           md-require-match="true"
                                           md-contact-email="email"
                                           md-contact-image="image"
                                           md-require-match="true"
                                           md-highlight-flags="i"
                                           placeholder="Search by username">
                        </md-contact-chips>

                    </div>

                    <md-list class="fixedRows" ng-if="igdocumentSelected.shareParticipantIds.length > 0">
                        <!--<md-subheader class="md-no-sticky">List of Participants</md-subheader>-->
                        <h5>Current Participants</h5>
                        <hr />
                        <md-list-item class="md-2-line contact-item" ng-repeat="contact in igdocumentSelected.shareParticipantIds">
                            <img ng-src="{{generateHash(contact.email)}}" class="md-avatar" alt="{{contact.fullname}}" />
                            <div class="md-list-item-text compact">
                                <h3>{{contact.fullname}}     <span  title="unshare" class="pull-right" type="button" style="margin-top: 0;" ng-click="unshare(contact)"><i class="fa fa-times"></i>
                                            </span> </h3>

                                <p>{{contact.email}}</p>
                            </div>
                        </md-list-item>
                    </md-list>
                </div>
                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">

                <md-button class="btn btn-raised btn-primary" type="button" ng-click="ok()"
                           ng-disabled="tags.length === 0"><i class="fa fa-check"></i>Share
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="ShareDatatypeErrorModal.html">
    <div>
        <div class="modal-header">
            <h3 class="modal-title">Share Datatype Error</h3>
        </div>
        <div class="modal-body">
            <div class="container" style="margin-bottom: 20px;margin-top: 20px">
                <div class="row">
                    <div class="col-md-12">
                        <span style="color: red;">
              Please Publish this datatype before sharing it. You cannot share a datatype that is not Published.
            </span>
                    </div>
                </div>

            </div>

            <div class="modal-footer">
                <button class="btn btn-raised btn-primary" type="button" ng-click="cancel()"><i class="fa fa-check"></i>OK</button>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="ShareTableErrorModal.html">
    <div>
        <div class="modal-header">
            <h3 class="modal-title">Share Value Set Error</h3>
        </div>
        <div class="modal-body">
            <div class="container" style="margin-bottom: 20px;margin-top: 20px">
                <div class="row">
                    <div class="col-md-12">
                        <span style="color: red;">
              Please Publish this Value Set before sharing it. You cannot share a Value Set that is not Published.
            </span>
                    </div>
                </div>

            </div>

            <div class="modal-footer">
                <button class="btn btn-raised btn-primary" type="button" ng-click="cancel()"><i class="fa fa-check"></i>OK</button>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="autocomplete-template">
    <div class="autocomplete-template">
        <div class="share_left-panel">
            <i class="fa fa-user" aria-hidden="true"></i>
        </div>
    </div>
    <div class="share_right-panel">
        <span ng-bind-html="$highlight($getDisplayText())"></span>
        <span>({{data.fullname}})</span>
    </div>
</script>
<script type="text/ng-template" id="confirmSwitch.html">
    <div class="modal-header">
        <h3 class="modal-title">Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>All references to {{source.name}}_{{source.ext}}<span class="version-badge-label">v{{source.publicationVersion}}</span> will be replaced by {{dest.name}}_{{dest.ext}}<span class="version-badge-label">v{{dest.publicationVersion}}</span> in your
            IG Document</p>

    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-success btn-sm" ng-disabled="loading" ng-click="confirm()"><span><i
                class="fa fa-trash-o fa-fw">&nbsp; </i>Confirm</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>
<script type="text/ng-template" id="confirmUnshare.html">
    <div class="modal-header">
        <h3 class="modal-title">Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <p>Are you sure you want to remove
            <display-label of="datatypesMap[datatypeTo.id]" desc="false"></display-label>
        </p>

    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-success btn-sm" ng-disabled="loading" ng-click="confirm()"><span><i
                class="fa fa-trash-o fa-fw">&nbsp; </i>Confirm</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..." />
        </div>
    </div>
    </div>
</script>
<script type="text/ng-template" id="abortDeleteDatatype.html">
    <div class="modal-header">
        <h3 class="modal-title">Data Type Cross References Found
            <button class="btn btn-raised  btn-xs btn-primary pull-right" ng-click="ok()"><span><i class="fa fa-times fa-fw">
                &nbsp; </i>Close</span>
            </button>
        </h3>
    </div>
    <div class="modal-body">
        <p>We cannot delete this {{getMessage()}} because it is being referenced by elements below:</p>

        <div class="igl-table">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr class="tbl-header">
                        <th>Name</th>
                        <th>Path</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="ref in referencesForMenu track by $index">
                        <td>
                            <span>
                            <span ng-show="ref.type === 'field'" class="label label-field label-icon">F</span>
                            <span ng-show="ref.type === 'component'" class="label label-component label-icon">C</span>
                            <span ng-show="ref.type === 'subcomponent'" class="label label-sub-component label-icon">S</span>
                            <span style="width:60%" name="name" ng-bind="ref.name"></span>
                            <span ng-bind="ref.description"></span>
                            </span>
                        </td>
                        <td>
                            <div>{{::ref.path}}</div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</script>
<script type="text/ng-template" id="CustomExportModal.html">
    <div class="modal-header">
        <h3 class="modal-title">Custom Export {{layout}}
        </h3>
    </div>
    <div class="modal-body">


        <tabset class="">
            <tab>
                <tab-heading> IG Style</tab-heading>
                <div ng-include="'views/edit/ExportConfig.html'"></div>

            </tab>
            <tab>
                <tab-heading> Profile Style</tab-heading>
                <div ng-include="'views/edit/ExportConfig.html'"></div>

            </tab>
            <tab>
                <tab-heading>Table Style</tab-heading>
                <div ng-include="'views/edit/ExportConfig.html'"></div>

            </tab>
            <tab>
                <tab-heading>Delta Style</tab-heading>
                <div ng-include="'views/edit/ExportConfig.html'"></div>
            </tab>


            <tabset>

    </div>

    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="cancel()"><span>
          <i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-success btn-sm" ng-click="ok()"><span>
          <i class="fa fa-trash-o fa-fw">&nbsp; </i>Confirm</span>
        </button>
    </div>
</script>
<script type="text/ng-template" id="confirmDocumentationDeleteCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Delete Confirmation
        </h3>
    </div>
    <div class="modal-body">
        <span> Are you sure you want to delete this Document </span>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-disabled="loading" ng-click="cancel()"><span><i
                class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-raised btn-success btn-sm" ng-click="ok()"><span>
          <i class="fa fa-trash-o fa-fw">&nbsp; </i>Confirm</span>
        </button>
    </div>
    </div>
</script>
<script type="text/ng-template" id="ConfirmSingleElementDuplicatedCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Warning for duplicated Constant Value</h3>
    </div>
    <div class="modal-body">
        <p>Constant value is already presence at child node. Do you want to override it and want to define a new single element value at current node?</p>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-raised btn-default btn-sm" ng-click="no()"><span><i class="fa fa-times fa-fw">&nbsp; </i>No</span>
        </button>
        <button class="btn btn-raised btn-default btn-sm" ng-click="yes()"><span><i class="fa fa-check fa-fw">&nbsp; </i>Yes</span>
        </button>
    </div>
</script>
<script type="text/ng-template" id="label.html">
    <span ng-if="element.hl7Version!=='*'" ng-class="{deprecated : element.duplicated}">
        <span  class="badge" ng-class="{'label-HL7' : getScopeLabel(element)==='HL7',
         'label-USE':  getScopeLabel(element)==='USR','label-MASTER':getScopeLabel(element)==='MAS','label-PRL':getScopeLabel(element)==='PRL','label-DRV':getScopeLabel(element)==='DRV'}">
                {{getScopeLabel(element)}} {{hasHl7Version(element)}}

        <span ng-if="element.publicationVersion&&element.status==='PUBLISHED'" class="version-badge">v{{element.publicationVersion}}</span>
    </span>
    <span>{{getLabel(element)}}</span>
    <span ng-if="description">-{{getDescriptionLabel(element)}}</span>
    </span>


    <span ng-if="element.hl7Version=='*'">
        <span  class="badge" ng-class="{'label-HL7' : getScopeLabel(element)==='HL7',
         'label-USE':  getScopeLabel(element)==='USR','label-MASTER':getScopeLabel(element)==='MAS','label-PRL':getScopeLabel(element)==='PRL','label-DRV':getScopeLabel(element)==='DRV'}">
                {{getScopeLabel(element)}}

        <span ng-if="element.publicationVersion&&element.status==='PUBLISHED'" class="version-badge">v{{element.publicationVersion}}</span>

        </span>
    <span>{{getLabel(element)}}</span>
    <span ng-if="description">{{getDescriptionLabel(element)}}</span>
    <div>
        <span class="version-badge-under" ng-repeat="version in element.hl7versions" style="margin-left:2px;">{{version}}</span>
    </div>
    </span>
</script>
<script type="text/ng-template" id="referenceTochange.html">
    <md-dialog aria-label="confirmation">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> changing {{item.name}} datatype confirmation </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">

                    <span flex>  <h3>Please select the references you want to change</h3> </span>
                    <br/>

                    <table st-table="tmpReferences" st-safe-src="references" class="table table-striped table-bordered table-condensed">
                        <thead>
                            <tr class="tbl-header">
                                <td st-ratio="10">#</td>
                                <th st-ratio="40">Path</th>
                                <th st-ratio="20">Name</th>
                                <th st-ratio="20">Usage</th>

                                <th st-ratio="20">
                                    <md-checkbox aria-label="Select All" ng-checked="isChecked()" ng-click="toggleAll()">
                                        <span ng-if="isChecked()">Un-</span>Select All
                                    </md-checkbox>
                                </th>
                            </tr>

                        </thead>

                        <tbody>
                            <tr ng-repeat="ref in tmpReferences">
                                <td st-ratio="10">{{$index + 1}}
                                </td>
                                <td st-ratio="40">
                                    <span ng-show="ref.type === 'field'" class="label label-field label-icon">F</span>
                                    <span ng-show="ref.type === 'component'" class="label label-component label-icon">C</span>
                                    <span ng-show="ref.type === 'subcomponent'" class="label label-sub-component label-icon">S</span>
                                    <span ng-show="ref.type === 'field'">{{::ref.path}}</span>
                                    <span ng-show="ref.type === 'component'">{{::ref.path}}</span>
                                    <span ng-show="ref.type === 'profilecomponent'">{{::ref.path}}</span>

                                </td>
                                <td st-ratio="20">

                                    <span ng-show="ref.type === 'field'" ng-click="redirectSeg(ref.target)">{{::ref.name}}</span>
                                    <span ng-show="ref.type === 'component'" ng-click="redirectDT(ref.target)">{{::ref.name}}</span>
                                    <span ng-show="ref.type === 'profilecomponent'" ng-click="redirectDT(ref.target)">{{::ref.name}}</span>

                                </td>
                                <td st-ratio="20">
                                    {{::ref.usage}}
                                </td>
                                <td st-ratio="20">
                                    <md-checkbox ng-checked="exists(ref, selected)" ng-click="toggle(ref, selected)">

                                    </md-checkbox>
                                </td>

                            </tr>
                        </tbody>
                        <tr ng-show="references.length > 10">
                            <td colspan="9" class="text-center">
                                <div st-pagination="" st-items-by-page="10" st-displayed-pages="10"></div>
                            </td>
                        </tr>
                    </table>
                </div>
            </md-dialog-content>

            <md-dialog-actions layout="row">
                <md-button md-autofocus ng-click="closeDialog()">
                    Confirm switch
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>

</script>
<script type="text/ng-template" id="GlobalConformanceStatementCtrlInPc.html">
    <md-dialog aria-label="Conformance Statements for Message/Group" style="width: 90%">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2>Conformance Statements of {{selectedContextNode.name}}</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">


                                            <table st-table="displayedCS" st-safe-src="selectedContextNode.conformanceStatements" class="table table-striped table-bordered">
                                                <thead>
                                                <tr class="tbl-header">
                                                    <th st-sort="constraintId" class="col-md-2">ID</th>
                                                    <th  class="col-md-10" >Description</th>

                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr ng-repeat="c in displayedCS">
                                                    <td class="col-md-2">

                                                         {{c.constraintId}}

                                                    </td>
                                                    <td class="col-md-10">
                                                       {{c.description}}
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
            </md-dialog-content>

        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="message_tree_itemInPc.html">
    <tr style="width:100%">
        <td ng-if="data.folderClass">
            <div ng-if="data.type === 'message' || data.type === 'group' || data.type === 'segmentRef'">
                <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
            </div>
            <div ng-if="data.type === 'field' || data.type === 'component'">
                <div ng-if="data.child.components &&  data.child.components.length > 0">
                    <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="!data.child.components ||  data.child.components.length == 0">
                    <i class="fa fa-check" />
                </div>
            </div>
        </td>
        <td ng-if="!data.folderClass">
            <div ng-if="data.type === 'message' || data.type === 'group' || data.type === 'segmentRef'">
                <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
            </div>
            <div ng-if="data.type === 'field' || data.type === 'component'">
                <div ng-if="data.child.components &&  data.child.components.length > 0">
                    <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="!data.child.components ||  data.child.components.length == 0">
                    <i class="fa fa-check" />
                </div>
            </div>
        </td>
        <td>
            <div ng-if="data.type === 'message'">
                    <input type="checkbox" ng-checked="data.contextKey === contextKey" ng-click="selectContext(data);" />
                        <span class="label label-success label-icon">M</span>
                        <span style="font-weight:bold;color:blue;">&nbsp;{{::data.name}}</span>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.children" ng-include="'message_tree_itemInPc.html'"></div>
                    </table>
                </div>
            </div>
            <div ng-if="data.type === 'group'">
                <div ng-show="contextKey == data.contextKey">
                        <input type="checkbox" ng-checked="data.contextKey === contextKey" ng-click="selectContext(data);" />
                        <span class="label label-success label-icon">G</span>
                        <span style="font-weight:bold;">&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::data.name}}</span>

                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.children" ng-include="'message_tree_itemInPc.html'"></div>
                    </table>
                </div>
            </div>
            </div>
            <div ng-if="data.type === 'segmentRef'">
                    <span class="label label-segment label-icon">S</span>
                    <span>&nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}]&nbsp;{{::segmentsMap[data.ref.id].name}}</span>
            </div>
</script>
<script type="text/ng-template" id="ConformanceStatementSegmentCtrlInPc.html">
    <md-dialog aria-label="Conformance Statements">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Conformance Statements of {{segment.name}} </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content" style="overflow:scroll;">
                    <div class="modal-body">
                        <form role="form">
                            <div class="col-md-3">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Segment Tree</div>
                                    <div class="panel-body" style="min-height:200px; max-height:200px;overflow-y: scroll;">
                                        <table class="table table-striped">
                                            <tbody ng-repeat="data in treeDataForContext" ng-include=" 'segment_tree_itemInPc.html'">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-9">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">Conformance Statements Builder</div>
                                    <div class="panel-body" style=" max-height:200px;overflow-y: scroll;">
                                        <span class="pull-right">
                                            <div class="btn-group btn-group-sm" data-toggle="buttons">
                                                <label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType='Free' ;" ng-class="{ 'active':constraintType==='Free' }">
                                                    Add new Free-Text Constraint
                                                </label>
                                                <label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType='Plain' ;" ng-class="{ 'active':constraintType==='Plain' }">
                                                   Add new plain Constraint
                                                </label>
                                                <label class="btn btn-raised btn-primary btn-xs" ng-click="constraintType='Complex' ;" ng-class="{ 'active':constraintType==='Complex' }">
                                                   Add new complex Constraint
                                                </label>
                                            </div>
                                    </span>

                                        <table class="table table-striped table-bordered" ng-show="constraintType==='Free'">
                                            <thead>
                                                <tr class="tbl-header">
                                                    <th class="col-md-2">ID</th>
                                                    <th class="col-md-8">Free-Text (Not supported by validation tool)</th>
                                                    <th class="col-md-2"></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td class="col-md-2">
                                                        <input class="form-control" ng-class="{ 'form-control-invalid': isEmptyConstraintID(newConstraint)}" ng-model="newConstraint.constraintId" type="text" />
                                                        <span style="color:red;" ng-show="isEmptyConstraintID(newConstraint)">ID Empty</span>
                                                    </td>
                                                    <td class="col-md-8">
                                                        <input class="form-control" ng-model="newConstraint.freeText" type="text" />
                                                    </td>
                                                    <td class="col-md-2" align="center">
                                                        <button class="btn btn-raised btn-info btn-xxs" ng-click="initConformanceStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                        <button class="btn btn-raised btn-primary btn-xxs" ng-click="addFreeTextConformanceStatement();"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>


                                        <table class="table table-striped table-bordered" ng-show="constraintType==='Plain'">
                                            <thead>
                                                <tr class="tbl-header">
                                                    <th class="col-md-2">ID</th>
                                                    <th class="col-md-2">Node</th>
                                                    <th class="col-md-2">Verb</th>
                                                    <th class="col-md-2">Constraint Pattern</th>
                                                    <th class="col-md-2">Value</th>
                                                    <th class="col-md-2"></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td class="col-md-2">
                                                        <input class="form-control" ng-class="{ 'form-control-invalid': isEmptyConstraintID(newConstraint)}" ng-model="newConstraint.constraintId" type="text" />
                                                        <span style="color:red;" ng-show="isEmptyConstraintID(newConstraint)">ID Empty</span>
                                                    </td>
                                                    <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="firstNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterFirstNodeDrop'}">
                                                        <div ng-show="draggingStatus=='ContextTreeNodeDragging'">
                                                            <span style="color:red;" class="blink_me">You can drop here!!</span>
                                                        </div>
                                                        <div ng-show="newConstraint.location_1">
                                                            <span>{{::segment.name}}-</span>
                                                            <span>
                                                <span ng-repeat="info in newConstraint.pathInfoSet_1">
                                                    <span ng-show="$index==1 && info.isInstanceNumberEditable">
                                                        {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text"/>]
                                                    </span>
                                                            <span ng-show="$index==1 && !info.isInstanceNumberEditable">
                                                        {{info.locationName}}[{{info.instanceNumber}}]
                                                    </span>
                                                            <span ng-show="$index> 1 && info.isInstanceNumberEditable"> .{{info.locationName}}[
                                    <input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateFirstPositionAndLocationPath();" type="text" />]
                                    </span>
                                                            <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                                        .{{info.locationName}}[{{info.instanceNumber}}]
                                                    </span>
                                                            <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                                        ({{info.nodeName}})
                                                    </span>
                                                            </span>
                                                            </span>
                                                        </div>
                                                        <div ng-show="!newConstraint.location_1">
                                                            <span style="color:red;">Drop the node!</span>
                                                        </div>
                                                    </td>
                                                    <td class="col-md-2">
                                                        <select class="form-control" ng-class="{'form-control-invalid': $root.isEmptyConstraintVerb(newConstraint)}" ng-model="newConstraint.verb" ng-options="constraintVerb for constraintVerb in $root.config.constraintVerbs | orderBy:'toString()'" />
                                                        <span style="color:red;" ng-show="$root.isEmptyConstraintVerb(newConstraint)">Empty verb</span>
                                                    </td>
                                                    <td class="col-md-2">
                                                        <select class="form-control" ng-class="{'form-control-invalid': $root.isEmptyConstraintPattern(newConstraint)}" ng-model="newConstraint.contraintType" ng-options="contraintType for contraintType in $root.config.constraintTypes | orderBy:'toString()'" />
                                                        <span style="color:red;" ng-show="$root.isEmptyConstraintPattern(newConstraint)">Empty contraint pattern</span>
                                                    </td>
                                                    <td class="col-md-2" ng-hide="newConstraint.contraintType == 'identical to another node' ||
                                                newConstraint.contraintType == 'equal to another node' ||
                                                newConstraint.contraintType == 'not-equal to another node' ||
                                                newConstraint.contraintType == 'greater than another node' ||
                                                newConstraint.contraintType == 'equal to or greater than another node' ||
                                                newConstraint.contraintType == 'less than another node' ||
                                                newConstraint.contraintType == 'equal to or less than another node'">
                                                        <span ng-show="newConstraint.contraintType == 'a literal value' ||
                                                    newConstraint.contraintType == 'equal to' ||
                                                    newConstraint.contraintType == 'not-equal to' ||
                                                    newConstraint.contraintType == 'greater than' ||
                                                    newConstraint.contraintType == 'equal to or greater than' ||
                                                    newConstraint.contraintType == 'less than' ||
                                                    newConstraint.contraintType == 'equal to or less than'">
                                            <input class="form-control" ng-class="{'form-control-invalid': $root.isEmptyConstraintValue(newConstraint)}" ng-model="newConstraint.value" type="text"/>
                                            <span ng-show="newConstraint.contraintType == 'a literal value'">Case Insensitive: </span>
                                                        <input ng-show="newConstraint.contraintType == 'a literal value'" type="checkbox" ng-model="newConstraint.ignoreCase" />
                                                        <span style="color:red;" ng-show="$root.isEmptyConstraintValue(newConstraint)">Empty value</span>
                                                        </span>
                                                        <span ng-show="newConstraint.contraintType == 'one of list values'">
                                            <input class="form-control" ng-model="newConstraint.value" placeholder="Comma-Separated Values(CSV)" type="text"/>
                                            <span style="color:red;" ng-show="$root.isEmptyConstraintValue(newConstraint)">Empty list value</span>
                                                        </span>
                                                        <span ng-show="newConstraint.contraintType == 'formatted value'">
                                            <select class="form-control" ng-class="{'form-control-invalid': $root.isEmptyConstraintValue(newConstraint)}"
                                                    ng-model="newConstraint.value" ng-options="predefinedFormat for predefinedFormat in $root.config.predefinedFormats | orderBy:'toString()'" />
                                            <div ng-show="newConstraint.value === 'Regular expression'">
                                                <input class="form-control" ng-class="{'form-control-invalid': $root.isEmptyConstraintValue2(newConstraint)}" ng-model="newConstraint.value2" placeholder="Regular expression" type="text"/>
                                            </div>
                                            <span style="color:red;" ng-show="isEmptyConstraintValue(newConstraint)">Empty format</span>
                                                        <span style="color:red;" ng-show="newConstraint.value === 'Regular expression' &&  $root.isEmptyConstraintValue2(newConstraint)">Empty regular expression</span>
                                                        </span>
                                                        <span ng-show="newConstraint.contraintType == 'one of codes in ValueSet'">
                                            <span>ValueSet ID: </span>
                                                        <select class="form-control form-control-short" ng-class="{'form-control-invalid': $root.isEmptyConstraintValueSet(newConstraint)}" ng-model="newConstraint.valueSetId">
                                                <option ng-repeat="table in tables|orderBy:'+bindingIdentifier'" ng-value="getUpdatedBindingIdentifier(table)">{{getTableLabel(tablesMap[table.id])}}</option>
                                            </select>
                                                        <span style="color:red;" ng-show="$root.isEmptyConstraintValueSet(newConstraint)">Empty valueset</span>
                                                        <br/>
                                                        <span>BindingStrength: </span>
                                                        <select name="bindingStrength" class="form-control form-control-short" ng-model="newConstraint.bindingStrength">
                                                <option value="R">R</option>
                                                <option value="S">S</option>
                                                <option value="U">U</option>
                                            </select>
                                                        <br/>
                                                        <span>BindingLocation: </span>
                                                        <input class="form-control form-control-short" ng-model="newConstraint.bindingLocation" type="text" />
                                                        </span>
                                                    </td>
                                                    <td class="col-md-2" data-drop="true" data-jqyoui-options ng-model="secondNodeData" jqyoui-droppable="{beforeDrop: 'beforeNodeDrop', onDrop: 'afterSecondNodeDrop'}" ng-show="newConstraint.contraintType == 'identical to another node' ||
                                                newConstraint.contraintType == 'equal to another node' ||
                                                newConstraint.contraintType == 'not-equal to another node' ||
                                                newConstraint.contraintType == 'greater than another node' ||
                                                newConstraint.contraintType == 'equal to or greater than another node' ||
                                                newConstraint.contraintType == 'less than another node' ||
                                                newConstraint.contraintType == 'equal to or less than another node'">
                                                        <div ng-show="draggingStatus == 'ContextTreeNodeDragging'">
                                                            <span style="color:red;" class="blink_me">You can drop Here!!</span>
                                                        </div>
                                                        <div ng-show="newConstraint.location_2">
                                                            <span>
                                                <span>{{::segment.name}}-</span>
                                                            <span ng-repeat="info in newConstraint.pathInfoSet_2">
                                                    <span ng-show="$index == 1 && info.isInstanceNumberEditable">
                                                        {{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                                    </span>
                                                            <span ng-show="$index == 1 && !info.isInstanceNumberEditable">
                                                        {{info.locationName}}[{{info.instanceNumber}}]
                                                    </span>
                                                            <span ng-show="$index > 1 && info.isInstanceNumberEditable">
                                                        .{{info.locationName}}[<input class="form-control-veryshort" ng-model="info.instanceNumber" ng-change="generateSecondPositionAndLocationPath();" type="text"/>]
                                                    </span>
                                                            <span ng-show="$index > 1 && !info.isInstanceNumberEditable">
                                                        .{{info.locationName}}[{{info.instanceNumber}}]
                                                    </span>
                                                            <span ng-show="$index == newConstraint.pathInfoSet_1.length - 1">
                                                        ({{info.nodeName}})
                                                    </span>
                                                            </span>
                                                            </span>
                                                        </div>
                                                        <div ng-show="!newConstraint.location_2">
                                                            <span style="color:red;">Drop the node!</span>
                                                        </div>
                                                    </td>
                                                    <td class="col-md-1" align="center">
                                                        <button class="btn btn-raised btn-info btn-xxs" ng-click="initConformanceStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                        <button class="btn btn-raised btn-primary btn-xxs" ng-click="addConformanceStatement();" ng-disabled="erorrForConfStatement(newConstraint, targetPlainId, 'segment', selectedNode)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <table class="table table-striped table-bordered" ng-show="constraintType === 'Complex'">
                                            <thead>
                                                <tr class="tbl-header">
                                                    <th class="col-md-2">ID</th>
                                                    <th class="col-md-2">Complex Type</th>
                                                    <th class="col-md-1" style="width: 4.1667%"></th>
                                                    <th ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5">Constraints</th>
                                                    <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">First Constraint</th>
                                                    <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" style="width: 4.1667%"></th>
                                                    <th ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2">Second Constraint</th>
                                                    <th class="col-md-2"></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td class="col-md-2">
                                                        <input class="form-control" ng-class="{'form-control-invalid': isEmptyComplexConstraintID(newComplexConstraintId)}" ng-model="newComplexConstraintId" type="text" />
                                                        <span style="color:red;" ng-show="isEmptyComplexConstraintID(newComplexConstraintId)">ID Empty</span>
                                                    </td>
                                                    <td class="col-md-2">
                                                        <select class="form-control" ng-class="{'form-control-invalid': isEmptyCompositeType(compositeType)}" ng-model="compositeType">
                                                    <option value="AND">AND</option>
                                                    <option value="OR">OR</option>
                                                    <option value="XOR">XOR</option>
                                                    <option value="IFTHEN">IFTHEN(IMPLY)</option>
                                                    <option value="FORALL">FORALL(True, if all assertions are true)</option>
                                                    <option value="EXIST">EXIST(True, if one of assertions is true)</option>
                                                </select>
                                                        <span style="color:red;" ng-show="isEmptyCompositeType(compositeType)">Empty composite type</span>
                                                    </td>
                                                    <td class="col-md-1" align="center" style="width: 4.1667%">
                                                        <span ng-show="compositeType == 'IFTHEN'">IF</span>
                                                        <span ng-show="compositeType == 'FORALL'">FORALL</span>
                                                        <span ng-show="compositeType == 'EXIST'">EXIST</span>
                                                    </td>
                                                    <td ng-show="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-5 drop-zone" align="center" style="vertical-align:middle" data-drop="true" ng-model='constraints' jqyoui-droppable="{multiple:true}" data-jqyoui-options>
                                                        <span style="color:red;" ng-show="constraints.length < 2">Drop two more constraints here!</span>
                                                        <li ng-repeat="c in constraints" ng-show="constraints.length > 0" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="constraints" jqyoui-draggable="{animate:true}">{{c.description}}</li>
                                                    </td>
                                                    <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="firstConstraint" jqyoui-droppable>
                                                        <span style="color:red;" ng-hide="firstConstraint">Drop the first constraint here!</span>
                                                        <span data-drag="false" data-jqyoui-options ng-model="firstConstraint" jqyoui-draggable ng-hide="!firstConstraint">{{firstConstraint.description}}</span>
                                                    </td>
                                                    <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-1" align="center" style="width: 4.1667%">
                                                        <span ng-show="compositeType == 'AND'">AND</span>
                                                        <span ng-show="compositeType == 'OR'">OR</span>
                                                        <span ng-show="compositeType == 'XOR'">XOR</span>
                                                        <span ng-show="compositeType == 'IFTHEN'">THEN</span>
                                                    </td>
                                                    <td ng-hide="compositeType == 'FORALL' || compositeType == 'EXIST'" class="col-md-2 drop-zone" align="center" style="vertical-align:middle" data-drop="true" data-jqyoui-options ng-model="secondConstraint" jqyoui-droppable>
                                                        <span style="color:red;" ng-hide="secondConstraint">Drop the second constraint here!</span>
                                                        <span data-drag="false" data-jqyoui-options ng-model="secondConstraint" jqyoui-draggable ng-hide="!secondConstraint">{{secondConstraint.description}}</span>
                                                    </td>
                                                    <td class="col-md-1" align="center">
                                                        <button class="btn btn-raised btn-info btn-xxs" ng-click="initComplexStatement()"><span><i class="fa fa-refresh fa-fw">&nbsp; </i>Reset</span></button>
                                                        <button class="btn btn-raised btn-primary btn-xxs" ng-click="addComplexConformanceStatement()" ng-disabled="erorrForComplexConfStatement(newComplexConstraintId, targetComplexId, compositeType, firstConstraint, secondConstraint, constraints)"><span><i class="fa fa-plus fa-fw">&nbsp; </i>Add</span></button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" style="margin-top: 10px">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">List of Conformance Statements</div>
                                    <div class="panel-body" style="min-height:400px; max-height:400px;overflow-y: scroll;">
                                        <table st-table="displayedCS" st-safe-src="tempComformanceStatements" class="table table-striped table-bordered">
                                            <thead>
                                                <tr class="tbl-header">
                                                    <th ng-show="constraintType === 'Complex'" class="col-md-1" style="width: 4.1667%">Draggable</th>
                                                    <th st-sort="constraintId" class="col-md-2">ID</th>
                                                    <th class="col-md-8">Description (<input type="checkbox" ng-model="viewAssertion"> view assertion)</th>
                                                    <th class="col-md-1"></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="c in displayedCS">
                                                    <td ng-show="constraintType === 'Complex'" class="col-md-1" align="center" style="width: 4.1667%">
                                                        <i ng-show="c.assertion" class="glyphicon glyphicon-move cursorMove" data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="c" jqyoui-draggable="{placeholder:'keep',animate:true}"></i>
                                                    </td>
                                                    <td class="col-md-2">
                                                        <input class="form-control" ng-model="c.constraintId" ng-change="setChanged();" type="text" />
                                                        <span style="color:red;" ng-show="isEmptyConstraintID(c)">ID Empty</span>
                                                    </td>
                                                    <td class="col-md-8">
                                                        <input class="form-control" ng-model="c.description" ng-change="setChanged()" type="text" />
                                                        <textarea ng-show="viewAssertion" class="form-control" ng-model="c.assertion" ng-change="setChanged()" />
                                                    </td>
                                                    <td class="col-md-1" align="center">
                                                        <button class="btn btn-raised btn-danger btn-xxs" ng-click="deleteConformanceStatement(c)"><span><i class="fa fa-trash fa-fw">&nbsp; </i>Del</span></button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <md-dialog-actions layout="row" ng-show="seeOrEdit==='edit'">
                    <md-button class="md-primary md-raised" md-autofocus ng-disabled="!changed" ng-click="saveclose()">
                        Save
                    </md-button>
                </md-dialog-actions>

            </md-dialog-content>
        </form>
    </md-dialog>

</script>
<script type="text/ng-template" id="segment_tree_itemInPc.html">
    <tr style="width:100%">
        <td ng-if="data.folderClass">
            <div ng-if="data.type === 'segment'">
                <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
            </div>
            <div ng-if="data.type === 'field' || data.type === 'component'">
                <div ng-if="data.child.components &&  data.child.components.length > 0">
                    <i class="fa" ng-class="data.folderClass" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="!data.child.components ||  data.child.components.length == 0">
                    <i class="fa fa-check" />
                </div>
            </div>
        </td>
        <td ng-if="!data.folderClass">
            <div ng-if="data.type === 'segment'">
                <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
            </div>
            <div ng-if="data.type === 'field' || data.type === 'component'">
                <div ng-if="data.child.components &&  data.child.components.length > 0">
                    <i class="fa fa-plus" ng-click="toggleChildren(data)"></i>
                </div>
                <div ng-if="!data.child.components ||  data.child.components.length == 0">
                    <i class="fa fa-check" />
                </div>
            </div>
        </td>
        <td>
            <div ng-if="data.type === 'segment'">
                <div>
                    <span class="label label-segment label-icon">S</span>
                    <span>&nbsp;{{::data.name}}</span>
                </div>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.fields" ng-include="'segment_tree_itemInPc.html'"></div>
                    </table>
                </div>
            </div>
            <div ng-if="data.type === 'field'">
                <div data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                    <span class="label label-field label-icon">F</span>
                    <span>&nbsp;{{::data.position}}. &nbsp;[{{::data.min}}..{{::data.max}},{{::data.usage}}] {{::data.name}}</span>
                </div>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.child.components" ng-include="'segment_tree_itemInPc.html'"></div>
                    </table>
                </div>
            </div>
            <div ng-if="data.type === 'component'">
                <div data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}" ng-model="data" jqyoui-draggable="{placeholder:'keep',animate:true, onStart:'draggingNodeFromContextTree({nodeData: data})'}">
                    <span class="label label-component label-icon">C</span>
                    <span>&nbsp;{{::data.position}}. &nbsp;[{{::data.usage}}] {{::data.name}}</span>
                </div>
                <div id="expanded-data" ng-if="data.childrenVisible">
                    <table class="table table-striped" id="nested-table">
                        <div ng-repeat="data in data.child.components" ng-include="'segment_tree_itemInPc.html'"></div>
                    </table>
                </div>
            </div>
        </td>
    </tr>
</script>
<script type="text/ng-template" id="newLogin.html">



        <div ng-class="'alert alert-'+loginMessage().type" ng-show="loginMessage().show" id="ehrloginalert">
            <button type="button" class="close" ng-click="loginMessage().show=false"></button>
            <div msg key-expr="loginMessage().text"></div>
        </div>

        <div class="form-group control-group" ng-class="{'has-success has-feedback': loginForm.username.$valid, 'igl-has-error has-feedback': !loginForm.username.$valid}">
            <md-input-container layout="row">
                <label>Username</label>
                <input type="text"  autofocus id="username" name="username" ng-model="user.username" ng-minlength="4" required>
            </md-input-container>

        </div>
        <div class="form-group control-group" ng-class="{'has-success has-feedback': loginForm.password.$valid, 'igl-has-error has-feedback': !loginForm.password.$valid}">
            <md-input-container layout="row">
                <label>Password</label>
                <input flex="100" type="password" autocomplete="off"  id="password" name="password" ng-model="user.password" ng-minlength="4" required>
            </md-input-container>

        </div>
</script>
<script type="text/ng-template" id="cannotFindOld.html">
    <md-dialog aria-label="confirmation">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Old value Missing </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>
            <md-dialog-content>
                <div class="md-dialog-content">

                    <p>Sorry we cannot find the old value </p>
                </div>
            </md-dialog-content>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="AfterClonedIgDlg.html">
    <md-dialog aria-label="confirmation">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2>IG Document cloned successfully !</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                    New IG Document <a class="point" title="Edit" ng-click="edit()">{{clonedIgDocument.metaData.title}}</a> was successfully created !
                </div>
            </md-dialog-content>

            <md-dialog-actions layout="row">
                <md-button class="btn btn-raised btn-success btn-sm" ng-click="edit()"><span><i
                        class="fa fa-pencil fa-fw">&nbsp; </i>Edit</span>
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="ConfirmValueSetDeleteCtrl.html">
    <md-dialog aria-label="abortDelete">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Delete Confirmation</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                    <p>Are you sure you want to delete Value Set <display-label of="tableToDelete"></display-label> </p>
                </div>
            </md-dialog-content>
            <md-dialog-actions layout="row">
                <md-button  class="md-primary md-raised" md-autofocus ng-click="delete()">delete
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="ValueSetReferencesCtrl.html">
    <md-dialog aria-label="abortDelete">
        <form ng-cloak>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Value Set Cross Reference found</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="ok()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                    <p>We cannot delete this value set because it is being referenced by elements below:</p>

                    <div ng-if="referencesForDelete.messageValueSetBindingfounds.length">
                        <h4> Message Binding</h4>
                        <table class="table table-striped table-bordered table-condensed">
                            <thead>
                            <tr class="tbl-header">
                                <td st-ratio="5">#</td>
                                <th st-ratio="25">Name</th>
                                <th st-ratio="30">Identifier</th>
                                <th st-ratio="30">Description</th>

                                <th st-ratio="10">Binding Location</th>
                            </tr>

                            </thead>

                            <tbody>
                            <tr ng-repeat="ref in referencesForDelete.messageValueSetBindingfounds track by $index">
                                <td st-ratio="5">{{$index + 1}}
                                </td>
                                <td st-ratio="25">
                                    <span ng-bind="ref.messageFound.name"></span>
                                </td>
                                <td st-ratio="30">
                                    <span ng-bind="ref.messageFound.identifier"></span>
                                </td>
                                <td st-ratio="30">
                                    {{::ref.messageFound.description}}
                                </td>
                                <td st-ratio="10">
                                    {{::ref.binding.location}}
                                </td>



                            </tr>
                            </tbody>

                        </table>

                    </div>
                    <div ng-if="referencesForDelete.segmentValueSetBindingfounds.length">
                        <h4> Segment Binding</h4>
                        <table class="table table-striped table-bordered table-condensed">
                            <thead>
                            <tr class="tbl-header">
                                <th>Segment</th>

                                <th>Binding Location</th>
                            </tr>

                            </thead>

                            <tbody>
                            <tr ng-repeat="ref in referencesForDelete.segmentValueSetBindingfounds track by $index">
                                <td>
                                    <display-label of="segmentsMap[ref.segmentFound.id]" desc="true"></display-label>
                                </td>
                                <td>
                                    {{::ref.binding.location}}
                                </td>



                            </tr>
                            </tbody>

                        </table>


                    </div>
                    <div ng-if="referencesForDelete.datatypeValueSetBindingfounds.length">
                        <h4> Data Type Binding</h4>
                        <table class="table table-striped table-bordered table-condensed">
                            <thead>
                            <tr class="tbl-header">
                                <th>Segment</th>

                                <th>Binding Location</th>
                            </tr>

                            </thead>

                            <tbody>
                            <tr ng-repeat="ref in referencesForDelete.datatypeValueSetBindingfounds track by $index">
                                <td>
                                    <display-label of="datatypesMap[ref.datatypeFound.id]" desc="true"></display-label>
                                </td>
                                <td>
                                    {{::ref.binding.location}}
                                </td>



                            </tr>
                            </tbody>

                        </table>

                    </div>
                    <div ng-if="referencesForDelete.coConstraintFounds.length">
                        <div ng-show="referencesForDelete.coConstraintFounds != null && referencesForDelete.coConstraintFounds.length > 0">
                            <h4> Segments Co-Constraints</h4>
                            <display-label  ng-repeat="ref in referencesForDelete.coConstraintFounds track by $index" of="segmentsMap[ref.segmentFound.id]" desc="true"></display-label>
                            <br/>


                        </div>

                    </div>
                    <div ng-if="referencesForDelete.messageConformanceStatmentFounds.length">
                        <h4> Messages Conformance Statements </h4>
                        <table class="table table-striped table-bordered table-condensed">
                            <thead>
                            <tr class="tbl-header">
                                <td st-ratio="5">#</td>
                                <th st-ratio="25">Name</th>
                                <th st-ratio="30">Identifier</th>
                                <th st-ratio="30">Description</th>

                                <th st-ratio="10">Constraint Id </th>
                            </tr>

                            </thead>

                            <tbody>
                            <tr ng-repeat="ref in referencesForDelete.messageConformanceStatmentFounds track by $index">
                                <td st-ratio="5">{{$index + 1}}
                                </td>
                                <td st-ratio="25">
                                    <span ng-bind="ref.messageFound.name"></span>
                                </td>
                                <td st-ratio="30">
                                    <span ng-bind="ref.messageFound.description"></span>
                                </td>
                                <td st-ratio="30">
                                    {{::ref.messageFound.targetPosition}}
                                </td>
                                <td st-ratio="10">
                                    {{::ref.conformanceStatement.constraintId}}
                                </td>



                            </tr>
                            </tbody>

                        </table>
                    </div>
                    <div ng-if="referencesForDelete.segmentConformanceStatmentFounds.length">
                        <h4> Segments Conformance Statements </h4>
                        <table class="table table-striped table-bordered table-condensed">
                            <thead>
                            <tr class="tbl-header">
                                <th>Segment</th>

                                <th>Constraint Id </th>
                            </tr>

                            </thead>

                            <tbody>
                            <tr ng-repeat="ref in referencesForDelete.segmentConformanceStatmentFounds track by $index">
                                <td>
                                    <display-label of="segmentsMap[ref.segmentFound.id]" desc="true"></display-label>
                                </td>
                                <td>
                                    {{::ref.conformanceStatement.constraintId}}
                                </td>


                            </tr>
                            </tbody>

                        </table>

                    </div>
                    <div ng-if="referencesForDelete.datatypeConformanceStatmentFounds.length">
                        <h4> Data Type Conformance Statements </h4>
                        <table class="table table-striped table-bordered table-condensed">
                            <thead>
                            <tr class="tbl-header">
                                <th>Datatype</th>

                                <th>Constraint Id </th>
                            </tr>

                            </thead>

                            <tbody>
                            <tr ng-repeat="ref in referencesForDelete.datatypeConformanceStatmentFounds track by $index">
                                <td>
                                    <display-label of="datatypesMap[ref.datatypeFound.id]" desc="true"></display-label>
                                </td>
                                <td>
                                    {{::ref.conformanceStatement.constraintId}}
                                </td>


                            </tr>
                            </tbody>

                        </table>

                    </div>
                    <div ng-if="referencesForDelete.messagePredicateFounds.length">
                        <h4> Message Predicate </h4>
                        <table class="table table-striped table-bordered table-condensed">
                            <thead>
                            <tr class="tbl-header">
                                <td st-ratio="5">#</td>
                                <th st-ratio="25">Name</th>
                                <th st-ratio="30">Identifier</th>
                                <th st-ratio="30">Description</th>

                                <th st-ratio="10">Constraint Id </th>
                            </tr>

                            </thead>

                            <tbody>
                            <tr ng-repeat="ref in referencesForDelete.messagePredicateFounds track by $index">
                                <td st-ratio="5">{{$index + 1}}
                                </td>
                                <td st-ratio="25">
                                    <span ng-bind="ref.messageFound.name"></span>
                                </td>
                                <td st-ratio="30">
                                    <span ng-bind="ref.messageFound.description"></span>
                                </td>
                                <td st-ratio="30">
                                    {{::ref.messageFound.targetPosition}}
                                </td>
                                <td st-ratio="10">
                                    {{::ref.conformanceStatement.constraintId}}
                                </td>



                            </tr>
                            </tbody>

                        </table>

                    </div>



                    <div ng-if="referencesForDelete.segmentPredicateFounds.length">
                        <h4> Segment Predicate </h4>
                        <table class="table table-striped table-bordered table-condensed">
                            <thead>
                            <tr class="tbl-header">
                                <th>Segment</th>

                                <th>Constraint Id </th>
                            </tr>

                            </thead>

                            <tbody>
                            <tr ng-repeat="ref in referencesForDelete.segmentPredicateFounds track by $index">
                                <td>
                                    <display-label of="segmentsMap[ref.segmentFound.id]" desc="true"></display-label>
                                </td>
                                <td>
                                    {{::ref.predicate.constraintId}}
                                </td>


                            </tr>
                            </tbody>

                        </table>

                    </div>

                    <div ng-if="referencesForDelete.datatypePredicateFounds.length">
                        <h4> Data Type  Predicate   </h4>
                        <table class="table table-striped table-bordered table-condensed">
                            <thead>
                            <tr class="tbl-header">
                                <th>Datatype</th>

                                <th>Constraint Id </th>
                            </tr>

                            </thead>

                            <tbody>
                            <tr ng-repeat="ref in referencesForDelete.datatypePredicateFounds track by $index">
                                <td>
                                    <display-label of="datatypesMap[ref.datatypeFound.id]" desc="true"></display-label>
                                </td>
                                <td>
                                    {{::ref.predicate.constraintId}}
                                </td>


                            </tr>
                            </tbody>

                        </table>

                    </div>
                    <div ng-if="referencesForDelete.profileComponentFound.length">
                        <h4> Profile Components</h4>
                        <table class="table table-striped table-bordered table-condensed">
                            <thead>
                            <tr class="tbl-header">
                                <td st-ratio="5">#</td>
                                <th st-ratio="25">Name</th>
                                <th st-ratio="40">Description</th>
                                <th st-ratio="10">Target Position</th>
                                <th st-ratio="20">Where</th>
                            </tr>

                            </thead>

                            <tbody>
                            <tr ng-repeat="ref in referencesForDelete.profileComponentFound track by $index">
                                <td st-ratio="5">{{$index + 1}}
                                </td>
                                <td st-ratio="25">
                                    <span ng-bind="ref.name"></span>
                                </td>
                                <td st-ratio="40">
                                    <span ng-bind="ref.description"></span>
                                </td>
                                <td st-ratio="10">
                                    {{::ref.targetPosition}}
                                </td>
                                <td st-ratio="20">
                                    {{::ref.where}}
                                </td>


                            </tr>
                            </tbody>

                        </table>
                    </div>



                </div>
            </md-dialog-content>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="CreateValueSet.html">
    <md-dialog aria-label="confirmation">
        <form ng-cloak id="newTableForm" name="newTableForm">
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Add New Value Set</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>
            <md-dialog-content>
                <div class="md-dialog-content" style="overflow-y: hidden">
                        <div>
                            <md-radio-group ng-model="newTable.sourceType">

                                <md-radio-button value="INTERNAL" class="md-primary">With Codes</md-radio-button>
                                <md-radio-button value="EXTERNAL" class="md-primary"> Reference External Value Set  </md-radio-button>


                            </md-radio-group>
                    <!--<label class="input-left igamt-label"> Type </label>-->
                    <!--<md-select ng-model="newTable.sourceType"  name="sourceType" id="sourceType" required >-->
                        <!--<md-option ng-repeat="opt in sourceTypes" ng-value="opt.value">{{opt.value}}</md-option>-->
                    <!--</md-select>-->
                        </div>
                    <div ng-if="newTable.sourceType">
                    <label class="input-left igamt-label">Mapping Identifier*</label>

                    <md-input-container class="md-block igamt-input-block" flex-gt-sm>
                        <input  type="text" id="tableIdentifier" name="tableIdentifier" ng-model="newTable.bindingIdentifier" required>
                        <div ng-messages="newTableForm.tableIdentifier.$error">
                            <div ng-message="required">Mapping Identifier is required.</div>
                        </div>
                        <span ng-if="duplicated(newTable)" style="color :red;">
                            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Binding Identifier Already exist
                        </span>
                    </md-input-container>

                    <label class="input-left igamt-label">Name*</label>

                    <md-input-container class="md-block igamt-input-block" flex-gt-sm>
                        <input type="text" id="name" name="name"  ng-model="newTable.name" required>
                        <div ng-messages="newTableForm.name.$error">
                            <div ng-message="required">Name is required.</div>
                        </div>

                    </md-input-container>
                    <label class="input-left igamt-label">OID</label>

                    <md-input-container class="md-block igamt-input-block" flex-gt-sm>
                        <input type="text" name="oid"  ng-model="newTable.oid">
                    </md-input-container>


                    <label class="input-left igamt-label" ng-if="newTable.sourceType=='EXTERNAL'"> External Value Set Reference URL* </label>
                    <md-input-container class="md-block igamt-input-block" flex-gt-sm ng-if="newTable.sourceType=='EXTERNAL'">
                        <input type="url" name="url" ng-required="newTable.sourceType=='EXTERNAL'" ng-model="newTable.referenceUrl" id="url">
                        <span ng-if="newTableForm.url.$invalid" style="color :red;">
                            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Please Enter a Valid URL
                        </span>
                    </md-input-container>

                    <label class="input-left igamt-label"> Author Notes </label>
                    <div>
                        <textarea froala="froalaEditorOptions" ng-model="newTable.authorNotes" name="text" id="authorNotes"></textarea>
                    </div>
                </div>
                </div>

            </md-dialog-content>
            <md-dialog-actions layout="row" ng-if="newTable.sourceType!=null">

                <md-button class="md-primary md-raised" ng-click="add()" ng-disabled="newTableForm.$invalid||duplicated(newTable)"><span><i
                        class="fa fa-sign-out fa-fw">&nbsp; </i>Add</span>
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</script>
<script type="text/ng-template" id="confirmToExternal.html">
    <md-dialog aria-label="confirmation">
        <form ng-cloak id="externalform" name="externalform">
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Confirmation</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>

            <md-dialog-content>
                <div class="md-dialog-content">
                    <label class="input-left igamt-label"> External Value Set Reference URL </label>
                    <md-input-container class="md-block igamt-input-block" flex-gt-sm>
                        <input  type="url" name="url" required ng-model="url" id="url">
                        <span ng-if="externalform.url.$invalid" style="color :red;">
                            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Please Enter a Valid URL
                        </span>
                    </md-input-container>


                    <div ng-class="'alert alert-warning'">
                        <p>Warning: Making this value set externally managed will remove all the codes. Do you want to continue?</p>
                    </div>

                </div>
            </md-dialog-content>

            <md-dialog-actions layout="row">
                <md-button md-autofocus class="md-primary md-raised" ng-disabled="externalform.$invalid" ng-click="confirm()">
                    Confirm
                </md-button>

            </md-dialog-actions>
        </form>
    </md-dialog>

</script>
<script type="text/ng-template" id="DeletePredicate.html">
    <md-dialog aria-label="table Mapping">
        <form ng-cloak role="form">
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2> Delete Confirmation </h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <i class="material-icons">clear</i>
                    </md-button>
                </div>
            </md-toolbar>
            <md-dialog-content>
                <div class="md-dialog-content">
                    <p>Are you sure you want to delete the predicate? </p>

                </div>
            </md-dialog-content>

            <md-dialog-actions layout="row">

                <md-button class="btn btn-raised btn-danger btn-sm" ng-click="delete()"><span><i
                        class="fa fa-trash-o fa-fw">&nbsp; </i>Delete</span>
                </md-button>
            </md-dialog-actions>

        </form>
    </md-dialog>
</script>


