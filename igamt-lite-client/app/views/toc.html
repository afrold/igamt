<div class="vid container">
	<div class="row" ng-repeat="node in leveledProfile track by $index"  ng-init="toggleToCContents(node.title)" ng-model="leveledProfile" style="margin: 1em 0em 0em 0em">
		<div class="col-md-1 icon"><a class="btn btn-success btn-xs" ng-if="node.children && node.children.length > 0" ng-click="toggleToCContents(node.title)">
						<span class="glyphicon"
				        ng-class="{
				          'glyphicon-chevron-right': collapsed[node.title],
				          'glyphicon-chevron-down': !collapsed[node.title]
				        }"></span></a></div>
			<div ng-switch on="node.title">
			<div ng-switch-when="Metadata">
		    <div class="col-md-1 txt" ng-include="'Metadata.html'">{{node.title}}</div>
		    </div>
			<div ng-switch-when="Messages">
		    <div context-menu context-menu-close="closedCtxMenu(node.title, $index)" data-target="messageHeadContextDiv.html" class="col-md-1 txt">{{node.title}}</div>
		    </div>
			<div ng-switch-default>
		    <div context-menu context-menu-close="closedCtxMenu(node.title, $index)" data-target="headContextDiv.html" class="col-md-1 txt">{{node.title}}</div>
		    </div>
			</div>	
			<div class="vid row" ng-repeat="nnode in node.children track by $index" ng-if="!collapsed[node.title]">
			
		    <div ng-if="node.title !== 'Messages'" class="col-md-1 subicon" ng-include="'nMessage.html'"></div>
		    <div context-menu context-menu-close="closedCtxSubMenu(nnode, $index)" ng-if="node.title === 'Messages'" class="col-md-1 subicon" data-target="messageContextDiv.html" ng-include="'Message.html'"></div>
			</div>
	</div>
</div>

<!--
	Context menu partials.
-->
<div class="dropdown position-fixed" id="headContextDiv.html" ng-controller="ContextMenuCtrl">
<ul class="dropdown-menu" role="menu">
<li>
<a class="pointer" role="menuitem" tabindex="1" ng-click="clicked('Add')">Add</a>
</li>
</ul>
</div>

<div class="dropdown position-fixed" id="messageHeadContextDiv.html" ng-controller="HL7VersionsDlgCtrl">
<ul class="dropdown-menu" role="menu">
<li>
<a class="pointer" role="menuitem" tabindex="1" ng-click="hl7Versions('ctx')">Add</a>
</li>
</ul>
</div>

<div class="dropdown position-fixed" id="messageContextDiv.html" ng-controller="ContextMenuCtrl">
<ul class="dropdown-menu" role="menu">
<li>
<a class="pointer" role="menuitem" tabindex="1" ng-click="clicked('Clone')">Clone</a>
</li>
<li>
<a class="pointer" role="menuitem" tabindex="2" ng-click="clicked('Delete')">Delete</a>
</li>
</ul>
</div>
 <script type="text/ng-template" id="Metadata.html">
<a class="btn btn-link btn-xs" ng-click="tocSelection(node.title, node)">
<span class="fa" 			        
	ng-class="{
	          'fa-circle': !collapsed[node.title]
	        }"></span><span class="txt">{{node.title}}</span></a>	
</script>
<script type="text/ng-template" id="nMessage.html">
<a class="btn btn-link btn-xs" ng-click="tocSelection(node.title, nnode)">
<span class="fa" 			        
	ng-class="{
	          'fa-circle': !collapsed[node.title]
	        }"></span><span class="txt">{{nnode.messageType}}{{nnode.label}}</span></a>	
</script>
<script type="text/ng-template" id="Message.html">
<a class="btn btn-link btn-xs" ng-click="tocSelection(node.title, nnode)">
<span class="fa" 			        
	ng-class="{
	          'fa-circle': !collapsed[node.title]
	        }"></span><span class="txt">{{nnode.messageType}}{{nnode.label}}</span></a>	
</script>
